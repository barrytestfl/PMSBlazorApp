var t={9415:function(){function t(){eviivo.component.listing.postInitRefreshDataTableSpecific("#eviivo-list-bookings")}function i(){var e=$(this),i=e.closest("tr"),t=i.data("booking-id"),i=i.data("bid");a(),e.find(".s-icon").hide(),e.append('<span class="cp-spinner_inline s-spinner-open-booking active" style="--size: 14px"></span>'),eviivo.eagle.viewBookingPopup.showViewBookingPopupByBusinessIdWithOnCloseCallback(t,u.bookingPopupInitialView,i,o)}function o(){a()}function a(){$(".s-icon").show(),$(".s-spinner-open-booking").remove()}function n(){m.removeClass("hide").addClass("active");var e=$(this).closest("tr");d([e.data("booking-id")],!e.data("is-marked"))}function s(){m.addClass("hide").removeClass("active"),window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:u.resources.ajaxFailText})}function l(){var e;$(this).hasClass("disabled")||(m.removeClass("hide").addClass("active"),null!=(e=v())&&eviivo.webcore.ajaxHelper.executeAjax({actionId:"requestPaymentBulk",url:eviivoSuiteApp+"/api/actions/request-payment-for-bookings",method:eviivo.webcore.ajaxHelper.methods.POST,data:{bookingIds:e},contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?(t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:u.resources.emailQueueSuccess})):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:u.resources.emailQueueFail})},failCallback:s}))}function e(e){e?w.removeClass("disabled"):w.addClass("disabled")}function r(){var e;$(this).hasClass("disabled")||(m.removeClass("hide").addClass("active"),null!=(e=v())&&d(e,!1))}function c(){var e;$(this).hasClass("disabled")||(m.removeClass("hide").addClass("active"),null!=(e=v())&&d(e,!0))}function d(e,i){eviivo.webcore.ajaxHelper.executeAjax({actionId:"changeBookingState",url:eviivoSuiteApp+"/api/actions/change-bookings-state",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,data:{bookingIds:e,state:i,actionType:u.currentActionType},callback:function(e){e&&t()},failCallback:s})}function v(){var i=[],e=eviivo.component.listing.getATablesSelectedData("#eviivo-list-bookings");return null!=e&&e.forEach(function(e){i.push(e.Id)}),i}var u,p,b,C,m,g,w,T,f,h,A;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.actions=window.eviivo.pms.actions||{},window.eviivo.pms.actions=(A={Cancellations:0,CardsDeclined:1,DepositsDue:2,Extras:3,OverBookings:4,SplitAvailability:5},{init:function(e){$(document.body).tip(),u=e,p=$("#from-date-input"),b=$("#to-date-input"),g=$("#date-type-select"),m=$("#loading-overlay"),$table=$("#actions-bookings-table"),C=$("#filter-actions-button"),$bookingsTableContainer=$("#bookings-table-container"),$overviewsMenuContainer=$("#overviews-menu-container"),w=$(".bulk-actions-btn"),T=$("#btnRequestPayment"),$cbSelectAll=$("#cbSelectAll"),$cbSelectRecords=$(".check"),f=$("#btnActionsShow"),h=$("#btnActionsHide"),u.currentActionType==A.DepositsDue?T.removeClass("hide"):T.addClass("hide"),e=eviivo.webcore.datetime.utils.getDaysBetween(u.fromDate,u.toDate),eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initFromToDateSelector,{dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),daySpan:e,defaultCultureCode:u.userCultureCode,yearRange:"c-4:c+5",fromCalendarId:p,toCalendarId:b,startDateFromInit:u.fromDate,endDateFromInit:u.toDate}),eviivo.pms.listingTable.filterActions.init({table:"eviivo-list-bookings",callback:function(){eviivo.component.listing.postInitRefreshDataTableSpecific("#eviivo-list-bookings"),$("#eviivo-list-bookings").on("click",".s-view-booking-button",i),$("#eviivo-list-bookings").on("click",".s-hide-show",n),$("#filter-actions-button").on("click",function(){C.addClass("btn-loading"),t()}),T.on("click",l),f.on("click",r),h.on("click",c)}}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){t()}}),window.localStorage&&(e=eviivo.eagle.basePageModelState.businessId,localStorage.removeItem("action-last-update-time-"+e),localStorage.removeItem("action-last-update-result-"+e))},isMarkedCustomRender:function(e,i,t){return"display"==i?eviivo.webcore.html.decode(t.IsMarked):e},rowCreatedCallback:function(e,i,t,o,a){var n=$(e);0<n.length&&(n.attr("data-booking-id",i.Id),n.attr("data-bid",i.BusinessId),n.attr("data-is-marked",i.IsMarkedBool)),i.IsMarkedBool&&n.addClass("inactive"),0<(n=$(e).find(".s-listing-table-view")).length&&(e=n.parent(),n=u.canArchiveBookings?i.IsMarkedBool?'<a href="javascript:;" class="s-hide-show cp-table_action cp-table_action-item cp-table_action-interchange">\n                                                            <svg class="icon-ic-clock-counter-clockwise" data-tooltip-pos="top" data-tooltip-title="'.concat(u.resources.unarchive,'" data-tooltip="title" title="').concat(u.resources.unarchive,'">\n                                                                <use xlink:href="#icon-ic-clock-counter-clockwise"></use>\n                                                            </svg>\n                                                        <a>'):'<a href="javascript:;" class="s-hide-show cp-table_action cp-table_action-item cp-table_action-interchange">\n                    <svg class="icon-ic-archive" data-tooltip-pos="top" data-tooltip-title="'.concat(u.resources.archive,'" data-tooltip="title" title="').concat(u.resources.archive,'">\n                        <use xlink:href="#icon-ic-archive"></use>\n                    </svg>\n                </a>'):"",i='<button class="s-view-booking-button cp-table_action cp-table_action-item cp-table_action-interchange" data-tooltip-pos="top" data-tooltip-title="'.concat(u.resources.view,'" data-tooltip="title" title="').concat(u.resources.view,'">\n                                    <svg class="s-icon icon-ic-eye-outline">\n                                        <use xlink: href="#icon-ic-eye-outline"></use>\n                                    </svg>\n                                </button>'),e.html("".concat(n," ").concat(i)))},ajaxDataCallback:function(){return JSON.stringify({dateType:$(":selected",g).val(),from:p.datepicker("getDate").evStandardIso8601DateExtended(),to:b.datepicker("getDate").evStandardIso8601DateExtended(),actionType:u.currentActionType})},htmlCustomRender:function(e,i,t){return eviivo.webcore.html.decode(e)},dataLoadSuccess:function(){m.addClass("hide").removeClass("active"),C.removeClass("btn-loading"),e(!1)},rowSelectionCallback:function(){0<v().length?e(!0):e(!1)},bookingDateCustomRender:function(e,i,t){return"sort"==i?t.BookingDate:e},cancellationDateCustomRender:function(e,i,t){return"sort"==i?t.CancellationDate:e},checkinDateCustomRender:function(e,i,t){return"sort"==i?t.CheckInDate:e},dueDateCustomRender:function(e,i,t){return"sort"==i?t.DueDate:e},sourceCustomRender:function(e,i,t){return"display"==i?eviivo.webcore.html.decode(t.Source):e}})},7887:function(){function a(e,i){i=$("#".concat(e," th:eq(").concat(i,")")).attr("data-key");return $.each(n,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[i]}var n,s,l,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(n=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],s=[],l="ATL",r="ATH",{init:function(e){var i,t,o,a;o=e.table,$.each(n,function(){this.tableId.toLowerCase()==o.toLowerCase()&&(a=this.tableCode)}),i=a,t=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(i),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(i),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){s=s.concat(e),(e=i)==l&&(null==(e=null==(e=s)?void 0:e.filter(function(e){return e.Key==r}))||0==e.length?s.push({PreferenceGroupType:l,Key:r,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),t()},failCallback:function(){t()}})},get:function(e,i){var t=a(e,i),o=null;return $.each(s,function(){this.Key==t&&(o=this.Value)}),null==o?"":(o=o.replaceAll("&quot;",'"'),JSON.parse(o))},post:function(e,i){var e=e.parents("table").attr("id"),t=eviivo.component.listing.filter.getColumnSearchStrings(e,i),e=a(e,i);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(t)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var n,s;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(n=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],s={},{post:function(e,i){var t,o,a=eviivo.util.getJSId($(this)[0].container);null!=a&&null!=i&&isNaN(i)&&(i={ColumnCode:(t=a,$.each(n,function(){this.tableId.toLowerCase()==t.toLowerCase()&&(o=this.Order)}),o),Order:JSON.stringify(i)})!=s&&(s=i,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:i,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})}},o={};function a(e){var i=o[e];return void 0!==i||(i=o[e]={exports:{}},t[e](i,i.exports,a)),i.exports}a.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(i,{a:i}),i},a.d=function(e,i){for(var t in i)a.o(i,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},a.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},function(){"use strict";a(9415),a(7887),a(1452)}();
//# sourceMappingURL=actions.min.js.map