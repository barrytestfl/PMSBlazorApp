var i = {
    594: function() {
        function s(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function o(e, t) {
            for (var i = 0; i < t.length; i++) {
                var o = t[i];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, function(e) {
                    e = function(e, t) {
                        if ("object" !== y(e) || null === e)
                            return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 === i)
                            return ("string" === t ? String : Number)(e);
                        i = i.call(e, t || "default");
                        if ("object" !== y(i))
                            return i;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }(e, "string");
                    return "symbol" === y(e) ? e : String(e)
                }(o.key), o)
            }
        }
        function d(e, t, i) {
            t && o(e.prototype, t),
            i && o(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            })
        }
        function c(e, t) {
            if ("function" != typeof t && null !== t)
                throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t && i(e, t)
        }
        function i(e, t) {
            return (i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function u(i) {
            var o = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var e, t = n(i), t = (e = o ? (e = n(this).constructor,
                Reflect.construct(t, arguments, e)) : t.apply(this, arguments),
                this);
                if (e && ("object" === y(e) || "function" == typeof e))
                    return e;
                if (void 0 !== e)
                    throw new TypeError("Derived constructors may only return object or undefined");
                if (void 0 !== t)
                    return t;
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
            }
        }
        function n(e) {
            return (n = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        function y(e) {
            return (y = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function b(e) {
            var t, i, o, n = eviivo.pms.diary.gridNavigation.gridSettings(), a = (null != n.startDate && (e.portStartDate = n.startDate.cloneDateOnly(),
            e.portEndDate = n.endDate.cloneDateOnly()),
            e.startDate.cloneDateOnly());
            return e.isAfter = !1,
            e.isBefore = !1,
            null != e.length && (t = e.length,
            i = e.startDate.exactDaysBetween(e.portStartDate),
            o = e.portEndDate.exactDaysBetween(e.endDate),
            i < 0 && (t = e.endDate.exactDaysBetween(e.portStartDate),
            a = e.portStartDate,
            e.isBefore = !0),
            o < 0 && (t = e.portEndDate.exactDaysBetween(e.startDate),
            t++,
            e.isAfter = !0),
            t > n.viewportColumnLimit && (t = n.viewportColumnLimit),
            e.uiLength = t),
            e.uiStartDate = a.cloneDateOnly(),
            e
        }
        var S, k = 0;
        S = setTimeout(function e() {
            var t, m, n, a, r, v, f, g, o, w, h, l, p;
            clearTimeout(S),
            "object" === ("undefined" == typeof preact ? "undefined" : y(preact)) ? (t = preact,
            m = t.h,
            n = t.render,
            a = t.Component,
            r = function() {
                c(o, a);
                var i = u(o);
                function o(e) {
                    var t;
                    return s(this, o),
                    (t = i.call(this, e)).state = e,
                    t
                }
                return d(o, [{
                    key: "gridCellObjects",
                    value: function(e, t, i, o, n, a, r, l) {
                        var s = null
                          , d = e.elementsMap[t];
                        if (null != d)
                            for (var s = [], c = 0; c < d.length; c++) {
                                var u = d[c];
                                null != (u = e.elementsFullObjects[u]) && "S" !== u.cellType && s.push(m(p, {
                                    data: u,
                                    dateKey: i,
                                    dataHolder: e,
                                    canViewBooking: n,
                                    isLegacy: a,
                                    isPanoramic: r,
                                    isZoom: l
                                }))
                            }
                        else if (!0 === o)
                            return m(v, {
                                display: !e.diaryNoteIconsDisabled,
                                readonly: e.diaryNoteIconsReadOnly
                            });
                        return null != s && 0 < s.length ? s : null
                    }
                }, {
                    key: "gridSeasonalPeriods",
                    value: function(e, t, i, o, n, a, r) {
                        var l = e.elementsMap[i];
                        if (null == l)
                            return null;
                        for (var s = null, d = null, c = 0; c < l.length; c++) {
                            var u = e.elementsFullObjects[l[c]];
                            if (o !== (u = b(u)).uiStartDate.dateKey())
                                return null;
                            "S" === u.cellType && (null == d && (d = ""),
                            !1 === n && "c" === u.type && (d += " tp-prd-" + u.type,
                            s = m("div", {
                                className: "cp-dia_cell c-cl l-".concat(u.uiLength)
                            }, m("div", {
                                className: "cp-dia_cell__inner"
                            }, m("div", {
                                class: "cp-dia_cell__top"
                            }, m("span", {
                                class: "line-clamp overflow-ellipsis"
                            }, u.text))))),
                            !0 === n) && (d += " tp-prd-" + u.type)
                        }
                        return null != d && (a += d),
                        !0 === n && null == r && (r = m(v, {
                            display: !e.diaryNoteIconsDisabled,
                            readonly: e.diaryNoteIconsReadOnly
                        })),
                        m("td", {
                            "data-dt": o,
                            id: t,
                            className: a
                        }, s, r)
                    }
                }, {
                    key: "gridBodyRow",
                    value: function() {
                        for (var e = [], t = eviivo.pms.diary.viewSwitch.isPanoramic(), i = eviivo.pms.diary.viewSwitch.isZoom(), o = this.state.isLegacyStyle, n = eviivo.pms.diary.dataLoader.dataHolder(), a = eviivo.pms.diary.gridNavigation.canViewBooking(), r = eviivo.pms.diary.notes.manager.diaryViewIsForSingleProperty(), l = 0; l < this.state.data.length; l++) {
                            var s = this.state.data[l]
                              , d = this.gridBodyColumn(s, o, t, i, n, a)
                              , c = void 0;
                            c = !0 === s.isBlank ? m("tr", {
                                className: "e-row dia-tbl_row"
                            }) : s.propertyId ? m("tr", {
                                className: "r-row dia-tbl_row",
                                "data-pid": s.propertyId,
                                "data-id": s.id
                            }, d) : r ? null : m("tr", {
                                className: "p-row dia-tbl_row",
                                "data-id": s.id
                            }, o ? d : null),
                            e.push(c)
                        }
                        return e
                    }
                }, {
                    key: "gridBodyColumn",
                    value: function(e, t, i, o, n, a) {
                        for (var r = [], l = 0; l < e.data.length; l++) {
                            var s, d = e.data[l].date, c = d.isWeekend() ? "wkd" : "";
                            d.isToday() && (c += " today"),
                            d.isPast() && (c += " past");
                            var u = (d = d.dateKey()) + (null != e.propertyId ? "-" + e.propertyId : "") + "-" + e.id
                              , v = !1
                              , p = (null != e.propertyId ? s = d + "-" + e.propertyId : (s = d + "-" + e.id,
                            v = !0),
                            this.gridCellObjects(n, u, d, v, a, t, i, o));
                            null == (v = this.gridSeasonalPeriods(n, u, s, d, v, c, p)) && (v = m("td", "" !== c ? {
                                "data-dt": d,
                                id: u,
                                className: c
                            } : {
                                "data-dt": d,
                                id: u
                            }, p)),
                            r.push(v)
                        }
                        return r
                    }
                }, {
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "componentDidMount",
                    value: function() {
                        var i = this;
                        eviivo.pms.diary.gridNavigation.gridBodyStateChangeHandler(function(e, t) {
                            i.setState({
                                data: e,
                                isLegacyStyle: t
                            })
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.gridBodyRow();
                        return m("tbody", {
                            id: "grid-body",
                            className: "dia-tbl_bd"
                        }, e)
                    }
                }]),
                o
            }(),
            v = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        if (e.display) {
                            var t, i = e.readonly ? "ev-readonly" : "";
                            if (null != e.data)
                                return t = e.data.dataId,
                                m("span", {
                                    className: "s-i-note note-button s-note icon-font icon-font-note",
                                    "ev-readonly": e.readonly && i,
                                    id: t
                                });
                            if (!e.readonly)
                                return m("span", {
                                    className: "s-i-note note-button icon-font icon-font-note_edit",
                                    "ev-readonly": e.readonly && i
                                })
                        }
                        return null
                    }
                }]),
                i
            }(),
            f = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        return (e = e.data).restrictedElement ? m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("span", {
                            className: "cp-dia_cell-stripe-inner"
                        }))) : "c-ob" === e.cellType || "c-sp" === e.cellType || "c-tt" === e.cellType || "c-pr" === e.cellType ? m("div", {
                            id: e.elementId,
                            className: e.className,
                            "data-tip": e.title
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            className: "cp-dia_cell-stripe-inner"
                        }), m("div", {
                            className: "cp-dia_cell__top"
                        }, m("span", {
                            className: "cp-dia_cell__name overflow-ellipsis"
                        }, e.guestName)))) : m("div", {
                            id: e.elementId,
                            className: e.className,
                            "data-tip": e.title
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            className: "cp-dia_cell__top"
                        }, m("span", {
                            className: "cp-dia_cell__name overflow-ellipsis"
                        }, e.guestName))))
                    }
                }]),
                i
            }(),
            g = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        return e = e.data,
                        m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            className: "cp-dia_cell-stripe-inner"
                        }), m("div", {
                            className: "cp-dia_cell__top"
                        }, m("span", {
                            className: "cp-dia_cell__name overflow-ellipsis"
                        }, e.text), "c-ob" === e.type && e.iconCssSource ? e.iconCssSource : null)))
                    }
                }]),
                i
            }(),
            o = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "renderBottomLeftIconsStandard",
                    value: function(e) {
                        var t = e.hasNotes
                          , i = e.hasExtras
                          , o = e.arrivalTime
                          , n = e.isGroup
                          , a = e.isMultiRoom
                          , e = e.groupReference;
                        return m("div", {
                            className: "cp-dia_cell__row"
                        }, t ? m("div", {
                            className: "s-booking-note icon-ic-note-check"
                        }) : null, o ? m("div", {
                            "data-tip": o
                        }, m("div", {
                            className: "icon-ic-clock"
                        })) : null, n || a ? m("div", {
                            "data-tip": null != e ? e : ""
                        }, m("div", {
                            className: "icon-ic-users"
                        })) : null, i ? m("div", {
                            className: "icon-ic-beer-bottle"
                        }) : null)
                    }
                }, {
                    key: "renderBottomLeftIconsZoom",
                    value: function(e) {
                        var t = e.hasNotes
                          , e = e.hasExtras;
                        return m("div", {
                            className: "cp-dia_cell__row"
                        }, t ? m("div", {
                            className: "s-booking-note icon-ic-note-check"
                        }) : null, e ? m("div", {
                            className: "icon-ic-beer-bottle"
                        }) : null)
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        var t = e.data;
                        if (null == t.uiLength)
                            return null;
                        var i = "element-" + t.dataId
                          , o = t.text
                          , n = t.textPanoramic
                          , a = t.type ? "c-".concat(t.type) : ""
                          , r = t.uiLength
                          , l = null != t.source && "" !== t.source ? " src-" + t.source : ""
                          , s = t.startDate.isPast()
                          , d = !0 === t.isBefore ? " is-before" : ""
                          , c = !0 === t.isAfter ? " is-after" : ""
                          , s = s ? " is-past" : ""
                          , u = !0 === t.isOta ? " is-ota" : ""
                          , v = t.sourceIconCss ? m("span", {
                            className: t.sourceIconCss
                        }) : m("div", {
                            className: "icon-ic-phone"
                        })
                          , p = "cp-dia_cell ".concat(a, " ").concat(l, " ").concat(s, " ").concat(d, " ").concat(c, " ").concat(u, " l-").concat(r);
                        if (e.isPanoramic)
                            return l = {
                                className: p,
                                elementId: i,
                                title: n,
                                restrictedElement: t.diaryEntryHideAllData,
                                guestName: t.text,
                                cellLength: r,
                                cellType: a
                            },
                            m(f, {
                                data: l
                            });
                        var y = null;
                        switch (t.type) {
                        case "ob":
                            y = {
                                className: p,
                                elementId: i,
                                text: o,
                                cellLength: r,
                                iconCssSource: v
                            };
                            break;
                        case "tt":
                            y = {
                                className: p,
                                elementId: i,
                                text: o,
                                cellLength: r,
                                iconCssSource: null
                            };
                            break;
                        case "sp":
                            y = {
                                className: p,
                                elementId: i,
                                text: eviivo.eagle.translations.resources.SplitAvailability,
                                cellLength: r,
                                iconCssSource: null
                            }
                        }
                        return null !== y ? m(g, {
                            data: y
                        }) : (s = {
                            elementId: i,
                            className: p,
                            text: o,
                            bottomLeftIcons: e.isZoom ? this.renderBottomLeftIconsZoom(t) : this.renderBottomLeftIconsStandard(t),
                            bottomRightIcons: !0 === e.canViewBooking ? !0 === t.hasCardWarning ? m("div", {
                                className: "currency"
                            }, m("div", {
                                class: "icon-ic-warning"
                            }), m("span", {
                                "data-tip": t.currencyTooltip,
                                "data-tip-top-align-right": !0
                            }, t.currencySymbol)) : m("div", {
                                className: "currency",
                                "data-tip": t.currencyTooltip,
                                "data-tip-top-align-right": !0
                            }, t.currencySymbol) : null,
                            diaryEntryHideAllData: e.data.diaryEntryHideAllData,
                            cellLength: r,
                            iconCssSource: v,
                            isBefore: t.isBefore,
                            isLegacy: e.isLegacy
                        },
                        e.isZoom ? (s.arrivalTime = t.arrivalTime ? m("div", {
                            className: "cp-dia_cell__row"
                        }, m("div", {
                            className: "icon-ic-clock"
                        }), m("span", null, t.arrivalTime)) : null,
                        s.groupBooking = t.isGroup || t.isMultiRoom ? m("div", {
                            className: "cp-dia_cell__row"
                        }, m("div", {
                            className: "icon-ic-users"
                        }), m("div", {
                            className: "overflow-ellipsis"
                        }, t.groupReference)) : null,
                        d = null != t.orderDueValue ? m("div", {
                            className: "cp-dia_cell__row amount-due overflow-ellipsis"
                        }, t.orderDueValue) : null,
                        !0 === t.isMultiRoom && null != t.multiRoomNameToSee && "" !== t.multiRoomNameToSee && (c = eviivo.eagle.translations.resources.see + " " + t.multiRoomNameToSee,
                        d = m("div", {
                            className: "cp-dia_cell-row overflow-ellipsis"
                        }, c)),
                        s.line2Text = d,
                        t.arrivalTime && (t.isGroup || t.isMultiRoom) && null !== t.line2Text || (s.adults = m("div", {
                            className: "adult"
                        }, m("div", {
                            className: "icon-ic-user"
                        }), m("span", null, t.numberOfAdults)),
                        s.children = null != t.numberOfChildren && 0 < t.numberOfChildren ? m("div", {
                            className: "child"
                        }, m("div", {
                            className: "icon-ic-user"
                        }), m("span", null, t.numberOfChildren)) : null),
                        m(h, {
                            data: s
                        })) : m(w, {
                            data: s
                        }))
                    }
                }]),
                i
            }(),
            w = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "render",
                    value: function(e) {
                        return (e = e.data).diaryEntryHideAllData ? m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        })) : m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            class: "cp-dia_cell__top"
                        }, m("div", {
                            className: "cp-dia_cell__name"
                        }, e.text), e.iconCssSource), m("div", {
                            className: "cp-dia_cell__bottom"
                        }, e.isBefore ? m("div", {
                            class: "icon-ic-arrow-left"
                        }) : null, e.bottomLeftIcons, m("div", {
                            className: "ml-auto"
                        }, e.bottomRightIcons))))
                    }
                }]),
                i
            }(),
            h = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "render",
                    value: function(e) {
                        return (e = e.data).diaryEntryHideAllData ? m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        })) : m("div", {
                            id: e.elementId,
                            className: e.className
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            class: "cp-dia_cell__top"
                        }, m("div", {
                            className: "cp-dia_cell__name"
                        }, e.text), e.iconCssSource), e.line2Text, e.arrivalTime, m("div", {
                            className: "cp-dia_cell__row occupancy"
                        }, e.adults, e.children), m("div", {
                            className: "cp-dia_cell__row"
                        }, e.groupBooking), m("div", {
                            className: "cp-dia_cell__bottom"
                        }, e.isBefore ? m("div", {
                            class: "icon-ic-arrow-left"
                        }) : null, e.bottomLeftIcons, m("div", {
                            className: "ml-auto"
                        }, e.bottomRightIcons))))
                    }
                }]),
                i
            }(),
            l = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        var t, i, o;
                        return null != (e = e.data).uiLength ? (t = e.text,
                        i = !0 === e.isBefore ? " is-before" : "",
                        o = !0 === e.isAfter ? " is-after" : "",
                        i = "c-lk cp-dia_cell ".concat(i, " ").concat(o, " l-").concat(e.uiLength),
                        o = "element-" + e.dataId,
                        m("div", {
                            id: o,
                            className: i,
                            "data-rcdt": e.ReceivedDate,
                            "data-tip": t
                        }, m("div", {
                            className: "cp-dia_cell__inner"
                        }, m("div", {
                            className: "cp-dia_cell__top"
                        }, m("span", {
                            className: "line-clamp"
                        }, t))))) : null
                    }
                }]),
                i
            }(),
            p = function() {
                c(i, a);
                var t = u(i);
                function i(e) {
                    return s(this, i),
                    t.call(this, e)
                }
                return d(i, [{
                    key: "shouldComponentUpdate",
                    value: function() {
                        return !0
                    }
                }, {
                    key: "render",
                    value: function(e) {
                        if (null != e) {
                            var t = e.data
                              , t = b(t);
                            if (e.dateKey !== e.data.uiStartDate.dateKey())
                                return null;
                            if ("B" === t.cellType)
                                return t.diaryEntryHideAllData = e.dataHolder.diaryEntryHideAllData,
                                m(o, {
                                    data: t,
                                    canViewBooking: e.canViewBooking,
                                    isLegacy: e.isLegacy,
                                    isPanoramic: e.isPanoramic,
                                    isZoom: e.isZoom
                                });
                            if ("C" === t.cellType)
                                return m(l, {
                                    data: t,
                                    isPanoramic: e.isPanoramic,
                                    isZoom: e.isZoom
                                });
                            if ("N" === t.cellType)
                                return m(v, {
                                    data: t,
                                    display: !e.dataHolder.diaryNoteIconsDisabled,
                                    readonly: e.dataHolder.diaryNoteIconsReadOnly
                                })
                        }
                        return null
                    }
                }]),
                i
            }(),
            window.eviivo = window.eviivo || {},
            window.eviivo.pms = window.eviivo.pms || {},
            window.eviivo.pms.diary = window.eviivo.pms.diary || {},
            window.eviivo.pms.diary.render = window.eviivo.pms.diary.render || {},
            window.eviivo.pms.diary.render.renderGridBody = function(e, t, i, o) {
                n(m(r, {
                    data: e,
                    isLegacyStyle: o
                }), t, i)
            }
            ) : k < 50 && (k++,
            S = setTimeout(e, 200))
        }, 200)
    },
    7518: function() {
        function a(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function o(e, t) {
            for (var i = 0; i < t.length; i++) {
                var o = t[i];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, function(e) {
                    e = function(e, t) {
                        if ("object" !== p(e) || null === e)
                            return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 === i)
                            return ("string" === t ? String : Number)(e);
                        i = i.call(e, t || "default");
                        if ("object" !== p(i))
                            return i;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }(e, "string");
                    return "symbol" === p(e) ? e : String(e)
                }(o.key), o)
            }
        }
        function r(e, t, i) {
            t && o(e.prototype, t),
            i && o(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            })
        }
        function u(e, t) {
            if ("function" != typeof t && null !== t)
                throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t && i(e, t)
        }
        function i(e, t) {
            return (i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function v(i) {
            var o = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var e, t = n(i), t = (e = o ? (e = n(this).constructor,
                Reflect.construct(t, arguments, e)) : t.apply(this, arguments),
                this);
                if (e && ("object" === p(e) || "function" == typeof e))
                    return e;
                if (void 0 !== e)
                    throw new TypeError("Derived constructors may only return object or undefined");
                if (void 0 !== t)
                    return t;
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
            }
        }
        function n(e) {
            return (n = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        function p(e) {
            return (p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        var y, m = 0;
        y = setTimeout(function e() {
            var t, s, l, n, d, c;
            clearTimeout(y),
            "object" === ("undefined" == typeof preact ? "undefined" : p(preact)) ? (t = preact,
            s = t.h,
            l = t.render,
            n = t.Component,
            d = function() {
                u(i, n);
                var t = v(i);
                function i(e) {
                    return a(this, i),
                    t.call(this, e)
                }
                return r(i, [{
                    key: "render",
                    value: function() {
                        var e = this.props
                          , t = null
                          , i = null
                          , o = (i = null == e.labels ? (t = (o = e.date.toDateString()).substring(0, 3),
                        o.substring(4, 10)) : (o = e.date.getDate(),
                        t = e.labels.days[e.date.getDay()],
                        "undefined" != typeof eviivo && void 0 !== eviivo.eagle && void 0 !== eviivo.eagle.basePageModelState && "en-us" === eviivo.eagle.basePageModelState.userCultureCode.toLowerCase() ? e.labels.months[e.date.getMonth()] + " " + o : (o < 10 ? "0" + o : o) + " " + e.labels.months[e.date.getMonth()]),
                        e.weekendStartDate)
                          , n = "dia-tbl_hdg";
                        return ("fri" === o && [5, 6].includes(e.date.getDay()) || "fri" !== o && e.date.isWeekend()) && (n += " wkd"),
                        e.date.isToday() && (n += " today"),
                        e.date.isPast() && (n += " past"),
                        e.hasNote && (n += " has-note"),
                        s("th", {
                            "data-dt": e.date.dateKey(),
                            className: n
                        }, s("div", {
                            className: "dia-tbl_hdg__inner"
                        }, s("div", {
                            className: "dia-tbl_date"
                        }, s("span", {
                            className: "dia-tbl_day__label"
                        }, t), s("span", {
                            className: "dia-tbl_date__label"
                        }, i)), e.userCanViewNotes && s("div", {
                            className: "s-i-note".concat(e.hasNote ? " s-note " : "", " dia-tbl_note")
                        }, e.hasNote ? s("div", {
                            className: "s-booking-note icon-ic-note-check"
                        }) : s("div", {
                            className: "icon-ic-note-blank"
                        }))))
                    }
                }]),
                i
            }(),
            c = function() {
                u(o, n);
                var i = v(o);
                function o(e) {
                    var t;
                    return a(this, o),
                    (t = i.call(this, e)).state = e,
                    t
                }
                return r(o, [{
                    key: "componentDidMount",
                    value: function() {
                        var i = this;
                        eviivo.pms.diary.gridNavigation.gridHeaderStateChangeHandler(function(e, t) {
                            i.setState({
                                data: e,
                                weekendStartDate: t
                            })
                        })
                    }
                }, {
                    key: "render",
                    value: function() {
                        var o = this
                          , n = null == (e = eviivo.pms.diary.dataLoader.dataHolder()) || null == (e = e.datesWithNoteData) ? void 0 : e.map(function(e) {
                            return {
                                dt: new eviivo.webcore.datetime.parse.parseDate(e).dateOnly()
                            }
                        })
                          , a = this.state.userCanViewNotes
                          , r = this.state.isLegacyViewEnabled
                          , l = this.state.weekendStartDate
                          , e = this.state.data.map(function(e) {
                            var t, i = r || (t = e.date,
                            (null == n ? void 0 : n.length) < 1) ? null : n.some(function(e) {
                                return e.dt.getTime() === t.getTime()
                            });
                            return s(d, {
                                date: e.date,
                                labels: o.state.labels,
                                hasNote: i,
                                userCanViewNotes: a,
                                weekendStartDate: l
                            })
                        });
                        return s("tr", {
                            className: "dia-tbl_row"
                        }, e)
                    }
                }]),
                o
            }(),
            window.eviivo = window.eviivo || {},
            window.eviivo.pms = window.eviivo.pms || {},
            window.eviivo.pms.diary = window.eviivo.pms.diary || {},
            window.eviivo.pms.diary.render = window.eviivo.pms.diary.render || {},
            window.eviivo.pms.diary.render.renderGridHeader = function(e, t, i, o, n, a, r) {
                l(s(c, {
                    data: e,
                    labels: t,
                    userCanViewNotes: n,
                    isLegacyViewEnabled: a,
                    weekendStartDate: r
                }), i, o)
            }
            ) : m < 50 && (m++,
            y = setTimeout(e, 200))
        }, 200)
    },
    8046: function() {
        function d(e, t) {
            if (!(e instanceof t))
                throw new TypeError("Cannot call a class as a function")
        }
        function o(e, t) {
            for (var i = 0; i < t.length; i++) {
                var o = t[i];
                o.enumerable = o.enumerable || !1,
                o.configurable = !0,
                "value"in o && (o.writable = !0),
                Object.defineProperty(e, function(e) {
                    e = function(e, t) {
                        if ("object" !== p(e) || null === e)
                            return e;
                        var i = e[Symbol.toPrimitive];
                        if (void 0 === i)
                            return ("string" === t ? String : Number)(e);
                        i = i.call(e, t || "default");
                        if ("object" !== p(i))
                            return i;
                        throw new TypeError("@@toPrimitive must return a primitive value.")
                    }(e, "string");
                    return "symbol" === p(e) ? e : String(e)
                }(o.key), o)
            }
        }
        function c(e, t, i) {
            t && o(e.prototype, t),
            i && o(e, i),
            Object.defineProperty(e, "prototype", {
                writable: !1
            })
        }
        function u(e, t) {
            if ("function" != typeof t && null !== t)
                throw new TypeError("Super expression must either be null or a function");
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    writable: !0,
                    configurable: !0
                }
            }),
            Object.defineProperty(e, "prototype", {
                writable: !1
            }),
            t && i(e, t)
        }
        function i(e, t) {
            return (i = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(e, t) {
                return e.__proto__ = t,
                e
            }
            )(e, t)
        }
        function v(i) {
            var o = function() {
                if ("undefined" == typeof Reflect || !Reflect.construct)
                    return !1;
                if (Reflect.construct.sham)
                    return !1;
                if ("function" == typeof Proxy)
                    return !0;
                try {
                    return Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {})),
                    !0
                } catch (e) {
                    return !1
                }
            }();
            return function() {
                var e, t = n(i), t = (e = o ? (e = n(this).constructor,
                Reflect.construct(t, arguments, e)) : t.apply(this, arguments),
                this);
                if (e && ("object" === p(e) || "function" == typeof e))
                    return e;
                if (void 0 !== e)
                    throw new TypeError("Derived constructors may only return object or undefined");
                if (void 0 !== t)
                    return t;
                throw new ReferenceError("this hasn't been initialised - super() hasn't been called")
            }
        }
        function n(e) {
            return (n = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function(e) {
                return e.__proto__ || Object.getPrototypeOf(e)
            }
            )(e)
        }
        function p(e) {
            return (p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        var y, m = 0;
        y = setTimeout(function e() {
            var t, n, a, r, l, s;
            clearTimeout(y),
            "object" === ("undefined" == typeof preact ? "undefined" : p(preact)) ? (t = preact,
            n = t.h,
            a = t.render,
            r = t.Component,
            l = function() {
                u(i, r);
                var t = v(i);
                function i(e) {
                    return d(this, i),
                    t.call(this, e)
                }
                return c(i, [{
                    key: "legacyRender",
                    value: function() {
                        var e, t = this.props.data, i = n("svg", {
                            class: "icon-ic-"
                        }, n("use", {
                            href: "#icon-ic-caret-down"
                        })), o = n("svg", {
                            class: "icon-ic-"
                        }, n("use", {
                            href: "#icon-ic-caret-up"
                        }));
                        return !0 === t.isBlank ? n("li", {
                            className: "e-row"
                        }) : (null == t.propertyId ? !0 === t.isCollapsed ? (e = n("li", {
                            className: "p-row p-row_clpsd p-row-toggle",
                            "data-id": t.id
                        }, n("span", null, t.line1)),
                        "" !== t.line1 && (e = n("li", {
                            className: "p-row p-row_clpsd p-row-toggle",
                            "data-id": t.id
                        }, n("span", null, t.line1), o))) : (e = n("li", {
                            className: "p-row p-row-toggle",
                            "data-id": t.id
                        }, n("span", null, t.line1)),
                        "" !== t.line1 && (e = n("li", {
                            className: "p-row p-row-toggle",
                            "data-id": t.id
                        }, n("span", null, t.line1), i))) : (o = !0 === this.props.isPanoramic ? null : n("div", {
                            className: "room-type-name overflow-ellipsis",
                            "data-tip": t.line2
                        }, t.line2),
                        e = n("li", {
                            className: "r-row",
                            "data-pid": t.propertyId,
                            "data-id": t.id
                        }, n("div", {
                            class: "room"
                        }, n("div", {
                            className: "room-name overflow-ellipsis",
                            "data-tip": t.line1
                        }, t.line1), o))),
                        e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var e = this.props
                          , t = e.data
                          , i = e.isPanoramic;
                        return e.isLegacyStyle ? this.legacyRender() : t.isBlank ? n("li", {
                            className: "e-row"
                        }) : null == t.propertyId ? t.line1 ? n("li", {
                            className: "p-row",
                            "data-tip": t.line1
                        }, n("span", {
                            className: "overflow-ellipsis"
                        }, t.line1)) : null : n("li", {
                            className: "r-row",
                            "data-pid": t.propertyId,
                            "data-id": t.id,
                            "data-tip": "".concat(t.line1, " - ").concat(t.line2)
                        }, n("div", {
                            class: "room"
                        }, n("div", {
                            class: "room-name overflow-ellipsis"
                        }, t.line1), i ? null : n("div", {
                            class: "room-type-name overflow-ellipsis"
                        }, t.line2)))
                    }
                }]),
                i
            }(),
            s = function() {
                u(o, r);
                var i = v(o);
                function o(e) {
                    var t;
                    return d(this, o),
                    (t = i.call(this, e)).state = e,
                    t
                }
                return c(o, [{
                    key: "componentDidMount",
                    value: function() {
                        var i = this;
                        eviivo.pms.diary.gridNavigation.leftSidePanelStateChangeHandler(function(e, t) {
                            i.setState({
                                data: e,
                                isLegacyStyle: t
                            })
                        })
                    }
                }, {
                    key: "legacyRender",
                    value: function() {
                        var t = eviivo.pms.diary.viewSwitch.isPanoramic()
                          , e = this.state.data.map(function(e) {
                            return n(l, {
                                data: e,
                                isPanoramic: t,
                                isLegacyStyle: !0
                            })
                        });
                        return n("ul", {
                            id: "room-list",
                            className: "cp-diary-sidebar-list"
                        }, e)
                    }
                }, {
                    key: "render",
                    value: function() {
                        var t, e;
                        return this.state.isLegacyStyle ? this.legacyRender() : (t = eviivo.pms.diary.viewSwitch.isPanoramic(),
                        e = this.state.data.map(function(e) {
                            return n(l, {
                                data: e,
                                isPanoramic: t,
                                isLegacyStyle: !1
                            })
                        }),
                        n("ul", {
                            id: "room-list",
                            className: "cp-diary-sidebar-list"
                        }, e))
                    }
                }]),
                o
            }(),
            window.eviivo = window.eviivo || {},
            window.eviivo.pms = window.eviivo.pms || {},
            window.eviivo.pms.diary = window.eviivo.pms.diary || {},
            window.eviivo.pms.diary.render = window.eviivo.pms.diary.render || {},
            window.eviivo.pms.diary.render.renderLeftSidePanel = function(e, t, i, o) {
                a(n(s, {
                    data: e,
                    isLegacyStyle: o
                }), t, i)
            }
            ) : m < 50 && (m++,
            y = setTimeout(e, 200))
        }, 200)
    },
    8211: function() {
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        eviivo.pms.diary = eviivo.pms.diary || {},
        eviivo.pms.diary.calendarNavigator = eviivo.pms.diary.calendarNavigator || {},
        window.eviivo.pms.diary.calendarNavigator = function() {
            var i, t, o, n = this, a = {}, r = {
                backButton: "#diary-back-button",
                backBackButton: "#diary-back-back-button",
                calendarButton: "#diary-datepicker",
                goTodayButton: "#diary-go-today-button",
                forwardButton: "#diary-forward-button",
                forwardForwardButton: "#diary-forward-forward-button",
                todayButton: "#ui-datepicker-div .ui-datepicker-current",
                revertToTodayButton: "#diary-go-today-button",
                datePickerMask: "#diary-datepicker-mask"
            }, l = {
                body: null,
                backButton: null,
                backBackButton: null,
                calendarButton: null,
                goTodayButton: null,
                forwardButton: null,
                forwardForwardButton: null,
                todayButton: null,
                revertToTodayButton: null,
                datePickerMask: null
            }, s = null, d = "eviivo.pms.diary.calendarNavigator";
            function c() {
                return function(e) {
                    o.call(n, e),
                    n._selectDate(e)
                }
            }
            return {
                init: function(e) {
                    if ("function" != typeof jQuery)
                        throw d + ": module depends on jQuery";
                    i = (t = jQuery).extend(a, e),
                    s = {
                        click: eviivo.util.namespacedEvent("click", d),
                        focus: eviivo.util.namespacedEvent("focus", d)
                    },
                    l.backBackButton = t(r.backBackButton),
                    l.backButton = t(r.backButton),
                    l.calendarButton = t(r.calendarButton),
                    l.goTodayButton = t(r.goTodayButton),
                    l.forwardButton = t(r.forwardButton),
                    l.forwardForwardButton = t(r.forwardForwardButton),
                    l.todayButton = t(r.todayButton),
                    l.datePickerMask = t(r.datePickerMask),
                    l.revertToTodayButton = t(r.revertToTodayButton),
                    null != i.actions && (l.backBackButton.on(s.click, i.actions.backBack),
                    l.backButton.on(s.click, i.actions.back),
                    $(document).off("click", ".ui-datepicker-buttonpane button[data-handler='today']").on("click", ".ui-datepicker-buttonpane button[data-handler='today']", i.actions.goToday),
                    l.revertToTodayButton.on(s.click, i.actions.goToday),
                    l.forwardButton.on(s.click, i.actions.forward),
                    l.forwardForwardButton.on(s.click, i.actions.forwardForward),
                    l.datePickerMask.on(s.click, function() {
                        l.calendarButton.datepicker("show")
                    })),
                    e = (new Date).evStandardFirstDayCalendarOffset(eviivo.eagle.basePageModelState.userCultureCode),
                    l.calendarButton = eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar, {
                        defaultCultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                        calendar: l.calendarButton,
                        yearRange: "-4:+5",
                        dateFormat: eviivo.eagle.dateFormat.getDateFormat("SHORT_YEAR"),
                        changeMonth: !0,
                        changeYear: !0,
                        showButtonPanel: !0,
                        altFormat: eviivo.eagle.dateFormat.getDateFormat("NO_YEAR"),
                        altField: r.datePickerMask,
                        firstDay: e,
                        updtStDtQueryOnChange: !0,
                        updtStDtPersistentElementsOnChange: !0,
                        onSelect: function(e, t) {
                            var t = new Date(t.selectedYear,t.selectedMonth,parseInt(t.selectedDay),0,0,0);
                            t = t,
                            "function" == typeof i.actions.dateSelection && i.actions.dateSelection(t)
                        }
                    }),
                    o = t.datepicker._gotoToday,
                    eviivo.webcore.functions.compare(c, o) && (t.datepicker._gotoToday = c)
                },
                setDate: function(e) {
                    null != l.calendarButton && l.calendarButton.datepicker("setDate", e)
                }
            }
        }()
    },
    4149: function() {
        function s(e) {
            return function(e) {
                if (Array.isArray(e))
                    return o(e)
            }(e) || function(e) {
                if ("undefined" != typeof Symbol && null != e[Symbol.iterator] || null != e["@@iterator"])
                    return Array.from(e)
            }(e) || function(e, t) {
                var i;
                if (e)
                    return "string" == typeof e ? o(e, t) : "Map" === (i = "Object" === (i = Object.prototype.toString.call(e).slice(8, -1)) && e.constructor ? e.constructor.name : i) || "Set" === i ? Array.from(e) : "Arguments" === i || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i) ? o(e, t) : void 0
            }(e) || function() {
                throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
            }()
        }
        function o(e, t) {
            (null == t || t > e.length) && (t = e.length);
            for (var i = 0, o = new Array(t); i < t; i++)
                o[i] = e[i];
            return o
        }
        function t(e) {
            !1 === j && (j = !0,
            requestAnimationFrame(i))
        }
        function i() {
            R = setTimeout(e, 400)
        }
        function e() {
            clearTimeout(R),
            B = !0,
            v(),
            eviivo.pms.diary.gridNavigation.reRenderDiary(!0)
        }
        function n() {
            clearTimeout(M),
            B = !(M = null),
            v(),
            r()
        }
        function a() {
            clearTimeout(M),
            M = null,
            f()
        }
        function r() {
            eviivo.webcore.ajaxHelper.executeAjax({
                actionId: T + ".getPropertiesRoomList",
                url: eviivoSuiteApp + "/diarydata/propertiesAndRooms",
                data: {
                    CultureCode: eviivo.eagle.basePageModelState.userCultureCode
                },
                method: eviivo.webcore.ajaxHelper.methods.POST,
                contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                callback: function(e) {
                    eviivo.pms.diary.leftSidePanel.collapse.init({
                        onCollapse: L
                    }),
                    null == e || e.hasOwnProperty("msg") || (P.propertiesRoomsFullObjects = e.data),
                    P.propertiesRoomsMap = [],
                    S = {},
                    b.each(P.propertiesRoomsFullObjects, d);
                    var o, i = !1, e = (b.each(S, function(e, t) {
                        0 === t && (i = !0)
                    }),
                    0 !== P.propertiesRoomsMap.length && !0 !== i || eviivo.pms.walkme.showNoRoomHelperMessage(),
                    P.propertiesRoomsMap.push("e_0"),
                    P.propertiesRoomsMap.push("e_1"),
                    P.propertiesRoomsMap.push("e_2"),
                    P.propertiesRoomsMap.push("e_3"),
                    P.propertiesRoomsMap.push("e_4"),
                    P.propertiesRoomsMap.push("e_5"),
                    P.propertiesRoomsMap.push("e_6"),
                    P.propertiesRoomsMap.push("e_7"),
                    P.propertiesRoomsMap.push("e_8"),
                    P.propertiesRoomsFullObjects.e_0 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_1 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_2 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_3 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_4 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_5 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_6 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_7 = {
                        id: -1,
                        isBlank: !0
                    },
                    P.propertiesRoomsFullObjects.e_8 = {
                        id: -1,
                        isBlank: !0
                    },
                    localStorage.getItem(k));
                    null != e && "" !== e && (o = e.split("|"),
                    b.each(o, function(e, t) {
                        null != t && "" !== t && (o[e] = parseInt(t))
                    }),
                    b.each(P.propertiesRoomsFullObjects, function(e, t) {
                        var i = t.pid;
                        null == t.pid && (i = t.id),
                        0 <= o.indexOf(i) && (t.isCollapsed = !0)
                    })),
                    l(),
                    eviivo.pms.diary.gridNavigation.legacyViewEnabled() || g()
                }
            })
        }
        function f(e, o) {
            if (!0 === B && (B = !1,
            e = null),
            "function" != typeof (e = "function" != typeof e ? c : e))
                throw "prepareDataHandler is not a function";
            e = e();
            0 !== e.BusinessIds.length && 0 !== e.RoomTypeIds.length && eviivo.webcore.ajaxHelper.executeAjax({
                actionId: T + ".getElements." + e.actionId,
                url: eviivoSuiteApp + "/diarydata/elements",
                data: e,
                method: eviivo.webcore.ajaxHelper.methods.POST,
                contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                callback: function(e) {
                    var t, i;
                    t = o,
                    i = (e = e).data,
                    e = e.request,
                    !1 !== i.hasChanges && (u(e) ? f() : (b.each(i, F),
                    B && h.enableDebugLogging && console.log("Bufer has been cleared"),
                    eviivo.pms.diary.gridNavigation.reRenderGridBody(),
                    null != t ? (t.isPending = !1,
                    t.lastUpdatedTimestamp = eviivo.webcore.datetime.parse.parseDateShort(e.LastUpdatedTimestamp)) : (C.push({
                        isPending: !1,
                        lastUpdatedTimestamp: eviivo.webcore.datetime.parse.parseDateShort(e.LastUpdatedTimestamp),
                        dates: {
                            s: eviivo.webcore.datetime.parse.parseDateShort(e.startDate).dateOnly(),
                            e: eviivo.webcore.datetime.parse.parseDateShort(e.endDate).dateOnly()
                        },
                        rooms: {
                            s: e.startIndex,
                            e: e.endIndex
                        }
                    }),
                    clearTimeout(M),
                    M = setTimeout(n, h.dataRefreshTimerInterval))))
                }
            })
        }
        function g() {
            getRequest = function() {
                var e = eviivo.pms.diary.gridNavigation.gridSettings()
                  , t = e.startDate.cloneDateOnly()
                  , e = e.endDate.cloneDateOnly();
                return null != h.preloadDatesSize && (t = t.addDays(-h.preloadDatesSize),
                e = e.addDays(h.preloadDatesSize)),
                {
                    CultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                    StartDate: t,
                    EndDate: e,
                    BusinessIds: eviivo.pms.diary.notes.manager.propertyIdsVisibleInDiary()
                }
            }
            ,
            cb = function(e) {
                var t = !1;
                e.length === P.datesWithNoteData.length && P.datesWithNoteData.simpleShallowPropsComparison(e) || (t = !0,
                P.datesWithNoteData = e),
                t && (eviivo.pms.diary.notes.manager.resetTableHeaderNoteDataAttributes(),
                eviivo.pms.diary.gridNavigation.reRenderGridHeader())
            }
            ;
            var e = getRequest();
            eviivo.webcore.ajaxHelper.executeAjax({
                actionId: T + ".checkNoteDataExistsByDateRange.",
                url: eviivoSuiteApp + "/DiaryData/CheckNoteDataExistsByDateRange",
                data: e,
                method: eviivo.webcore.ajaxHelper.methods.POST,
                contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                callback: function(e) {
                    cb(e)
                }
            })
        }
        function l() {
            eviivo.pms.diary.gridNavigation.generateLeftSidePanelDataArray(),
            f(),
            j = !1
        }
        function d(e, t) {
            P.propertiesRoomsMap.push(e),
            -1 !== t.id && (null == t.pid ? null == S[t.id] && (S[t.id] = 0) : S[t.pid]++)
        }
        function c() {
            var e = eviivo.pms.diary.gridNavigation.gridSettings()
              , t = e.startDate.cloneDateOnly()
              , i = e.endDate.cloneDateOnly();
            return null != h.preloadDatesSize && (t = t.addDays(-h.preloadDatesSize),
            i = i.addDays(h.preloadDatesSize)),
            w({
                CultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                StartDate: t,
                EndDate: i,
                StartIndex: e.startRoomIndex,
                EndIndex: e.endRoomIndex,
                RequestDeposits: eviivo.pms.diary.viewSwitch.isZoom(),
                RequestNotes: eviivo.pms.diary.gridNavigation.legacyViewEnabled()
            })
        }
        function w(e) {
            var o = []
              , n = []
              , t = eviivo.pms.diary.gridNavigation.dataHolder().leftSideList;
            return (null == t || 0 === t.length && h.enableDebugLogging) && console.log("WARNING: room list was still not found"),
            b.each(t, function(e, t) {
                var i;
                null != t.propertyId && (t = "r_" + t.propertyId + "_" + t.id,
                null != (t = P.propertiesRoomsFullObjects[t])) && null != (i = t.pid) && !0 !== t.isCollapsed && n.indexOf(t.rtid) < 0 && (n.push(t.rtid),
                o.indexOf(i) < 0) && o.push(i)
            }),
            e.BusinessIds = o,
            e.RoomTypeIds = n,
            e.actionId = e.StartDate.dateKey() + "_" + e.EndDate.dateKey() + "_" + e.StartIndex + "_" + e.EndIndex,
            e
        }
        function u(e) {
            var t, i, o, n;
            if (B && (P.elementsMap = {},
            P.elementsFullObjects = [],
            P.datesWithNoteData = [],
            C = [],
            I = 0,
            null != e))
                return t = eviivo.pms.diary.gridNavigation.gridSettings(),
                i = e.startIndex === t.startRoomIndex,
                o = e.endIndex === t.endRoomIndex,
                n = eviivo.webcore.datetime.parse.parseDateShort(e.startDate).dateOnly() === t.startDate.cloneDateOnly(),
                e = eviivo.webcore.datetime.parse.parseDateShort(e.endDate).dateOnly() === t.endDate.cloneDateOnly(),
                n && e && i && o ? void 0 : 1
        }
        function v() {
            B && (I = 0,
            P.elementsMap = {},
            P.elementsFullObjects = [],
            P.propertiesRoomsMap = [],
            P.propertiesRoomsFullObjects = [],
            P.datesWithNoteData = [],
            C = [])
        }
        function F(e, t) {
            var i, o = eviivo.webcore.datetime.parse.parseDateShort(t.sdt).dateOnly(), n = {
                dataId: t.kid,
                propertyId: t.pid,
                cellType: t.ct,
                startDate: o.cloneDateOnly()
            };
            if ("B" !== n.cellType && "C" !== n.cellType && "S" !== n.cellType || (n.endDate = eviivo.webcore.datetime.parse.parseDateShort(t.edt).dateOnly(),
            n.length = t.l,
            n.uiStartDate = o.cloneDateOnly(),
            n.text = t.txt,
            n.textPanoramic = t.txtp,
            i = !0),
            "B" !== n.cellType && "C" !== n.cellType || (n.roomId = t.rid),
            "B" === n.cellType && (n.type = t.tc,
            n.source = t.sc,
            n.sourceChannel = t.sch,
            n.sourceIconCss = t.sourceIconCss,
            n.arrivalTime = t.eta,
            n.isGroup = t.ig,
            n.isMultiRoom = t.im,
            n.multiRoomNameToSee = t.mrn,
            n.groupReference = t.gr,
            n.hasNotes = t.hn,
            n.hasExtras = t.he,
            n.hasCardWarning = t.hcw,
            n.numberOfAdults = t.noa,
            n.numberOfChildren = t.noc,
            n.orderDueValue = t.odv,
            n.currencySymbol = t.cs,
            n.currencyTooltip = t.ctp,
            n.isOta = t.io),
            "C" === n.cellType && (n.ReceivedDate = t.rdt),
            "S" === n.cellType && (n.BackgroundColor = t.bgc,
            n.type = t.tc),
            !0 === (i = "N" === n.cellType ? !1 : i))
                for (var a = 0; a < n.length; a++)
                    y(p(o, n), e),
                    o.addDays(1);
            else
                y(p(o, n), e);
            (I += N) > h.clearBufferSizeLimit && (B = !0),
            P.elementsFullObjects[e] = n
        }
        function p(e, t) {
            e = e.dateKey() + "-" + t.propertyId;
            return null != t.roomId ? e + "-" + t.roomId : e
        }
        function y(e, t) {
            null != P.elementsMap[e] ? P.elementsMap[e].indexOf(t) < 0 && P.elementsMap[e].push(t) : P.elementsMap[e] = [t]
        }
        function L(i) {
            var o = "";
            if (b.each(P.propertiesRoomsFullObjects, function(e, t) {
                t.id !== i && t.pid !== i || (t.isCollapsed = !t.isCollapsed),
                null == t.pid && t.isCollapsed && (o += "|" + t.id)
            }),
            window.localStorage)
                try {
                    localStorage.setItem(k, o)
                } catch (e) {}
            l()
        }
        function m(o) {
            P.elementsFullObjects[o];
            b.each(P.elementsMap, function(e, t) {
                for (var i = t.indexOf(o); -1 < i && 0 < t.length; )
                    t.splice(i, 1),
                    i = t.indexOf(o);
                t.length
            }),
            P.elementsFullObjects[o] = null
        }
        var h, b, S, k, D, N, I, B, P, C, T, x, O, R, _, M, j;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        eviivo.pms.diary = eviivo.pms.diary || {},
        eviivo.pms.diary.dataLoader = eviivo.pms.diary.dataLoader || {},
        window.eviivo.pms.diary.dataLoader = (D = {
            enableDebugLogging: !1,
            dataloadThrottleSpeed: 350,
            preloadDatesSize: 14,
            preloadLimitDetectionRangeForDates: 5,
            preloadLimitDetectionRangeForRooms: 3,
            dataRefreshTimerInterval: 6e5,
            clearBufferSizeLimit: 5242880
        },
        I = 0,
        B = !(N = 512),
        P = {
            propertiesRoomsMap: [],
            propertiesRoomsFullObjects: {},
            elementsMap: {},
            elementsFullObjects: {},
            datesWithNoteData: []
        },
        C = [],
        _ = (T = "eviivo.pms.diary.dataLoader") + ".collapsedProperties.",
        M = R = O = null,
        j = !(x = {
            resize: "resize." + T
        }),
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw T + ": module depends on jQuery";
                h = (b = jQuery).extend(D, e),
                P.diaryNoteIconsDisabled = e.diaryNoteIconsDisabled,
                P.diaryNoteIconsReadOnly = e.diaryNoteIconsReadOnly,
                P.diaryEntryHideAllData = e.diaryEntryHideAllData,
                k = _ + h.localStorageKeySuffix;
                for (var t = _ + h.localStorageKeySuffixForUser, i = 0, o = localStorage.length; i < o; ++i) {
                    var n = localStorage.key(i);
                    null != n && -1 < n.indexOf(t) && n !== k && localStorage.removeItem(n)
                }
                !0 === h.shouldClearLocalStorage && localStorage.removeItem(k)
            },
            load: function(e) {
                if ("function" != typeof jQuery)
                    throw T + ": module depends on jQuery";
                h = (b = jQuery).extend(D, e),
                eviivo.eagle.multiProperty.applyButtonCallBackFunction({
                    callBackFunction: eviivo.pms.diary.dataLoader.applyFilter
                }),
                eviivo.pms.accessGroup.headerSearch.extendOptions({
                    callBackFunction: eviivo.pms.diary.dataLoader.applyFilter
                }),
                r(),
                j = !1,
                b(window).on(x.resize, t)
            },
            applyFilter: function() {
                eviivo.pms.diary.gridNavigation.resetGridSettingsYAxis(),
                r()
            },
            dataLoadThrottle: function(y, m) {
                null == O && (clearTimeout(O),
                O = setTimeout(function() {
                    var e = y
                      , t = m
                      , i = (clearTimeout(O),
                    O = null,
                    eviivo.pms.diary.gridNavigation.gridSettings())
                      , o = i.startDate.cloneDateOnly()
                      , n = o.getTime()
                      , a = i.endDate.cloneDateOnly()
                      , r = a.getTime()
                      , l = parseInt(a.daysBetween(o))
                      , s = i.endRoomIndex - i.startRoomIndex
                      , d = null
                      , c = null
                      , u = (null == t && (d = 0 < e ? r : n),
                    null == e && (c = 0 < t ? i.endRoomIndex : i.startRoomIndex),
                    null != (r = function(e, t) {
                        for (var i = null, o = 0; o < C.length; o++) {
                            var n = C[o];
                            if (!0 === n.isPending)
                                break;
                            null == e && 0 <= t - n.dates.s.getTime() && 0 <= n.dates.e.getTime() - t && (i = n),
                            null == t && (0 <= e - n.rooms.s && 0 <= n.rooms.e - e || 0 <= e - n.rooms.s && 0 <= e - n.rooms.e || e - n.rooms.s <= 0 && e - n.rooms.e <= 0) && (i = n)
                        }
                        return i
                    }(c, d)) && h.enableDebugLogging && (console.log("edgeDetectedItem dates bellow"),
                    console.log(r.dates.s, r.dates.e)),
                    function(e, t, i, o, n, a, r, l, s) {
                        var d = null;
                        null != e && (d = {
                            dates: {},
                            rooms: {}
                        },
                        null == i ? (d.rooms.s = e.rooms.s,
                        d.rooms.e = e.rooms.e,
                        0 < t ? (d.dates.s = e.dates.e.cloneDateOnly(),
                        d.dates.e = e.dates.e.cloneDateOnly().addDays(o)) : (d.dates.s = e.dates.s.cloneDateOnly().addDays(-o),
                        d.dates.e = e.dates.s.cloneDateOnly())) : (e.dates.s >= a || e.dates.e < r ? (d.dates.s = a,
                        d.dates.e = r,
                        e.dates.s = a,
                        e.dates.e = r) : (d.dates.s = e.dates.s.cloneDateOnly(),
                        d.dates.e = e.dates.e.cloneDateOnly()),
                        0 < i ? (d.rooms.s = e.rooms.e + 1,
                        d.rooms.e = e.rooms.e + n) : (d.rooms.s = e.rooms.s - n - 1,
                        d.rooms.e = e.rooms.s - 1)));
                        null == e && (d = {
                            dates: {
                                s: a,
                                e: r
                            },
                            rooms: {
                                s: l,
                                e: s
                            }
                        });
                        return d
                    }(r, e, t, l, s, o, a, i.startRoomIndex, i.endRoomIndex));
                    if (null != u) {
                        for (var v = 0; v < C.length; v++) {
                            var p = C[v];
                            if (u.dates.s.getTime() === p.dates.s.getTime() && u.dates.e.getTime() === p.dates.e.getTime() && u.rooms.s === p.rooms.s && u.rooms.e === p.rooms.e)
                                return
                        }
                        null !== r && null != r && (r.isPending = !0),
                        u.rooms.s < 0 && (u.rooms.s = i.startRoomIndex),
                        u.rooms.e < 0 && (u.rooms.e = i.endRoomIndex),
                        f(function() {
                            return e = u,
                            C.push(e),
                            w({
                                CultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                                StartDate: e.dates.s,
                                EndDate: e.dates.e,
                                StartIndex: e.rooms.s,
                                EndIndex: e.rooms.e,
                                RequestDeposits: eviivo.pms.diary.viewSwitch.isZoom(),
                                RequestNotes: eviivo.pms.diary.gridNavigation.legacyViewEnabled()
                            });
                            var e
                        }, r),
                        null == e || eviivo.pms.diary.gridNavigation.legacyViewEnabled() || g()
                    }
                }, h.dataloadThrottleSpeed))
            },
            dataHolder: function() {
                return P
            },
            refreshDataOnlyWithClearBuffer: function() {
                clearTimeout(M),
                B = !(M = null),
                u(),
                f()
            },
            refreshDataOnly: a,
            removeFromDataHolder: m,
            extractRoomTypeId: function(i, o) {
                var n;
                return b.each(P.propertiesRoomsMap, function(e, t) {
                    t = P.propertiesRoomsFullObjects[t];
                    null != t && t.pid === i && t.id === o && (n = t.rtid)
                }),
                n
            },
            refreshDataAndUi: function(e) {
                m(e),
                a()
            },
            switchDebugMode: function(e) {
                h.enableDebugLogging = e
            },
            tryClearRowForGridCell: function(e) {
                var t, i = null;
                for (t in P.elementsMap)
                    if (P.elementsMap[t].includes(e)) {
                        i = t;
                        break
                    }
                if (i) {
                    var o, n = i.split("-").slice(0, 3).join("-"), a = i.slice(n.length + 1), r = [];
                    for (o in P.elementsMap)
                        o.endsWith(a) && r.push.apply(r, s(P.elementsMap[o]));
                    for (var l = 0; l < r.length; l++)
                        m(r[l])
                }
            },
            checkForNoteDataChanges: g
        })
    },
    5885: function() {
        function t() {
            !0 === n.permissionsForUser.CreateBooking && (eviivo.pms.diary.gridNavigation.preventKeyDownScroll(),
            s.bookingPopup.show({
                startDate: null,
                roomId: null,
                onActionCallback: o
            }),
            s.contextMenu.closeAll())
        }
        function i() {
            !0 === n.permissionsForUser.CreateClosure && (eviivo.pms.diary.gridNavigation.preventKeyDownScroll(),
            s.bookingPopup.showBlockOnly({
                startDate: null,
                roomId: null,
                onActionCallback: o
            }),
            s.contextMenu.closeAll())
        }
        function o(e, t, i, o, n) {
            eviivo.pms.diary.dataLoader.refreshDataOnly(),
            !0 !== n && null != e && null != t && eviivo.eagle.floatingNotification.showAddBookingNotification({
                ref: t,
                guestName: i,
                bookingId: e,
                businessId: o,
                messageFormat: eviivo.eagle.translations.resources.diary.addBooking.BookingCreatedMessage,
                customAction: s.viewBookingPopup.showViewBookingPopup,
                resources: {
                    BookingCreatedMessage1: eviivo.eagle.translations.resources.diary.addBooking.BookingCreatedMessage1
                }
            })
        }
        var n, a, r, l, s, d, c;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.grid = window.eviivo.pms.diary.grid || {},
        window.eviivo.pms.diary.grid.addBooking = (r = {},
        l = {
            addBookingButton: "#btnAddBooking",
            addBlockButton: "#btnBlock"
        },
        s = {
            bookingPopup: null,
            viewBookingPopup: null,
            contextMenu: null,
            addBookingButton: null,
            addBlockButton: null
        },
        d = null,
        c = "eviivo.pms.diary.grid.addBooking",
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw c + ": module depends on jQuery";
                n = (a = jQuery).extend(r, e),
                d = {
                    touchstart: eviivo.util.namespacedEvent("touchstart", c),
                    mousedown: eviivo.util.namespacedEvent("mousedown", c)
                },
                s.addBookingButton = a(l.addBookingButton),
                s.addBlockButton = a(l.addBlockButton),
                s.bookingPopup = eviivo.eagle.bookingPopup,
                s.viewBookingPopup = eviivo.eagle.viewBookingPopup,
                s.contextMenu = eviivo.eagle.contextMenu,
                s.bookingPopup.extendOptions({
                    onBlockActionCallback: o
                }),
                s.addBookingButton.on(d.touchstart, t),
                s.addBookingButton.on(d.mousedown, t),
                s.addBlockButton.on(d.touchstart, i),
                s.addBlockButton.on(d.mousedown, i)
            },
            tryShow: function(e) {
                var t;
                null != e && null != e.businessId && (s.contextMenu.closeAll(),
                t = null != (t = e.element.attr("data-dt")) && "" !== t ? eviivo.webcore.datetime.parse.parseDateShort(t) : null,
                s.bookingPopup.show({
                    startDate: t,
                    roomId: e.roomId,
                    onActionCallback: o,
                    businessId: e.businessId
                }),
                s.contextMenu.closeAll())
            },
            refreshData: o
        })
    },
    6346: function() {
        function t() {
            null != r.contextMenu && r.contextMenu.hideMenu(),
            null != r.dataId && r.dataId.val(""),
            null != r.dataKey && r.dataKey.val(""),
            null != r.dataBusinessId && r.dataBusinessId.val("")
        }
        function i(e) {
            if (null == e || null == e.id)
                return !1;
            null != r.dataId && r.dataId.val(e.id),
            null != r.dataKey && r.dataKey.val(e.key.replace("element-", "c_")),
            null != r.dataBusinessId && r.dataBusinessId.val(e.businessId)
        }
        function o(e) {
            t(),
            null == e.Errors && (eviivo.pms.diary.dataLoader.refreshDataAndUi(e.DataPayload.Key),
            eviivo.pms.diary.gridNavigation.resetHandlers())
        }
        var n, a, r;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.grid = window.eviivo.pms.diary.grid || {},
        window.eviivo.pms.diary.grid.block = (a = {
            contextMenu: "#diary-block-context-menu",
            contextMenuButton: "#diary-block-remove",
            contextMenuDateLabel: "#diary-block-created-date",
            form: "form",
            dataId: "#diary-block-data-id",
            dataKey: "#diary-block-data-key",
            dataBusinessId: "#diary-block-data-businessId",
            cancelBtn: ".s-cancel"
        },
        r = {
            contextMenu: null,
            contextMenuButton: null,
            contextMenuDateLabel: null,
            dataId: null,
            dataKey: null,
            dataBusinessId: null
        },
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw "eviivo.pms.diary.grid.block: module depends on jQuery";
                (n = jQuery).extend({}, e),
                r.contextMenu = n(a.contextMenu).contextMenu({
                    position: eviivo.eagle.contextMenu.positions.bottomRight,
                    toLeft: !0
                }),
                r.form = r.contextMenu.find(a.form),
                r.contextMenuButton = r.contextMenu.find(a.contextMenuButton),
                r.contextMenuDateLabel = r.contextMenu.find(a.contextMenuDateLabel),
                r.dataId = r.contextMenu.find(a.dataId),
                r.dataKey = r.contextMenu.find(a.dataKey),
                r.dataBusinessId = r.contextMenu.find(a.dataBusinessId),
                null !== r.contextMenuButton && 0 !== r.contextMenuButton.length && (e = {
                    container: a.contextMenu
                },
                eviivo.webcore.forms.load({
                    placeholder: r.form.parent(),
                    id: r.form.attr("id"),
                    spinnerSettings: e,
                    notificationSettings: {
                        submitSuccess: {
                            enabled: !1
                        }
                    },
                    actions: {
                        onSubmitSuccess: o
                    }
                }),
                n(document).on("click touch", a.cancelBtn, function() {
                    $(a.contextMenu).hide(),
                    eviivo.pms.diary.gridNavigation.resetHandlers()
                }))
            },
            reset: t,
            tryShow: function(e) {
                var t;
                !1 !== i(e) && (t = e.element.attr("data-rcdt"),
                t = eviivo.webcore.datetime.parse.parseDate(t).evDisplayLongDateTime(eviivo.eagle.basePageModelState.userCultureCode),
                r.contextMenuDateLabel.html(t),
                r.contextMenu.showMenu({
                    event: e.e,
                    target: n("#" + e.key)
                }),
                eviivo.eagle.contextMenu.resetPositionOfContext())
            },
            submitRemove: function(e) {
                t(),
                !1 !== i(e) && r.contextMenuButton.trigger("click")
            }
        })
    },
    4333: function() {
        function t(e) {
            null != e && null != e.Data && !0 === e.Data.refreshDiary && i.each(e.Data.selectedBookings, function(e, t) {
                eviivo.pms.diary.dataLoader.tryClearRowForGridCell("b_" + t)
            }),
            eviivo.pms.diary.dataLoader.refreshDataOnly(),
            eviivo.pms.diary.gridNavigation.resetHandlers()
        }
        var i, o, n;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.grid = window.eviivo.pms.diary.grid || {},
        window.eviivo.pms.diary.grid.booking = (o = {},
        n = {
            contextMenu: null,
            viewBookingPopup: null
        },
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw "eviivo.pms.diary.grid.booking: module depends on jQuery";
                (i = jQuery).extend(o, e),
                n.viewBookingPopup = eviivo.eagle.viewBookingPopup,
                n.contextMenu = eviivo.eagle.contextMenu
            },
            tryShow: function(e) {
                null != e && null != e.id && (n.viewBookingPopup.showViewBookingPopup(e.id, e.viewType, t, null, null, null, null, null, null, e.businessId),
                n.contextMenu.closeAll())
            },
            refreshData: t
        })
    },
    2322: function() {
        function a() {
            r(i.moveProcessingSpinner).remove(),
            l.body.removeClass("move-ota-highlight").removeClass("move-ofln-highlight"),
            null != s && r("tr.r-row[data-pid='" + s.businessId + "'] td[data-dt='" + s.dateKey + "']").removeClass("move-ota-highlight-cell"),
            null != c && 0 < c.length && c.removeClass("move-highlight").removeClass("move-processing spinner-container-absolute"),
            null != l.destinationCell && 0 < l.destinationCell.length && l.destinationCell.removeClass("target-highlight"),
            c = d = s = null
        }
        var r, t, i, l, s, d, c, o, u;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.grid = window.eviivo.pms.diary.grid || {},
        window.eviivo.pms.diary.grid.modifyBooking = (t = {},
        i = {
            body: "body",
            draggables: "#grid-body tr.r-row td span.cp-dia_cell.c-bk",
            draggableSnapContainer: "#grid-body tr.r-row td",
            draggableContainement: "#grid-body",
            moveProcessingSpinner: "#move-processing-spinner"
        },
        l = {
            body: null
        },
        o = c = d = s = null,
        u = "eviivo.pms.diary.grid.modifyBooking",
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw u + ": module depends on jQuery";
                (r = jQuery).extend(t, e),
                o = {
                    keyup: eviivo.util.namespacedEvent("keyup", u)
                },
                l.body = r(i.body),
                r(document).on(o.keyup, function(e) {
                    27 === e.keyCode && a()
                })
            },
            tryShow: function(e) {
                null == e || null == e.businessId || null != s && s.id === e.id || (a(),
                (c = r("#" + e.key)).addClass("move-highlight"),
                (s = e).isOta = c.hasClass("is-ota") && c.hasClass("c-bk"),
                s.isOta ? (l.body.addClass("move-ota-highlight"),
                r("#grid-body tr.r-row[data-pid='" + s.businessId + "'] td[data-dt='" + s.dateKey + "']").addClass("move-ota-highlight-cell")) : l.body.addClass("move-ofln-highlight"))
            },
            tryMove: function(e) {
                var t, i, o, n;
                null == e || null == e.businessId || null != s && s.id === e.id ? a() : (d = e,
                !1 !== (e = !0,
                !(t = n = null) === (e = null == s ? !1 : e) && !0 === s.isOta && (s.businessId !== d.businessId ? (n = eviivo.eagle.translations.resources.diary.oneClickModify.failOtaModifyBusinessRestrictionsApply,
                t = eviivo.webcore.notifier.types.warn,
                e = !1) : s.dateKey !== d.dateKey && (n = eviivo.eagle.translations.resources.diary.oneClickModify.failOtaModifyDateRestrictionsApply,
                t = eviivo.webcore.notifier.types.warn,
                e = !1)),
                !0 === (e = !0 === e && s.dateKey === d.dateKey && null != s.roomId && s.roomId === d.roomId ? !1 : e) && s.businessId !== d.businessId && (null === (o = eviivo.util.safeFunction("eviivo.pms.businessSettingsAndDefaultMessages.getValue")) || (i = o(s.businessId),
                o = o(d.businessId),
                null == i) || null == o ? (e = !1,
                n = eviivo.eagle.translations.resources.diary.oneClickModify.failMissingBusinessSettings,
                t = eviivo.webcore.notifier.types.warn) : (i.WorkingCurrencyCode !== o.WorkingCurrencyCode && (e = !1,
                n = eviivo.eagle.translations.resources.diary.oneClickModify.failMatchCurrencySettings,
                t = eviivo.webcore.notifier.types.warn),
                i.MerchantStatus !== o.MerchantStatus && (e = !1,
                n = eviivo.eagle.translations.resources.diary.oneClickModify.failMatchMerchantSettings,
                t = eviivo.webcore.notifier.types.warn))),
                !1 === e && (a(),
                null != n) && eviivo.webcore.notifier.show({
                    message: n,
                    type: t
                }),
                e) && (c.removeClass("move-highlight").addClass("move-processing spinner-container-absolute"),
                r('<span class="spinner light-background active small-spinner" id="move-processing-spinner"><span class="position-spinner"><span class="spin"></span></span></span>').appendTo(c),
                l.destinationCell = d.element,
                null != l.destinationCell && 0 < l.destinationCell.length && l.destinationCell.removeClass("target-highlight").addClass("target-highlight"),
                o = null != (i = d.element.attr("data-dt")) && "" !== i ? eviivo.webcore.datetime.parse.parseDateShort(i) : null,
                n = {
                    BookingId: s.id,
                    ExistingBookingId: d.id,
                    BusinessId: s.businessId,
                    NewBusinessId: d.businessId,
                    NewRoomTypeId: eviivo.pms.diary.dataLoader.extractRoomTypeId(d.businessId, d.roomId),
                    NewRoomId: d.roomId,
                    NewStartDate: o.evStandardIso8601DateTimeUtcExtended()
                },
                eviivo.webcore.ajaxHelper.executeAjax({
                    actionId: u + ".OneClickModifyBooking",
                    url: eviivoSuiteApp + "/diary/oneClickModifyBooking",
                    data: n,
                    method: eviivo.webcore.ajaxHelper.methods.POST,
                    contentType: eviivo.webcore.ajaxHelper.contentTypes.URL_ENCODED_UTF8,
                    dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                    callback: function(e) {
                        c.removeClass("move-processing"),
                        null != e && !0 === e.BookingWasModified ? (eviivo.pms.diary.dataLoader.refreshDataAndUi(s.key.replace("element-", "b_")),
                        eviivo.webcore.notifier.show({
                            message: eviivo.eagle.translations.resources.diary.oneClickModify.successBookingMoved,
                            type: eviivo.webcore.notifier.types.success
                        })) : eviivo.webcore.notifier.show({
                            message: eviivo.eagle.translations.resources.diary.oneClickModify.failGenericMoveBookingMessage,
                            type: eviivo.webcore.notifier.types.error
                        }),
                        a(),
                        eviivo.pms.diary.gridNavigation.resetHandlers()
                    },
                    failCallback: function() {
                        eviivo.webcore.notifier.show({
                            message: eviivo.eagle.translations.resources.diary.oneClickModify.failGenericMoveBookingMessage,
                            type: eviivo.webcore.notifier.types.error
                        }),
                        a(),
                        eviivo.pms.diary.gridNavigation.resetHandlers()
                    }
                })))
            },
            resetAll: a
        })
    },
    3732: function() {
        function t(e) {
            e.stopPropagation();
            for (var t, i = a(this); null != i && 0 < i.length && !i.hasClass("cp-context_item"); )
                i = i.parents(".cp-context_item");
            null != i && 0 < i.length && !0 === (e = null != (e = i.attr("data-isbooking")) && "" !== e && "true" === e.toLowerCase()) && (e = parseInt(i.attr("data-id")),
            t = parseInt(i.attr("data-pid")),
            eviivo.pms.diary.grid.booking.tryShow({
                id: e,
                businessId: t,
                viewType: null
            }))
        }
        function i(e) {
            e.stopPropagation();
            for (var t, i = a(this); null != i && 0 < i.length && !i.hasClass("cp-context_item"); )
                i = i.parents(".cp-context_item");
            null != i && 0 < i.length && (e = "#element-" + i.attr("data-id"),
            !0 === (t = null != (t = i.attr("data-isbooking")) && "" !== t && "true" === t.toLowerCase()) ? eviivo.pms.diary.grid.booking.tryShow({
                id: parseInt(i.attr("data-id")),
                businessId: parseInt(i.attr("data-pid")),
                roomId: parseInt(i.attr("data-rid")),
                viewType: 3
            }) : null != (t = a(e)) && 0 < t.length && eviivo.pms.diary.grid.block.submitRemove(eviivo.pms.diary.gridNavigation.extractElementData(t)),
            n())
        }
        function o() {
            s.contextMenuItems = s.contextMenu.find(l.contextMenuItem),
            eviivo.eagle.contextMenu.resetPositionOfContext()
        }
        function n() {
            eviivo.eagle.contextMenu.closeAll(),
            null != s.contextMenu && s.contextMenu.hideMenu()
        }
        var a, r, l, s, d, c;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.grid = window.eviivo.pms.diary.grid || {},
        window.eviivo.pms.diary.grid.overbooking = (r = {},
        l = {
            contextMenu: "#diary-overbooking-context-menu",
            contextMenuViewBookingButton: "button.s-diary-view-booking",
            contextMenuItemButtons: "button.s-diary-booking-action",
            overbookingHeader: ".s-overbooking-header"
        },
        s = {
            contextMenu: null,
            contextMenuItems: null,
            overbookingHeader: null
        },
        d = null,
        c = "eviivo.pms.diary.grid.overbooking",
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw c + ": module depends on jQuery";
                (a = jQuery).extend(r, e),
                d = {
                    click: eviivo.util.namespacedEvent("click", c)
                },
                s.contextMenu = a(l.contextMenu).contextMenu({
                    position: eviivo.eagle.contextMenu.positions.bottomRight,
                    toLeft: !0,
                    toggleCallback: function() {
                        s.contextMenu.html("")
                    }
                }),
                s.contextMenu.on(d.click, l.contextMenuViewBookingButton, t),
                s.contextMenu.on(d.click, l.contextMenuItemButtons, i),
                s.contextMenu.on(d.click, l.overbookingHeader, n)
            },
            tryShow: function(e) {
                var t;
                null != e && null != e.id && null != e.businessId && (t = e.element.find("span:first-child"),
                s.contextMenu.showMenu({
                    event: e.e,
                    target: 0 === t.length ? e.element : t
                }),
                eviivo.webcore.forms.loadAjax({
                    id: c,
                    placeholder: l.contextMenu,
                    location: eviivoSuiteApp + "/diarydata/overbookingContextEntries?t=" + (new Date).getTime(),
                    spinnerSettings: {
                        container: l.contextMenu,
                        theme: eviivo.webcore.loadingSpinner.themes.light
                    },
                    requestData: {
                        BusinessId: e.businessId,
                        BookingId: e.id
                    },
                    actions: {
                        onLoadSuccess: o
                    }
                }))
            }
        })
    },
    4190: function() {
        function L() {
            me((new Date).addDays(-u.gridNavigationStartDateOffset).dateOnly()),
            be()
        }
        function A() {
            localStorage.removeItem(f)
        }
        function E(e) {
            e ? eviivo.eagle.diaryNotes.init({
                resources: u.notesResources,
                getDateForNoteFunc: function(e) {
                    return e.closest("td").attr("data-dt")
                },
                getBusinessIdForNoteFunc: function(e) {
                    return e.closest("tr.p-row").attr("data-id")
                },
                noteEditingRestricted: u.isNotesEditingRestricted
            }) : eviivo.pms.diary.notes.manager.init({
                resources: u.notesResources,
                getDateForNoteFunc: Q,
                getBIdInSinglePropertyDiary: G,
                noteEditingRestricted: u.isNotesEditingRestricted,
                currentCulture: u.currentCulture,
                userCanModifyNote: u.permissionsForUser.UserCanModifyNote,
                userCanAddNote: u.permissionsForUser.UserCanAddNote
            })
        }
        function H(e) {
            e = K(e, !0);
            eviivo.pms.diary.noteTooltip.queueRequest(e)
        }
        function V(e) {
            return t(),
            B = !1,
            e.stopImmediatePropagation(),
            r(e.originalEvent),
            !0
        }
        function U(e) {
            return B = !1,
            e.stopImmediatePropagation(),
            l(e.originalEvent),
            !0
        }
        function W(e) {
            return t(),
            B = !1,
            e.stopImmediatePropagation(),
            !0
        }
        function Q(e) {
            return e.closest("th").attr("data-dt")
        }
        function G(e) {
            return e.closest("table").find("tbody tr.r-row").attr("data-pid")
        }
        function q(e) {
            !0 !== B ? eviivo.pms.diary.grid.modifyBooking.resetAll() : Y(e)
        }
        function Y(e) {
            var t, i = K(e);
            if (null != i)
                switch (i.cellType) {
                case "B":
                    eviivo.pms.diary.grid.modifyBooking.resetAll(),
                    !e.ctrlKey && !0 !== C || !0 !== u.permissionsForUser.ModifyBooking ? !0 === u.permissionsForUser.ViewBooking && eviivo.pms.diary.grid.booking.tryShow(i) : (F = i,
                    eviivo.pms.diary.grid.modifyBooking.tryShow(i),
                    B = P = !0),
                    x = T = !0;
                    break;
                case "L":
                    eviivo.pms.diary.grid.modifyBooking.resetAll(),
                    eviivo.pms.diary.grid.block.tryShow(i),
                    x = T = !0;
                    break;
                case "O":
                    eviivo.pms.diary.grid.modifyBooking.resetAll(),
                    u.isOverBookingInformationDisabled || (eviivo.pms.diary.grid.overbooking.tryShow(i),
                    x = T = !0);
                    break;
                case "C":
                case "S":
                    return;
                default:
                    !0 === C && !0 === P && (C = !1,
                    i.businessId === F.businessId) && i.dateKey === F.dateKey && i.roomId === F.roomId ? (P = !1,
                    eviivo.pms.diary.grid.modifyBooking.resetAll()) : (!0 === P ? (eviivo.pms.diary.grid.modifyBooking.tryMove(i),
                    P = !1) : !0 === u.permissionsForUser.CreateBooking ? (eviivo.pms.diary.grid.modifyBooking.resetAll(),
                    eviivo.pms.diary.grid.addBooking.tryShow(i)) : !0 === u.permissionsForUser.CreateClosure && (t = null != (t = i.element.attr("data-dt")) && "" !== t ? eviivo.webcore.datetime.parse.parseDateShort(t) : null,
                    eviivo.eagle.bookingPopup.showBlockOnly({
                        startDate: t,
                        roomId: i.roomId,
                        onActionCallback: eviivo.eagle.diaryList.getListDetails
                    })),
                    x = T = !0)
                }
            else
                eviivo.pms.diary.grid.modifyBooking.resetAll()
        }
        function t() {
            clearTimeout(m),
            m = null,
            B = !(C = P = x = T = R = _ = O = I = !1)
        }
        function K(e, t) {
            var i = d(e);
            if (!1 === i.isMobile && 1 !== i.e.which && !t)
                return null;
            var o = v(e.target);
            if (!0 === P)
                for (; 0 < o.length && "TD" !== o[0].nodeName; )
                    o = o.parent();
            else
                for (; 0 < o.length && !o.hasClass("cp-dia_cell") && "TD" !== o[0].nodeName; )
                    o = o.parent();
            t = $(o),
            re(),
            e = X(o, i.e, t);
            return null != e && !0 === P && (e.cellType = null),
            e
        }
        function X(e, t, i) {
            var o, n, a, r;
            return null == e || 0 === e.length ? null : ("TD" !== e[0].nodeName ? e.parent().hasClass("tp-prd-c") && !e.hasClass("cp-dia_cell") : e.hasClass("tp-prd-c")) ? {
                element: e,
                cellType: "C"
            } : (o = e.attr("id"),
            n = "TD" !== e[0].nodeName && null != o ? parseInt(o.replace("element-", "")) : null,
            "T" === (i = null == i ? $(e) : i) ? null : (r = (a = e.parents("tr")).attr("data-pid"),
            a = a.attr("data-id"),
            null != (r = null != r && "" !== r ? parseInt(r) : null) && (eviivo.eagle.basePageModelState.businessId = r),
            {
                element: e,
                id: n,
                key: o,
                businessId: r,
                roomId: null != a && "" !== a ? parseInt(a) : null,
                e: t,
                cellType: i,
                dateKey: ("TD" === e[0].nodeName ? e : e.parent()).attr("data-dt")
            }))
        }
        function $(e) {
            return e.hasClass("c-bk") || e.hasClass("c-ci") || e.hasClass("c-co") ? "B" : e.hasClass("c-lk") ? "L" : e.hasClass("c-ob") || e.hasClass("c-sp") ? "O" : e.hasClass("c-tt") ? "T" : e.hasClass("c-cl") ? "S" : null
        }
        function z() {
            if (window.localStorage)
                try {
                    localStorage.setItem(f, JSON.stringify(k))
                } catch (e) {}
        }
        function J(e) {
            k.windowWidth = v(window).width(),
            k.windowHeight = v(window).height();
            var t = v(document.body).width() - h.datesSelector.outerWidth();
            k.cellWidth = h.gridHeader.find(w.thFirst).outerWidth(!0),
            k.cellHeight1 = h.fakeRoomsList.find(w.liFirstPRow).outerHeight(!0),
            k.cellHeight2 = h.fakeRoomsList.find(w.liFirstRRow).outerHeight(!0),
            k.viewportColumnLimit = Math.ceil(t / k.cellWidth) + 1,
            t = window.innerHeight - h.roomsList.offset().top,
            t = Math.ceil(t / k.cellHeight2),
            k.viewportRowLimit = t + De.overScrollRowLimit,
            !0 !== e && null != (t = JSON.parse(localStorage.getItem(f))) && null != t.windowWidth && t.windowWidth === k.windowWidth && null != t.windowHeight && t.windowHeight === k.windowHeight && (k.startDate = new Date(t.startDate),
            k.startRoomIndex = t.startRoomIndex),
            null == k.startDate && (e = null) != (e = "undefined" != typeof eviivo && void 0 !== eviivo.webcore && void 0 !== eviivo.webcore.queryStringHelper ? eviivo.webcore.queryStringHelper.getAllKeys(window.location.href).startdate : e) && (k.startDate = new Date(e).dateOnly()),
            null == k.startDate && (k.startDate = (new Date).addDays(-u.gridNavigationStartDateOffset).dateOnly()),
            null == k.startRoomIndex && (k.startRoomIndex = 0),
            Z()
        }
        function Z() {
            var e = eviivo.pms.diary.dataLoader.dataHolder();
            k.endRoomIndex = k.startRoomIndex + k.viewportRowLimit,
            0 !== e.propertiesRoomsMap.length && k.endRoomIndex > e.propertiesRoomsMap.length && (k.endRoomIndex = e.propertiesRoomsMap.length),
            k.endDate = k.startDate.cloneDateOnly().addDays(k.viewportColumnLimit - 1),
            k.endDate.addDays(-1)
        }
        function ee(e, t) {
            null != e && !0 === e && localStorage.removeItem(f),
            J(t)
        }
        function te(e) {
            ee(null, e),
            a()
        }
        function o() {
            eviivo.util.namespaceActionLoader(o, "renderGridHeader", "eviivo.pms.diary.render.") && eviivo.pms.diary.render.renderGridHeader(D.dates, Ne, h.targets.header.container, h.targets.header.containerChild, u.permissionsForUser.UserCanViewNotes, u.isLegacyViewEnabled, u.weekendStartDate)
        }
        function ie() {
            eviivo.util.namespaceActionLoader(ie, "renderLeftSidePanel", "eviivo.pms.diary.render.") && eviivo.pms.diary.render.renderLeftSidePanel(D.leftSideList, h.targets.leftSide.container, h.targets.leftSide.containerChild, u.isLegacyViewEnabled)
        }
        function oe() {
            eviivo.util.namespaceActionLoader(oe, "renderGridBody", "eviivo.pms.diary.render.") && eviivo.pms.diary.render.renderGridBody(D.emptyGridCells, h.targets.body.container, h.targets.body.containerChild, u.isLegacyViewEnabled)
        }
        function a(e) {
            k.endDate = k.startDate.cloneDateOnly(),
            D.dates = [],
            N = [];
            for (var t = 0; t < k.viewportColumnLimit - 1; t++) {
                var i = k.endDate.cloneDateOnly();
                D.dates[t] = {
                    date: i
                },
                N[t] = {
                    date: i,
                    data: null
                },
                k.endDate.addDays(1)
            }
            k.endDate.addDays(-1),
            eviivo.pms.diary.dataLoader.load({
                startDate: k.startDate,
                endDate: k.endDate
            }),
            (!0 === e ? o : ke)()
        }
        function ne(e, t) {
            D.leftSideList = [],
            D.emptyGridCells = [];
            for (var i, o, n, a = k.startRoomIndex, r = 0; r <= k.viewportRowLimit && r <= e.propertiesRoomsMap.length && a <= e.propertiesRoomsMap.length; ) {
                var l, s = e.propertiesRoomsFullObjects[e.propertiesRoomsMap[a]];
                null == s || null != s.pid && (null == s.pid || u.isLegacyViewEnabled && !0 === s.isCollapsed) && !0 !== s.isBlank ? 0 === r && null != t && (k.startRoomIndex += t,
                k.endRoomIndex += t,
                a = k.startRoomIndex - 1) : (i = n = o = l = i = void 0,
                i = s.id,
                l = s.pid,
                o = s.rtid,
                n = {
                    id: i,
                    propertyId: l,
                    roomTypeId: o,
                    isBlank: s.isBlank,
                    isCollapsed: s.isCollapsed,
                    line1: s.lt1,
                    line2: s.lt2
                },
                i = {
                    id: i,
                    propertyId: l,
                    roomTypeId: o,
                    isBlank: s.isBlank,
                    isCollapsed: s.isCollapsed,
                    type: s.tc,
                    data: N.slice(0)
                },
                D.leftSideList.push((l = {
                    leftSideListItem: n,
                    gridRowItem: i
                }).leftSideListItem),
                D.emptyGridCells.push(l.gridRowItem),
                null == s.pid && !s.isBlank || r++),
                a++
            }
        }
        function ae() {
            var e = eviivo.pms.diary.dataLoader.dataHolder();
            k.startRoomIndex > e.propertiesRoomsMap.length && (k.startRoomIndex = 0,
            k.endRoomIndex = k.startRoomIndex + k.viewportRowLimit),
            ne(e),
            !0 === Be ? (i(),
            c()) : (ie(),
            oe(),
            Be = !0)
        }
        function re() {
            clearTimeout(m),
            m = null,
            R = _ = O = I = !1
        }
        function le() {
            re()
        }
        function se(e) {
            R = _ = O = I = !1,
            null == e || 27 !== e.keyCode && 37 !== e.keyCode && 39 !== e.keyCode && 38 !== e.keyCode && 40 !== e.keyCode || (P = C = !1,
            clearTimeout(m),
            m = null)
        }
        function r(e) {
            h.contextMenu.closeAll(),
            B = !(C = T = !1);
            var t = d(e);
            e = t.e,
            R = _ = O = I = !1,
            1 !== e.which && !t.isMobile || (m = setTimeout(function() {
                !0 === B && (C = !(I = B = !1),
                Y(e))
            }, u.mouseDownTimerInterval),
            I = !0,
            g.currentX = e.pageX,
            g.currentY = e.pageY,
            g.lastX = e.pageX,
            g.lastY = e.pageY)
        }
        function l(e) {
            !0 === I && (e = d(e).e,
            g.currentX = e.pageX,
            g.currentY = e.pageY,
            !1 === O) && (O = !0,
            requestAnimationFrame(de))
        }
        function de() {
            var e, t, i;
            !0 === I && (e = g.currentX - g.lastX,
            t = g.currentY - g.lastY,
            g.lastX = g.currentX,
            g.lastY = g.currentY,
            i = null,
            t > u.mouseScrollSensitivityY ? i = "insertRows" : t < -u.mouseScrollSensitivityY && (i = "amendRows"),
            e > u.mouseScrollSensitivityX ? i = "insertDays" : e < -u.mouseScrollSensitivityX && (i = "amendDays"),
            null != i && (clearTimeout(m),
            B = !1),
            n(i),
            O = !1)
        }
        function ce(e) {
            !(T = !1) !== x && (g.event = e,
            !1 === R && (R = !0,
            requestAnimationFrame(ue)),
            eviivo.pms.diary.noteTooltip.endRequestByKey())
        }
        function ue() {
            var e;
            27 === g.event.keyCode ? se() : (e = null,
            37 === g.event.keyCode && (e = "insertDays"),
            39 === g.event.keyCode && (e = "amendDays"),
            38 === g.event.keyCode && (e = "insertRows"),
            n(e = 40 === g.event.keyCode ? "amendRows" : e),
            R = !1)
        }
        function ve(e) {
            !0 !== T && ((g.event = e).preventDefault(),
            e.stopImmediatePropagation(),
            !1 === _) && (_ = !0,
            requestAnimationFrame(pe))
        }
        function pe() {
            var e = function(e) {
                if (e.wheelDelta)
                    return {
                        delta: e.wheelDelta,
                        isTouchpad: !1
                    };
                if (e.originalEvent && e.originalEvent.wheelDeltaX && 0 !== e.originalEvent.wheelDeltaX)
                    return {
                        delta: e.originalEvent.wheelDeltaX,
                        isXMove: !0,
                        isTouchpad: !0
                    };
                if (e.originalEvent && e.originalEvent.wheelDeltaY && 0 !== e.originalEvent.wheelDeltaY)
                    return {
                        delta: e.originalEvent.wheelDeltaY,
                        isYMove: !0,
                        isTouchpad: !0
                    };
                if (e.originalEvent && e.originalEvent.deltaY)
                    return {
                        delta: -40 * e.originalEvent.deltaY,
                        isYMove: !0,
                        isTouchpad: !1
                    };
                if (e.originalEvent && e.originalEvent.deltaX)
                    return {
                        delta: -40 * e.originalEvent.deltaX,
                        isXMove: !0,
                        isTouchpad: !1
                    };
                return null
            }(g.event);
            null != e && (e.delta >= u.mouseWheelSensitivity || e.delta <= -u.mouseWheelSensitivity) && n(0 < e.delta ? !0 === e.isYMove ? "insertRows" : !0 === e.isXMove ? "insertDays" : null : !0 === e.isYMove ? "amendRows" : !0 === e.isXMove ? "amendDays" : null),
            _ = !1
        }
        function n(e) {
            null != e && (M.push(e),
            null == y) && (clearTimeout(y),
            y = setTimeout(ye, u.throttleScrollingSpeed))
        }
        function ye() {
            var e = M.slice(0);
            M = M.slice(e.length),
            p = !1;
            for (var t = 0; t < e.length; t++)
                switch (t === e.length - 1 && (p = !0),
                e[t]) {
                case "amendDays":
                    fe();
                    break;
                case "insertDays":
                    ge();
                    break;
                case "amendRows":
                    we();
                    break;
                case "insertRows":
                    he()
                }
        }
        function s(e, t) {
            p = !1;
            for (var i = 0; i < t; i++)
                switch (i === t - 1 && (p = !0),
                e) {
                case "amendDays":
                    fe();
                    break;
                case "insertDays":
                    ge();
                    break;
                case "amendRows":
                    we();
                    break;
                case "insertRows":
                    he()
                }
        }
        function me(e) {
            var t, i, o = k.startDate = e, n = (void 0 !== history.pushState && (t = {},
            t = eviivo.webcore.queryStringHelper.getAllKeys(window.location.href, t),
            n = (n = o.getMonth() + 1) < 10 ? "0" + n : n,
            i = (i = o.getDate()) < 10 ? "0" + i : i,
            o = o.getFullYear() + "-" + n + "-" + i,
            eviivo.webcore.queryStringHelper.updateKey(t, "startdate", o),
            eviivo.webcore.queryStringHelper.updateHistory(t)),
            a(),
            e);
            n = eviivo.webcore.datetime.evStandardIso8601DateExtended(n),
            eviivo.webcore.queryStringHelper.persistNavigationSegment(n, "startdate", "s-referrer-calendar-persistent")
        }
        function fe() {
            e(1)
        }
        function ge() {
            e(-1)
        }
        function we() {
            Se(1)
        }
        function he() {
            Se(-1)
        }
        function e(e) {
            clearTimeout(y),
            y = null,
            k.startDate.addDays(e),
            k.endDate.addDays(e);
            var t = e < 0 ? k.startDate : k.endDate
              , i = {
                date: t.cloneDateOnly()
            };
            e < 0 ? (D.dates.pop(),
            D.dates.unshift(i),
            N.pop(),
            N.unshift({
                date: t.cloneDateOnly(),
                data: null
            })) : (D.dates.shift(),
            D.dates.push(i),
            N.shift(),
            N.push({
                date: t.cloneDateOnly(),
                data: null
            }));
            for (var o = 0; o < D.emptyGridCells.length; o++)
                D.emptyGridCells[o].data = [],
                D.emptyGridCells[o].data = N.slice(0);
            !1 !== p && (be(),
            ke(),
            c(),
            eviivo.pms.diary.dataLoader.dataLoadThrottle(e, null))
        }
        function be() {
            eviivo.pms.diary.calendarNavigator.setDate(k.startDate)
        }
        function Se(e) {
            clearTimeout(y),
            y = null;
            var t = eviivo.pms.diary.dataLoader.dataHolder();
            e < 0 ? 0 <= k.startRoomIndex + e && (k.startRoomIndex += e,
            k.endRoomIndex += e) : k.endRoomIndex + e <= t.propertiesRoomsMap.length && (k.startRoomIndex += e,
            k.endRoomIndex += e),
            !1 !== p && (ne(t, e),
            i(),
            c(),
            eviivo.pms.diary.dataLoader.dataLoadThrottle(null, e))
        }
        function d(e) {
            return e.originalEvent && e.originalEvent.touches && 0 < e.originalEvent.touches.length ? {
                e: e.originalEvent.touches[0],
                isMobile: !0
            } : e.originalEvent && e.originalEvent.changedTouches && 0 < e.originalEvent.changedTouches.length ? {
                e: e.originalEvent.changedTouches[0],
                isMobile: !0
            } : {
                e: e,
                isMobile: !1
            }
        }
        function i() {
            "function" == typeof j.leftSidePanel && j.leftSidePanel(D.leftSideList, u.isLegacyViewEnabled)
        }
        function ke() {
            "function" == typeof j.gridHeader && j.gridHeader(D.dates, u.weekendStartDate)
        }
        function c() {
            "function" == typeof j.gridBody && j.gridBody(D.emptyGridCells, u.isLegacyViewEnabled)
        }
        var u, v, p, y, m, f, De, g, w, h, b, S, k, D, N, I, B, P, C, T, x, O, R, _, M, j, Ne, Ie, F, Be;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.gridNavigation = window.eviivo.pms.diary.gridNavigation || {},
        window.eviivo.pms.diary.gridNavigation = (g = {
            currentX: null,
            currentY: null,
            lastX: null,
            lastY: null,
            startX: null,
            startY: null,
            keyCode: null
        },
        w = {
            gridHeader: "#grid-header",
            gridBody: "#grid-body",
            roomsList: "#s-rooms-list",
            fakeRoomsList: "#fake-rooms-list",
            trFirst: "tr:first-child",
            thFirst: "th:first-child",
            liFirstPRow: "li.p-row",
            liFirstRRow: "li.r-row",
            datesSelector: ".cp-diary-sidebar",
            gridCellElement: "#grid-body tr td",
            nativeDragPrevent: "body, #grid-body td, #grid-body span",
            noteIcon: "#diary .s-booking-note",
            diary: "#diary"
        },
        h = {
            gridHeader: null,
            gridBody: null,
            roomsList: null,
            fakeRoomsList: null,
            targets: {
                header: {
                    container: null,
                    containerChild: null
                },
                leftSide: {
                    container: null,
                    containerChild: null
                },
                body: {
                    container: null,
                    containerChild: null
                }
            }
        },
        k = {
            viewportColumnLimit: b = null,
            viewportRowLimit: null,
            cellWidth: null,
            cellHeight1: null,
            cellHeight2: null,
            startDate: null,
            endDate: null,
            startRoomIndex: null,
            endRoomIndex: null
        },
        D = {
            dates: [],
            leftSideList: [],
            emptyGridCells: []
        },
        _ = R = O = x = T = C = P = B = I = !(N = []),
        M = [],
        j = {
            gridHeader: null,
            gridBody: null,
            leftSidePanel: null
        },
        Ie = (S = "eviivo.pms.diary.gridNavigation") + ".gridSettings.",
        Be = F = Ne = null,
        {
            gridSettings: function() {
                return k
            },
            dataHolder: function() {
                return D
            },
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw S + ": module depends on jQuery";
                u = (v = jQuery).extend(De, e),
                f = Ie + u.localStorageKeySuffix;
                for (var t = Ie + u.localStorageKeySuffixForUser, i = 0, o = localStorage.length; i < o; ++i) {
                    var n = localStorage.key(i);
                    null != n && -1 < n.indexOf(t) && n !== f && localStorage.removeItem(n)
                }
                A(),
                b = {
                    mousewheel: eviivo.util.namespacedEvent("wheel", S),
                    keydown: eviivo.util.namespacedEvent("keydown", S),
                    keyup: eviivo.util.namespacedEvent("keyup", S),
                    touchstart: eviivo.util.namespacedEvent("touchstart", S),
                    touchmove: eviivo.util.namespacedEvent("touchmove", S),
                    touchend: eviivo.util.namespacedEvent("touchend", S),
                    beforeunload: eviivo.util.namespacedEvent("beforeunload", S),
                    mousedown: eviivo.util.namespacedEvent("mousedown", S),
                    mousemove: eviivo.util.namespacedEvent("mousemove", S),
                    mouseup: eviivo.util.namespacedEvent("mouseup", S),
                    dragstart: eviivo.util.namespacedEvent("dragstart", S),
                    dragover: eviivo.util.namespacedEvent("dragover", S),
                    dragend: eviivo.util.namespacedEvent("dragend", S),
                    mouseover: eviivo.util.namespacedEvent("mouseover", S),
                    mouseleave: eviivo.util.namespacedEvent("mouseleave", S)
                },
                h.contextMenu = eviivo.eagle.contextMenu,
                h.gridHeader = v(w.gridHeader),
                h.gridBody = v(w.gridBody),
                h.roomsList = v(w.roomsList),
                h.fakeRoomsList = v(w.fakeRoomsList),
                h.datesSelector = v(w.datesSelector),
                h.targets.header = {
                    container: h.gridHeader[0],
                    containerChild: h.gridHeader.find(w.trFirst)[0]
                },
                h.targets.leftSide = {
                    container: h.roomsList.parent()[0],
                    containerChild: h.roomsList[0]
                },
                h.targets.body = {
                    container: h.gridBody.parent()[0],
                    containerChild: h.gridBody[0]
                },
                v(w.nativeDragPrevent).on(b.dragstart, V),
                v(w.nativeDragPrevent).on(b.dragover, U),
                v(w.nativeDragPrevent).on(b.dragend, W),
                v(document).on(b.dragend, W),
                v(document).on(b.keydown, ce),
                v(document).on(b.keyup, se),
                v(document).on(b.touchstart, w.gridBody, r),
                v(document).on(b.touchmove, w.gridBody, l),
                v(document).on(b.touchend, le),
                v(document).on(b.mousedown, w.gridBody, r),
                v(document).on(b.mousemove, w.gridBody, l),
                v(document).on(b.mouseup, le),
                v(diary).on(b.mousewheel, w.gridBody, ve),
                v(w.roomsList).on(b.mousewheel, ve),
                v(window).on(b.beforeunload, z),
                eviivo.pms.diary.grid.block.init(),
                e = {
                    permissionsForUser: u.permissionsForUser
                },
                eviivo.pms.diary.grid.addBooking.init(e),
                eviivo.pms.diary.grid.booking.init(),
                eviivo.pms.diary.grid.overbooking.init(),
                eviivo.pms.diary.grid.modifyBooking.init({
                    actions: {
                        preventDraggable: function() {
                            return !1 === C
                        }
                    }
                }),
                v(document).on(b.touchend, w.gridCellElement, q),
                v(document).on(b.mouseup, w.gridCellElement, q),
                eviivo.pms.diary.noteTooltip.init(),
                v(document).on(b.mouseover, w.noteIcon, H),
                v(document).on(b.mouseleave, w.noteIcon, eviivo.pms.diary.noteTooltip.endRequest),
                E(u.isLegacyViewEnabled),
                J(),
                eviivo.pms.diary.calendarNavigator.init({
                    hideDatepickerAfterDateUpdated: !0,
                    actions: {
                        backBack: function() {
                            s("insertDays", null == u.doubleArrowInterval ? k.viewportColumnLimit - 3 : u.doubleArrowInterval)
                        },
                        back: function() {
                            s("insertDays", null == u.singleArrowInterval ? 7 : u.singleArrowInterval)
                        },
                        goToday: function() {
                            L()
                        },
                        forward: function() {
                            s("amendDays", null == u.singleArrowInterval ? 7 : u.singleArrowInterval)
                        },
                        forwardForward: function() {
                            s("amendDays", null == u.doubleArrowInterval ? k.viewportColumnLimit - 3 : u.doubleArrowInterval)
                        },
                        dateSelection: me
                    },
                    setDate: k.startDate
                }),
                e = eviivo.eagle.basePageModelState.userCultureCode.toLowerCase(),
                Ne = {
                    months: eviivo.webcore.formatting.regionals[e].monthNames.medium,
                    days: eviivo.webcore.formatting.regionals[e].dayNames.medium
                },
                void 0 !== eviivo.pms.debugConsole && setTimeout(function() {
                    var t, n, a, r;
                    void 0 !== eviivo.pms.debugConsole && eviivo.pms.debugConsole.addMessage("grid size: " + k.viewportColumnLimit + "(w)x" + k.viewportRowLimit + "(h)"),
                    void 0 !== eviivo.pms.debugConsole && null != (t = eviivo.pms.diary.dataLoader.dataHolder()).propertiesRoomsFullObjects && (n = "<ul>",
                    r = a = 0,
                    v.each(t.propertiesRoomsFullObjects, function(e, i) {
                        var o;
                        !0 !== i.isBlank && (null == i.pid ? (r++,
                        o = 0,
                        v.each(t.propertiesRoomsFullObjects, function(e, t) {
                            t.pid === i.id && o++
                        }),
                        n += "<li>  - " + i.lt1 + ":     " + o + " rooms</li>") : a++)
                    }),
                    n = (n += "<li>    <b>(total properties: " + r + ")</b></li>") + "<li>    <b>(total rooms: " + a + ")</b></li></ul>",
                    eviivo.pms.debugConsole.addMessage(n))
                }, 2500),
                a(!0)
            },
            gridHeaderStateChangeHandler: function(e) {
                j.gridHeader = e
            },
            gridBodyStateChangeHandler: function(e) {
                j.gridBody = e
            },
            leftSidePanelStateChangeHandler: function(e) {
                j.leftSidePanel = e
            },
            generateLeftSidePanelDataArray: ae,
            reRenderGridBody: c,
            renderGrid: te,
            changeScrollingSettings: function(e) {
                u = v.extend({}, u, e)
            },
            reRenderDiary: function(e) {
                ee(e, null),
                a(),
                ae(),
                te()
            },
            extractElementData: X,
            resetHandlers: t,
            clearGridPositionSettings: A,
            resetGridSettingsYAxis: function() {
                k.startRoomIndex = 0,
                Z()
            },
            preventKeyDownScroll: function() {
                x = !0
            },
            reEnableKeyDownScroll: function() {
                x = !1
            },
            canViewBooking: function() {
                return u.permissionsForUser.ViewBooking
            },
            reRenderGridHeader: ke,
            changeWeekendStartDate: function(e) {
                u.weekendStartDate = e,
                o()
            },
            reRenderGridLeftSidePanel: i,
            initDiaryNotes: E,
            moveToToday: L,
            legacyViewEnabled: function() {
                var e;
                return null == (e = u) ? void 0 : e.isLegacyViewEnabled
            },
            DEFAULT_NAVIGATION_OPTIONS: De = {
                mouseWheelSensitivity: 100,
                mouseScrollSensitivityX: 10,
                mouseScrollSensitivityY: 5,
                throttleScrollingSpeed: 5,
                mouseDownTimerInterval: 900,
                isLegacyViewEnabled: !0,
                weekendStartDate: "sat",
                overScrollRowLimit: 5
            }
        })
console.log(u)   
   },
    1773: function() {
        function t(e) {
            var e = o(e.target)
              , t = e.closest("li").attr("data-id");
            null == t && (t = 0 < (e = e.parents(a.leftSidePanelItem)).length ? e.attr("data-id") : null),
            "function" == typeof i.onCollapse && i.onCollapse(parseInt(t))
        }
        var i, o, n, a, r, l, s, d;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.leftSidePanel = window.eviivo.pms.diary.leftSidePanel || {},
        window.eviivo.pms.diary.leftSidePanel.collapse = (n = {},
        a = {
            leftSidePanel: "#room-list",
            leftSidePanelItem: "#room-list li.p-row-toggle"
        },
        r = {
            leftSidePanel: null
        },
        l = null,
        d = !(s = "eviivo.pms.diary.leftSidePanel.collapse"),
        {
            init: function(e) {
                if (!0 !== d) {
                    if ("function" != typeof jQuery)
                        throw s + ": module depends on jQuery";
                    i = (o = jQuery).extend(n, e),
                    l = {
                        click: eviivo.util.namespacedEvent("click", s),
                        touchend: eviivo.util.namespacedEvent("touchend", s)
                    },
                    r.leftSidePanel = o(a.leftSidePanel),
                    jQuery(document.body).on(l.click, a.leftSidePanelItem, t),
                    jQuery(document.body).on(l.touchend, a.leftSidePanelItem, t),
                    d = !0
                }
            }
        })
    },
    6392: function() {
        function o(e) {
            e = e.replace(/(?:\r\n|\r|\n)/g, "<br />"),
            null != r && r.element.find(l.note).attr("title", e).attr("data-tooltip", "title").attr("data-tooltip-title", e).attr("data-tooltip-pos", "top"),
            null != r && r.element.find(l.note).trigger("mouseover")
        }
        var t, n, a, r, e, i, l, s;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.noteTooltip = (e = null,
        i = {
            delay: 1e3
        },
        l = {
            note: ".s-booking-note"
        },
        s = {
            getBookingNote: {
                url: eviivoSuiteApp + "/diarydata/GetBookingNote",
                actionId: "diary.getBookingNote_"
            }
        },
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw "eviivo.pms.diary.noteTooltip: module depends on jQuery";
                n = (t = jQuery).extend(i, e)
            },
            queueRequest: function(i) {
                null != r && i.elementId == r.elementId || (e = setTimeout(function() {
                    var e, t;
                    e = (r = i).id,
                    t = r.businessId,
                    a = s.getBookingNote.actionId + e,
                    eviivo.webcore.ajaxHelper.executeAjax({
                        actionId: a,
                        url: s.getBookingNote.url,
                        method: eviivo.webcore.ajaxHelper.methods.POST,
                        dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                        contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                        data: {
                            businessId: t,
                            bookingId: e
                        },
                        callback: o
                    })
                }, n.delay))
            },
            endRequest: function() {
                eviivo.webcore.ajaxHelper.abortAjax(a),
                clearTimeout(e),
                null != r && t(r.element).find(l.note).removeAttr("title").removeAttr("data-tooltip").removeAttr("data-tooltip-title").removeAttr("data-tooltip-pos"),
                r = null
            },
            endRequestByKey: function() {
                null != r && r.element.find(l.note).trigger("mouseleave")
            }
        })
    },
    4577: function() {
        function a(e) {
            return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function t(t, e) {
            var i, o = Object.keys(t);
            return Object.getOwnPropertySymbols && (i = Object.getOwnPropertySymbols(t),
            e && (i = i.filter(function(e) {
                return Object.getOwnPropertyDescriptor(t, e).enumerable
            })),
            o.push.apply(o, i)),
            o
        }
        function o(o) {
            for (var e = 1; e < arguments.length; e++) {
                var n = null != arguments[e] ? arguments[e] : {};
                e % 2 ? t(Object(n), !0).forEach(function(e) {
                    var t, i;
                    t = o,
                    i = n[e = e],
                    (e = function(e) {
                        e = function(e, t) {
                            if ("object" !== a(e) || null === e)
                                return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 === i)
                                return ("string" === t ? String : Number)(e);
                            i = i.call(e, t || "default");
                            if ("object" !== a(i))
                                return i;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }(e, "string");
                        return "symbol" === a(e) ? e : String(e)
                    }(e))in t ? Object.defineProperty(t, e, {
                        value: i,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = i
                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(o, Object.getOwnPropertyDescriptors(n)) : t(Object(n)).forEach(function(e) {
                    Object.defineProperty(o, e, Object.getOwnPropertyDescriptor(n, e))
                })
            }
            return o
        }
        function e(e) {
            n(),
            eviivo.component.flyout.hideFlyout(k.singlePropertyNoteFlyout.replace("#", ""), e)
        }
        function i() {
            return D.propertyNoteEditNote.val()
        }
        function n() {
            b == S.stackedSingleProperty && (b = S.multiProperty),
            g = null
        }
        function r() {
            D.singlePropertyFlyoutHeader.text(w)
        }
        function l() {
            y();
            var e = eviivo.pms.diary.notes.manager.getScopedNote()
              , t = null != (null == e ? void 0 : e.Content) ? e.Content.replace(/<br\s*\/?>/g, "\n") : ""
              , t = (D.propertyNoteEditNote.val(t),
            D.propertyNoteUpdatedDate.text(null != (null == e ? void 0 : e.LastUpdated) ? e.LastUpdated : ""),
            null != (null == e ? void 0 : e.LastUpdated));
            D.propertyNoteUpdatedDateLabel.toggle(t),
            t = e.Date,
            r(),
            D.singlePropertyFlyoutHeader.append(" - " + eviivo.webcore.datetime.parse.parseDate(t).evDisplayMediumDate(f.currentCulture)),
            null != g && D.singlePropertyFlyoutHeader.append(g),
            d(!s()),
            v(eviivo.webcore.datetime.parse.parseDate(e.Date), D.singlePropertyDatePicker)
        }
        function s() {
            return null == eviivo.pms.diary.notes.manager.getScopedNote().Content ? f.userCanAddNote : f.userCanModifyNote
        }
        function d(e) {
            e ? (D.propertyNoteEditNote.attr("readonly", "readonly"),
            D.propertyNoteSaveButton.hide()) : (D.propertyNoteEditNote.prop("readonly", !1),
            D.propertyNoteSaveButton.show())
        }
        function c(e, t) {
            h || (v(e, t),
            t = function(t) {
                if (null == b)
                    throw new Error("getLoadDataFuncForDateChange: current flyout type has not been set");
                var i = function() {
                    if (null != b)
                        return b == S.multiProperty ? function() {}
                        : function(e, t) {
                            e = eviivo.pms.diary.notes.manager.prepareScopedNoteAfterRequest(e, t);
                            eviivo.pms.diary.notes.manager.setScopedNote(e),
                            l(),
                            p()
                        }
                        ;
                    throw new Error("getLoadDataFuncForDateChange: current flyout type has not been set")
                }();
                return b == S.multiProperty ? function() {
                    var e = eviivo.pms.diary.notes.manager.getScopedNote();
                    eviivo.pms.diary.notes.manager.setScopedNote(o(o({}, e), {}, {
                        Date: eviivo.webcore.datetime.evStandardIso8601DateExtended(t)
                    })),
                    eviivo.pms.diary.notes.listing.renderListing()
                }
                : function() {
                    var e = eviivo.pms.diary.notes.manager.getScopedNote();
                    eviivo.pms.diary.notes.manager.getNote(e.BusinessId, eviivo.webcore.datetime.evStandardIso8601DateExtended(t), i, p)
                }
            }(e),
            h = !0,
            t())
        }
        function u(e) {
            switch (e) {
            case S.singleProperty:
                return D.singlePropertyDatePicker;
            case S.multiProperty:
                return D.multiPropertyDatePicker;
            case S.stackedSingleProperty:
                return D.singlePropertyDatePicker;
            default:
                throw new Error("invalid flyout type of ".concat(e, " provided to getCalendarElementFromType"))
            }
        }
        function v(e, t) {
            t.datepicker("setDate", e)
        }
        function p() {
            h = !1
        }
        function y() {
            $(document).off("click", k.datepicker.todayButton).on("click", k.datepicker.todayButton, function(e) {
                var t;
                t = b,
                c(new Date, u(t))
            })
        }
        function m() {
            $(document).off("click", k.datepicker.todayButton).on("click", k.datepicker.todayButton, eviivo.pms.diary.gridNavigation.moveToToday)
        }
        var f, g, w, h, b, S, k, D;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.notes = window.eviivo.pms.diary.notes || {},
        window.eviivo.pms.diary.notes.flyout = (S = {
            singleProperty: "single",
            multiProperty: "multi",
            stackedSingleProperty: "stacked"
        },
        D = {
            singlePropertyDatePicker: b = null,
            multiPropertyDatePicker: null,
            singlePropertyFlyoutHeader: null,
            propertyNoteUpdatedDateLabel: null,
            propertyNoteEditNote: null,
            propertyNoteSaveButton: null,
            propertyNoteUpdatedDate: null,
            datepickerSinglePropertyMask: null,
            datepickerMultiPropertyMask: null,
            singlePropertyDatePickerWrapper: null,
            multiPropertyListingHeader: null,
            multiPropertyDataPickerWrapper: null
        },
        {
            init: function(e) {
                f = $.extend(f, e),
                D.singlePropertyDatePicker = $(k.datepicker.singleProperty.calendar),
                D.multiPropertyDatePicker = $(k.datepicker.multiProperty.calendar),
                D.singlePropertyFlyoutHeader = $(k.singlePropertyNoteFlyout + " " + k.flyoutHeading),
                D.propertyNoteUpdatedDateLabel = $("span" + k.propertyNoteUpdatedDateLabel),
                D.propertyNoteEditNote = $("textarea" + k.propertyNoteEditNote),
                D.propertyNoteSaveButton = $(k.propertyNoteSaveButton),
                D.propertyNoteUpdatedDate = $(k.propertyNoteUpdatedDate),
                D.datepickerSinglePropertyMask = $(k.datepicker.singleProperty.mask),
                D.datepickerMultiPropertyMask = $(k.datepicker.multiProperty.mask),
                D.singlePropertyDatePickerWrapper = $(k.datepicker.singleProperty.wrapper),
                D.multiPropertyListingHeader = $(k.multiPropertyListingHeader),
                D.multiPropertyDataPickerWrapper = $(k.datepicker.multiProperty.wrapper),
                w = D.singlePropertyFlyoutHeader.text(),
                eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar, {
                    defaultCultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                    calendar: D.singlePropertyDatePicker,
                    yearRange: "-4:+5",
                    dateFormat: eviivo.eagle.dateFormat.getDateFormat("SHORT_YEAR"),
                    changeMonth: !0,
                    changeYear: !0,
                    showButtonPanel: !0,
                    altFormat: eviivo.eagle.dateFormat.getDateFormat("NO_YEAR"),
                    altField: k.datepicker.singleProperty.mask,
                    onSelect: function(e, t) {
                        c(new Date(t.selectedYear,t.selectedMonth,parseInt(t.selectedDay),0,0,0), D.singlePropertyDatePicker)
                    }
                }),
                eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar, {
                    defaultCultureCode: eviivo.eagle.basePageModelState.userCultureCode,
                    calendar: D.multiPropertyDatePicker,
                    yearRange: "-4:+5",
                    dateFormat: eviivo.eagle.dateFormat.getDateFormat("SHORT_YEAR"),
                    changeMonth: !0,
                    changeYear: !0,
                    showButtonPanel: !0,
                    altFormat: eviivo.eagle.dateFormat.getDateFormat("NO_YEAR"),
                    altField: k.datepicker.multiProperty.mask,
                    onSelect: function(e, t) {
                        c(new Date(t.selectedYear,t.selectedMonth,parseInt(t.selectedDay),0,0,0), D.singlePropertyDatePicker)
                    }
                }),
                null != D.datepickerSinglePropertyMask && D.datepickerSinglePropertyMask.on("click", function() {
                    D.singlePropertyDatePicker.datepicker("show")
                }),
                null != D.datepickerMultiPropertyMask && D.datepickerMultiPropertyMask.on("click", function() {
                    D.multiPropertyDatePicker.datepicker("show")
                }),
                0
            },
            openStackedNoteFlyout: function(e, t, i, o, n) {
                b = S.stackedSingleProperty,
                eviivo.pms.diary.notes.manager.setScopedNote(0 === e || "0" === e ? {
                    Date: n,
                    BusinessId: i
                } : {
                    Date: n,
                    Content: t,
                    Id: e,
                    BusinessId: i,
                    LastUpdated: o
                }),
                d(!s()),
                eviivo.component.flyout.showFlyout(k.singlePropertyNoteFlyout)
            },
            multiPropertyFlyoutOnShow: function() {
                y();
                var e = eviivo.pms.diary.notes.manager.getScopedNote();
                D.multiPropertyDatePicker.datepicker("setDate", eviivo.webcore.datetime.parse.parseDate(e.Date))
            },
            multiPropertyFlyoutOnClose: function() {
                m(),
                eviivo.pms.diary.gridNavigation.resetHandlers(),
                eviivo.pms.diary.notes.listing.clear(),
                eviivo.pms.diary.dataLoader.checkForNoteDataChanges()
            },
            singlePropertyFlyoutOnShow: l,
            singlePropertyFlyoutOnClose: function() {
                b == S.singleProperty && (m(),
                eviivo.pms.diary.gridNavigation.resetHandlers()),
                n(),
                r(),
                eviivo.pms.diary.dataLoader.checkForNoteDataChanges()
            },
            openNoteFlyout: function() {
                eviivo.pms.diary.gridNavigation.preventKeyDownScroll(),
                eviivo.pms.diary.notes.manager.diaryViewIsForSingleProperty() ? (b = S.singleProperty,
                D.singlePropertyDatePickerWrapper.show(),
                eviivo.component.flyout.showFlyout(k.singlePropertyNoteFlyout)) : (b = S.multiProperty,
                D.singlePropertyDatePickerWrapper.hide(),
                eviivo.pms.diary.notes.listing.renderListing(),
                eviivo.component.flyout.showFlyout(k.multiPropertyNoteFlyout))
            },
            hideSinglePropertyFlyout: e,
            getNoteContentFromSinglePropertyFlyout: i,
            setBusinessNameForFlyoutHeading: function(e) {
                g = " - " + e
            },
            resetFlyoutHeaderText: r,
            discardUnsavedChanges: function() {
                n(),
                r(),
                e(!1)
            },
            singlePropertyFlyoutOnConfirmClose: function() {
                var e = null == (e = i()) ? void 0 : e.replace(/(?:\r\n|\r|\n)/g, "<br/>");
                return "" == e && (e = null),
                {
                    canClose: !(e = eviivo.pms.diary.notes.manager.checkUnsavedChanges(e)),
                    message: e ? f.resources.UnsavedChanges : "",
                    cancelButton: e ? "<button class='btn btn-secondary s-note-discard-changes' type='button' onclick='eviivo.pms.diary.notes.flyout.discardUnsavedChanges()'> ".concat(f.resources.Discard, " </button>") : "",
                    saveButton: e ? "<button class='btn btn-right' type='button' onclick='eviivo.pms.diary.notes.manager.submitNote()'> ".concat(f.resources.Save, " </button>") : ""
                }
            },
            backDate: function(e) {
                var t = (e = u(e)).datepicker("getDate");
                t.setDate(t.getDate() - 1),
                c(t, e)
            },
            forwardDate: function(e) {
                var t = (e = u(e)).datepicker("getDate");
                t.setDate(t.getDate() + 1),
                c(t, e)
            },
            finishProcessing: p,
            hasInitialised: h = !(k = {
                singlePropertyNoteFlyout: "#single-diary-notes-flyout",
                multiPropertyNoteFlyout: "#multi-diary-notes-flyout",
                propertyNoteUpdatedDate: ".s-diary-note-updated",
                propertyNoteEditNote: ".s-edit-diary-note",
                propertyNoteSaveButton: "#single-diary-notes-flyout_flyoutSave",
                propertyNoteUpdatedDateLabel: ".s-diary-note-updated-label",
                flyoutHeading: ".s-heading-title",
                multiPropertyListingHeader: ".s-multi-notes-header",
                datepicker: {
                    todayButton: ".ui-datepicker-buttonpane button[data-handler='today']",
                    singleProperty: {
                        calendar: "#diary-notes-single-calendar",
                        back: "#diary-notes-single-calendar-back",
                        today: "#diary-notes-single-calendar-today",
                        forward: "#diary-notes-single-calendar-forward",
                        mask: "#diary-notes-single-calendar-mask",
                        wrapper: "#diary-notes-single-calendar-wrapper"
                    },
                    multiProperty: {
                        calendar: "#diary-notes-multi-calendar",
                        back: "#diary-notes-multi-calendar-back",
                        today: "#diary-notes-multi-calendar-today",
                        forward: "#diary-notes-multi-calendar-forward",
                        mask: "#diary-notes-multi-calendar-mask",
                        wrapper: ".s-multi-note-datepicker-wrapper"
                    }
                }
            }),
            userShouldHaveReadOnlyView: s,
            setDiaryNoteFormReadonly: d,
            postMultiListingDataLoadElementInit: function() {
                D.multiPropertyDataPickerWrapper.appendTo(D.multiPropertyListingHeader)
            }
        })
    },
    3532: function() {
        var t, i;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.notes = window.eviivo.pms.diary.notes || {},
        window.eviivo.pms.diary.notes.listing = (t = {
            multiPropertyNoteTable: "#eviivo-list-multi-diary-notes",
            contentCellSelectorFromRow: "td:eq(1)",
            actionsSelectorFromRow: "td:last a:last, td:last a:nth-last-child(2)"
        },
        i = "#icon-ic-note-pencil",
        {
            ajaxDataCallback: function() {
                return JSON.stringify({
                    businessIds: eviivo.pms.diary.notes.manager.propertyIdsVisibleInDiary(),
                    date: eviivo.pms.diary.notes.manager.getScopedNote().Date
                })
            },
            renderListing: function() {
                eviivo.component.listing.postInitRefreshDataTableSpecific(t.multiPropertyNoteTable)
            },
            onDataLoad: function() {
                eviivo.component.listing.getAllRows(t.multiPropertyNoteTable).each(function() {
                    var e = $(this).find(t.contentCellSelectorFromRow).html();
                    null != e && "" != e || ((e = $(this).find(t.actionsSelectorFromRow)).last().remove(),
                    e.first().find("use").attr("href", i))
                }),
                eviivo.pms.diary.notes.flyout.postMultiListingDataLoadElementInit(),
                eviivo.pms.diary.notes.flyout.finishProcessing()
            },
            clear: function() {
                eviivo.component.listing.clear(t.multiPropertyNoteTable)
            },
            onEdit: function(e) {
                var t = (r = $(this).closest("tr")).find("td:nth-child(2)").html()
                  , i = r.data("bid")
                  , o = r.data("id")
                  , n = r.data("upt")
                  , a = r.data("dt")
                  , r = r.find("td:first").text();
                eviivo.pms.diary.notes.flyout.setBusinessNameForFlyoutHeading(r),
                eviivo.pms.diary.notes.flyout.openStackedNoteFlyout(o, t, i, n, eviivo.webcore.datetime.evStandardIso8601DateExtended(new Date(a)))
            },
            resetFilters: function() {
                var e = eviivo.component.listing.getNamedDataTableInstance(t.multiPropertyNoteTable.replace("#", "")).dataTable;
                eviivo.component.listing.filter.updateEveryColumnFilter(e)
            }
        })
    },
    3791: function() {
        function a(e) {
            return (a = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                return typeof e
            }
            : function(e) {
                return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
            }
            )(e)
        }
        function t(t, e) {
            var i, o = Object.keys(t);
            return Object.getOwnPropertySymbols && (i = Object.getOwnPropertySymbols(t),
            e && (i = i.filter(function(e) {
                return Object.getOwnPropertyDescriptor(t, e).enumerable
            })),
            o.push.apply(o, i)),
            o
        }
        function i(o) {
            for (var e = 1; e < arguments.length; e++) {
                var n = null != arguments[e] ? arguments[e] : {};
                e % 2 ? t(Object(n), !0).forEach(function(e) {
                    var t, i;
                    t = o,
                    i = n[e = e],
                    (e = function(e) {
                        e = function(e, t) {
                            if ("object" !== a(e) || null === e)
                                return e;
                            var i = e[Symbol.toPrimitive];
                            if (void 0 === i)
                                return ("string" === t ? String : Number)(e);
                            i = i.call(e, t || "default");
                            if ("object" !== a(i))
                                return i;
                            throw new TypeError("@@toPrimitive must return a primitive value.")
                        }(e, "string");
                        return "symbol" === a(e) ? e : String(e)
                    }(e))in t ? Object.defineProperty(t, e, {
                        value: i,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[e] = i
                }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(o, Object.getOwnPropertyDescriptors(n)) : t(Object(n)).forEach(function(e) {
                    Object.defineProperty(o, e, Object.getOwnPropertyDescriptor(n, e))
                })
            }
            return o
        }
        function o(e) {
            return $(e).attr(S.date)
        }
        function n(e) {
            f = e
        }
        function r(e) {
            w = e;
            var t = $(e.target);
            c() ? h || (h = !0,
            v(parseInt(b.getBIdInSinglePropertyDiary(t)), b.getDate(t), function(e, t) {
                n(p(e, t)),
                eviivo.pms.diary.notes.flyout.openNoteFlyout(),
                h = !1
            }, function() {
                h = !1
            })) : (n(i(i({}, f), {}, {
                Date: b.getDate(t)
            })),
            eviivo.pms.diary.notes.flyout.openNoteFlyout(e))
        }
        function l(e) {
            e.stopPropagation(),
            e.preventDefault(),
            w = e;
            var i = $(e.target);
            c() && i.hasClass("s-i-note") && null == i.data(S.noteId) && v(parseInt(b.getBIdInSinglePropertyDiary(i)), b.getDate(i), function(e, t) {
                var e = p(e, t);
                t = e,
                (e = i).attr(S.noteId, t.Id),
                e.attr(S.lastUpdated, t.LastUpdated),
                e.attr(S.id, t.Id),
                e.attr(S.businessId, t.BusinessId),
                e.attr(S.tip, t.Content)
            })
        }
        function s(e) {
            g = setTimeout(function() {
                l(e)
            }, k)
        }
        function d() {
            var e;
            clearTimeout(g),
            "mouseenter" === (null == (e = w) ? void 0 : e.type) && eviivo.webcore.ajaxHelper.abortAjax("getNotes")
        }
        function c() {
            var e;
            return (null == (e = u()) ? void 0 : e.length) <= 1
        }
        function u() {
            var e = eviivo.pms.diary.dataLoader.dataHolder();
            return null != e && e.propertiesRoomsMap && Array.isArray(e.propertiesRoomsMap) ? e.propertiesRoomsMap.filter(function(e) {
                return e && e.startsWith("p_")
            }).map(function(e) {
                e = e.replace(/^p_/, ""),
                e = parseFloat(e);
                return isNaN(e) ? null : e
            }).filter(function(e) {
                return null !== e
            }) : []
        }
        function v(e, t, i) {
            var o = 3 < arguments.length && void 0 !== arguments[3] ? arguments[3] : null
              , n = {
                BusinessId: e,
                Date: t
            };
            eviivo.webcore.ajaxHelper.executeAjax({
                url: eviivoSuiteApp + "/api/diarynotes/get",
                data: n,
                actionId: "eviivo.pms.diary.notes.manager_getNote_" + n.BusinessId + "_" + n.Date,
                method: eviivo.webcore.ajaxHelper.methods.POST,
                contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                callback: function(e) {
                    null != i && "function" == typeof i && i(e, n)
                },
                failCallback: function() {
                    window.eviivo.webcore.notifier.show({
                        type: window.eviivo.webcore.notifier.types.error,
                        message: eviivo.eagle.translations.resources.notify.genericErrorMessage
                    }),
                    null != o && "function" == typeof o && o()
                }
            })
        }
        function p(e, t) {
            var i, o = Array.isArray(e);
            return {
                Content: o ? null == (i = e[0]) ? void 0 : i.Content : null == e ? void 0 : e.Content,
                Id: o ? null == (i = e[0]) ? void 0 : i.Id : null == e ? void 0 : e.Id,
                Date: o ? null != (i = null == (i = e[0]) ? void 0 : i.Date) ? i : t.Date : null != (i = null == e ? void 0 : e.Date) ? i : t.Date,
                BusinessId: o ? null != (i = null == (i = e[0]) ? void 0 : i.BusinessId) ? i : t.BusinessId : null != (i = null == e ? void 0 : e.BusinessId) ? i : t.BusinessId,
                LastUpdated: o ? null == (i = e[0]) ? void 0 : i.UpdatedFullDisplay : null == e ? void 0 : e.UpdatedFullDisplay
            }
        }
        function y() {
            document.querySelectorAll(b.tableHeader + " " + b.notesSelector + " div").forEach(function(e) {
                (e = e).parentNode.removeAttribute(S.tip),
                e.removeAttribute(S.lastUpdated)
            })
        }
        var m, f, g, w, h, b, S, k;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.notes = window.eviivo.pms.diary.notes || {},
        window.eviivo.pms.diary.notes.manager = (h = !1,
        b = {
            notesSelector: ".s-i-note",
            saveNote: "#save-note",
            clearNote: "#clear-note",
            closeNote: ".s-close",
            popUpAddNote: "#popup-add-note",
            diaryNoteTxtArea: "#txtDiaryNoteArea",
            tableHeader: "th",
            discardChangesButton: ".s-note-discard-changes",
            unsavedChangesWarn: ".notifyjs-withTwoActions-base"
        },
        S = {
            date: "data-date",
            businessId: "data-bid",
            noteId: "data-id",
            id: "id",
            lastUpdated: "data-updt",
            tip: "data-tip"
        },
        k = 1e3,
        {
            init: function(e) {
                m = $.extend(m, e),
                Object.assign(b, {
                    getDate: null == m.getDateForNoteFunc ? o : m.getDateForNoteFunc,
                    getBIdInSinglePropertyDiary: m.getBIdInSinglePropertyDiary
                }),
                $(document).on("click", b.notesSelector, r),
                $(document).on("mouseenter", b.notesSelector, s),
                $(document).on("mouseleave", b.notesSelector, d),
                eviivo.pms.diary.notes.flyout.hasInitialised || eviivo.pms.diary.notes.flyout.init(m)
            },
            resetTableHeaderNoteDataAttributes: y,
            submitNote: function() {
                f.Content = eviivo.pms.diary.notes.flyout.getNoteContentFromSinglePropertyFlyout();
                var e = null == f.Id
                  , t = {
                    data: i(i({}, f), {}, {
                        Content: null == (t = f.Content) ? void 0 : t.replace(/(?:\r\n|\r|\n)/g, "<br/>")
                    }),
                    method: eviivo.webcore.ajaxHelper.methods.POST,
                    contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                    dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                    callback: function(e) {
                        !0 === e ? (c() || (eviivo.pms.diary.notes.listing.renderListing(),
                        eviivo.pms.diary.notes.listing.resetFilters(),
                        eviivo.pms.diary.notes.flyout.resetFlyoutHeaderText()),
                        eviivo.webcore.notifier.show({
                            type: window.eviivo.webcore.notifier.types.success,
                            message: eviivo.eagle.translations.resources.notify.saveSuccessText
                        }),
                        eviivo.pms.diary.notes.flyout.hideSinglePropertyFlyout(!1),
                        y(),
                        eviivo.pms.diary.dataLoader.checkForNoteDataChanges(),
                        e = !eviivo.pms.diary.notes.flyout.userShouldHaveReadOnlyView(),
                        eviivo.pms.diary.notes.flyout.setDiaryNoteFormReadonly(!e)) : window.eviivo.webcore.notifier.show({
                            type: window.eviivo.webcore.notifier.types.error,
                            message: eviivo.eagle.translations.resources.notify.genericErrorMessage
                        })
                    },
                    failCallback: function() {
                        window.eviivo.webcore.notifier.show({
                            type: window.eviivo.webcore.notifier.types.error,
                            message: eviivo.eagle.translations.resources.notify.genericErrorMessage
                        })
                    }
                };
                e ? (t.url = eviivoSuiteApp + "/api/diarynotes/add",
                t.actionId = "addNote") : (t.url = eviivoSuiteApp + "/api/diarynotes/modify",
                t.actionId = "modifyNote"),
                eviivo.webcore.ajaxHelper.executeAjax(t)
            },
            propertyIdsVisibleInDiary: u,
            diaryViewIsForSingleProperty: c,
            getScopedNote: function() {
                return f
            },
            setScopedNote: n,
            checkUnsavedChanges: function(e) {
                return e != f.Content
            },
            getNote: v,
            reset: function() {
                $(document).off("click", b.notesSelector, onNoteClickOrHoverHandler),
                $(document).off("mouseenter", b.notesSelector, s),
                $(document).off("mouseleave", b.notesSelector, d),
                delete b.getDate,
                delete b.getBIdInSinglePropertyDiary
            },
            prepareScopedNoteAfterRequest: p
        })
    },
    6504: function() {
        function t() {
            c.viewBookingPopup = eviivo.eagle.viewBookingPopup
        }
        function i() {
            if ("undefined" == typeof eviivo || void 0 === eviivo.webcore || void 0 === eviivo.webcore.queryStringHelper)
                throw u + ": module depends on eviivo.webcore.queryStringHelper";
            var e, t = eviivo.webcore.queryStringHelper.getAllKeys(window.location.href), i = t.bookingref, o = t.bookingid, n = t.businessid, a = parseInt(t.viewtype), r = t.guest;
            e = t.fromerrorpage;
            null != i && "" !== i ? (d(o, i, r, n),
            s()) : null != o && "" !== o && (c.viewBookingPopup.showViewBookingPopupByBusinessId(o, a, n),
            s())
        }
        function o() {
            if ("undefined" == typeof eviivo || void 0 === eviivo.webcore || void 0 === eviivo.webcore.queryStringHelper)
                throw u + ": module depends on eviivo.webcore.queryStringHelper";
            var e = eviivo.webcore.queryStringHelper.getAllKeys(window.location.href)
              , t = e.bookingref
              , i = e.bookingid
              , o = e.businessid
              , n = (e.view,
            parseInt(e.viewtype))
              , a = e.guest
              , r = e.startdate
              , e = null != (e = e.fromerrorpage) && e
              , l = eviivo.util.safeFunction("eviivo.pms.diary.calendarNavigator.setDate");
            null != r && "" !== r && null != l && l(new Date(r)),
            null != t && "" !== t ? (d(i, t, a, o),
            s()) : (null != i && "" !== i && (null != o && "" !== o ? eviivo.eagle.basePageModelState.businessId = o : o = eviivo.eagle.basePageModelState.businessId,
            c.viewBookingPopup.showViewBookingPopupByBusinessId(i, n, o),
            s()),
            eviivo.webcore.parsers.stringToBool(e) && s())
        }
        function s() {
            var e;
            history && (e = window.location.href.split("?")[0],
            history.replaceState({}, window.title, e))
        }
        function d(e, t, i, o) {
            null != e && null != t && eviivo.eagle.floatingNotification.showAddBookingNotification({
                ref: t,
                guestName: i,
                bookingId: e,
                businessId: o,
                messageFormat: eviivo.eagle.translations.resources.diary.addBooking.BookingCreatedMessage,
                customAction: c.viewBookingPopup.showViewBookingPopup,
                resources: {
                    BookingCreatedMessage1: eviivo.eagle.translations.resources.diary.addBooking.BookingCreatedMessage1
                }
            })
        }
        var n, c, u;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.pageLoad = (n = {},
        c = {
            viewBookingPopup: null
        },
        u = "eviivo.pms.diary.pageLoad",
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw u + ": module depends on jQuery";
                jQuery.extend(n, e),
                t(),
                setTimeout(o, 2500)
            },
            initBlankViewBookingOnly: function(e) {
                if ("function" != typeof jQuery)
                    throw u + ": module depends on jQuery";
                jQuery.extend(n, e),
                t(),
                setTimeout(i, 500)
            }
        })
    },
    3407: function() {
        function i(e) {
            o(n(this))
        }
        function o(e) {
            if (0 < e.length) {
                var t = e.attr("data-diary_theme");
                if (l.templateSelector.removeClass("active"),
                e.addClass("active"),
                "user-theme" == t ? l.diary.addClass("user-theme") : l.diary.removeClass("user-theme"),
                window.localStorage)
                    try {
                        localStorage.setItem(c, t)
                    } catch (e) {}
            }
        }
        var n, a, r, l, s, d, c;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        eviivo.pms.diary = eviivo.pms.diary || {},
        window.eviivo.pms.diary.themeSwitch = (a = {},
        r = {
            templateSelector: ".s-template-selectors button",
            activeTemplateSelector: ".s-template-selectors button.active",
            diary: ".diary-container"
        },
        l = {
            templateSelector: null,
            activeTemplateSelector: null,
            diary: null
        },
        s = null,
        d = "eviivo.pms.diary.theme",
        c = "".concat(d, ".themeType"),
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw "".concat(d, ": module depends on jQuery");
                (n = jQuery).extend(a, e),
                s = {
                    click: eviivo.util.namespacedEvent("click", d)
                },
                l.diary = n(r.diary),
                l.templateSelector = n(r.templateSelector),
                l.activeTemplateSelector = n(r.activeTemplateSelector),
                l.templateSelector.on(s.click, i);
                var e = l.activeTemplateSelector
                  , t = localStorage.getItem(c);
                0 < (e = null != t ? n(r.templateSelector + '[data-diary_theme="' + t + '"]') : e).length && o(e)
            }
        })
    },
    3870: function() {
        function t() {
            l = {
                viewType: n(s.activeGridViewButton).data(v.diary_view),
                wkndStrtType: n(s.activeGridWkndButton).data(v.diary_wknd)
            },
            eviivo.component.flyout.showFlyout(s.flyout)
        }
        function i(e, t) {
            switch (t) {
            case p.viewType:
                d.gridViewSwitchButtons.removeClass(u.active),
                r[t] = e.data(v.diary_view);
                break;
            case p.wkndStrtType:
                d.gridWkndSwitchButtons.removeClass(u.active),
                r[t] = e.data(v.diary_wknd)
            }
            e.addClass(u.active)
        }
        function o() {
            function e() {
                eviivo.component.flyout.hideFlyout(s.flyout.replace("#", ""))
            }
            var t;
            eviivo.util.areAllNullOrUndefinedOrWhitespace(r) || eviivo.util.objSwallowPropCompare(r, l) ? e() : (t = {
                viewType: r.viewType === l.viewType ? null : r.viewType,
                weekendStartDay: r.wkndStrtType === l.wkndStrtType ? null : r.wkndStrtType
            },
            cb = function() {
                null != t.viewType && (l.viewType = t.viewType),
                null != t.weekendStartDay && (l.wkndStrtType = t.weekendStartDay),
                e()
            }
            ,
            eviivo.pms.diary.viewSwitch.gridViewSwitchButtonHandler(t, cb))
        }
        var n, a, r, l, s, d, c, u, v, p, y;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        window.eviivo.pms.diary = window.eviivo.pms.diary || {},
        window.eviivo.pms.diary.toolbar = (a = {},
        r = {
            wkndStrtType: void 0,
            viewType: void 0
        },
        l = {
            wkndStrtType: void 0,
            viewType: void 0
        },
        s = {
            settingsBtn: "#btnDiarySettings",
            flyout: "#diary-settings",
            gridViewSwitchButtons: ".s-grid-views button",
            gridWkndSwitchButtons: ".s-wknd-selectors button",
            activeGridViewButton: ".s-grid-views button.active",
            activeGridWkndButton: ".s-wknd-selectors button.active",
            dataDiary_view: "data-diary_view",
            dataDiary_wknd: "data-diary_wknd",
            diaryContainer: ".diary-container",
            btnPanoramic: "#btnPanoramic",
            btnStandard: "#btnStandard",
            btnZoom: "#btnZoom"
        },
        d = {
            settingsBtn: null,
            gridViewSwitchButtons: null,
            gridWkndSwitchButtons: null,
            diaryContainer: null
        },
        c = {
            click: null
        },
        u = {
            active: "active"
        },
        v = {
            diary_view: "diary_view",
            diary_wknd: "diary_wknd"
        },
        p = {
            viewType: "viewType",
            wkndStrtType: "wkndStrtType"
        },
        y = "eviivo.pms.diary.toolbar.settings",
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw "".concat(y, ": module depends on jQuery");
                (n = jQuery).extend(a, e),
                c = {
                    click: eviivo.util.namespacedEvent("click", y)
                },
                d.settingsBtn = n(s.settingsBtn),
                d.gridViewSwitchButtons = n(s.gridViewSwitchButtons),
                d.gridWkndSwitchButtons = n(s.gridWkndSwitchButtons),
                d.diaryContainer = n(s.diaryContainer),
                eviivo.pms.diary.viewSwitch.isPanoramic() && d.gridViewSwitchButtons.filter(s.btnPanoramic).addClass(u.active),
                eviivo.pms.diary.viewSwitch.isStandard() && d.gridViewSwitchButtons.filter(s.btnStandard).addClass(u.active),
                eviivo.pms.diary.viewSwitch.isZoom() && d.gridViewSwitchButtons.filter(s.btnZoom).addClass(u.active),
                d.settingsBtn.on(c.click, t),
                d.gridViewSwitchButtons.on(c.click, function(e) {
                    applyUserSettings = eviivo.util.debounce({
                        func: function() {
                            i(n(e.currentTarget), p.viewType),
                            o()
                        },
                        params: "",
                        unique: "saveDiaryDisplaySettings",
                        wait: 200
                    })
                }),
                d.gridWkndSwitchButtons.on(c.click, function(e) {
                    i(n(e.currentTarget), p.wkndStrtType)
                })
            },
            applySettings: o,
            onClose: function() {
                i(n("[".concat(s.dataDiary_wknd, '="').concat(l.wkndStrtType, '"]')), p.wkndStrtType)
            }
        })
    },
    3066: function() {
        function o(e) {
            s.body.removeClass("zoom standard panoramic mobile").addClass(e),
            e = e,
            i.each(r, function(e, t) {
                r[e] = !1
            }),
            r[e] = !0
        }
        function n(e, t, i) {
            eviivo.webcore.ajaxHelper.executeAjax({
                url: eviivoSuiteApp + "/DiaryData/SetDiaryViewUserPreference",
                data: e,
                actionId: d + ".setViewType." + e.viewType,
                method: eviivo.webcore.ajaxHelper.methods.POST,
                contentType: eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,
                dataType: eviivo.webcore.ajaxHelper.dataTypes.JSON,
                callback: function(e) {
                    !0 === e && "function" == typeof t && t()
                },
                failCallback: function() {
                    "function" == typeof i && i()
                },
                duplicateRequestCallBack: function() {
                    "function" == typeof i && i()
                }
            }),
            null != e.viewType && o(e.viewType),
            e.weekendStartDay && eviivo.pms.diary.gridNavigation.changeWeekendStartDate(e.weekendStartDay)
        }
        var t, i, a, r, l, s, d, c;
        window.eviivo = window.eviivo || {},
        window.eviivo.pms = window.eviivo.pms || {},
        eviivo.pms.diary = eviivo.pms.diary || {},
        eviivo.pms.diary.viewSwitch = eviivo.pms.diary.viewSwitch || {},
        window.eviivo.pms.diary.viewSwitch = (r = {
            mobile: !(a = {}),
            zoom: !1,
            standard: !1,
            panoramic: !1
        },
        l = {
            gridViewSwitchButtons: ".s-grid-views button",
            activeGridViewButton: ".s-grid-views button.active"
        },
        s = {
            gridViewSwitchButtons: null,
            activeGridViewButton: null,
            body: null
        },
        c = (d = "eviivo.pms.diary.viewSwitch") + ".viewType",
        getViewTypeFromElement = function(e) {
            return e.attr("data-diary_view")
        }
        ,
        {
            init: function(e) {
                if ("function" != typeof jQuery)
                    throw d + ": module depends on jQuery";
                t = (i = jQuery).extend(a, e),
                events = {
                    click: eviivo.util.namespacedEvent("click", d)
                },
                s.body = i(document.body),
                s.activeGridViewButton = i(l.activeGridViewButton),
                s.gridViewSwitchButtons = i(l.gridViewSwitchButtons),
                null != t.userPreferenceViewType && "" != t.userPreferenceViewType ? o(t.userPreferenceViewType) : null != (e = localStorage.getItem(c)) ? (removeSettingFromStorage = function() {
                    localStorage.removeItem(c)
                }
                ,
                n({
                    viewType: e
                }, removeSettingFromStorage),
                o(e)) : (n({
                    viewType: "standard"
                }),
                o("standard"))
            },
            viewTypes: function() {
                return r
            },
            isZoom: function() {
                return !0 === r.zoom
            },
            isStandard: function() {
                return !0 === r.standard
            },
            isPanoramic: function() {
                return !0 === r.panoramic
            },
            isMobile: function() {
                return !0 === r.mobile
            },
            gridViewSwitchButtonHandler: function(e, t, i) {
                n(e, t, i),
                eviivo.pms.diary.viewSwitch.isPanoramic() || eviivo.pms.diary.viewSwitch.isStandard() || eviivo.pms.diary.viewSwitch.isZoom() ? eviivo.pms.diary.gridNavigation.changeScrollingSettings({
                    mouseWheelSensitivity: eviivo.pms.diary.gridNavigation.DEFAULT_NAVIGATION_OPTIONS.mouseWheelSensitivity,
                    mouseScrollSensitivityX: eviivo.pms.diary.gridNavigation.DEFAULT_NAVIGATION_OPTIONS.mouseScrollSensitivityX,
                    mouseScrollSensitivityY: eviivo.pms.diary.gridNavigation.DEFAULT_NAVIGATION_OPTIONS.mouseScrollSensitivityY,
                    throttleScrollingSpeed: eviivo.pms.diary.gridNavigation.DEFAULT_NAVIGATION_OPTIONS.throttleScrollingSpeed
                }) : eviivo.pms.diary.viewSwitch.isMobile() && eviivo.pms.diary.gridNavigation.changeScrollingSettings({
                    mouseWheelSensitivity: null,
                    mouseScrollSensitivityX: 3,
                    mouseScrollSensitivityY: 3,
                    throttleScrollingSpeed: eviivo.pms.diary.gridNavigation.DEFAULT_NAVIGATION_OPTIONS.throttleScrollingSpeed
                }),
                eviivo.pms.diary.gridNavigation.reRenderDiary(!0)
            }
        })
    },
    339: function() {
        for (var a = 0, e = ["webkit", "moz"], t = 0; t < e.length && !window.requestAnimationFrame; ++t)
            window.requestAnimationFrame = window[e[t] + "RequestAnimationFrame"],
            window.cancelAnimationFrame = window[e[t] + "CancelAnimationFrame"] || window[e[t] + "CancelRequestAnimationFrame"];
        window.requestAnimationFrame || (window.requestAnimationFrame = function(e, t) {
            var i = (new Date).getTime()
              , o = Math.max(0, 16 - (i - a))
              , n = window.setTimeout(function() {
                e(i + o)
            }, o);
            return a = i + o,
            n
        }
        ),
        window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
            clearTimeout(e)
        }
        )
    },
    1156: function() {
        function s(e, t) {
            for (var i = window, o = (e || "").split("."); i && o.length; )
                i = i[o.shift()];
            return "function" == typeof i ? i : (t.push(e),
            Function.constructor.apply(null, t))
        }
        function d(e) {
            return "GET" === e || "POST" === e
        }
        function o(r, e) {
            var o, n, a, l, t;
            (t = r.getAttribute("data-ajax-confirm")) && !window.confirm(t) || (o = c(r.getAttribute("data-ajax-loading")),
            a = parseInt(r.getAttribute("data-ajax-loading-duration"), 10) || 0,
            c.extend(e, {
                type: r.getAttribute("data-ajax-method") || void 0,
                url: r.getAttribute("data-ajax-url") || void 0,
                cache: "true" === (r.getAttribute("data-ajax-cache") || "").toLowerCase(),
                beforeSend: function(e) {
                    var t, i;
                    return t = e,
                    d(i = n) || t.setRequestHeader("X-HTTP-Method-Override", i),
                    !1 !== (t = s(r.getAttribute("data-ajax-begin"), ["xhr"]).apply(r, arguments)) && o.show(a),
                    t
                },
                complete: function() {
                    o.hide(a),
                    s(r.getAttribute("data-ajax-complete"), ["xhr", "status"]).apply(r, arguments)
                },
                success: function(e, t, i) {
                    var o, n, a;
                    o = r,
                    n = e,
                    -1 === (i.getResponseHeader("Content-Type") || "text/html").indexOf("application/x-javascript") && (a = (o.getAttribute("data-ajax-mode") || "").toUpperCase(),
                    c(o.getAttribute("data-ajax-update")).each(function(e, t) {
                        switch (a) {
                        case "BEFORE":
                            c(t).prepend(n);
                            break;
                        case "AFTER":
                            c(t).append(n);
                            break;
                        case "REPLACE-WITH":
                            c(t).replaceWith(n);
                            break;
                        default:
                            c(t).html(n)
                        }
                    })),
                    s(r.getAttribute("data-ajax-success"), ["data", "status", "xhr"]).apply(r, arguments)
                },
                error: function() {
                    s(r.getAttribute("data-ajax-failure"), ["xhr", "status", "error"]).apply(r, arguments)
                }
            }),
            e.data.push({
                name: "X-Requested-With",
                value: "XMLHttpRequest"
            }),
            d(n = e.type.toUpperCase()) || (e.type = "POST",
            e.data.push({
                name: "X-HTTP-Method-Override",
                value: n
            })),
            (t = c(r)).is("form") && "multipart/form-data" == t.attr("enctype") && (l = new FormData,
            c.each(e.data, function(e, t) {
                l.append(t.name, t.value)
            }),
            c("input[type=file]", t).each(function() {
                var i = this;
                c.each(i.files, function(e, t) {
                    l.append(i.name, t)
                })
            }),
            c.extend(e, {
                processData: !1,
                contentType: !1,
                data: l
            })),
            c.ajax(e))
        }
        var c, n, a;
        c = jQuery,
        n = "unobtrusiveAjaxClick",
        a = "unobtrusiveAjaxClickTarget",
        c(document).on("click", "a[data-ajax=true]", function(e) {
            e.preventDefault(),
            o(this, {
                url: this.href,
                type: "GET",
                data: []
            })
        }),
        c(document).on("click", "form[data-ajax=true] input[type=image]", function(e) {
            var t = e.target.name
              , i = c(e.target)
              , o = c(i.parents("form")[0])
              , i = i.offset();
            o.data(n, [{
                name: t + ".x",
                value: Math.round(e.pageX - i.left)
            }, {
                name: t + ".y",
                value: Math.round(e.pageY - i.top)
            }]),
            setTimeout(function() {
                o.removeData(n)
            }, 0)
        }),
        c(document).on("click", "form[data-ajax=true] :submit", function(e) {
            var t = e.currentTarget.name
              , i = c(e.target)
              , o = c(i.parents("form")[0]);
            o.data(n, t ? [{
                name: t,
                value: e.currentTarget.value
            }] : []),
            o.data(a, i),
            setTimeout(function() {
                o.removeData(n),
                o.removeData(a)
            }, 0)
        }),
        c(document).on("submit", "form[data-ajax=true]", function(e) {
            var t = c(this).data(n) || []
              , i = c(this).data(a)
              , i = i && (i.hasClass("cancel") || void 0 !== i.attr("formnovalidate"));
            e.preventDefault(),
            !i && (e = c(e = this).data("unobtrusiveValidation")) && e.validate && !e.validate() || o(this, {
                url: this.action,
                type: this.method || "GET",
                data: t.concat(c(this).serializeArray())
            })
        })
    }
}
  , o = {};
function n(e) {
    var t = o[e];
    return void 0 !== t || (t = o[e] = {
        exports: {}
    },
    i[e](t, t.exports, n)),
    t.exports
}
n.n = function(e) {
    var t = e && e.__esModule ? function() {
        return e.default
    }
    : function() {
        return e
    }
    ;
    return n.d(t, {
        a: t
    }),
    t
}
,
n.d = function(e, t) {
    for (var i in t)
        n.o(t, i) && !n.o(e, i) && Object.defineProperty(e, i, {
            enumerable: !0,
            get: t[i]
        })
}
,
n.o = function(e, t) {
    return Object.prototype.hasOwnProperty.call(e, t)
}
,
function() {
    "use strict";
    n(1156),
    n(339),
    n(4190),
    n(3066),
    n(3407),
    n(3870),
    n(4149),
    n(8211),
    n(6346),
    n(5885),
    n(2322),
    n(4333),
    n(3732),
    n(1773),
    n(6504),
    n(6392),
    n(8046),
    n(7518),
    n(594),
    n(3791),
    n(3532),
    n(4577)
}();
//# sourceMappingURL=diary.min.js.map
