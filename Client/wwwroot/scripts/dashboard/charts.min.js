var a={637:function(){function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==d(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);a=a.call(e,t||"default");if("object"!==d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===d(e)?e:String(e)}(r.key),r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(a),t=(e=r?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,v=0;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charts=window.eviivo.pms.charts||{},window.eviivo.pms.charts.donutPieChart={generateChart:function(e,t,a,r,i,o){var e="#"+e,n=jQuery(e);n.html(""),e={bindto:e,data:{columns:a,colors:i,type:t},legend:{position:null!=r.legendPosition&&""!==r.legendPosition?r.legendPosition:"bottom"}},"function"==typeof r.tooltipFormat&&(e.tooltip={format:{value:function(e,t,a){return"percent"===r.tooltipFormatType&&(e=t),r.tooltipFormat(e,r.fractionDigits)}}}),a={},"function"==typeof r.labelFormat?a.label={threshold:.05,format:function(e,t,a){return"percent"===r.labelFormatType&&(e=t),r.labelFormat(e,r.fractionDigits)}}:a.label={threshold:.01,format:function(e,t,a){return""}},null!=o&&(a.title=o),e[t]=a,i=c3.generate(e),jQuery("path.c3-shape").each(function(){var e=jQuery(this),t=e.css("fill"),a=(t=t.substring(4,t.length-1).replace(/[^\d,.]/g,"").split(","))[0],r=t[1],t=t[2],a=128<=(299*a+587*r+114*t)/1e3?"black":"white";e.parent().next().css("fill",a)}),n.data("c3-chart",i)}},a=setTimeout(function e(){var t,n,r,o,i;clearTimeout(a),"object"===("undefined"==typeof preact?"undefined":d(preact))?(t=preact,n=t.h,r=t.render,o=t.Component,i=function(){var e=i,t=o;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var a,r=c(i);function i(e){var t;if(this instanceof i)return(t=r.call(this,e)).state={requestDataUrl:e.requestDataUrl,responseData:{},chartSettings:e.chartSettings,chartId:e.chartId,chartType:e.chartType,containerId:e.containerId,componentKey:e.componentKey},t.loadChart=t.loadChart.bind(u(t)),t;throw new TypeError("Cannot call a class as a function")}return s((e=i).prototype,t=[{key:"loadChart",value:function(e,t,a,r,i){var o,n,s,l,c=[],u={};null!=t&&(n=o=0,s=i.topXValues,(l=null)!=t.ChartSeries)&&(t.ChartSeries.forEach(function(e){var t,a;null!=e.Values&&0<e.Values.length&&(t=eviivo.util.decodedHtml(e.Label),a=!1,null==s||n<s?(c.push([t,e.Values[0]]),a=!0):(null==l&&(l=0),l+=e.Values[0]),a&&((a=null)==(a=null!=i.colorPairs&&null!=e.LabelKey?i.colorPairs[e.LabelKey.toLowerCase()]:a)&&null!=i.colorList&&(a=i.colorList[o],o++),u[t]=a),n++)}),null!=l&&(c.push([eviivo.eagle.translations.resources.charts.labelOther,l]),u[eviivo.eagle.translations.resources.charts.labelOther]=i.colorPairs.other),e=e.state.showCenterText?t.Response:"",eviivo.pms.charts.donutPieChart.generateChart(a,r,c,i,u,e))}},{key:"componentDidMount",value:function(){var t;(!this.state.chartSettings.currencyDisplay||this.state.chartSettings.currencyDisplay&&eviivo.pms.charts.generateCharts.getIsSameBusinessCurrency())&&(t=this,eviivo.pms.charts.generateCharts.preactStateChangeHandler(function(e){t.ajaxCallback(t,e)},this.state.requestDataUrl,this.state.componentKey),eviivo.pms.charts.generateCharts.ajaxCall(this.state.requestDataUrl,this.state.componentKey))}},{key:"calculateTitleTotal",value:function(e,t,a){var r=null;null!=t&&t.forEach(function(e){null!=e.Values&&0<e.Values.length&&!0===a.showTotalInTitle&&(null==r&&(r=0),r+=e.Values[0])}),e.state.titleTotal=r}},{key:"ajaxCallback",value:function(e,t){var a,r=e.state.chartSettings;null!=t.ChartSeries&&"function"==typeof r.ajaxResponseMapper&&(a=r.ajaxResponseMapper(t.ChartSeries),r.subtitleLevel2=a.subtitleLevel2,t.ChartSeries=a.chartSeries),null!=t.SubTitle&&(r.subtitle=eviivo.util.decodedHtml(t.SubTitle)),e.calculateTitleTotal(e,t.ChartSeries,r),e.setState({responseData:t,chartSettings:r}),setTimeout(function(){e.loadChart(e,t,e.state.chartId,e.state.chartType,r)},150)}},{key:"render",value:function(){var e=this.state,t=e.chartSettings,a=null!=t.subtitleLevel2&&""!==t.subtitleLevel2?n("div",{class:"h5 mb5"},t.subtitleLevel2):null,r=null!=t.tooltip&&""!==t.tooltip?n("i",{class:"icon-font icon-font-help more-info float-right","data-tooltip":"title","data-tooltip-title":t.tooltip,title:"","data-tooltip-pos":"top"}):null,i="",o=(!0===t.showTotalInTitle&&null!=e.titleTotal&&""!==e.titleTotal&&"function"==typeof t.totalTitleFormat&&(i=": "+t.totalTitleFormat(e.titleTotal,t.fractionDigits)),null!=a?"h5 mb5":"h5"),i=t.title+i;return n("div",{id:e.containerId},n("div",{class:"h3 mb8"},n("span",{dangerouslySetInnerHTML:{__html:i}}),r),a,n("div",{class:o,dangerouslySetInnerHTML:{__html:t.subtitle}}),n("div",{id:e.chartId}))}}]),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),i}(),window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charts=window.eviivo.pms.charts||{},window.eviivo.pms.charts.render=window.eviivo.pms.charts.render||{},window.eviivo.pms.charts.render.donutPieChart=function(e,t,a){r(n(i,e),t,a)}):v<50&&(v++,a=setTimeout(e,200))},200)},6733:function(){function s(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==d(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0===a)return("string"===t?String:Number)(e);a=a.call(e,t||"default");if("object"!==d(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===d(e)?e:String(e)}(r.key),r)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(a){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=i(a),t=(e=r?(e=i(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===d(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i(e){return(i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var a,v=0;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charts=window.eviivo.pms.charts||{},window.eviivo.pms.charts.linearBarChart={generateChart:function(e,t,a,i,r){var e="#"+e,o=jQuery(e),n={},s={},s={columns:a,colors:r,type:t},a=("function"==typeof i.labelFormat&&(n={threshold:.01,format:function(e,t,a,r){return i.labelFormat(e,i.fractionDigits)}}),s.labels=n,null!=i.legendPosition&&""!==i.legendPosition?i.legendPosition:"bottom"),r={bindto:e,legend:{show:!0===i.showLegend,position:a}};if("function"==typeof i.tooltipFormat&&(r.tooltip={grouped:!1,format:{value:function(e){return i.tooltipFormat(e,i.fractionDigits)}}}),r.axis={},null!=i.xAxis){n={height:0};if(n.show=i.xAxis.show,r.axis.x=n,!0===i.xAxis.show){if("bar"===t){a="category";if(!0===i.xAxis.IsXAxisTimeseries&&(a="timeseries"),n.type=a,null!=i.xAxis.AxisValues){for(var l=0;l<i.xAxis.AxisValues.length;l++)i.xAxis.AxisValues[l]=eviivo.util.decodedHtml(i.xAxis.AxisValues[l]);n.categories=i.xAxis.AxisValues}}null!=i.xAxis.MaxValue&&(n.max=i.xAxis.MaxValue),null!=i.xAxis.MinValue&&(n.min=i.xAxis.MinValue);a={};"function"==typeof i.xAxis.thickFormat?a={format:function(e){return i.xAxis.tickFormat(e,i.fractionDigits)}}:("line"===t||"linear"===t)&&null!=i.xAxis.AxisValues&&0<i.xAxis.AxisValues.length&&(a={format:function(e){return eviivo.util.decodedHtml(i.xAxis.AxisValues[e])}}),n.tick=a}}if(null!=i.yAxis){t={padding:{bottom:0}};if(t.show=i.yAxis.show,r.axis.y=t,!0===i.yAxis.show){null!=i.yAxis.MaxValue&&(t.max=i.yAxis.MaxValue),null!=i.yAxis.MinValue&&(t.min=i.yAxis.MinValue<0?0:i.yAxis.MinValue);n={};if("function"==typeof i.yAxis.tickFormat&&(n={format:function(e){return i.yAxis.tickFormat(e,i.yAxis.fractionDigits)}}),"percent"===i.yAxis.tickFormatType){for(var c=!0===i.yAxis.force100Percent?1:null,l=0;l<s.columns.length;l++)for(var u=s.columns[l],d=0;d<u.length;d++)"string"!=typeof u[d]&&(u[d]=u[d]/100,!0!==i.yAxis.force100Percent)&&c<u[d]&&(c=u[d]);t.min=0,t.max=c,n={format:d3.format("%")}}t.tick=n}}r.data=s,r.point={r:3,focus:{expand:{r:3}}},a=c3.generate(r),o.data("c3-chart",a),jQuery(e+" .c3-chart-texts text").css("fill","black")}},a=setTimeout(function e(){var t,o,r,n,i;clearTimeout(a),"object"===("undefined"==typeof preact?"undefined":d(preact))?(t=preact,o=t.h,r=t.render,n=t.Component,i=function(){var e=i,t=n;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var a,r=c(i);function i(e){var t;if(this instanceof i)return(t=r.call(this,e)).state={requestDataUrl:e.requestDataUrl,responseData:{},chartSettings:e.chartSettings,chartId:e.chartId,chartType:e.chartType,containerId:e.containerId,componentKey:e.componentKey},t.loadChart=t.loadChart.bind(u(t)),t;throw new TypeError("Cannot call a class as a function")}return s((e=i).prototype,t=[{key:"loadChart",value:function(e,t,a,r,i){var o,n,s,l,c=[];null!=t&&null!=t.ChartSeries&&(o={},n=[],s=[],l=0,t.ChartSeries.forEach(function(e){var t="LabelKey_Series_Current"==e.LabelKey?s:n,a=null!=i.seriesLabels?i.seriesLabels[e.LabelKey]:eviivo.util.decodedHtml(e.Label);t.push(a),e.Values.forEach(function(e){null!=e.Label&&(e.Label=eviivo.util.decodedHtml(e.Label)),null!=e.Value?"string"==typeof e.Value?t.push(eviivo.util.decodedHtml(e.Value)):t.push(e.Value):t.push(e)}),null!=i.colorPairs&&null!=e.LabelKey?o[a]=i.colorPairs[e.LabelKey.toLowerCase()]:null!=i.colorList?o[a]=i.colorList[l]:o[a]=e.Color,l++}),0<n.length&&c.push(n),0<s.length&&c.push(s),i.xAxis=jQuery.extend({},i.xAxis,t.Response.XAxis),i.yAxis=jQuery.extend({},i.yAxis,t.Response.YAxis),"chartId-chart-revenuebar"!==a&&"chartId-chart-bookingsvolumebar"!==a||(i.yAxis.MinValue=0),eviivo.pms.charts.linearBarChart.generateChart(a,r,c,i,o))}},{key:"componentDidMount",value:function(){var t;(!this.state.chartSettings.currencyDisplay||this.state.chartSettings.currencyDisplay&&eviivo.pms.charts.generateCharts.getIsSameBusinessCurrency())&&(t=this,eviivo.pms.charts.generateCharts.preactStateChangeHandler(function(e){t.ajaxCallback(t,e)},this.state.requestDataUrl,this.state.componentKey),eviivo.pms.charts.generateCharts.ajaxCall(this.state.requestDataUrl,this.state.componentKey))}},{key:"ajaxCallback",value:function(e,t){var a=e.state.chartSettings;null!=t.SubTitle&&(a.subtitle=eviivo.util.decodedHtml(t.SubTitle)),e.setState({responseData:t,chartSettings:a}),setTimeout(function(){e.loadChart(e,t,e.state.chartId,e.state.chartType,a)},150)}},{key:"render",value:function(){var e=this.state,t=e.chartSettings,a=null!=t.subtitleLevel2&&""!==t.subtitleLevel2?o("div",{class:"h5 mb5"},eviivo.util.decodedHtml(t.subtitleLevel2)):null,r=null!=t.tooltip&&""!==t.tooltip?o("i",{class:"icon-font icon-font-help more-info float-right","data-tooltip":"title","data-tooltip-title":t.tooltip,title:"","data-tooltip-pos":"top"}):null,i=null!=a?"h5 mb5":"h5";return o("div",{id:e.containerId},o("div",{class:"h3 mb8"},o("span",{dangerouslySetInnerHTML:{__html:t.title}}),r),a,o("div",{class:i,dangerouslySetInnerHTML:{__html:t.subtitle}}),o("div",{id:e.chartId}))}}]),a&&s(e,a),Object.defineProperty(e,"prototype",{writable:!1}),i}(),window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charts=window.eviivo.pms.charts||{},window.eviivo.pms.charts.render=window.eviivo.pms.charts.render||{},window.eviivo.pms.charts.render.linearBarChart=function(e,t,a){r(o(i,e),t,a)}):v<50&&(v++,a=setTimeout(e,200))},200)},6877:function(){function o(e){if(e){I=null;for(var t=0;t<e.length;t++){var a=parseInt(e[t]),a=p(a);if(null==I)I=a.WorkingCurrencyCode;else if(I!==a.WorkingCurrencyCode)return!1}}return!0}function a(e){var t=e(!0);if(t&&t.SelectedBusinesses){for(var a=[],r=0;r<t.SelectedBusinesses.length;r++){var i=t.SelectedBusinesses[r];i.IsChecked&&a.push(i.BusinessId)}return o(a)}return!0}function r(e){var t=null;if("undefined"!=typeof eviivo&&void 0!==eviivo.webcore&&void 0!==eviivo.webcore.queryStringHelper){var a=eviivo.webcore.queryStringHelper.getAllKeys(window.location.href);switch(e){case E.booked:t=null!=a[E.booked]&&""!==a[E.booked]?a[E.booked]:0;break;case E.today:t=null!=a[E.today]&&""!==a[E.today]?new Date(a[E.today]):new Date;break;case E.startDate:t=null!=a[E.startDate]&&""!==a[E.startDate]?new Date(a[E.startDate]):(t=M.cloneDateOnly(),eviivo.webcore.datetime.utils.addDaysToDate(eviivo.webcore.datetime.utils.addMonthsToDate(t,-1),-1));break;case E.endDate:t=null!=a[E.endDate]&&""!==a[E.endDate]?new Date(a[E.endDate]):(t=M.cloneDateOnly(),eviivo.webcore.datetime.utils.addDaysToDate(t,-1))}}return t}function i(e){var t=M.cloneDateOnly().addDays(e),a=M.cloneDateOnly(),r=t;e<0&&(a=t.cloneDateOnly(),r=M.cloneDateOnly()),L.datepickerstart.datepicker("setDate",a),L.datepickerend.datepicker("setDate",r)}function f(e){return e}function g(e,t){return(e=e<0?0:100*e).toFixed(t=null==t?2:t)+"%"}function b(e,t){return t=null==t?2:t,Globalize.formatCurrency(e,I,{minimumFractionDigits:t,maximumFractionDigits:t})}function n(){L.datepickerstart.datepicker("getDate");if(eviivo.util.namespaceActionLoader(eviivo.pms.charts.generateCharts.renderComponents,"donutPieChart","eviivo.pms.charts.render.")&&eviivo.util.namespaceActionLoader(eviivo.pms.charts.generateCharts.renderComponents,"linearBarChart","eviivo.pms.charts.render.")){e=["#D9334B","#bdbdbd"],t=["#D9334B","#bdbdbd"],a=["#FFBB55"],r=["#D9334B"],i={booking_com:"#FEC200",expedia:"#FFD243",laterooms:"#FFDE75",hrs:"#FFEAA7",tripadvisor:"#FFF2CC",airbnb:"#D9AD23",homeawayinc:"#EDC547",myweb:"#D9334B",google:"#BB2339",toprooms:"#FC4E2A",blocks:"#D9D9D9",ryanair:"#B7B7B7",direct:"#bdbdbd",othergrouping:"#2a2a2a"},o=["#FCDE7E","#fb6a4a"],n={other:"#2a2a2a"},s=["#fec200","#ffde75","#fff2cc","#E31A1C","#FB6A4A"],F=[{key:"chart-bookingsvolumedonut",type:"donut",requestDataUrl:C.getChart,staticData:{DoNotTranslateKeys:!0},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.bookingsVolume,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip1BookingVolumeChannel,labelFormat:g,labelFormatType:"percent",tooltipFormat:f,tooltipFormatType:"value",showCenterText:!1,colorPairs:i,colorList:o,fractionDigits:0,showTotalInTitle:!0,totalTitleFormat:f}},{key:"chart-revenuedonut",requestDataUrl:C.getChart,type:"donut",staticData:null,dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.revenueByChannel,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip2BookingRevenueChannel,labelFormat:b,labelFormatType:"value",tooltipFormat:b,tooltipFormatType:"value",showCenterText:!1,colorPairs:i,colorList:o,fractionDigits:0,showTotalInTitle:!0,totalTitleFormat:b,currencyDisplay:!0}},{key:"chart-bookingsvolumebar",type:"bar",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:1,HasToBeCalledTwiceForLastYear:!0,DisplayDayOfWeek:!1,LabelKeysToDisplay:["1-Direct","2-MyWebsite","3-Channels","4-Blocks"]},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.bookingVolumeBySource,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip3BookingVolumeSource,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:null},colorList:t}},{key:"chart-revenuebar",type:"bar",requestDataUrl:C.getChartExtension,staticData:{HasToBeCalledTwiceForLastYear:!0,LabelKeysToDisplay:["1-Direct","2-MyWebsite","3-Channels"]},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.revenueBySource,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip4RevenueSource,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:b,fractionDigits:0},colorList:t,currencyDisplay:!0}},{key:"chart-revenuelast12monthslinearchart",type:"line",requestDataUrl:C.getChartExtension,staticData:{HasToBeCalledTwiceForLastYear:!0,DateIntervalGroupByType:0,DisplayMonthOfYear:!0,FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months},dynamicData:w,chartSettings:{title:eviivo.eagle.translations.resources.charts.revenue,subtitle:eviivo.eagle.translations.resources.charts.last12Months,tooltip:eviivo.eagle.translations.resources.charts.tooltip5RevenueLast12Months,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesLast12Months,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPrevious12Months},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:b,fractionDigits:0},colorList:e,currencyDisplay:!0}},{key:"chart-revenuenext3monthslinearchart",type:"line",requestDataUrl:C.getChartExtension,staticData:{HasToBeCalledTwiceForLastYear:!0,DateIntervalGroupByType:0,DisplayMonthOfYear:!0,FixedSubTitle:eviivo.eagle.translations.resources.charts.next3Months},dynamicData:D,chartSettings:{title:eviivo.eagle.translations.resources.charts.forecast,subtitle:eviivo.eagle.translations.resources.charts.next3Months,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesNext3Months,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},tooltip:eviivo.eagle.translations.resources.charts.tooltip6RevenueForecast,showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:b,fractionDigits:0},colorList:e,currencyDisplay:!0}},{key:"chart-annualdemandbarbooked",type:"bar",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:0,HasToBeCalledTwiceForLastYear:!1,DisplayPercentange:!0,DisplayMonthOfYear:!0,FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months},dynamicData:w,chartSettings:{title:eviivo.eagle.translations.resources.charts.annualDemandBook,subtitle:eviivo.eagle.translations.resources.charts.last12Months,tooltip:eviivo.eagle.translations.resources.charts.tooltip7AnnualBookingActivity,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesBlank},showLegend:!1,xAxis:{show:!0,tickFormat:f},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:r,fractionDigits:2}},{key:"chart-annualdemandbarstaying",type:"bar",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:0,HasToBeCalledTwiceForLastYear:!1,DisplayPercentange:!0,DisplayMonthOfYear:!0,FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months},dynamicData:w,chartSettings:{title:eviivo.eagle.translations.resources.charts.annualDemandStay,subtitle:eviivo.eagle.translations.resources.charts.last12Months,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesBlank},tooltip:eviivo.eagle.translations.resources.charts.tooltip8AnnualGuestStays,showLegend:!1,xAxis:{show:!0,tickFormat:f},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:a,fractionDigits:2}},{key:"chart-weeklydemandbar",type:"bar",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:0,DisplayDayOfWeek:!0,DisplayPercentange:!0},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.weeklyDemand,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip9DailyBookingLevels,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesBlank},showLegend:!1,xAxis:{show:!0,tickFormat:f},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:a,fractionDigits:2}},{key:"chart-whenguestsbookbar",type:"bar",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:0,DisplayPercentange:!0,LabelKeysToDisplay:["1-SAMEDAY","2-SAMEWEEK","3-SAMEMONTH","4-OVERONEMONTH","5-OVERTHREEMONTHS"]},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.whenGuestsBook,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip10BookingWindow,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesBlank},subtitleLevel2:eviivo.eagle.translations.resources.charts.bookingWindowSubTitle,showLegend:!1,xAxis:{show:!0,tickFormat:f},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:r,fractionDigits:2}},{key:"chart-nationalitylast12monthspiechart",requestDataUrl:C.getChart,type:"pie",staticData:{FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months},dynamicData:null,chartSettings:{title:eviivo.eagle.translations.resources.charts.nationality,subtitle:eviivo.eagle.translations.resources.charts.last12Months,tooltip:eviivo.eagle.translations.resources.charts.tooltip11InternationLast12Months,labelFormat:g,labelFormatType:"percent",tooltipFormat:f,tooltipFormatType:"value",showCenterText:!1,topXValues:5,colorPairs:n,colorList:s,fractionDigits:0,ajaxResponseMapper:m}},{key:"chart-nationalitynext3monthspiechart",requestDataUrl:C.getChart,type:"pie",staticData:{FixedSubTitle:eviivo.eagle.translations.resources.charts.next3Months},dynamicData:D,chartSettings:{title:eviivo.eagle.translations.resources.charts.nationality,subtitle:eviivo.eagle.translations.resources.charts.next3Months,tooltip:eviivo.eagle.translations.resources.charts.tooltip12InternationNext3Months,labelFormat:g,labelFormatType:"percent",tooltipFormat:f,tooltipFormatType:"value",showCenterText:!1,topXValues:5,colorPairs:n,colorList:s,fractionDigits:0,ajaxResponseMapper:m}},{key:"chart-occupancylinear",type:"line",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:1,HasToBeCalledTwiceForLastYear:!0,DisplayDayOfWeek:!1,Booked:0,UseDefaultOrder:!0},dynamicData:x,chartSettings:{title:eviivo.eagle.translations.resources.charts.weeklyOccupancy,tooltip:eviivo.eagle.translations.resources.charts.tooltip13WeeklyOccupancy,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:e,fractionDigits:0}},{key:"chart-annualoccupancylinear",type:"line",requestDataUrl:C.getChartExtension,staticData:{HasToBeCalledTwiceForLastYear:!0,DateIntervalGroupByType:0,DisplayMonthOfYear:!0,FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months},dynamicData:w,chartSettings:{title:eviivo.eagle.translations.resources.charts.annualOccupancy,FixedSubTitle:eviivo.eagle.translations.resources.charts.last12Months,tooltip:eviivo.eagle.translations.resources.charts.tooltip14MonthlyOccupancy,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:null,tickFormatType:"percent",force100Percent:!1,fractionDigits:0},colorList:e,fractionDigits:0}},{key:"chart-averagedailyratelinear",type:"line",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:1,HasToBeCalledTwiceForLastYear:!0,DisplayDayOfWeek:!1,UseDefaultOrder:!0},dynamicData:x,chartSettings:{title:eviivo.eagle.translations.resources.charts.averageDailyRate,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip15AverageDailyRate,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:b,fractionDigits:2},colorList:e,currencyDisplay:!0}},{key:"chart-revparlinear",type:"line",requestDataUrl:C.getChartExtension,staticData:{DateIntervalGroupByType:1,HasToBeCalledTwiceForLastYear:!0,DisplayDayOfWeek:!1,Booked:0,UseDefaultOrder:!0},dynamicData:x,chartSettings:{title:eviivo.eagle.translations.resources.charts.revpar,subtitle:null,tooltip:eviivo.eagle.translations.resources.charts.tooltip16RevPar,seriesLabels:{LabelKey_Series_Current:eviivo.eagle.translations.resources.charts.seriesSelectedPeriod,LabelKey_Series_Last:eviivo.eagle.translations.resources.charts.seriesPreviousYear},showLegend:!0,xAxis:{show:!0,tickFormat:null},yAxis:{show:!0,tickFormat:b,fractionDigits:2},colorList:e,currencyDisplay:!0}}],A={};for(var e,t,a,r,i,o,n,s,l=0;l<F.length;l++){var c=F[l];A[c.key]=c,S('<div id="id_container_'+c.key+'" class="cp-paper panel spinner-container"><div id="id_'+c.key+'"></div></div>').appendTo(L.graphContainer),!function(e){e.spinner=eviivo.webcore.loadingSpinner.create({container:"#id_container_"+e.key,theme:eviivo.webcore.loadingSpinner.themes.light,timerOverrides:T})}(c)}k();for(var u=0;u<F.length;u++){y=h=p=v=d=void 0;var d=F[u],v="id_"+d.key,p=S("#"+v),h="chartId-"+d.key,y={componentKey:d.key,chartId:h,containerId:v,requestDataUrl:d.requestDataUrl,chartType:d.type,chartSettings:{}};switch(y.chartSettings=S.extend({},d.chartSettings),d.type){case"donut":case"pie":eviivo.pms.charts.render.donutPieChart(y,p.parent()[0],p[0]);break;case"line":case"linear":case"bar":eviivo.pms.charts.render.linearBarChart(y,p.parent()[0],p[0])}}}}function s(){k(),_={};for(var e=0;e<F.length;e++){var t=F[e];!t.chartSettings.currencyDisplay||t.chartSettings.currencyDisplay&&v?l(t.requestDataUrl,t.key):(S(B.chartId+t.key).html(""),null!=t.spinner&&t.spinner.stop())}}function m(e){if(null!=e&&0<e.length){var a=[],t=j(!0);if(t&&t.SelectedBusinesses)for(var r=0;r<t.SelectedBusinesses.length;r++){var i=t.SelectedBusinesses[r];i.IsChecked&&null!=(i=p(i.BusinessId))&&a.push(i.LocationIsoChar3Code)}var o=0,n=0,s=[];return S.each(e,function(e,t){null!=t&&null!=t.LabelKey&&""!==t.LabelKey&&(o+=t.Values[0],a.indexOf(t.LabelKey)<0)&&(n+=t.Values[0],s.push(t))}),{subtitleLevel2:eviivo.eagle.translations.resources.charts.nationalitySubtitleLevel2.format((100*n/o).toFixed(1)),chartSeries:s}}return null}function D(e,t){var a=M.cloneDateOnly();t.StartDate=a.cloneDateOnly().dateToYMD(),t.EndDate=window.eviivo.webcore.datetime.utils.addMonthsToDate(a.cloneDateOnly(),3).dateToYMD()}function w(e,t){t.StartDate=window.eviivo.webcore.datetime.utils.addDaysToDate(window.eviivo.webcore.datetime.utils.addYearsToDate(M.cloneDateOnly(),-1),1).dateToYMD(),t.EndDate=M.cloneDateOnly().dateToYMD()}function x(e,t){56<t.EndDate.exactDaysBetween(t.StartDate)&&(t.EndDate=eviivo.webcore.datetime.utils.addDaysToDate(t.StartDate.cloneDateOnly(),56))}function l(i,o){var e,t,n,s=i+"."+o;P.length===K?null==_[s]?_[s]={requestDataUrl:i,componentKey:o}:console.warn(y+": "+o+" request already pending"):(t=L.datepickerstart.datepicker("getDate"),e=L.datepickerend.datepicker("getDate"),t={CultureCode:window.eviivo.eagle.basePageModelState.userCultureCode,StartDate:t,EndDate:e,ComponentKey:o,Booked:L.ddlBooked[0].selectedIndex},null!=(n=A[o])&&(n.debug,t=S.extend(t,n.staticData),null!=n.dynamicData&&"function"==typeof n.dynamicData&&n.dynamicData(n,t),"string"!=typeof t.StartDate&&(t.StartDate=t.StartDate.dateToYMD()),"string"!=typeof t.EndDate&&(t.EndDate=t.EndDate.dateToYMD()),null!=n.spinner)&&n.spinner.start(),P.push(s),delete _[s],S("#id_container_"+o+" div.s-fail-message-container").remove(),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,forbiddenCallback:eviivo.eagle.authorization.forbiddenHandler,actionId:y+"."+s,url:i,data:t,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=n&&(n.debug,null!=n.spinner)&&n.spinner.stop(),u(s),d(),"function"==typeof O[s]&&O[s](e),null!=e&&null==e.ChartSeries&&c(eviivo.eagle.translations.resources.chartsAndKpis.noData,i,o,!0)},failCallback:function(e,t,a,r){null!=n&&null!=n.spinner&&n.spinner.stop(),u(s),d(),c(504===r?eviivo.eagle.translations.resources.chartsAndKpis.timeout:eviivo.eagle.translations.resources.chartsAndKpis.genericError,i,o)}}))}function k(){var e,t,a;void 0!==history.pushState&&(e={},e=eviivo.webcore.queryStringHelper.getAllKeys(window.location.href,e),t=L.datepickerstart.datepicker("getDate"),a=L.datepickerend.datepicker("getDate"),eviivo.webcore.queryStringHelper.updateKey(e,E.startDate,t.dateToYMD()),eviivo.webcore.queryStringHelper.updateKey(e,E.endDate,a.dateToYMD()),eviivo.webcore.queryStringHelper.updateKey(e,E.today,M.dateToYMD()),eviivo.webcore.queryStringHelper.updateKey(e,E.booked,L.ddlBooked[0].selectedIndex),eviivo.webcore.queryStringHelper.updateHistory(e))}function c(e,t,a,r){e='<div class="s-fail-message-container spinner light-background active"><div class="position-spinner"><span class="spinner-message">'+e+"</span>"+(!0!==r?"<a href='javascript:void(0);' class='s-close-spinner cp-button'>"+eviivo.eagle.translations.resources.chartsAndKpis.tryAgain+"</a>":"")+"</div></div>",r=S("#id_container_"+a);S(e).appendTo(r),r.find("a.s-close-spinner").on("click",function(){l(t,a)})}function u(e){var t=P.indexOf(e);-1<t&&P.splice(t,1),delete _[e]}function d(){var e=_[Object.keys(_)[0]];null!=e&&l(e.requestDataUrl,e.componentKey)}function e(){return v}var S,v,p,C,T,L,h,y,F,A,B,_,P,K,O,M,E,I,j;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},eviivo.pms.charts=eviivo.pms.charts||{},window.eviivo.pms.charts.generateCharts=(C={getChart:eviivoSuiteApp+"/api/Dashboard/getChart",getChartExtension:eviivoSuiteApp+"/api/Dashboard/getChartExtension"},T={message2Delay:5e3,message3Delay:2e4,failMessageDelay:6e4},L={datepickerstart:null,datepickerend:null,md:null,setdate:null,filterActionButton:null,ddlBooked:null,graphContainer:null},h=null,y="eviivo.pms.charts.generateCharts",F=[],A={},B={datepickerstart:"#datepickerstart",datepickerend:"#datepickerend",md:".md-dd",setdate:".set-date",panelbody:".panel-body",filterActionButton:"#filter-actions-button",ddlBooked:"#ddlBooked",graphContainer:"div.graph-container",chartId:"#chartId-"},_={},P=[],K=2,O={},M=new Date,E={today:"today",startDate:"startdate",endDate:"enddate",booked:"booked"},j=I=null,{init:function(e){if("function"!=typeof window.jQuery)throw y+": module depends on jQuery";S=window.jQuery,M=r(E.today),h={click:eviivo.util.namespacedEvent("click",y)},L.datepickerstart=S(B.datepickerstart),L.datepickerend=S(B.datepickerend),L.md=S(B.md),L.setdate=S(B.setdate),L.filterActionButton=S(B.filterActionButton),L.ddlBooked=S(B.ddlBooked),L.graphContainer=S(B.graphContainer),L.setdate.each(function(){var e=S(this),t=e.attr("data-index");t&&(t=parseInt(t),e.on(h.click,function(){switch(t){case 0:i(0);break;case 1:i(-1);break;case 2:i(1);break;case 3:i(-7);break;case 4:i(7);break;case 5:i(-30);break;case 6:i(30);break;case 7:i(-60);break;case 8:i(60);break;case 9:i(-90);break;case 10:i(90)}L.md.removeClass("active"),s()}))});var t=(new Date).evStandardFirstDayCalendarOffset(eviivo.eagle.basePageModelState.userCultureCode);L.datepickerstart=eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar,{defaultCultureCode:eviivo.eagle.basePageModelState.userCultureCode,calendar:L.datepickerstart,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),firstDay:t,setInitialDate:r(E.startDate)}),L.datepickerend=eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar,{defaultCultureCode:eviivo.eagle.basePageModelState.userCultureCode,calendar:L.datepickerend,changeMonth:!0,changeYear:!0,showButtonPanel:!1,dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),firstDay:t,setInitialDate:r(E.endDate)}),L.ddlBooked.val(r(E.booked)),p=eviivo.util.safeFunction("eviivo.pms.businessSettingsAndDefaultMessages.getValue"),j=eviivo.eagle.multiProperty.getSelectedBusinesses,eviivo.eagle.multiProperty.applyButtonCallBackFunction({callBackFunction:function(){v=a(j),s()}}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){v=a(j),s()}}),v=o(e.selectedBusinesses),n(),L.filterActionButton.on("click",s)},renderComponents:n,ajaxCall:l,preactStateChangeHandler:function(e,t,a){O[t+"."+a]=e},getIsSameBusinessCurrency:e})}},r={};function i(e){var t=r[e];return void 0!==t||(t=r[e]={exports:{}},a[e](t,t.exports,i)),t.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";i(6877),i(637),i(6733)}();
//# sourceMappingURL=charts.min.js.map