var i={79:function(){function s(e,t){var i,o,n;if(e==f.InProgress||e==b.InProgress)i='<svg class="icon-ic-refresh rotateClockwise"><use href="#icon-ic-refresh"></use></svg>',o=p.resources.cloneStatusResult.InProgress,n="cloning";else if(e==f.PartiallyCloned&&null==t)i='<svg class="icon-ic-warning orange"><use href="#icon-ic-warning"></use></svg>',o=p.resources.cloneStatusResult.PartiallyCloned,n="warning";else{if(e==f.PartiallyCloned&&null!=t)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(t=null!=t?"data-retry='"+JSON.stringify(t)+"'":t)+">"+p.resources.retryButton+"</button>";if(e!=f.Failed&&e!=b.Failure&&e!=b.DuplicateFailure||null!=t){if((e==f.Failed||e==b.Failure||e==b.DuplicateFailure)&&null!=t)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(t=null!=t?"data-retry='"+JSON.stringify(t)+"'":t)+">"+p.resources.retryButton+"</button>";if(e!=f.Cloned&&e!=b.Success)return"";i='<svg class="icon-ic-checkmark-small"><use href="#icon-ic-checkmark-small"></use></svg>',o=p.resources.cloneStatusResult.Cloned,n="success"}else i='<svg class="icon-ic-warning red"><use href="#icon-ic-warning"></use></svg>',o=p.resources.cloneStatusResult.Failed,n="error"}return'<div class="status '+n+' display-inline-flex align-items-center ml-auto">'+i+"<span>"+o+"</span></div>"}function n(){""!=v&&"number"==typeof v?eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshTargetLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshTargetLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&(t(e),eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshItemLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshItemLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&t(e)}}))}}):(console.error("please provide a valid request Id"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage}))}function t(e){for(var t,i=!1,o=0;o<e.length;o++)0==e[o].ItemId?(r(e[o].Result,e[o].TargetId),null!=e[o].Reason&&(t=$("div[data-id="+e[o].TargetId+"] .mod-collapsable_title").find("div.status"),eviivo.webcore.tooltip.add(t,e[o].Reason,"bottom")),e[o].Result==f.InProgress&&(i=!0)):(t={cloneRequestId:v,TargetId:e[o].TargetId,ItemId:e[o].ItemId,ItemType:e[o].ItemType},c(e[o].Result,e[o].TargetId,e[o].ItemId,e[o].Reason,t));a(),1==i&&setTimeout(n,1e3*y)}function a(){eviivo.component.handlers.assign(g.retryBtn,l,"click");for(var e,t,i,o=document.getElementsByTagName("table"),n=0;n<o.length;n++)1<o[n].querySelectorAll(".s-cloneRetry").length?(e=o[n].querySelector("th[data-key=Status]").cellIndex+1,e=o[n].querySelector("tr:first-child th:nth-child("+e+")"),0==o[n].querySelectorAll(".s-cloneRetryAll").length&&(t={cloneRequestId:v,TargetId:o[n].closest(".s-property-selection").dataset.id,ItemId:null,ItemType:null},(i=document.createElement("button")).setAttribute("type","button"),i.innerHTML=p.resources.retryAllButton,i.setAttribute("class","s-cloneRetryAll btn-table_primary btn-table_primary-large"),i.dataset.retry=JSON.stringify(t),e.appendChild(i),eviivo.component.handlers.assign(".s-cloneRetryAll",l,"click"))):0<o[n].querySelectorAll(".s-cloneRetryAll").length&&o[n].querySelectorAll(".s-cloneRetryAll")[0].remove()}function l(){var e=$(this).data("retry");eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRetryRequest",url:eviivoSuiteApp+"/api/clone/SubmitRetry",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}),r(f.InProgress,e.TargetId),c(f.InProgress,e.TargetId,e.ItemId,"",null),setTimeout(n,1e3*y)}function r(e,t){$("div[data-id="+t+"] .mod-collapsable_title").find("div.status").remove();t=$("div[data-id="+t+"]").find("span:first");$(s(e,null)).insertAfter(t)}function c(e,t,i,o,n){var a;null!=i?(d==m.CALENDAR&&(i=t),(a=$("div[data-id="+t+"]").find("table")).find("tr[data-id='"+i+"']>td.details").html($("<p/>").html(o).text()),a.find("tr[data-id='"+i+"']>td.status").html(s(e,n)),0==$("div[data-id="+t+"]").find(".s-cloneRetry").length&&$("div[data-id="+t+"]").find(".s-cloneRetryAll").remove()):((a=$("div[data-id="+t+"]").find("table")).find("tr>td.details").html(o),a.find("tr>td.status").html(s(e,n)),$("div[data-id="+t+"]").find(".s-cloneRetryAll").remove())}function i(){for(var e=document.getElementsByClassName("s-expand-btn"),t=e[0].innerHTML==p.resources.collapseAll?(e[0].innerHTML=p.resources.expandAll,!0):(e[0].innerHTML=p.resources.collapseAll,!1),i=document.querySelectorAll(".s-property-selection"),o=1;o<=i.length;o++)document.querySelector("#property_location_"+o).checked=t}function u(){var e;null!=o&&(e=$(".cp-custom-select")[0],$(e).val(o).trigger("click"),o=null)}var d,v,o,p,m,f,b,g,y;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.history=window.eviivo.pms.clone.history||{},window.eviivo.pms.clone.history=(p={},m={ROOM:1,CALENDAR:2,DEPOSITS:3,RATE:4},f={InProgress:1,PartiallyCloned:2,Failed:3,Cloned:4},b={Success:"SUC",Failure:"FAI",DuplicateFailure:"DUP",InProgress:"INP"},g={backBtn:"#btn-back",cancelBtn:"#btn-cancel",nextBtn:"#btn-next",doneBtn:"#btn-done",retryBtn:".s-cloneRetry"},y=30,{init:function(){o=$(this).closest("tr").find("td:first-child")[0].innerText,eviivo.component.flyout.showFlyout("displayHistoryContainer")},optionsSetup:function(e){p=eviivo.util.extend(p,e),d=p.typeId,v=p.cloneRequestId,y=p.refreshRate},onShow:function(){$.fn.dataTable.isDataTable("#eviivo-list-history")?$("#eviivo-list-history").DataTable().ajax.reload(u,!0):"function"==typeof postInitListingTable&&postInitListingTable()},customRenderAction:function(e,t,i){return'<a href="'+eviivoSuiteApp+"/Settings/Clone/Status/"+i.Id+'" target="_blank" class="md-table_action md-table_action-item"><svg class="icon-bg-eye-outline"> <use  href="#icon-bg-eye-outline"></use></svg></a>'},customRenderDateTime:function(e,t,i){return'<div class="history-date">'+(e=new Date(e)).evDisplayLongDate(eviivo.eagle.basePageModelState.userCultureCode)+',</div><div class="history-time">'+e.evDisplayLongTime(eviivo.eagle.basePageModelState.userCultureCode)+"</div>"},customRenderResult:function(e,t,i){return s(e,null)},reasonCustomRender:function(e,t,i){return null!=e?"<strong>"+e+"</strong>":""},statusCustomRender:function(e,t,i){return s(e,null)},refreshStatus:n,loadSuccess:a,filterSetup:function(){$(".cp-custom-select").find("option").remove(),$(".cp-custom-select").off("change");for(var e=$(".cp-custom-select")[0],i=$(".cp-custom-select")[1],t=($(e).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$(i).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$("#clone-table").find("tr>td:first-child")),o=0;o<t.length;o++)$(e).append("<option value='"+t[o].innerHTML+"'>"+t[o].innerHTML+"</option>");$.each(p.resources.cloneStatusResult,function(e,t){$(i).append("<option value='"+t+"'>"+t+"</option>")}),$(e).on("click",function(){var e=$(".cp-custom-select > option:selected")[0].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),$(i).on("click",function(){var e=$(".cp-custom-select > option:selected")[1].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),u()},actionCustomRender:function(e,t,i){return""},setupCollapseExpandBtn:function(){var e,t;1<p.noOfTargets&&(e=document.querySelector(".page-heading div.h2"),(t=document.createElement("button")).setAttribute("type","button"),t.setAttribute("name",p.resources.expandAll),t.setAttribute("value",p.resources.expandAll),t.innerHTML=p.resources.expandAll,t.setAttribute("class","s-expand-btn btn-table_primary btn-table_primary-large btn-target-collapse"),e.appendChild(t),eviivo.component.handlers.assign(".s-expand-btn",i,"click"))},setupRefreshInterval:function(){setTimeout(n,y)},getCloningStatusTypes:function(){return f}})},2679:function(){function i(){eviivo.component.flyout.hideFlyout(a.flyout.replace("#",""))}function o(e){e?$(a.flyout).find(a.flyoutSpinner).removeClass("hide"):$(a.flyout).find(a.flyoutSpinner).addClass("hide")}function n(e){$(a.flyout).find(a.bodyContainer).html(e),o(!1),""!=e&&(t("".concat($(a.cloneHiddenTitle).html())),postInitComplete())}function t(e){$(a.flyout).find(a.header).html(e)}var a,s,l;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.statusFlyout=(a={flyout:"#clone-status",header:".s-heading-title",flyoutSpinner:".s-flyout-spinner",cloneHiddenTitle:".s-flyout-title",bodyContainer:"#cloneStatusContainer"},s=0,l={},{init:function(e){l=eviivo.util.extend(l,e)},open:function(e,t){o(!0),eviivo.component.flyout.showFlyout(a.flyout),e=e,t=t,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-clone-status",url:"".concat(eviivoSuiteApp,"/clone/status/flyout/business/").concat(e,"/clone/").concat(t),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e.Errors?(i(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})):n(e.HtmlPayload)},failCallback:function(){i(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})},close:i,flyoutOnShow:function(){},flyoutOnClose:function(){null!=eviivo.pms.pricingRules&&eviivo.pms.pricingRules.createFlyout.close(),n(""),t("")},statusCustomRender:function(e,t,i){return""!=(e=eviivo.pms.clone.history.customRenderResult(e,t,i))?(null!=i.CloneErrorMsg&&eviivo.webcore.tooltip.add(e,i.CloneErrorMsg,"top"),$(e).addClass("cp-table_action cp-table_action-item").prop("outerHTML")):""},scheduleMainTableRefreshIfStatusInProgressExists:function(e,t){0<$("".concat(e," .status.cloning")).length&&(setTimeout(t,l.cloningRefreshRate*s),s+=1)},resetRefreshOccurrences:function(){s=0}})},7887:function(){function n(e,t){t=$("#".concat(e," th:eq(").concat(t,")")).attr("data-key");return $.each(a,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[t]}var a,s,l,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(a=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],s=[],l="ATL",r="ATH",{init:function(e){var t,i,o,n;o=e.table,$.each(a,function(){this.tableId.toLowerCase()==o.toLowerCase()&&(n=this.tableCode)}),t=n,i=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(t),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(t),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){s=s.concat(e),(e=t)==l&&(null==(e=null==(e=s)?void 0:e.filter(function(e){return e.Key==r}))||0==e.length?s.push({PreferenceGroupType:l,Key:r,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),i()},failCallback:function(){i()}})},get:function(e,t){var i=n(e,t),o=null;return $.each(s,function(){this.Key==i&&(o=this.Value)}),null==o?"":(o=o.replaceAll("&quot;",'"'),JSON.parse(o))},post:function(e,t){var e=e.parents("table").attr("id"),i=eviivo.component.listing.filter.getColumnSearchStrings(e,t),e=n(e,t);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(i)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var a,s;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(a=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],s={},{post:function(e,t){var i,o,n=eviivo.util.getJSId($(this)[0].container);null!=n&&null!=t&&isNaN(t)&&(t={ColumnCode:(i=n,$.each(a,function(){this.tableId.toLowerCase()==i.toLowerCase()&&(o=this.Order)}),o),Order:JSON.stringify(t)})!=s&&(s=t,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:t,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})},1550:function(){function t(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"bulk-status-update-emails",url:"".concat(eviivoSuiteApp,"/api/emails/bulk-status"),data:{SelectedRules:eviivo.pms.settings.emails.list.getSelectedEmails(),IsActive:$(o.activeRadio).is(":checked")},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?(i(),eviivo.pms.settings.emails.list.refresh()):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})}function i(){eviivo.component.flyout.hideFlyout(o.flyout.replace("#",""))}var o,n;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.settings=window.eviivo.pms.settings||{},window.eviivo.pms.settings.emails=window.eviivo.pms.settings.emails||{},window.eviivo.pms.settings.emails.bulkStatusFlyout=(o={flyout:"#bulk-status",header:".s-heading-title",save:".s-save",listTable:"#eviivo-list-emails",activeRadio:"#bulk-status-active"},n={},{init:function(e){n=eviivo.util.extend(n,e),$(o.flyout).on("click",o.save,t)},open:function(){var e;e="".concat(n.resources.bulkHeader.format(eviivo.pms.settings.emails.list.getSelectedEmails().length)),$(o.flyout).find(o.header).html(e),eviivo.component.flyout.showFlyout(o.flyout)},close:i,flyoutOnShow:function(){},flyoutOnClose:function(){}})},1446:function(){function t(){var e;0!=n&&""!=$(o.multiPropertySelectionInput).val()||!i.isMultiProperty?(0!=n||i.isMultiProperty||(n=i.businessId),0<(e=$("input[name='email-type']:checked")).length?($("input[name='email-type']").removeClass("error"),e="/suite/settings/emails/property/".concat(n,"/new/").concat(e.val(),"/EML"),window.location.href=e):$("input[name='email-type']").addClass("error")):$(o.multiPropertySelectionInput).addClass("error")}var i,o,n;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.settings=window.eviivo.pms.settings||{},window.eviivo.pms.settings.emails=window.eviivo.pms.settings.emails||{},window.eviivo.pms.settings.emails.createFlyoutType=(o={flyout:"#create-type-selection",save:".s-save",multiPropertySelection:"#multi-property-selection",multiPropertySelectionInput:"#eviivo-lookup-property-create-flow"},n=0,{init:function(e){(i=eviivo.util.extend(i,e)).isMultiProperty?eviivo.component.lookup.init():$(o.multiPropertySelection).addClass("hide"),$(o.flyout).on("click",o.save,t)},open:function(){eviivo.component.flyout.showFlyout(o.flyout)},close:function(){0<$(o.flyout).length&&eviivo.component.flyout.hideFlyout(o.flyout.replace("#",""))},flyoutOnShow:function(){},flyoutOnClose:function(){},lookupCustomRender:function(e){return"<div id='".concat(e.BusinessId,"'>").concat(e.BusinessName,"</div>")},lookupRowSelection:function(e,t){e.removeClass("error");var i=$(t).html(),t=$(t).attr("id");n=t,e.val(i)},lookupInitComplete:function(e,t){}})},7451:function(){function t(e){e.preventDefault(),eviivo.pms.settings.emails.createFlyoutType.open()}function i(){var e=$(this).parents("tr").attr("data-id"),e=eviivo.component.listing.getATablesRowData(d.listTable,e);null!=e.CloneParentJobId&&eviivo.pms.clone.statusFlyout.open(e.BusinessId,e.CloneParentJobId)}function o(){0<u().length||eviivo.component.listing.postInitRefreshDataTableSpecific(d.listTable)}function n(){eviivo.component.listing.postInitRefreshDataTableSpecific(d.listTable)}function a(e,t){$(e).hasClass("disabled")?eviivo.webcore.tooltip.add(e,t):eviivo.webcore.tooltip.add(e,"")}function e(){$(d.bulkContainer).find(".md-dd").removeClass("active")}function s(){$(this).hasClass("disabled")||0<u().length&&(e(),eviivo.pms.settings.emails.bulkStatusFlyout.open())}function l(){$(this).hasClass("disabled")||0<u().length&&(e(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,style:eviivo.webcore.notifier.styles.withTwoActions,message:p.resources.confirmDeleteMsg,autoHide:!1,buttonTwo:p.resources.yes,buttonOne:p.resources.no}),$(d.deleteConfirmationYes).addClass("btn btn-right"),$(d.deleteConfirmationNo).addClass("btn btn-secondary"),$(".mod-close-notice").off(),$(".mod-close-notice").off("click",function(e){r()}).on("click",function(e){r()}),$(".notifyjs-withTwoActions-base").off("click",d.deleteConfirmationYes,function(e){c()}).on("click",d.deleteConfirmationYes,function(e){c()}),$(".notifyjs-withTwoActions-base").off("click",d.deleteConfirmationNo,function(e){r()}).on("click",d.deleteConfirmationNo,function(e){r()}),$(".notifyjs-hidable").removeClass("notifyjs-hidable"))}function r(){$(".notifyjs-wrapper").remove()}function c(){r(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"bulk-delete-emails-save",url:"".concat(eviivoSuiteApp,"/api/emails/bulk-delete"),data:{SelectedRules:u()},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?n():eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})}function u(){var t=[],e=eviivo.component.listing.getATablesSelectedData(d.listTable);return null!=e&&e.forEach(function(e){t.push({RuleId:e.Id,PropertyId:e.BusinessId})}),t}var d,v,p;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.settings=window.eviivo.pms.settings||{},window.eviivo.pms.settings.emails=window.eviivo.pms.settings.emails||{},window.eviivo.pms.settings.emails.list=(d={listTable:"#eviivo-list-emails",addBtn:"#btnAddNew",listTableEdit:".s-listing-table-edit",bulkDeleteBtn:"#bulkDelete",bulkStatusChangeBtn:"#bulkStatusChange",deleteConfirmationYes:".btn-two",deleteConfirmationNo:".btn-one",bulkContainer:".s-bulk-update",emailEditGuestMessageActionItem:".s-edit-guest-msg-btn",selectAll:"#emails-target-select-all"},v=!0,p={},{init:function(e){p=eviivo.util.extend(p,e),eviivo.pms.listingTable.filterActions.init({table:"eviivo-list-emails",callback:function(){o(),$(d.listTable).on("click",".update-status .status",i),$(d.addBtn).on("click",t),$(d.bulkDeleteBtn).on("click",l),$(d.bulkStatusChangeBtn).on("click",s),$(d.listTable).on("click",d.emailEditGuestMessageActionItem,eviivo.pms.settings.messagingTemplates.editGuestMessages.editGuestMessageHandler)}}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){n()}})},load:o,rowSelectionCallback:function(){var t,i,e=eviivo.component.listing.getATablesSelectedData(d.listTable);0==e.length?($(d.bulkDeleteBtn).addClass("disabled"),$(d.bulkStatusChangeBtn).addClass("disabled")):0<e.length&&(i=t=!1,null!=e&&e.forEach(function(e){e.CanUpdateStatus||(i=i||!0),e.CanDeleteGuestMessage||(t=t||!0)}),t?$(d.bulkDeleteBtn).addClass("disabled"):$(d.bulkDeleteBtn).removeClass("disabled"),i?$(d.bulkStatusChangeBtn).addClass("disabled"):$(d.bulkStatusChangeBtn).removeClass("disabled")),a(d.bulkStatusChangeBtn,p.resources.bulkStatusDisabledTooltip),a(d.bulkDeleteBtn,p.resources.bulkDeleteDisabledTooltip)},rowCreatedCallback:function(e,t,i,o,n){var e=$(e),a="/suite/settings/emails/property/".concat(t.BusinessId,"/edit-template/").concat(t.Id,"/EML");t.CanEditEmails&&e.find(d.listTableEdit).attr("href",a),t.CanEditGuestMessage&&("CGS"!=t.emailType?((a=e.find(d.listTableEdit)).attr("href","javascript:;"),a.addClass("s-edit-guest-msg-btn"),a.attr("data-email-id",t.Id),a.attr("data-property-id",t.BusinessId)):e.find(d.listTableEdit).remove()),t.IsActive||e.addClass("inactive"),t.CanUpdateStatus||(e.find(".cp-table_checkbox-col .cp-custom-input").remove(),e.addClass("s-no-select-row")),t.CanDeleteGuestMessage&&"CGS"!=t.emailType||e.find(".s-listing-table-delete").remove()},getSelectedEmails:u,dataLoadSuccessCallback:function(){v||eviivo.component.listing.filter.updateAllTableFilters(d.listTable),v=!1,eviivo.pms.clone.statusFlyout.scheduleMainTableRefreshIfStatusInProgressExists(d.listTable,o)},refresh:n,categoryCustomRender:function(e,t,i){return"sort"==t?i.DisplayOrder:e},deleteAjaxDataCallback:function(t){var e={Id:t.Id,BusinessId:t.BusinessId};return eviivo.webcore.ajaxHelper.executeAjax({actionId:"EmailDelete-".concat(t.Id),url:"/suite/api/Emails/delete",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:e,callback:function(e){e?(eviivo.component.listing.deleteRowsData(d.listTable,t.Id),eviivo.component.listing.filter.updateAllTableFilters(d.listTable)):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}}),!1}})},614:function(){function t(e){var t,i=jQuery(this);return null!=i&&0!=i.length&&(t=i.data("email-id"),i=i.data("property-id"),null!=t)&&""!=t&&null!=i&&""!=i&&(jQuery(s.flyoutEditGuestMessages).attr("data-ajaxurl","".concat(eviivoSuiteApp,"/settings/emails/guest-messages?emailId=").concat(t,"&propertyId=").concat(i)),void eviivo.component.flyout.showFlyout(s.flyoutEditGuestMessages))}function i(e,n){e=jQuery(e);e.length<=0||e.find(s.formTranslatableInputItem).each(function(e,t){var i,o,t=jQuery(t);i=n,0!==(t=t).length&&(o=t.val(),eviivo.webcore.summernote.create({container:t,displayMode:i,text:o,validationSettings:{resources:l.resources.validation}}))})}function o(e){e.preventDefault();var i,o,t=!0;c.forEach(function(e){e=e.validate();t=t&&e}),1==t?(null!=(e=r)&&e.start(),i=[],jQuery(s.formEmailTranslatableAreaContainer).find(s.formTranslatableInputItem).each(function(e,t){t=jQuery(t);i.push({CultureCode:t.attr("data-language-code"),Content:eviivo.webcore.summernote.extractEditorContent(t)})}),o=[],jQuery(s.formShortMessageTranslatableAreaContainer).find(s.formTranslatableInputItem).each(function(e,t){t=jQuery(t);o.push({CultureCode:t.attr("data-language-code"),Content:eviivo.webcore.summernote.extractEditorContent(t)})}),e=jQuery(s.formEmailId).val(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"SaveEmailGuestMessage-".concat(e),url:"".concat(eviivoSuiteApp,"/settings/emails/guest-messages/save"),method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,data:{emailId:e,propertyShortName:jQuery(s.formPropertyShortName).val(),emailGuestMessages:i,shortMessageGuestMessages:o},callback:n,failCallback:a})):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:l.resources.validation.generic.errorsOnPage,autoHideDelay:eviivo.webcore.notifier.delays.medium,position:eviivo.webcore.notifier.positions.bottomRight})}function n(){var e;null!=(e=r)&&e.stop(),window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.success,message:l.resources.guestMessageSavedNotificationMessage})}function a(){var e;null!=(e=r)&&e.stop(),window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:l.resources.ajaxFailText})}var s,l,r,c;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.settings=window.eviivo.pms.settings||{},window.eviivo.pms.settings.messagingTemplates=window.eviivo.pms.settings.messagingTemplates||{},window.eviivo.pms.settings.messagingTemplates.editGuestMessages=(s={emailEditGuestMessageActionItem:".s-edit-guest-msg-btn",flyoutEditGuestMessages:"#emails-edit-guest-messages-flyout",flyoutBodyContainer:"#emails-edit-guest-messages-flyout div.s-container-body",formEmailTranslatableAreaContainer:"div.s-translatable-area-guest-messages-email div.mod-multilanguage",formShortMessageTranslatableAreaContainer:"div.s-translatable-area-guest-messages-short-message div.mod-multilanguage",formTranslatableInputItem:"textarea.s-text-input",formEmailId:"#guestMsgEditorEmailId",formPropertyShortName:"#guestMsgEditorPropertyShortName",formSaveButton:"#emails-edit-guest-messages-flyout_flyoutSave"},l={},r=null,c=[],{init:function(e){c=[],l=eviivo.util.extend(l,e),jQuery(s.emailEditGuestMessageActionItem).on("click",t)},onFlyoutShow:function(){var e;jQuery(s.formSaveButton).attr("disabled","disabled"),null!=(e=r=eviivo.webcore.loadingSpinner.create({container:s.flyoutBodyContainer,theme:eviivo.webcore.loadingSpinner.themes.light}))&&e.start()},onFlyoutClose:function(){var e;jQuery(s.formSaveButton).attr("disabled","disabled"),null!=(e=r)&&e.stop(),r=null},onLoadBodySuccess:function(e){var t;jQuery(s.formSaveButton).removeAttr("disabled"),i(s.formEmailTranslatableAreaContainer,eviivo.webcore.summernote.displayModes.toolbarWithVariables),i(s.formShortMessageTranslatableAreaContainer,eviivo.webcore.summernote.displayModes.toolbarOnlyVariables),c=[],"function"==typeof eviivo.webcore.translatableSection.initValidation&&(t=jQuery.extend(!0,{},l.resources.validation.generic,{inputFieldOtherTranslationsInvalidLabel:l.resources.validation.guestMessageShortMessageTypeOtherLanguagesInvalid}),t={translatableAreaContainer:s.formEmailTranslatableAreaContainer,itemsSelector:s.formTranslatableInputItem,useOtherLanguagesDefaultInvalidLabel:!0,displayInvalidLanguages:!0,resources:t,isHtmlContent:!0},c.push(t),t=jQuery.extend(!0,{},l.resources.validation.generic,{inputFieldOtherTranslationsInvalidLabel:l.resources.validation.guestMessageShortMessageTypeOtherLanguagesInvalid}),t={translatableAreaContainer:s.formShortMessageTranslatableAreaContainer,itemsSelector:s.formTranslatableInputItem,useOtherLanguagesDefaultInvalidLabel:!0,displayInvalidLanguages:!0,resources:t,isHtmlContent:!1},c.push(t),c.forEach(function(e){eviivo.webcore.translatableSection.initValidation(e)})),jQuery(s.formSaveButton).off("click").on("click",o),null!=(t=r)&&t.stop()},editGuestMessageHandler:t})}},o={};function n(e){var t=o[e];return void 0!==t||(t=o[e]={exports:{}},i[e](t,t.exports,n)),t.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(7451),n(1550),n(1446),n(614),n(7887),n(1452),n(2679),n(79)}();
//# sourceMappingURL=settingsEmail.min.js.map