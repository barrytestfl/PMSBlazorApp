var o={888:function(){function o(e,t){var o,n,a,i,s;null==t?((s=v(this)).parents("tr").addClass("s-selected"),n=s.data("id")):(n=t.Id,void 0!==t.FormId&&(f.form=eviivo.util.getJqueryId(t.FormId),o=t.BusinessId,a=t.FormId,i=t.Container)),null==y&&(s="<button class='btn btn-secondary' id='btn-close-popup'>"+c.resources.cancelLabel,0!==n&&null!=n&&(s+="</button>",c.showBookingOptions&&(s+=" <button class='btn btn-left ml8' id='btn-single-popup'>"+c.resources.addBooking+"</button> <button class='btn btn-left ml8' id='btn-group-popup'>"+c.resources.addGroupBooking+" </button> "),!c.showSave)||(s+="<button class= 'btn btn-right' id='btnSaveGuestContact' > "+c.resources.saveLabel+"</button> "),y={buttons:s,header:c.resources.mainHeader,contentHolder:"<div class='guest-main-container mod-form'></div>"}),eviivo.webcore.popup.open({template:y,actionCompleteCallback:function(){var e=null==n?n:{Id:n};null!=a&&(e.formId=a,e.containerId=i,e.businessId=o),eviivo.eagle.guest.loadGuestTabContainer(null,e,u)}}),y=null}function n(e){var t=v(this),o=t.data("id");t.notify({text:c.resources.removeContactNotificationMessage,icon:"&#xe93a;",buttonOne:"<button class='btn btn-secondary' type='button'>"+c.resources.noLabel+"</button>",buttonTwo:"<button class='btn btn-right' id='s-remove-guest' type='button'>"+c.resources.yesLabel+"</button>"},{style:"withTwoActions",className:"action v-2",position:"top right",autoHideDelay:"100000",clickToHide:!0}),v(f.confirmRemoveGuestBtn).on(p.click,function(e){eviivo.webcore.ajaxHelper.executeAjax({actionId:g.removeContact.actionId+o,url:g.removeContact.url,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:{businessId:eviivo.eagle.basePageModelState.businessId,guestId:o},callback:function(e){w.ajax.reload()}})})}function a(e){e.stopPropagation(),window.location.href=eviivoSuiteApp+"/diary?guestId="+t(v(this))}function i(e){e.stopPropagation();e=t(v(this)),e={diaryView:c.diaryViewType,requestBId:c.businessId,guestId:e};eviivo.webcore.navigatorHelper.redirectTo(eviivoSuiteApp+"/multiroom",e,eviivo.webcore.navigatorHelper.options.target.sameWindow,eviivo.webcore.navigatorHelper.options.method.post)}function t(e){e=e.attr("data-id");return null==e?v("#GuestId").val():e}function s(e){0==eviivo.component.form.telephone.validate(f.form)&&v(f.form).submit()}function l(e){eviivo.webcore.popup.close()}function r(e){var t;null==C&&(C={sProcessing:c.resources.tableTranslations.processing,sSearch:c.resources.tableTranslations.search,sLengthMenu:c.resources.tableTranslations.lengthMenu,sInfo:c.resources.tableTranslations.info,sInfoEmpty:c.resources.tableTranslations.infoEmpty,sInfoFiltered:c.resources.tableTranslations.infoFiltered,sInfoPostFix:"",LoadingRecords:c.resources.tableTranslations.loadingRecords,sZeroRecords:c.resources.tableTranslations.zeroRecords,sEmptyTable:c.resources.tableTranslations.emptyTable,oPaginate:{sFirst:c.resources.tableTranslations.first,sPrevious:c.resources.tableTranslations.previous,sNext:c.resources.tableTranslations.next,sLast:c.resources.tableTranslations.last},oAria:{sSortAscending:c.resources.tableTranslations.sortAscending,sSortDescending:c.resources.tableTranslations.sortDescending},conditionalPaging:!0}),null==I&&(I=[{data:"Surname",name:"Surname",className:"md-table_word-wrap",title:c.resources.columnTranslations.surname,sortable:!0},{data:"Forename",name:"Forename",className:"md-table_word-wrap",title:c.resources.columnTranslations.forename,sortable:!0},{data:"Email",name:"Email",className:"md-table_word-wrap",title:c.resources.columnTranslations.email,sortable:!0},{data:"Telephone",name:"Telephone",className:"md-table_word-wrap",title:c.resources.columnTranslations.telephone,sortable:!0},{data:"City",name:"City",className:"md-table_word-wrap",title:c.resources.columnTranslations.city,sortable:!0},{data:"Company",name:"Company",className:"md-table_word-wrap",title:c.resources.columnTranslations.company,sortable:!0},{data:"Group",name:"Group",className:"md-table_word-wrap",title:c.resources.columnTranslations.group,sortable:!0},{data:"MemberId",name:"MemberId",title:c.resources.columnTranslations.memberId,sortable:!0},{data:"UpdatedDate",name:"UpdatedDateTime",title:c.resources.columnTranslations.dateAdded,sortable:!0}]),null==k&&(k=I.slice(0)).push({title:c.resources.columnTranslations.actions,sortable:!1,className:"md-table_text-right md-table_swop-actions s-action-col",data:null,render:function(e,t,o){var n="<button class='md-table_action md-table_action-item md-table_action-interchange s-guest-delete' data-id='"+o.GuestId+"'><svg class='icon-bg icon-bg-delete'><use xlink:href='#icon-bg-delete'></use></svg></button>",a="<div class='md-table_action-select md-table_action-item'><button class='md-table_action s-trigger-inline-menu' data-id='"+o.GuestId+"'><svg class='icon-bg icon-bg-icon-more_vert'><use xlink:href='#icon-bg-icon-more_vert'></use></svg></button><ul class='md-table_action-list'> <li class='md-table_action-interchange s-guest-edit' id='s-guest-edit' data-id='"+o.GuestId+"'>"+c.resources.editLabel+"</li>  <li id='btn-single-popup' data-id='"+o.GuestId+"'>"+c.resources.tableTranslations.single+"</li>  <li id='btn-group-popup'  data-id='"+o.GuestId+"'>"+c.resources.tableTranslations.group+"</li>  <li class='md-table_action-list__divider md-table_action-interchange'></li> <li class='md-table_action-interchange md-table_action-list__icon s-guest-delete' id='s-guest-delete' data-id='"+o.GuestId+"'>  <svg class='icon-bg icon-bg-delete'><use xlink:href='#icon-bg-delete'></use></svg>  <span>"+c.resources.deleteLabel+"</li></ul></div>";return"<button class='md-table_action md-table_action-item md-table_action-interchange s-guest-edit' data-id='"+o.GuestId+"'><svg class='icon-bg icon-bg-create'><use xlink:href='#icon-bg-create'></use></svg></button>"+(c.showDelete?n:"")+(c.showBookingOptions?a:"")}}),null!=w&&(t=w.page.info(),c.tableSettings.defaultPageSize=t.length),w=v(f.table).DataTable({dom:'<"top">rt<"md-table_footer display-flex justify-space-between"flp>',iDisplayLength:c.tableSettings.defaultPageSize,aLengthMenu:[[5,10,25,50,100],[5,10,25,50,100]],orderCellsTop:!0,autoWidth:!1,searching:!1,responsive:!1,order:[[0,"desc"]],loading:!1,processing:!1,serverSide:!0,ajax:e,initComplete:function(e,t){v(document).off(p.click,f.deleteButtons,n).on(p.click,f.deleteButtons,n),v(document).off(p.click,f.editButtons,o).on(p.click,f.editButtons,o),v(document).off(p.click,f.btnCancel,l).on(p.click,f.btnCancel,l),v(document).off(p.click,f.btnSingle,a).on(p.click,f.btnSingle,a),v(document).off(p.click,f.btnGroup,i).on(p.click,f.btnGroup,i)},language:C,columns:k,conditionalPaging:!0})}function u(e){0<v(f.table).length&&(h.searchBar.elements.searchInput.val(""),w.destroy(),r({url:g.getContactListingResults.url,type:eviivo.webcore.ajaxHelper.methods.POST}))}function d(e){u()}var c,v,p,m,b,g,f,h,w,C,I,k,y;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.guest=window.eviivo.eagle.guest||{},window.eviivo.eagle.guest.contact=window.eviivo.eagle.guest.contact||{},window.eviivo.eagle.guest.contact.listing=(m={resources:{tableTranslations:{processing:null,search:null,lengthMenu:null,info:null,infoEmpty:null,infoFiltered:null,loadingRecords:null,zeroRecords:null,emptyTable:null,first:null,previous:null,next:null,last:null,sortAscending:null,sortDescending:null},columnTranslations:{dateAdded:null,surname:null,forename:null,email:null,city:null,group:null,telephone:null,actions:null,company:null,memberId:null},deleteLabel:"Delete",editLabel:"Edit",saveLabel:"Save",cancelLabel:"Cancel",noLabel:"No",yesLabel:"Yes",mainHeader:null,removeContactNotificationMessage:null},tableSettings:{defaultPageSize:null}},b="eviivo.eagle.guest.contact.listing",g={getContactListingResults:{url:eviivoSuiteApp+"/guest/getContactListingResults"},removeContact:{actionId:"removeContact",url:eviivoSuiteApp+"/guest/removeFromContact"}},f={table:"#contacts-table",editButtons:".s-guest-edit",deleteButtons:".s-guest-delete",resetTable:"#reset-table",addContact:"#guest-add-new",btnSaveGuestContact:"#btnSaveGuestContact",form:"#frmGuestSaveDetailed",btnCancel:"#btn-close-popup",confirmRemoveGuestBtn:"#s-remove-guest",btnSingle:"#btn-single-popup",btnGroup:"#btn-group-popup",bookingListButton:".s-trigger-inline-menu",popupButtonsContainer:"#s-popup-buttons",popupWindow:"#popup-holder-window"},h={searchBar:null},y=k=I=C=w=null,{init:function(e){if("function"!=typeof window.jQuery)throw"eviivo.eagle.guest.contact.listing: module depends on jQuery";v=window.jQuery,c=v.extend(m,e),p={click:eviivo.util.namespacedEvent("click",b),submit:eviivo.util.namespacedEvent("submit",b),mouseup:eviivo.util.namespacedEvent("mouseup",b)},r({url:g.getContactListingResults.url,type:eviivo.webcore.ajaxHelper.methods.POST}),v(document).on(p.click,f.resetTable,d),v(f.addContact).on(p.click,o),v(f.popupWindow).on(p.click,f.btnSaveGuestContact,s),null!=c.autocompleteSettings&&null==h.searchBar&&(h.searchBar=eviivo.webcore.autocomplete.initSearchBar(c.autocompleteSettings))},populateTableWithContactSearchReasults:function(){var e=h.searchBar.elements.searchInput.val();null!=e&&0<e.length&&(w.destroy(),r({url:g.getContactListingResults.url,type:eviivo.webcore.ajaxHelper.methods.POST,data:{searchTerm:e}}))},openPopupWithContact:o,initAllEventsForConversationView:function(){(v=window.jQuery)(f.popupButtonsContainer).off(p.click,f.btnSaveGuestContact,s).on(p.click,f.btnSaveGuestContact,s),v(document).off(p.click,f.btnCancel,l).on(p.click,f.btnCancel,l),v(document).off(p.click,f.btnSingle,a).on(p.click,f.btnSingle,a),v(document).off(p.click,f.btnGroup,i).on(p.click,f.btnGroup,i)}})},7766:function(){window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.guest=window.eviivo.eagle.guest||{};o={hideMemberId:!1,resources:{submitSuccessMessage:null,onChageMessage:null,guestAlreadyExistInBooking:null}},d={title:"#title",communicatein:"#communicatein",country:"#country",stateprovince:"#stateprovince",countryofbirth:"#countryofbirth",nationality:"#nationality",datePickers:".guest-field.datepicker",datePicker:".cp-input-datepicker",dateClearButton:".btn-clear-date",tabs:".mod-tabs ul li",tabContainer:".guest-section-level-1",guestCheckBoxes:".s-guest-checkbox",memberIdContainer:".field-memberid",guestId:"#GuestId",showCalendar:".s-show-button",additionalGuestContainer:"#additionalguest-container",guestButtonsContainer:"#manage-guest-buttons",searchBarContainer:".guest-search",lockables:".s-lock-guest-field",resetButton:"#btnClearGuestTab",isInContactList:"#IsInContactList",form:"#frmGuestSaveDetailed",updateBookingGuest:"#UpdateBookingGuest",bookingGuestDropdown:"#booking-guests",guestType:"#GuestType",additionalGuestId:"#AdditionalGuestId",createNewContactButton:"#btnCreateNewContact",updateExistingContactButton:"#btnUpdateExistingContact",addToContactClicked:"#AddToContactClicked",saveGuestContactButton:"#btnSaveGuestContact",guestVoucherSectionInputs:"#guest-section-container-guest-voucher input[type=text]"},n={guestVoucher:"guest-voucher"},a="eviivo.eagle.guest",f={title:g=b=m=p=v=c=null,communicatein:null,country:null,stateprovince:null,countryofbirth:null,nationality:null,datePickers:null,dateClearButton:null,tabs:null,tabContainer:null,guestCheckBoxes:null,form:null,guestId:null,memberIdContainer:null,showCalendarButtons:null,additionalGuestContainer:null,guestButtonsContainer:null,searchBarContainer:null,lockables:null,resetButton:null,isInContactList:null,updateBookingGuest:null,guestType:null,additionalGuestId:null,createNewContactButton:null,updateExistingContactButton:null,addToContactClicked:null,searchBar:null,guestVoucherSectionInputs:null},h=!(i="state-active");var r,u,t,o,d,n,c,v,p,a,m,b,g,f,i,h,e={init:function(e){if("function"!=typeof window.jQuery)throw"eviivo.eagle.guest: module depends on jQuery";if(u=window.jQuery,"undefined"==typeof eviivo||void 0===eviivo.webcore||void 0===eviivo.webcore.forms)throw"eviivo.eagle.guest: module depends on eviivo.webcore.forms";if("undefined"==typeof eviivo||void 0===eviivo.webcore||void 0===eviivo.util)throw"eviivo.eagle.guest: module depends on eviivo.util";r=u.extend(o,e),p={click:eviivo.util.namespacedEvent("click",a),change:eviivo.util.namespacedEvent("change",a)},0<(t=u(r.containerLoadTriggerElement)).length&&t.on(p.click,w),u(d.guestButtonsContainer).on(p.click,d.saveGuestContactButton,C),u(d.createNewContactButton).on(p.click,C),u(d.updateExistingContactButton).on(p.click,s)},loadGuestTabContainer:w};function s(){l(),f.addToContactClicked.val(!0)}function l(){f.lockables.prop("disabled",!1)}function w(e,t,o,n){var a=null,i=null,s="frmGuestSaveDetailed",l="";if(d.form="#frmGuestSaveDetailed",m=h=!1,(v=null)!=t&&null!=t.Id&&(a=t.Id,void 0!==t.orderId&&(g=t.orderId),void 0!==t.bookingId&&(b=t.bookingId),void 0!==t.orderId&&(m=!0),null!=t.businessId&&(i=t.businessId),null!=t.formId)&&(s=t.formId,d.form="#".concat(t.formId),l=t.containerId),null!=e&&e===f.searchBar.selectors.searchInput){if(0<u(d.bookingGuestDropdown+' option[value="'+a+'"]').length)return void eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:r.resources.guestAlreadyExistInBooking});h=!0}else c=null;null==i&&(i=eviivo.eagle.basePageModelState.businessId);t={location:eviivoSuiteApp+"/guest/guestForm",actionId:a,requestData:{businessId:i,id:a,orderId:g,bookingId:b,formId:s},placeholder:"".concat(l," .guest-main-container"),id:s,spinnerSettings:r.spinnerSettings,notificationSettings:{submitSuccess:{enabled:!0}},actions:{onLoadSuccess:function(e){var t=i,n=(f.form=e,f.title=u(d.title),f.communicatein=u(d.communicatein),f.country=u(d.country),f.stateprovince=u(d.stateprovince),f.countryofbirth=u(d.countryofbirth),f.nationality=u(d.nationality),f.guestCheckBoxes=u(d.guestCheckBoxes),f.memberIdContainer=u(d.memberIdContainer),f.dateClearButton=u(d.dateClearButton),f.guestId=u(d.guestId),f.showCalendarButtons=u(d.showCalendar),f.additionalGuestContainer=u(d.additionalGuestContainer),f.guestButtonsContainer=u(d.guestButtonsContainer),f.searchBarContainer=u(d.searchBarContainer),f.lockables=u(d.lockables),f.resetButton=u(d.resetButton),f.isInContactList=u(d.isInContactList),f.updateBookingGuest=u(d.updateBookingGuest),f.guestType=u(d.guestType),f.additionalGuestId=u(d.additionalGuestId),f.createNewContactButton=u(d.createNewContactButton),f.updateExistingContactButton=u(d.updateExistingContactButton),f.addToContactClicked=u(d.addToContactClicked),f.guestVoucherSectionInputs=u(d.guestVoucherSectionInputs),f.resetButton.on(p.click,x),D(f.stateprovince.prop("disabled",!0),null),f.country.on(p.change,P),D(f.country,eviivo.webcore.staticData.htmlOptions.countries),f.country.trigger("change"),f.dateClearButton.on(p.click,B),D(f.title,eviivo.webcore.staticData.htmlOptions.titles),D(f.communicatein,eviivo.webcore.staticData.htmlOptions.availableGuestLanguages),D(f.countryofbirth,eviivo.webcore.staticData.htmlOptions.countries),D(f.nationality,eviivo.webcore.staticData.htmlOptions.nationalities),f.tabs=u(d.tabs),f.tabContainer=u(d.tabContainer),f.tabContainer.not("#"+f.tabContainer.first().attr("id")).addClass("hide"),$("#Profile").addClass("state-active"),f.tabs.on(p.click,T),eviivo.webcore.staticDataLoader.populateDataSource(eviivo.pms.businessSettingsAndDefaultMessages.getGuestFieldsDataSource(t)),eviivo.eagle.guest.validation.init({form:d.form,validateMemberId:!r.hideMemberId}),f.datePickers=u(d.datePickers),f.datePickers.on(p.change,S),(new Date).evStandardFirstDayCalendarOffset(eviivo.eagle.basePageModelState.userCultureCode)),o=(f.datePickers.each(function(e,t){var t=u(t),o=u("#"+t.data("target")),t=eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar,{defaultCultureCode:eviivo.eagle.basePageModelState.userCultureCode,calendar:t,yearRange:"-100:+50",changeMonth:!0,changeYear:!0,dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),firstDay:n,onSelect:I,doNotSetInitialDate:!0});o&&o.val()&&(o=eviivo.webcore.datetime.parse.parseDate(o.val()),t.datepicker("setDate",o))}),f.showCalendarButtons.on(p.click,L),!0===r.hideMemberId&&f.memberIdContainer.css("display","none"),null!=f.guestCheckBoxes&&(f.guestCheckBoxes.on(p.change,j),f.guestCheckBoxes.trigger("change")),0<f.additionalGuestContainer.length&&(f.additionalGuestContainer.html(""),f.searchBarContainer.removeClass("hide")),null!=v&&"function"==typeof v&&v(),!0===m&&"True"===f.isInContactList.val()?(f.lockables.prop("disabled",!0),f.createNewContactButton.prop("disabled",!0),f.updateExistingContactButton.prop("disabled",!1)):(f.lockables.prop("disabled",!1),f.createNewContactButton.prop("disabled",!1),f.updateExistingContactButton.prop("disabled",!0)),null!=h&&h&&f.updateBookingGuest.val(!0),null!=r.comboboxSettings&&null==f.searchBar&&eviivo.webcore.ajaxCombobox.initSearchBar(r.comboboxSettings),null!=r.autocompleteSettings&&null==f.searchBar&&(f.searchBar=eviivo.webcore.autocomplete.initSearchBar(r.autocompleteSettings)),jQuery("#howdidyouhearaboutusid"));null!=o&&o.on(p.change,function(){"OTH"==o.val()?jQuery(".field-howdidyouhearaboutus").removeClass("hide"):jQuery(".field-howdidyouhearaboutus").addClass("hide")}),eviivo.component.form.telephone.reset(),eviivo.component.form.telephone.init(d.form),jQuery("input[name='tel-mask_FieldValues[FieldValues[telephone]]']").attr("name","FieldValues[telephone]"),jQuery("input[name='tel-mask_FieldValues[FieldValues[otherphone]]']").attr("name","FieldValues[otherphone]")},onValidate:eviivo.eagle.guest.validation.isFormValid,onSubmitSuccess:k,onFormDataChange:y}};null!=o&&"function"==typeof o&&(c=o),null!=n&&"function"==typeof n&&(v=n),eviivo.webcore.forms.loadAjax(t)}function C(e){f.form.valid()&&0==eviivo.component.form.telephone.validate(d.form)&&("btnCreateNewContact"===e.target.id&&(f.isInContactList.val("True"),f.addToContactClicked.val(!0)),l(),e=u(d.bookingGuestDropdown).find(":selected"),f.guestType.val(e.data("type")),0==e.data("primary")&&1==e.data("staying")&&f.additionalGuestId.val(e.val()),f.form.submit(),f.addToContactClicked.val(!1),"True"===f.isInContactList.val())&&m&&(f.lockables.prop("disabled",!0),f.createNewContactButton.prop("disabled",!0),f.updateExistingContactButton.prop("disabled",!1))}function I(e,t){var o=t.input.datepicker("getDate");jQuery("input#"+t.input.data("target")).val(o.evStandardIso8601DateTimeUtcExtended()),t.input.parents(d.datePicker).find("a").removeClass("btn-disabled")}function k(e){f.guestId.val(e.DataPayload),null!=c&&"function"==typeof c&&c()}function y(e){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:r.resources.onChageMessage})}function B(e){var t=u(this).parents(d.datePicker);t.find("input").val(""),t.find("a").addClass("btn-disabled")}function S(e){var t=jQuery(this),o=u("#"+t.data("target"));""===t.val()&&o&&o.val("")}function T(e){var t=u(this),o=t.prop("id");t.hasClass(i)||(f.tabs.removeClass(i),t.addClass(i),f.tabContainer.removeClass("hide"),f.tabContainer.not("#guest-section-container-"+e.currentTarget.id).addClass("hide")),o===n.guestVoucher&&f.guestVoucherSectionInputs.prop("disabled",!0)}function G(){var e=f.form.find("select");e.val(e.find("option:first-child").val()),f.form.find("input.guest-field, textarea").val("")}function x(e){("False"===f.isInContactList.val()?G:(f.isInContactList.val("False"),f.guestId.val(0),f.updateBookingGuest.val(!0),f.createNewContactButton.prop("disabled",!1),f.updateExistingContactButton.prop("disabled",!0),G(),l))()}function L(e){u(this).siblings(d.datePickers).datepicker("show")}function D(e,t){e.html(t).val(e.data("selectedvalue"))}function P(e){var t,o=u(this).val();""!==o&&((t=f.stateprovince).html(""),null!=(o=eviivo.webcore.staticData.htmlOptions.counties[o])?(t.prop("disabled",!1),t.html(o.html),null!=(o=t.data("selectedvalue"))&&(t.val(o),t.data("selectedvalue",""))):t.prop("disabled",!0))}function j(e){var t=u(this),o=t.data("target"),t=t.is(":checked");u("#"+o).val(t)}window.eviivo.eagle.guest.init=e.init,window.eviivo.eagle.guest.loadGuestTabContainer=e.loadGuestTabContainer},1899:function(){var t,o,n,a,i,s,l;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.guest=window.eviivo.eagle.guest||{},window.eviivo.eagle.guest.validation=window.eviivo.eagle.guest.validation||{},window.eviivo.eagle.guest.validation=(n={form:null,validateMemberId:!1,resources:{memberIdValidationMessage:null}},a={email:150,name:150,surname:150,postcode:20,phone:40,address:500},i={name:null,surname:null,postcode:null,email:null,phoneNumber:null,otherPhoneNumber:null,memberId:null,form:null,address1:null,address2:null,address3:null},s={name:"#forename",postcode:"#postcode",surname:"#surname",email:"#email",phoneNumber:"#telephone",otherPhoneNumber:"#otherphone",memberId:"#memberid",address1:"#address1",address2:"#address2",address3:"#address3"},l="error",{init:function(e){if("function"!=typeof window.jQuery)throw"eviivo.eagle.guest.validation: module depends on jQuery";if(o=window.jQuery,"undefined"==typeof eviivo||void 0===eviivo.eagle||void 0===eviivo.eagle.guest)throw"eviivo.eagle.guest.validation: module depends on eviivo.eagle.guest";if(t=o.extend(n,e),i.form=o(t.form),null===i.form)throw"Please specify form id";i.name=i.form.find(s.name),i.surname=i.form.find(s.surname),i.email=i.form.find(s.email),i.phoneNumber=i.form.find(s.phoneNumber),i.otherPhoneNumber=i.form.find(s.otherPhoneNumber),i.postcode=i.form.find(s.postcode),i.address1=i.form.find(s.address1),i.address2=i.form.find(s.address2),i.address3=i.form.find(s.address3),i.name.attr("maxLength",a.name),i.surname.attr("maxLength",a.surname),i.email.attr("maxLength",a.email),i.postcode.attr("maxLength",a.postcode),i.phoneNumber.attr("maxLength",a.phone),i.otherPhoneNumber.attr("maxLength",a.phone),i.address1.attr("maxLength",a.address),i.address2.attr("maxLength",a.address),i.address3.attr("maxLength",a.address),!0===t.validateMemberId&&(i.memberId=o(s.memberId)),jQuery.validator.addMethod("phoneNumber",function(e,t){return this.optional(t)||eviivo.eagle.constants.regEx.phoneNumber.test(e)}),jQuery.validator.addMethod("email",function(e,t){return this.optional(t)||eviivo.eagle.constants.regEx.email.test(e)}),jQuery.validator.addMethod("memberId",function(e,t){return this.optional(t)||eviivo.eagle.constants.regEx.memberid.test(e)}),i.form.validate({ignore:"",errorPlacement:function(){return!0},errorClass:l,onfocusout:!1}),i.surname.rules("add",{required:!0}),i.phoneNumber.rules("add",{phoneNumber:!0}),i.otherPhoneNumber.rules("add",{phoneNumber:!0}),i.email.rules("add",{email:!0}),t.validateMemberId&&i.memberId.rules("add",{memberId:!0})},isFormValid:function(){return i.form.valid()}})},1776:function(){function s(){eviivo.component.listing.postInitRefreshDataTableSpecific(p.listTable)}function t(e,t){var o,n,a,i;e.preventDefault(),null==t?((e=u(this)).parents("tr").addClass("s-selected"),n=e.data("id")):(n=t.Id,void 0!==t.FormId&&(p.form=eviivo.util.getJqueryId(t.FormId),o=t.BusinessId,a=t.FormId,i=t.Container)),null==m&&(e="<button class='btn btn-secondary' id='btn-close-popup'>"+r.resources.cancelLabel,0!==n&&null!=n&&(e+="</button>",r.showBookingOptions&&(e+=" <button class='btn btn-left ml8' id='btn-single-popup'>"+r.resources.addBooking+"</button> <button class='btn btn-left ml8' id='btn-group-popup'>"+r.resources.addGroupBooking+" </button> "),!r.showSave)||(e+="<button class= 'btn btn-right' id='btnSaveGuestContact' > "+r.resources.saveLabel+"</button> "),m={buttons:e,header:r.resources.mainHeader,contentHolder:"<div class='guest-main-container mod-form'></div>"}),eviivo.webcore.popup.open({template:m,actionCompleteCallback:function(){var e=null==n?n:{Id:n};null!=a&&(e.formId=a,e.containerId=i,e.businessId=o),eviivo.eagle.guest.loadGuestTabContainer(null,e,s)}}),m=null}function o(e){e.stopPropagation(),window.location.href=eviivoSuiteApp+"/diary?guestId="+a(u(this))}function n(e){e.stopPropagation();e=a(u(this)),e={diaryView:r.diaryViewType,requestBId:r.businessId,guestId:e};eviivo.webcore.navigatorHelper.redirectTo(eviivoSuiteApp+"/multiroom",e,eviivo.webcore.navigatorHelper.options.target.sameWindow,eviivo.webcore.navigatorHelper.options.method.post)}function a(e){e=e.attr("data-id");return null==e?u("#GuestId").val():e}function i(e){0==eviivo.component.form.telephone.validate(p.form)&&u(p.form).submit()}function l(e){eviivo.webcore.popup.close()}var r,u,d,c,v,p,m;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.guest=window.eviivo.pms.guest||{},window.eviivo.pms.guest.listing=window.eviivo.pms.guest.listing||{},window.eviivo.pms.guest.listing=(c="eviivo.eagle.guest.contact.listing",v={removeContact:{actionId:"removeContact",url:eviivoSuiteApp+"/guest/removeFromContact"}},p={listTable:"#eviivo-list-guest",editButtons:".s-listing-table-edit",addContact:"#guest-add-new",btnSaveGuestContact:"#btnSaveGuestContact",form:"#frmGuestSaveDetailed",btnCancel:"#btn-close-popup",confirmRemoveGuestBtn:"#s-remove-guest",btnSingle:"#btn-single-popup",btnGroup:"#btn-group-popup",bookingListButton:".s-trigger-inline-menu",popupButtonsContainer:"#s-popup-buttons",popupWindow:"#popup-holder-window"},m=null,{init:function(e){if("function"!=typeof window.jQuery)throw"eviivo.eagle.guest.contact.listing: module depends on jQuery";u=window.jQuery,r=e,d={click:eviivo.util.namespacedEvent("click",c),submit:eviivo.util.namespacedEvent("submit",c),mouseup:eviivo.util.namespacedEvent("mouseup",c)},s(),u(p.addContact).on(d.click,t),u(p.popupWindow).on(d.click,p.btnSaveGuestContact,i),u(document).off(d.click,p.editButtons,t).on(d.click,p.editButtons,t),u(document).off(d.click,p.btnCancel,l).on(d.click,p.btnCancel,l),u(document).off(d.click,p.btnSingle,o).on(d.click,p.btnSingle,o),u(document).off(d.click,p.btnGroup,n).on(d.click,p.btnGroup,n),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:s})},openPopupWithContact:t,initAllEventsForConversationView:function(){(u=window.jQuery)(p.popupButtonsContainer).off(d.click,p.btnSaveGuestContact,i).on(d.click,p.btnSaveGuestContact,i),u(document).off(d.click,p.btnCancel,l).on(d.click,p.btnCancel,l),u(document).off(d.click,p.btnSingle,o).on(d.click,p.btnSingle,o),u(document).off(d.click,p.btnGroup,n).on(d.click,p.btnGroup,n)},ajaxDataCallback:function(){return{}},ajaxDataFailureCallback:function(){},dataLoadSuccess:function(){},onRowCreatedDataTable:function(e,t,o,n,a){var i,s;r.showBookingOptions&&(i=$(e)[0].rowIndex,s="<li id='btn-single-popup' data-id='".concat(t.Id,"'>").concat(r.resources.tableTranslations.single,"</li>\n                                  <li id='btn-group-popup'  data-id='").concat(t.Id,"'>").concat(r.resources.tableTranslations.group,"</li>"),eviivo.component.listing.rowActions.create("eviivo-list-guest",e,t.Id,s,i))},deleteGuest:function(e){return eviivo.webcore.ajaxHelper.executeAjax({actionId:v.removeContact.actionId+e.Id,url:v.removeContact.url,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:{businessId:eviivo.eagle.basePageModelState.businessId,guestId:e.Id},callback:function(e){e.DataPayload&&eviivo.component.listing.deleteRowsData(p.listTable,e.Id)}}),!1}})}},n={};function a(e){var t=n[e];return void 0!==t||(t=n[e]={exports:{}},o[e](t,t.exports,a)),t.exports}a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},a.d=function(e,t){for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";a(7766),a(1899),a(888),a(1776)}();
//# sourceMappingURL=guest.min.js.map