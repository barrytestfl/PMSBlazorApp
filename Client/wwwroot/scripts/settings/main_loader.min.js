var n={89:function(){function n(){var e;e="#"+r.id,s={mainContainer:e,parentContainer:".cp-flyout_overlay",optionListItem:e+" input[type=checkbox]",selectedImages:".cp-media-item.cp-media-item_selected, .cp-flex-table_row:not(.cp-flex-table_header) .cp-custom-input input[type=checkbox]:checked",saveButton:"button.s-save"},l(document).on(u.click,s.optionListItem,t)}function t(){l(s.mainContainer).parents(s.parentContainer).find(s.saveButton).prop("disabled",0===l(s.optionListItem+":checked").length)}function i(){var n=[];l(s.optionListItem+":checked").each(function(e,t){n.push({Code:l(t).attr("data-gallery-code"),EntityReference:l(t).attr("data-entity-reference")})}),n.forEach(function(e){var t={MediaIds:[],GalleryLinks:[]};t.GalleryLinks=[{Code:e.Code,EntityReference:e.EntityReference}],t.MediaIds=eviivo.media.restrictions.allRestrictions.galleries[e.Code].checkOnAssignToGalleryRestrictions(Object.values(c.allItems).filter(function(e){return e.dataPayload.isSelected})),eviivo.media.dataTransfer.assignMediaToGalleriesWithMasterFlag(r.galleryContext.referenceId,t,function(e){null!=p&&"function"==typeof p.onGalleryAssign&&p.onGalleryAssign()})})}function o(){eviivo.media.dataTransfer.retrieveGalleries(r.galleryContext.referenceId,function(e){null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler({galleries:e}),eviivo.media.dataTransfer.retrieveRoomTypes(function(e){if(null==e||0===e.length)null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler({galleryCode:"room_types",hideParentGallery:!0});else{for(var t=[],n=0;n<e.length;n++)t.push({Code:"room_types",EntityReference:e[n].Key,Name:e[n].TranslatedValue});null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler({galleryCode:"room_types",galleries:t})}})})}function a(e,t){r=l.extend({},t.internalOptions),p.onStateChangeHandler=e,n(),o()}var l,r,s,c,d,u,p;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.assignGallery=(d="eviivo.media.assignGallery",u={},p={},{init:function(e){l=window.jQuery,r=null!=e?l.extend({},e.callerOptions):{},p=null!=e?l.extend({},p,e.handlers):{},c=null!=e?l.extend({},e.dataObject):{},u.click="click."+d},refreshAssignGalleryState:function(e,t){c.selectedGalleryCode=null!=e?e:c.selectedGalleryCode,c.selectedEntityReference="room_types"===c.selectedGalleryCode?null!=t?t:c.selectedEntityReference:null,null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler(c)},show:function(e,t){c=t,eviivo.media.flyOut.load({headerTitle:eviivo.media.translations.Flyout_Title_AssignGalleries,bodyQuestion:eviivo.media.translations.Flyout_BodyQuestion_AssignGalleries,cancelButtonText:eviivo.media.translations.Button_Cancel,saveButtonText:eviivo.media.translations.Button_Save,settings:{disableSaveByDefault:!0},handlers:{onSave:i,onRenderBody:function(e,t){var n=l("#"+e);eviivo.jsx.render.mediaAssignGallery({dataObject:c,callerOptions:{id:e,galleryContext:t.galleryContext},actions:{mediaAssignGallery:{onComponentDidMount:a}}},n.parent()[0],n[0])}}})}})},490:function(){function n(){var e;e="#"+l.id,r={mainContainer:e,parentContainer:".cp-flyout_overlay",optionListItem:e+" input[type=radio]",selectedImages:".cp-media-item.cp-media-item_selected, .cp-flex-table_row:not(.cp-flex-table_header) .cp-custom-input input[type=checkbox]:checked",saveButton:"button.s-save"},a(document).on(c.click,r.optionListItem,t)}function t(){a(r.mainContainer).parents(r.parentContainer).find(r.saveButton).prop("disabled",0===a(r.optionListItem+":checked").length)}function i(){var n=[],e=a(r.optionListItem+":checked").attr("id");a(r.selectedImages).each(function(e,t){n.push(a(t).attr("data-item-key"))}),eviivo.media.dataTransfer.assignTypeToMedia(l.galleryContext.referenceId,e,n,function(){null!=d&&"function"==typeof d.onAssignMediaType&&d.onAssignMediaType()})}function o(e,t){l=a.extend({},t.internalOptions),d.onStateChangeHandler=e,n(),eviivo.media.dataTransfer.retrieveTypeCodes(function(e){null!=d&&"function"==typeof d.onStateChangeHandler&&d.onStateChangeHandler({typeCodes:e})}),eviivo.media.dataTransfer.retrieveTagsCodes(function(e){null!=d&&"function"==typeof d.onStateChangeHandler&&d.onStateChangeHandler({tagCodes:e})})}var a,l,r,s,c,d;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.assignType=(s="eviivo.media.assignType",c={},d={},{init:function(e){a=window.jQuery,l=null!=e?a.extend({},e.callerOptions):{},d=null!=e?a.extend({},d,e.handlers):{},c.click="click."+s},show:function(e){eviivo.media.flyOut.load({headerTitle:eviivo.media.translations.Flyout_Title_AssignMediaType,bodyQuestion:eviivo.media.translations.Flyout_BodyQuestion_AssignMediaType,cancelButtonText:eviivo.media.translations.Button_Cancel,saveButtonText:eviivo.media.translations.Button_Save,settings:{disableSaveByDefault:!0},handlers:{onSave:i,onRenderBody:function(e,t){var n=a("#"+e);eviivo.jsx.render.mediaAssignType({dataObject:null,callerOptions:{id:e,galleryContext:t.galleryContext},actions:{mediaAssignType:{onComponentDidMount:o}}},n.parent()[0],n[0])}}})}})},242:function(){function a(){var e;e="#"+p.id,f={mainContainer:e,selectedMedia:e+" .cp-slide_media",typeOptionListItem:e+" #select-type-section .cp-custom-select option",cultureCaptionOptionListItem:e+" #select-culture-caption-section .cp-custom-select option",cultureCaptionSelect:e+" #select-type-section .cp-custom-select",multiCultureCaptionInput:e+" #select-culture-caption-section input[type='text']",saveButton:"button.s-save",saveAndContinueButton:"button.s-save-and-continue",currentCultureCaptionInput:e+" #culture-caption-section input[type='text']",download:"#media-download",buttonRotateLeft:"button.s-rotate-left",buttonRotateRight:"button.s-rotate-right",excludeFromThirdParty:"#image-exclude-flag",tagsSelect:"#tags",tagsButtonAddTags:"#btnAddTags",tagsRemove:".removeTag"},u(document).on(g.click+" "+g.mousedown,f.buttonRotateLeft+", "+f.buttonRotateRight+", "+f.cultureCaptionSelect+", "+f.currentCultureCaptionInput+", "+f.excludeFromThirdParty+", "+f.tagsButtonAddTags+", "+f.tagsSelect+", "+f.tagsRemove+", "+f.multiCultureCaptionInput,n),u(document).off(g.click,f.download,i).on(g.click,f.download,i),u(document).off(g.click,f.buttonRotateLeft).on(g.click,f.buttonRotateLeft,function(e){t(e,-90)}),u(document).off(g.click,f.buttonRotateRight).on(g.click,f.buttonRotateRight,function(e){t(e,90)})}function t(e,t){var e=u(e.target).parents(".cp-slide_main").find("div.cp-slide_media img"),n=e.attr("data-rotation");null!=n&&""!=n||(n=0),n=parseInt(n)+t,e.css({"-webkit-transform":"rotate("+(n=360<=n||n<=-360?0:n)+"deg)","-moz-transform":"rotate("+n+"deg)",transform:"rotate("+n+"deg)"}),e.attr("data-rotation",n)}function n(){u(f.mainContainer).parents(v.parentContainer).find(f.saveButton+","+f.saveAndContinueButton).prop("disabled",!1)}function i(e){e=u(e.target),e=e&&e.parents(f.mainContainer)&&e.parents(f.mainContainer).find(".cp-slide_media")&&e.parents(f.mainContainer).find(".cp-slide_media").attr("data-item-key");e&&0<e.length&&eviivo.media.dataTransfer.downloadMedia(e,p.galleryContext.referenceId)}function l(){return u(v.selectedImages).length}function o(e,t){var n,i,o=[];p=u.extend({},t.internalOptions),h.onStateChangeHandler=e,a(),eviivo.media.dataTransfer.retrieveTypeCodes(function(e){n=e}),eviivo.media.dataTransfer.retrieveTagsCodes(function(e){i=e}),null!=t.dataObject&&null!=t.dataObject.mediaId?o.push(t.dataObject.mediaId):u(v.selectedImages).each(function(e,t){o.push(u(t).attr("data-item-key"))}),eviivo.media.dataTransfer.retrieveRoomTypes(function(e){null!=e&&0!==e.length&&null!=h&&"function"==typeof h.onStateChangeHandler&&h.onStateChangeHandler({activeLocalisedRoomTypes:e})}),eviivo.media.dataTransfer.retrieveMediaDetails(m.selectedGalleryCode,m.selectedEntityReference,p.galleryContext.referenceId,o,function(e){null!=h&&"function"==typeof h.onStateChangeHandler&&h.onStateChangeHandler({typeCodes:n,tagCodes:i,cultures:e.Cultures,mediaList:e.MediaList,currentMediaIndex:0,galleryContext:m.selectedGalleryCode})}),eviivo.media.slideControls.loadAndRender({container:".cp-flyout_slide-controls",settings:{renderSlideControls:p.shouldRenderSlideControls&&1<l(),currentItemNumber:1,maxItemNumber:l()}})}function e(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e="property_photos"===m.selectedGalleryCode&&0<u(f.excludeFromThirdParty).length&&u(f.excludeFromThirdParty).is(":checked"),n={MediaId:u(f.selectedMedia).attr("data-item-key"),MediaTypeCode:u(f.typeOptionListItem+":checked").val(),MediaCaptions:[],ExcludeFromThirdParty:e,Tags:[]},e=(n.Tags=eviivo.media.tags.getAssignedTags(),n.MediaCaptions.push({Content:d(u(f.currentCultureCaptionInput).val()),CultureCode:p.businessCultureCode}),u(f.cultureCaptionOptionListItem).each(function(e,t){n.MediaCaptions.push({Content:d(u(t).attr("data-caption")),CultureCode:u(t).val()})}),u(f.selectedMedia).find("img")),i=e.attr("data-rotation"),o=e.attr("data-original-rotation"),a=!1;null!=i&&null!=o?eviivo.media.dataTransfer.rotateImage({digest:e.attr("data-file-id"),rotation:parseInt(i)},function(e){n.IncreaseVersion=!0,r(n,t)},function(e){r(n,t)}):a=!0,a&&r(n,t)}function r(e,t){eviivo.media.dataTransfer.categorizeMediaDetails(p.galleryContext.referenceId,m.selectedEntityReference,e,function(){null!=h&&"function"==typeof h.onCategorizeSave&&h.onCategorizeSave(t,e)})}function s(){e(!0)}function c(){var e=u(f.selectedMedia).attr("data-item-key");eviivo.media.dataTransfer.tryDeleteMedia(p.galleryContext.referenceId,m.selectedGalleryCode,m.selectedEntityReference,[e],function(e){e&&null!=h&&"function"==typeof h.onDelete&&h.onDelete()})}function d(e){return eviivo.xss&&eviivo.xss.validator&&eviivo.xss.validator.testForAntiXssBasic&&eviivo.xss.validator.testForAntiXssBasic(e)?e:""}var u,p,f,v,m,y,g,h;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.categorize=(y="eviivo.media.categorize",g={},h={},{init:function(e){u=window.jQuery,p=null!=e?u.extend({},e.callerOptions):{},h=null!=e?u.extend({},h,e.handlers):{},m=null!=e?u.extend({},e.dataObject):{},g.click="click."+y,g.change="change."+y,g.mousedown="mousedown."+y,v={parentContainer:".cp-flyout_overlay",selectedImages:".cp-media-item.cp-media-item_selected, .cp-flex-table_row:not(.cp-flex-table_header) .cp-custom-input input[type=checkbox]:checked"},eviivo.media.tags.init()},show:function(i){eviivo.media.flyOut.load({headerTitle:eviivo.media.translations.Flyout_Title_Categorize,bodyQuestion:null,cancelButtonText:"all_media"===m.selectedGalleryCode?eviivo.media.translations.Menu_Delete:eviivo.media.translations.Menu_Remove,saveButtonText:eviivo.media.translations.Button_Save,saveAndContinueButtonText:eviivo.media.translations.Button_SaveAndContinue,settings:{disableSaveByDefault:!0,showSaveAndContinueButton:1<l()},handlers:{onSave:e,onSaveAndContinue:s,onCancel:c,onRenderBody:function(e,t){var n=u("#"+e);eviivo.jsx.render.mediaCategorize({dataObject:{mediaId:i},callerOptions:{id:e,galleryContext:t.galleryContext,cultureCode:t.cultureCode,businessCultureCode:t.businessCultureCode,shouldRenderSlideControls:null==i},actions:{mediaCategorize:{onComponentDidMount:o}}},n.parent()[0],n[0])}},flyoutContext:"categorize"})},changeCurrentMedia:function(e,t){return null!=h&&"function"==typeof h.onStateChangeHandler?h.onStateChangeHandler({moveIndexAction:e,currentContextMediaDate:t}):null},refreshAssignGalleryState:function(e,t){m.selectedGalleryCode=null!=e?e:m.selectedGalleryCode,m.selectedEntityReference="room_types"===m.selectedGalleryCode?null!=t?t:m.selectedEntityReference:null}})},446:function(){function n(e){var n,i,o,t,a,l;return e&&e.length?(n=[],i=[],o=this,e.forEach(function(e){var t=e.dataPayload;0===o.allowedMediaTypes.filter(function(e){return t.fileType.toLowerCase()==e.toLowerCase()}).length?n.push("".concat(t.name)):(i.push({MediaId:t.key,MediaMasterFlag:!0,MediaRestrictions:[]}),e=i.find(function(e){return e.MediaId==t.key}),r(t.width,t.height,o.shortestSide)&&(e.MediaRestrictions.push({QualityCode:"res"}),e.MediaMasterFlag=!1),!o.mediaTypeCode||null!=t.mediaTypeCode&&null!=t.mediaTypeCode&&""!==t.mediaTypeCode||(e.MediaRestrictions.push({QualityCode:"typ"}),e.MediaMasterFlag=!1))}),0<n.length&&(t=n,a=this.allowedMediaTypes,l=this.galleryName,t=eviivo.media.translations.Label_Warning_GalleryRestrictedMediaType.replace("{0}",n.length).replace("{1}",eviivo.media.galleryList.extractGalleryName(l).toLowerCase()).replace("{2}",a.join(", ")),eviivo.webcore.notifier.show({type:"warn",message:"<ul>".concat(t,"</ul>")})),i):e}function i(e,t,n){var i=(i=t.type)||function(e){switch(e.slice(e.lastIndexOf(".")+1).toLowerCase()){case"png":return"image/png";case"jpeg":case"jpg":return"image/jpeg";case"gif":return"image/gif";case"pdf":return"application/pdf";default:return null}}(t.webkitRelativePath),o=t.size,a={isFileTooLarge:!1,isTypeNotAllowed:!1},l=(o/1024>this.maxSize&&(a.isFileTooLarge=!0),"pdf"!==i);return null!=c&&!c&&l&&(a.isTypeNotAllowed=!0),null==s||s||l||(a.isTypeNotAllowed=!0),0===this.allowedMediaTypes.filter(function(e){return 0<i.toLowerCase().indexOf(e.toLowerCase())}).length&&(a.isTypeNotAllowed=!0),(l={name:t.name,hasWarnings:a.isTypeNotAllowed||a.isFileTooLarge}).hasWarnings?(l.warnings=a,l.type=i,l.size=o,n(e,l),!1):(n(e,l,i),!0)}function r(e,t,n){return e<n&&t<n}function o(){return this.mediaTypeCode}var a,s,c;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.restrictions=(c=s=null,{allRestrictions:a=[],init:function(e){Object.keys(e).forEach(function(t){a[t]=e[t],"galleries"===t&&Object.keys(a.galleries).forEach(function(e){a[t][e].galleryName=e,a[t][e].checkOnAssignToGalleryRestrictions=n,a[t][e].checkUploadRestriction=i,a[t][e].checkResolution=r,a[t][e].checkMediaTypeCodeRequired=o})})},setAllowImages:function(e){c=e},setAllowFiles:function(e){s=e}})},347:function(){function s(e,t,n){eviivo.webcore.notifier&&eviivo.webcore.notifier.show&&(eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:function(e){if(null==e)return eviivo.media.translations.Label_Warning_ConfirmRemoveImage;if(0===e.length)return eviivo.media.translations.Label_Warning_ConfirmDelete;for(var t=eviivo.media.translations.Label_Warning_ConfirmDelete+" "+eviivo.media.translations.Label_Warning_ConfirmDeleteGalleryNotification+'<ul class="column-list">',n=0;n<e.length;n++)t+="<li>"+e[n]+"</li>";return t+"<ul>"}(n),style:eviivo.webcore.notifier.styles.withTwoActions,autoHide:!1,buttonOne:"<button class='btn btn-secondary' id='ntf-dlt-cancel'> "+eviivo.media.translations.Button_Cancel+"</button>",buttonTwo:"<button class='btn btn-right btn-red' id='ntf-dlt-confirm'> "+t+"</button>"}),d("#ntf-dlt-confirm").on("click",e))}function c(e,t,n,i,o,a){t=p.urls.mediaApi+"/gallery/"+t+"/property/"+e+"/soft-delete/";null!=n&&(t+="/"+n),d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:t,data:JSON.stringify(i),success:function(e){"function"==typeof o&&o(e),l()},error:function(e,t,n){"function"==typeof a&&a(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})}function l(){eviivo.webcore.notifier&&eviivo.webcore.notifier.show&&null==eviivo.media.preview&&eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:eviivo.media.translations.Notifier_SaveWasSuccessful,autoHide:!0})}var d,o,u,a,p,r;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.dataTransfer=(u="eviivo.media.dataTransfer",a="aab96482eddf05a45ad8ba36c8c226b5ad8ba36c8c226b6482cef1963ef0f12a",p={},r={w:250,h:250},{init:function(e){d=window.jQuery,p=d.extend({},e),e=window.navigator&&window.navigator.userAgent,o=e&&(0<e.indexOf("MSIE ")||0<e.indexOf("Trident/"))},retrieveRoomTypes:function(t,i){d.ajax({type:"GET",crossDomain:!0,url:p.urls.pmsApi+"/media/ActiveLocalisedRoomTypes?cultureCode="+p.cultureCode+"&businessId="+p.businessId,dataType:"json",success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveGalleries:function(e,t,i){d.ajax({type:"GET",crossDomain:!0,url:p.urls.mediaApi+"/gallery/"+p.cultureCode+"/property/"+e+"/list",dataType:"json",success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveMedia:function(e,t,n,i,o,a,l){t=p.urls.mediaApi+"/gallery/"+t+"/"+p.cultureCode+"/property/"+e,null!=i&&(t+="/entity/"+i),t+="?width="+r.w+"&height="+r.h+"&isFlyoutMode="+o,null!=n&&(t+="&extraSelectedGallery="+n),d.ajax({type:"GET",url:t,dataType:"json",crossDomain:!0,success:function(e){"function"==typeof a&&a(e)},error:function(e,t,n){"function"==typeof l&&l(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveTypeCodes:function(t,i){d.ajax({type:"GET",crossDomain:!0,url:p.urls.mediaApi+"/gallery/type-codes/"+p.cultureCode,dataType:"json",success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveTagsCodes:function(t,i){d.ajax({type:"GET",crossDomain:!0,url:p.urls.mediaApi+"/tags/"+p.cultureCode,dataType:"json",success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveMediaDetails:function(e,t,n,i,o,a){e=p.urls.mediaApi+"/gallery/"+e+(null!=t?"/entity/"+t:"")+"/property/"+n+"/details/"+p.cultureCode,d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:e,data:JSON.stringify(i),dataType:"json",success:function(e){"function"==typeof o&&o(e)},error:function(e,t,n){"function"==typeof a&&a(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},assignMediaToGalleries:function(e,i,t,o){d.ajax({type:"POST",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/property/"+e+"/assign-media-to-galleries",data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("userId",p.userId)},success:function(e){"function"==typeof t&&t(e),l()},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},assignTypeToMedia:function(e,t,i,n,o){d.ajax({type:"POST",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/property/"+e+"/media/set-type/"+t,data:JSON.stringify(i),success:function(e){"function"==typeof n&&n(e),l()},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},categorizeMediaDetails:function(e,t,i,n,o){e=p.urls.mediaApi+"/gallery/property/"+e+"/categorize-media-details/",null!=t&&(e+="/"+t),d.ajax({type:"POST",crossDomain:!0,contentType:"application/json",url:e,data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("userId",p.userId)},success:function(e){"function"==typeof n&&n(e),l()},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},addMedia:function(e,i,t,o){d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:p.urls.mediaApi+"/gallery/property/"+e+"/add",data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("userId",p.userId)},success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},uploadImage:function(i,t,o,n){d.ajax({type:"POST",crossDomain:!0,url:p.urls.imagenApi+"/file/",async:!0,contentType:!1,data:i,processData:!1,beforeSend:function(e){e.setRequestHeader("X-ev-Imagen-APIKey",a)},xhr:function(){var e=null;return(e=window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest).upload.addEventListener("progress",function(e){e.lengthComputable&&(e=Math.round(100*e.loaded/e.total),"function"==typeof n)&&n(e)},!1),e},success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},downloadMedia:function(e,t,n,i){d.ajax({type:"GET",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/get-download-data/"+t+"/media/"+e,success:function(e){var t,n;e&&(t=e.Url,n=e.FileName,(e=new XMLHttpRequest).open("GET",t,!0),e.responseType="blob",e.onload=function(){var e,t;o?window.navigator&&window.navigator.msSaveBlob(this.response,n):(e=(window.URL||window.webkitURL).createObjectURL(this.response),(t=document.createElement("a")).href=e,t.download=n,document.body.appendChild(t),t.click(),document.body.removeChild(t))},e.send())},error:function(e,t,n){"function"==typeof i&&i(data),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},rotateImage:function(i,t,o){d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:p.urls.imagenApi+"/image/rotate",async:!0,data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("X-ev-Imagen-APIKey",a)},success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},tryDeleteMedia:function(o,a,l,e,r,i){"all_media"===a?d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,dataType:"json",url:p.urls.mediaApi+"/gallery/property/"+o+"/"+p.cultureCode+"/get-assigned-names",data:JSON.stringify(e),success:function(i){i&&null!=i.RoomTypeKeys&&0<i.RoomTypeKeys.length?eviivo.media.dataTransfer.retrieveRoomTypes(function(e){if(null!=e&&0!==e.length)for(var t=0;t<i.RoomTypeKeys.length;t++)for(var n=0;n<e.length;n++)e[n].Key==i.RoomTypeKeys[t]&&i.GalleryNames.push(e[n].TranslatedValue);s(function(){c(o,a,l,i.Ids,r)},eviivo.media.translations.Button_Delete,i.GalleryNames)}):s(function(){c(o,a,l,i.Ids,r)},eviivo.media.translations.Button_Delete,i.GalleryNames)},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}}):s(function(){c(o,a,l,e,r)},eviivo.media.translations.Button_Remove)},reOrderImages:function(i,e,t,n,o,a){t=p.urls.mediaApi+"/gallery/"+t+"/property/"+e+"/update-order",null!=n&&(t+="/"+n),d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:t,data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("userId",p.userId)},dataType:"json",success:function(e){"function"==typeof o&&o(e)},error:function(e,t,n){"function"==typeof a&&a(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},retrieveImagePreview:function(e,t,n,i){d.ajax({type:"GET",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/file/"+t+"/retrieve-preview/"+e,success:function(e){"function"==typeof n&&n(e)},error:function(e,t,n){"function"==typeof i&&i(data),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},deleteBasedOnExternalReference:function(e,t,n,i){e=p.urls.mediaApi+"/gallery/property/"+e+"/bulk-delete-based-on-externalref",d.ajax({type:"POST",contentType:"application/json",crossDomain:!0,url:e,beforeSend:function(e){e.setRequestHeader("userId",p.userId)},data:JSON.stringify(t),success:function(e){"function"==typeof n&&n(e),l()},error:function(e,t,n){"function"==typeof i&&i(),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},assignMediaToGalleriesWithMasterFlag:function(e,i,t,o){d.ajax({type:"POST",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/property/"+e+"/assign-media-to-galleries-with-master-flag",data:JSON.stringify(i),beforeSend:function(e){e.setRequestHeader("userId",p.userId)},success:function(e){"function"==typeof t&&t(e),l()},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},bulkAssignMediaToGalleries:function(e,i,t,o){d.ajax({type:"POST",crossDomain:!0,contentType:"application/json",url:p.urls.mediaApi+"/gallery/property/"+e+"/bulk-assign-media-to-gallery",data:JSON.stringify(i),success:function(e){"function"==typeof t&&t(e),l()},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},mergeImage:function(i,t,o){d.ajax({type:"POST",crossDomain:!0,url:p.urls.imagenApi+"/file/",async:!0,contentType:!1,data:i,processData:!1,beforeSend:function(e){e.setRequestHeader("X-ev-Imagen-APIKey",a)},success:function(e){"function"==typeof t&&t(e)},error:function(e,t,n){"function"==typeof o&&o(i),console.error("== ERROR: "+u),console.error(e),console.error(t),console.error(n)}})},getChunkSize:function(){return null!=p.imageUploadChunkSize?parseInt(p.imageUploadChunkSize):1048576},shouldUploadWithMultiPart:function(){return null!=p.imageUploadWithMultiPart?p.imageUploadWithMultiPart:"false"}})},501:function(){function e(e){e.stopPropagation()}function n(e){(null==p||"function"!=typeof p.onCancel||p.onCancel())&&l()}function i(e){null!=p&&"function"==typeof p.onSave&&p.onSave(),l()}function o(){null!=p&&"function"==typeof p.onSaveAndContinue&&p.onSaveAndContinue()}function a(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&l()}function l(e){r(c.mainContainer).addClass("clear"),setTimeout(function(){null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler({active:!1}),null!=p&&"function"==typeof p.onClose&&p.onClose();var e=r("body");e.hasClass("overflow-hidden")&&e.removeClass("overflow-hidden")},800)}var r,s,c,d,u,p,f;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.flyOut=(d="eviivo.media.flyOut",u={},p={},f=null,{init:function(t){r=window.jQuery,s=r.extend({},t.callerOptions),p=r.extend({},p,t.handlers);try{if(null==s.id)throw d+": unique id argument must be supplied"}catch(e){return console.error(e),void console.error(t)}u.click="click."+d,u.keyup="keyup."+d,u.touchstart="touchstart."+d,t="#"+s.id,c={mainContainer:t,overlay:".cp-flyout_overlay",flyoutContainer:".cp-flyout_container",closeFlyOut:t+" .s-close",cancelFlyOut:t+" .s-cancel",saveFlyOut:t+" .s-save",saveAndCountinueFlyOut:t+" .s-save-and-continue"},r(document).on(u.click+" "+u.touchstart,c.closeFlyOut,l),r(document).on(u.click+" "+u.touchstart,c.overlay,l),r(document).on(u.click+" "+u.touchstart,c.flyoutContainer,e),r(document).on(u.click,c.saveFlyOut,i),r(document).on(u.click,c.saveAndCountinueFlyOut,o),r(document).on(u.click,c.cancelFlyOut,n),r(document).on(u.keyup,a)},load:function(e){(f=r.extend({},e)).active=!0;var t=r("body");t.hasClass("overflow-hidden")||t.addClass("overflow-hidden"),null!=p&&"function"==typeof p.onStateChangeHandler&&p.onStateChangeHandler(f),null!=e&&null!=e.handlers&&(p.onSave=e.handlers.onSave,p.onSaveAndContinue=e.handlers.onSaveAndContinue,p.onClose=e.handlers.onClose,p.onCancel=e.handlers.onCancel)},close:l,toggleSave:function(e){r(c.saveFlyOut).removeAttr("disabled"),!0!==e&&r(c.saveFlyOut).attr("disabled","disabled")}})},547:function(){function a(e,t,n,i){return null==(e=null==e?{}:e)[t]&&(e[t]={}),null==e[t][n]&&(e[t][n]=i),e}function n(){eviivo.media.mediaList.initDroppable()}function i(e,t){if("undefined"==typeof eviivo||void 0===eviivo.media||void 0===eviivo.media.galleryList)throw v+": js module eviivo.media.galleryList not found";t={actions:t.internalActions,callerOptions:p.extend({},t.internalOptions)};t.handlers={onStateChange:e,onGallerySelect:function(e,t){eviivo.media.mediaList.onGallerySelect(e,t),eviivo.media.toolbar.refreshToolbarState(null,null,e,t,!1,!0),eviivo.media.assignGallery.refreshAssignGalleryState(e,t),eviivo.media.categorize.refreshAssignGalleryState(e,t),u(e,t)}},eviivo.media.galleryList.init(t)}function l(e,t){if("undefined"==typeof eviivo||void 0===eviivo.media||void 0===eviivo.media.mediaList)throw v+": js module eviivo.media.mediaList not found";t={actions:t.internalActions,callerOptions:p.extend({},t.internalOptions),serverConfigurationRestrictions:p.extend({},f.restrictions)};t.handlers={onStateChangeHandler:e,onSortableChange:function(e,t){eviivo.media.toolbar.refreshToolbarState(null,null,null,null,e,t)},onMediaListReturn:eviivo.media.toolbar.refreshToolbarTotalItems},eviivo.media.mediaList.setHandlers(t)}function r(e,t){if("undefined"==typeof eviivo||void 0===eviivo.media||void 0===eviivo.media.mediaList)throw v+": js module eviivo.media.mediaList not found";var n={actions:t.internalActions,callerOptions:p.extend({},t.internalOptions),serverConfigurationRestrictions:p.extend({},f.restrictions)};n.handlers={onImageListStateChangeHandler:e,onMediaSelectionChange:function(e,t){eviivo.media.toolbar.refreshToolbarState(e,t),eviivo.media.flyOut.toggleSave(0<e)},onMediaUploadSuccess:function(e){e&&"function"==typeof e&&e(),!0!==n.callerOptions.renderFlags.isInlineMode&&!0!==n.callerOptions.renderFlags.isFlyoutMode&&eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.refreshMediaList()},onGalleryAssign:function(){eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.refreshMediaList()},onAssignMediaType:eviivo.media.mediaList.refreshMediaList,onDelete:eviivo.media.toolbar.onDelete},null==window.mediaListInitialOptions&&(window.mediaListInitialOptions=n),eviivo.media.mediaList.init(n)}function s(e,t){if("undefined"==typeof eviivo||void 0===eviivo.media||void 0===eviivo.media.toolbar)throw v+": js module eviivo.media.toolbar not found";var n={actions:t.internalActions,callerOptions:p.extend({},t.internalOptions),dataObject:p.extend({},t.dataObject)};n.handlers={onStateChangeHandler:e,onSelectAll:eviivo.media.mediaList.selectAll,onClear:eviivo.media.mediaList.clearSelection,onAssignMediaType:eviivo.media.assignType.show,onAssignGalleries:eviivo.media.assignGallery.show,onCategorize:eviivo.media.categorize.show,onDelete:function(){!0!==n.callerOptions.renderFlags.isInlineMode&&!0!==n.callerOptions.renderFlags.isFlyoutMode&&eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.refreshMediaList()},onGallerySelect:function(e,t){eviivo.media.mediaList.onGallerySelect(e,t),u(e,t)}},null==window.toolBarInitialOptions&&(window.toolBarInitialOptions=n),eviivo.media.toolbar.init(n)}function o(e){eviivo.media.mediaList.handleSortable(!1,e)}function c(e){return eviivo.media.mediaList.sortableToggleHandler(e)}function d(e,t){if("undefined"==typeof eviivo||void 0===eviivo.media)throw v+": js module eviivo.media not found";if(void 0===eviivo.media.assignType)throw v+": js module eviivo.media.assignType not found";var n=t.renderFlags;if(eviivo.media.assignType.init({handlers:{onAssignMediaType:function(){eviivo.media.mediaList.refreshMediaList()}}}),void 0===eviivo.media.assignGallery)throw v+": js module eviivo.media.assignGallery not found";if(eviivo.media.assignGallery.init({handlers:{onGalleryAssign:function(){n.isInlineMode||n.isFlyoutMode||eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.refreshMediaList()}}}),void 0===eviivo.media.slideControls)throw v+": js module eviivo.media.slideControls not found";if(eviivo.media.slideControls.init({handlers:{onRefresh:function(e,t){return eviivo.media.categorize.changeCurrentMedia(e,t)},onButtonPrevClick:function(){eviivo.media.categorize.changeCurrentMedia("prev")},onButtonNextClick:function(){eviivo.media.categorize.changeCurrentMedia("next")}}}),void 0===eviivo.media.categorize)throw v+": js module eviivo.media.categorize not found";eviivo.media.categorize.init({dataObject:p.extend({},t.galleryContext),handlers:{onCategorizeSave:function(e,t){e&&eviivo.media.slideControls.refreshSlideControls("save",t),eviivo.media.mediaList.refreshMediaList(),n.isInlineMode||eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.clearSelection()},onDelete:function(){n.isInlineMode||n.isFlyoutMode||eviivo.media.galleryList.refreshGalleries(),eviivo.media.slideControls.refreshSlideControls("delete")&&eviivo.media.flyOut.close(),eviivo.media.mediaList.refreshMediaList(),n.isInlineMode||eviivo.media.galleryList.refreshGalleries(),eviivo.media.mediaList.clearSelection()}}})}function u(e,t){var n=f.businessId;sessionStorage.setItem(n+"_selectedGallery",e),null!=t?sessionStorage.setItem(n+"_selectedEntityReference",t):sessionStorage.removeItem(n+"_selectedEntityReference")}var p,f,v,m;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.gallery=(v="eviivo.media.gallery",m=function(e,o,t){e.preventDefault(),eviivo.media.flyOut.load({headerTitle:eviivo.media.translations.Flyout_Title_SelectImages,bodyQuestion:null,cancelButtonText:eviivo.media.translations.Button_Cancel,saveButtonText:eviivo.media.translations.Button_UseImages,settings:{disableSaveByDefault:!0},handlers:{onSave:function(e){eviivo.media.mediaList.useSelectedImage()},onClose:function(e){eviivo.media.mediaList.refreshMediaWithJSXCallback(o,t)},onRenderBody:function(e,t){var n=p("#"+e),i={actions:{},callerOptions:p.extend({},o),dataObject:null,selectedGalleryCode:o.galleryContext.selectedGalleryCode,selectedEntityReference:null},e=(i.callerOptions.id=e,i.callerOptions.renderFlags={isFlyoutMode:!0,isUploadFlyoutMode:!0},i.actions=a(i.actions,"mediaList","onComponentDidMount",l),i.actions=a(i.actions,"imageList","onComponentDidMount",r),i.actions=a(i.actions,"galleryToolbar","onComponentDidMount",s),{onAddMedia:eviivo.media.mediaList.triggerOsFileSelector});i.toolbarInfo=e,eviivo.jsx.render.gallery(i,n.parent()[0],n[0])}}})},{init:function(t){p=window.jQuery,f=p.extend({},t);try{if(null==f.id)throw v+": unique id argument must be supplied";if(null==document.getElementById(f.id))throw v+": placeholder with supplied id argument must be unique and present on the page"}catch(e){return console.error(e),void console.error(t)}var e;null!=f.renderFlags&&!0===f.renderFlags.renderByDefault&&(t=p("#"+f.id),(e={actions:{},callerOptions:p.extend({},f)}).actions=a(e.actions,"gallery","onComponentDidMount",d),e.actions=a(e.actions,"galleryList","onComponentDidMount",i),e.actions=a(e.actions,"galleryList","componentDidUpdate",n),e.actions=a(e.actions,"mediaList","onComponentDidMount",l),e.actions=a(e.actions,"imageList","onComponentDidMount",r),e.actions=a(e.actions,"galleryToolbar","onComponentDidMount",s),e.actions=a(e.actions,"galleryToolbar","onResetSortable",o),e.actions=a(e.actions,"checkboxSwitch","onBeforeSwitch",c),e.toolbarInfo={onAddMedia:f.renderFlags.isUploadFlyoutMode?m:eviivo.media.mediaList.triggerOsFileSelector},eviivo.jsx.render.gallery(e,t.parent()[0],t[0]))}})},826:function(){function e(e){e=o(e.target).closest("a");s=e.attr("data-gallery-code"),c=e.attr("data-entity-reference"),null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({selectedGallery:{code:s,entity:c}}),null!=l&&"function"==typeof l.onGallerySelect&&l.onGallerySelect(s,c)}function n(e){var e=o(e.target),t=e.attr("data-gallery-code");null==t&&(t=(e=e.parents(".cp-sidebar_section_title")).attr("data-gallery-code")),null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({selectedGallery:{code:s,entity:c},collapseGallery:t})}function i(){eviivo.media.dataTransfer.retrieveGalleries(a.galleryContext.referenceId,function(e){d=function(e){{var t;a.textResources&&a.textResources.singularAccommodationKeyword&&(t=e.findIndex(function(e){return"room_types"===e.Code}))&&(e[t].Name=a.textResources.singularAccommodationKeyword)}return e}(e),null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({selectedGallery:{code:s,entity:c},galleries:e}),eviivo.media.dataTransfer.retrieveRoomTypes(function(e){var t;if(null==e||0===e.length)null!=l&&"function"==typeof l.onStateChange&&(s=(t="room_types"===s)?"all_media":s,c=t?null:c,l.onStateChange({selectedGallery:{code:s,entity:c},galleryCode:"room_types",hideParentGallery:!0}),t)&&null!=l&&"function"==typeof l.onGallerySelect&&l.onGallerySelect(s,c);else{for(var n=[],i=0;i<e.length;i++)n.push({Code:"room_types",EntityReference:e[i].Key,Name:e[i].TranslatedValue});null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({selectedGallery:{code:s,entity:c},galleryCode:"room_types",galleries:n})}})})}var o,a,l,r,s,c,d,u,p;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.galleryList=(u="eviivo.media.galleryList",p={},{init:function(t){o=window.jQuery,a=o.extend({},t.callerOptions),l=o.extend({},t.handlers),d=o.extend({},t.dataObject),s=a.galleryContext.selectedGalleryCode,c=a.galleryContext.selectedEntityReference;try{if(null==a.id)throw u+": unique id argument must be supplied"}catch(e){return console.error(e),void console.error(t)}!0!==a.renderFlags.isInlineMode&&!0!==a.renderFlags.isFlyoutMode&&(p.click="click."+u,t="#"+a.id,r={mainContainer:t,gallery:t+" .cp-sidebar_inner .cp-media-card",topLevelGallery:t+" .cp-sidebar_inner .cp-sidebar_section_title"},o(document).on(p.click,r.gallery,e),o(document).on(p.click,r.topLevelGallery,n),i())},extractGalleryName:function(t){var n;return d.find(function(e){return e.Code==t})?d.find(function(e){return e.Code==t}).Name:(n="",d.forEach(function(e){e=e.Galleries.length?e.Galleries.find(function(e){return e.Code==t}):null;e&&(n=e.Name)}),n)},refreshGalleries:i,startDrag:function(){null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({dragEnabled:!0})},stopDrag:function(){null!=l&&"function"==typeof l.onStateChange&&l.onStateChange({dragEnabled:!1})}})},356:function(){function e(e){if(e.target.classList.contains("s-drag-false"))return!1}function n(){var e;!0===y.renderFlags.isFlyoutMode||!0===y.renderFlags.isInlineMode||!1===b||(e=!C(h.sortableTable).length,e=C(e?h.gridItemDragHandler:h.sortableElementsTable),C(e).each(function(e,t){C(t).data("draggable")&&C(t).draggable("destroy")}),T.isSortable)||C(e).draggable({appendTo:h.mediaContainer,cursor:"grabbing",cursorAt:{top:-6,left:-12},drag:function(e,t){var n=250,i=250,o=C(h.gallerySidebar).outerWidth(),a=C(h.gallerySidebar).position().left,l=C(h.gallerySidebar).position().top,r=l+60,s=C(h.gallerySidebar).position().left,c=C(h.gallerySidebar).height()-60,d=e.pageX,e=e.pageY,a=a<d&&d<o&&l<e&&e<r,l=s<d&&d<o&&c<e,r=C(h.gallerySidebar);a&&0!==r.scrollTop&&r.stop(!0,!1).animate({scrollTop:"-="+n+"px"},i),l&&1<Math.abs(r[0].scrollHeight-r.scrollTop()-r.outerHeight())&&r.stop(!0,!1).animate({scrollTop:"+="+n+"px"},i)},helper:function(){var e,t=null;for(e in T.files){var n=T.files[e].dataPayload;n.key==T.selectedItems[0]&&(t=n.src)}return 1<T.selectedItems.length?C("<div class='cp-draggable-ghost cp-draggable-ghost_multi'><span class='cp-draggable-ghost_number'>"+T.selectedItems.length+"</span><div class='cp-draggable-ghost_image'><img src='"+t+"'/></div></div>"):C("<div class='cp-draggable-ghost'><span class='cp-draggable-ghost_number'>"+T.selectedItems.length+"</span><div class='cp-draggable-ghost_image'><img src='"+t+"'/></div></div>")},start:function(e,t){C(h.overlayContainer).addClass("md-main_dim"),b=!1,eviivo.media.galleryList.startDrag()},stop:function(e,t){C(h.overlayContainer).removeClass("md-main_dim"),b=!0,eviivo.media.galleryList.stopDrag()}})}function i(e){var t;T.isSortable||(e.stopPropagation(),t=(t=C(e.target)).attr("data-item-key")||t.parents(".cp-media-item").attr("data-item-key"),T.selectedItems.indexOf(parseInt(t))<0&&c(e))}function o(e){var t=e.target.files;if(1<=t.length)for(var n=0;n<t.length;n++)D(t[n])}function t(e,t){T.isSortable=e,f(),T.isSortable&&v(),null!=O&&"function"==typeof O.onSortableChange&&O.onSortableChange(T.isSortable,t),null!=O&&"function"==typeof O.onStateChangeHandler&&O.onStateChangeHandler({isSortable:T.isSortable}),a(T.isSortable)}function a(e){var t=!C(h.sortableTable).length,n=C(h.listGalleryItem),i=C(h.mainContainer),t=t?h.sortableElementsGrid:h.sortableElementsTable;i.hasClass("ui-sortable")?(T.isSortable=!1,i.sortable("destroy"),i.off("touchend touchmove touchstart"),C(n).droppable("option","disabled",!1)):e&&(i.sortable({items:t,revert:500,opacity:.75,tolerance:"pointer",placeholder:"ui-sortable-placeholder",start:function(e,t){t.placeholder.height(t.item.height()),t.placeholder.width(t.item.width())},update:function(){for(var e=C(this).sortable("toArray",{attribute:"data-item-key"}),t=(eviivo.media.dataTransfer.reOrderImages(e,y.galleryContext.referenceId,y.galleryContext.selectedGalleryCode,y.galleryContext.selectedEntityReference),!C(h.sortableTable).length),n=C(h.galleryManagementMediaContainer).find(".cp-media-item_tag-main, .cp-media-table-orderIndex"),i=0;i<n.length;i++){var o=t?"".concat(i+1):"";t?C(n[i]).html(i?o:"".concat(o," ").concat(eviivo.media.translations.Label_Main_Image)):C(n[i]).hasClass("cp-media-item_tag")?(i-1)/2==0?(C(n[i]).html(eviivo.media.translations.Label_Main_Image),C(n[i]).show()):C(n[i]).hide():C(n[i]).html("".concat(i/2+1))}}}),C(n).droppable("option","disabled",!0),T.isSortable=e)}function l(e){T.isSortable||K(e)||(0<C(h.selectedItems).length||0==C(h.selectedItems).length&&1==y.renderFlags.isFlyoutMode?c(e):(e=(e=C(e.target)).attr("data-item-key")||e.parents(".cp-media-item").attr("data-item-key"),eviivo.media.categorize.show(e)))}function r(e){T.isSortable||K(e)||(e=(e=C(e.target)).attr("data-item-key")||e.parents(".cp-flex-table_row").attr("data-item-key"),eviivo.media.categorize.show(e))}function s(e){T.isSortable||(e.stopPropagation(),c(e))}function c(e){var t,n,e=C(e.target),i=e.attr("data-item-key")||e.parents(".cp-media-item").attr("data-item-key"),e=(e.parents(".cp-media-item").attr("id")||e.attr("id")).match(/\d+/)[0],o=T.selectedItems.indexOf(parseInt(i));for(n in-1<o?(T.selectedItems.splice(o,1),T.files[e].dataPayload.isSelected=!1):(null!=y.numberOfSelectedItemsAllowed&&T.selectedItems.length>=y.numberOfSelectedItemsAllowed&&(t=T.selectedItems[0],null!=(o=Object.entries(T.files).find(function(e){return e[1].dataPayload.key===parseInt(t)})))&&null!=o[1]&&(T.selectedItems.splice(0,1),o[1].dataPayload.isSelected=!1),T.selectedItems.push(parseInt(i)),void 0!==T.files[e]&&(T.files[e].dataPayload.isSelected=!0)),T.files)T.files[n].dataPayload.isSelectable=0<T.selectedItems.length&&!T.files[n].dataPayload.isSelected;null!=O&&"function"==typeof O.onImageListStateChangeHandler&&O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode),null!=O&&"function"==typeof O.onMediaSelectionChange&&O.onMediaSelectionChange(T.selectedItems.length,T.files)}function d(e){T.isSortable||(S=!0,e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.items&&(C(".media-page").addClass("dragging"),C(h.mediaContainer).hasClass("media-embed")&&C(h.dropZoneUI).css({top:C(h.galleryManagementMediaContainer).scrollTop()}),C(h.dropZoneUI).addClass("md-upload-mask_dragover-active")))}function u(e){e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="copy"}function A(e){S=!0,e.stopPropagation(),e.preventDefault(),e.originalEvent.dataTransfer.dropEffect="none"}function E(e){(e.target.checked?ee:v)()}function F(e){var t=e.target,t=C(t).parents(".cp-flex-table_row").find("input[type=checkbox]").data("item-key");null!=O&&"function"==typeof O.onDelete&&O.onDelete(e,t)}function D(e){"function"==typeof e.file?e.file(function(e){eviivo.media.uploaderDataTransfer.incrementItems(),R++,B(e)},function(){throw"err2"}):(eviivo.media.uploaderDataTransfer.incrementItems(),R++,B(e))}function B(o){e=o.name,I.lastIndex=0,M.lastIndex=0;var e,c=e.replace(I,"_").replace(M,"_");null!=T.files[c]?console.warn("image already uploaded"):(T.files[c]={key:c,dataPayload:null,isImage:null,showPreload:!0},eviivo.media.restrictions.allRestrictions.galleries[y.galleryContext.selectedGalleryCode].checkUploadRestriction(c,o,function(e,t,n){var a,l,r,s,i;T.files[e].dataPayload=t,T.files[e].isImage=!!n&&0===n.toLowerCase().indexOf("image"),O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode),n&&(a=c,l=T.files[e].isImage,r=o,s=n,(i=new FileReader).dataPayload=T.files[a].dataPayload,i.onload=function(){var e=T.files[a];e.dataPayload=r,e.dataPayload.isImage=l,e.dataPayload.tempSrc=i.result,e.dataPayload.showPreload=!0,O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode)},i.onloadend=function(e){l?(i=a,o={name:r.name,type:s,payload:e.target.result},(t=new Image).onload=function(){document.createElement("canvas").getContext("2d").drawImage(this,0,0);var e="",t=this.naturalWidth,n=this.naturalHeight,t=(null!=g&&null!=g.rezolution&&null!=g.rezolution.w&&null!=g.rezolution.h&&(t<g.rezolution.w||n<g.rezolution.h)&&(e+=eviivo.media.translations.Label_Error_RequiredRezolutionNotMet.replace("{0}",g.rezolution.w+"x"+g.rezolution.h).replace("{1}",t+"x"+n)),H(y.id,i)),n=m(t);""!==e&&((n=n.find(".icon-bg-quality-low")).parent().attr("title",e),n.removeClass("hide")),eviivo.media.uploaderDataTransfer.process({dataItem:{itemPreviewContainerId:t,key:i,name:o.name,type:o.type,showPreload:!1,payload:o.payload,owner:y.galleryContext.referenceId,ownerType:"PTY",galleries:[{code:y.galleryContext.selectedGalleryCode,entity:y.galleryContext.selectedEntityReference}]},actions:{onUploadQueued:Z,onUploadStart:null,onUploadProgress:X,onUploadSuccess:null,onUploadFail:function(e){J(e)},onDetailsUpdateSuccess:function(e){V(e)},onMediaUploadSuccess:function(e){y.renderFlags.isFlyoutMode&&O.onMediaUploadSuccess(z(e[0].FileType,e[0].Height,e[0].Width))}}})},t.src=o.payload):(t=H(y.id,a),eviivo.media.uploaderDataTransfer.process({dataItem:{itemPreviewContainerId:t,key:a,name:r.name,type:s,showPreload:!1,payload:e.target.result,owner:y.galleryContext.referenceId,ownerType:"PTY",galleries:[{code:y.galleryContext.selectedGalleryCode,entity:y.galleryContext.selectedEntityReference}]},actions:{onUploadQueued:Z,onUploadStart:null,onUploadProgress:X,onUploadSuccess:null,onUploadFail:function(e){J(e)},onDetailsUpdateSuccess:function(e){V(e)},onMediaUploadSuccess:function(){O.onMediaUploadSuccess(z(r.type))}}})),P++;var i,o,t,e=parseInt(R/5)+1;P%e==0&&O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode)},i.readAsDataURL(r))}))}function z(t,e,n){var i;y.renderFlags.isFlyoutMode&&((i=eviivo.media.restrictions.allRestrictions.flyOut[y.galleryContext.restrictMediaListFilesTo])&&0<i.filter(function(e){return t.includes(e)})&&eviivo.webcore.notifier&&eviivo.webcore.notifier.show||(i=eviivo.media.restrictions.allRestrictions.galleries[y.galleryContext.selectedGalleryCode].shortestSide,!t.includes("pdf")&&n<i&&e<i))&&eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:eviivo.media.translations.Label_Warning_FlyoutIncorrectType,autoHide:!0})}function H(e,t){return"#"+e+"-image-item-preview-"+t}function U(e){null!=e&&(e.isFile?D(e):e.isDirectory&&e.createReader().readEntries(function(e){for(var t=0;t<e.length;t++)U(e[t])}))}function Q(e){e.stopPropagation(),e.preventDefault();var t=e.originalEvent.dataTransfer.items;if(t&&0<t.length){C(h.loadingScreen).removeClass("hide"),O.onStateChangeHandler({hasFiles:!0});for(var n=0;n<t.length;n++)("function"==typeof t[n].webkitGetAsEntry||"function"==typeof t[n].getAsEntry)&&U(t[n].webkitGetAsEntry())}q()}function W(e){(e.originalEvent.clientX<=0||e.originalEvent.clientY<=0)&&(S=!1,clearTimeout(j),j=setTimeout(function(){S||(e.stopPropagation(),e.preventDefault(),q())},250))}function q(){C(".media-page").removeClass("dragging"),C(h.dropZoneUI).removeClass("md-upload-mask_dragover-active")}function K(e){return null==e.target.closest("[data-item-key]")}function Z(e){e=e.itemPreviewContainerId;_.push(e),m(e).find(".cp-loader_circle").removeClass("hide").removeClass("cp-loader_loader").removeClass("cp-loader_spinner").addClass("cp-loader_loader")}function V(e){var t=e.itemPreviewContainerId;m(t).find(".cp-loader_circle").removeClass("hide").removeClass("cp-loader_loader").removeClass("cp-loader_spinner").addClass("hide"),_=_.filter(function(e){return e!==t})}function X(e,t){m(e.itemPreviewContainerId).find(".cp-loader_circle .cp-loader_circle-inner").css("stroke-dashoffset",Math.floor(250-250*t/100)+"px")}function J(e){T.files[e.key].dataPayload={itemPreviewContainerId:e.itemPreviewContainerId.replace("#",""),key:e.key,name:e.name,hasWarnings:!0,warnings:{isUploadFailed:!0}},O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode);e=e.itemPreviewContainerId;C(e).find("img").remove()}function p(e){e.stopPropagation(),e.preventDefault(),C(h.uploadFiles).val(""),C(h.uploadFiles).click()}function f(e){null!=y.galleryContext.selectedGalleryCode&&eviivo.media.dataTransfer.retrieveMedia(y.galleryContext.referenceId,y.galleryContext.selectedGalleryCode,e,y.galleryContext.selectedEntityReference,!0===y.renderFlags.isFlyoutMode,$)}function $(e){Y(e),O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode)}function Y(e){if(null!=O&&"function"==typeof O.onMediaListReturn&&O.onMediaListReturn(null!=e?e.length:0,T.isSortable),null!=e){T.files={},T.selectedItems=[],1!=ne&&(T.originalSelectedItems=[]);var t,n=e;if(y.galleryContext.restrictMediaListFilesTo&&(t=eviivo.media.restrictions.allRestrictions.flyOut,n=n.filter(function(e){return t[y.galleryContext.restrictMediaListFilesTo].includes(e.FileType.toUpperCase())})),null!=n)for(var i=Math.max.apply(Math,n.map(function(e){return e.OrderIndex})),o=0;o<n.length;o++){var a,l,r=null!=n[o].OrderIndex?n[o].OrderIndex:null!=i?++i:o,s="pdf"!==n[o].FileType;null!=G&&!G&&s||(null==L||L||s)&&(!(a=!1)===y.renderFlags.isFlyoutMode&&null!=y.galleryContext.selectedEntityReference&&(a=n[o].EntityReference==y.galleryContext.selectedEntityReference),(a=null!=N?-1<C.inArray(n[o].FileId,N):a)&&(l=n[o].Id,T.originalSelectedItems.push(l),T.selectedItems.push(l)),l=null!=e[o].UploadDate&&y.cultureCode?new Date(e[o].UploadDate).evDisplayMediumTimeDate(y.cultureCode):null,T.files[r]={key:r,dataPayload:{isSelected:a,itemPreviewContainerId:r,key:n[o].Id,fileId:n[o].FileId,name:n[o].Name,mediaTypeDescription:n[o].MediaTypeDescription,galleriesCount:n[o].GalleriesCount,date:l,hasWarnings:!1,src:n[o].Url,isImage:s,order:n[o].OrderIndex,fileType:n[o].FileType,mediaTypeCode:n[o].MediaTypeCode,width:n[o].Width,height:n[o].Height,masterFlag:n[o].MasterFlag,mediaQuality:n[o].MediaQualityCodes,captions:n[o].Captions}})}}}function v(){for(var e in T.selectedItems=[],T.files)T.files[e].dataPayload.isSelected=!1,T.files[e].dataPayload.isSelectable=!1;null!=O&&"function"==typeof O.onImageListStateChangeHandler&&O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode),null!=O&&"function"==typeof O.onMediaSelectionChange&&O.onMediaSelectionChange(T.selectedItems.length,T.files),eviivo.media.toolbar.refreshToolbarState(0,!1,null,null,!1,!0)}function ee(){T.selectedItems=[];var e=0<C(h.listItem).length?C(h.listItem):C(h.gridItem),i=0,o=!1;e.each(function(e,t){if(null!=y.numberOfSelectedItemsAllowed){if(o)return;if(i===y.numberOfSelectedItemsAllowed)return te(eviivo.media.translations.Label_Warning_SelectionMaxLimit.replace("{0}",y.numberOfSelectedItemsAllowed)),void(o=!0)}var n=C(t).attr("data-item-key"),t=(T.selectedItems.push(parseInt(n)),i++,Object.entries(T.files).find(function(e){return e[1].dataPayload.key===parseInt(n)}));null!=t&&null!=t[1]&&(t[1].dataPayload.isSelected=!0,t[1].dataPayload.isSelectable=!1)}),null!=O&&"function"==typeof O.onImageListStateChangeHandler&&O.onImageListStateChangeHandler(T.files,y.galleryContext.selectedGalleryCode),null!=O&&"function"==typeof O.onMediaSelectionChange&&O.onMediaSelectionChange(T.selectedItems.length,T.files),eviivo.media.toolbar.refreshToolbarState(i,T.files,null,null,!1,!0)}function te(e){eviivo.webcore.notifier&&eviivo.webcore.notifier.show&&eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:e,autoHide:!0})}function m(e){return C(document.getElementById(e))}var y,g,h,ne,b,w,C,x,O,_,S,j,I,M,T,k,R,P,N,L,G;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.mediaList=(w="eviivo.media.mediaList",C=window.jQuery,x={},O={},S=!(_=[]),j=-1,I=new RegExp("W","g"),M=new RegExp(" ","g"),T={files:{},selectedItems:[],isSortable:!1},P=R=0,G=L=N=k=null,{init:function(t){C=window.jQuery,y=C.extend({},t.callerOptions),O=C.extend({},O,t.handlers),g=C.extend({},t.serverConfigurationRestrictions);try{if(null==y.id)throw w+": unique id argument must be supplied"}catch(e){return console.error(e),void console.error(t)}eviivo.media.uploaderDataTransfer.init(y),x.dragover="dragover."+w,x.dragenter="dragenter."+w,x.drop="drop."+w,x.dragleave="dragleave."+w,x.click="click."+w,x.change="change."+w,x.mousedown="mousedown."+w,x.mouseover="mouseover."+w,x.dragstart="dragstart."+w,t="#"+y.id,h={mainContainer:t,selectFolderOrFiles:t+"-select-files",dropZone:t+" .s-mod-drop-zone",dropZoneUI:t+" .md-upload-mask",loadingScreen:t+"-image-list-placeholder",uploadFiles:t+"-upload-files",gridItem:t+" .s-media-item",gridItemCheckBox:t+" .cp-media-item_select",listItem:t+" .cp-flex-table_row:not(.cp-flex-table_header) .cp-custom-input input[type=checkbox]",listItemImage:t+" .cp-flex-table_row:not(.cp-flex-table_header) .cp-media-item_table-image, #edit-btn",listGalleryItem:".media-page aside a.s-gallery-item:not(.cp-media-card_active)",checkBox:"#gallery-management-gallery-toolbar-checkbox",selectAllCheckBox:t+" #select-all",deleteMediaItem:t+" #delete-btn",sortableTable:".cp-flex-table_wrapper",sortableElementsTable:".cp-flex-table_row:gt(0)",sortableElementsGrid:"div.cp-media-item",mediaContainer:"#gallery-management",selectedItems:".cp-media-item_selected",gridItemDragHandler:".cp-media-item_drag-control",overlayContainer:".md-main",gallerySidebar:".media-page aside",galleryManagementMediaContainer:"#gallery-management-media-container"},C(document).off(x.dragstart,e).on(x.dragstart,e),C(document).off(x.dragenter,d).on(x.dragenter,d),C(document).off(x.dragover,A).on(x.dragover,A),C(document).off(x.dragover,h.dropZoneUI,u).on(x.dragover,h.dropZoneUI,u),C(document).off(x.drop,h.dropZoneUI,Q).on(x.drop,h.dropZoneUI,Q),C(document).off(x.dragleave,W).on(x.dragleave,W),C(document).off(x.click,h.selectFolderOrFiles,p).on(x.click,h.selectFolderOrFiles,p),C(document).off(x.click,h.gridItem,l).on(x.click,h.gridItem,l),C(document).off(x.click,h.gridItemCheckBox,s).on(x.click,h.gridItemCheckBox,s),C(document).off(x.click,h.listItem,s).on(x.click,h.listItem,s),C(document).off(x.click,h.listItemImage,r).on(x.click,h.listItemImage,r),C(document).off(x.change,h.selectAllCheckBox,E).on(x.change,h.selectAllCheckBox,E),C(document).off(x.click,h.deleteMediaItem,F).on(x.click,h.deleteMediaItem,F),C(document).off(x.change,h.uploadFiles,o).on(x.change,h.uploadFiles,o),C(document).off(x.mouseover,h.gridItemDragHandler,n).on(x.mouseover,h.gridItemDragHandler,n),C(document).off(x.mousedown,h.gridItemDragHandler,i).on(x.mousedown,h.gridItemDragHandler,i),f()},setHandlers:function(e){k=null,O=C.extend({},O,e.handlers)},onGallerySelect:function(e,t){y.galleryContext.selectedEntityReference=null==t?null:t,!(t=null)!==y.renderFlags.isInlineMode&&!0!==y.renderFlags.isFlyoutMode||(t=y.galleryContext.selectedGalleryCode),null==k&&(k=y.galleryContext.selectedGalleryCode,ne=!0),y.galleryContext.selectedGalleryCode=e,T.files={},T.selectedItems=[],null!=O&&"function"==typeof O.onMediaSelectionChange&&O.onMediaSelectionChange(T.selectedItems.length,T.files),null!=O&&"function"==typeof O.onStateChangeHandler&&O.onStateChangeHandler({sortable:!1}),a(!1),f(t)},clearSelection:v,selectAll:ee,triggerOsFileSelector:p,refreshMediaList:f,useSelectedImage:function(e){var t=null;if(null!=T.originalSelectedItems)for(var t=[],n=0;n<T.originalSelectedItems.length;n++)T.selectedItems.indexOf(T.originalSelectedItems[n])<0&&t.push(T.originalSelectedItems[n]);var i=y.galleryContext.selectedGalleryCode,o={MediaIds:[],MediaIdsToRemove:t,GalleryLinks:[{Code:i="all_media"===i?k:i,EntityReference:y.galleryContext.selectedEntityReference}]};null==i?null!=y.galleryContext.useSelectedImageCallback&&"function"==typeof y.galleryContext.useSelectedImageCallback&&y.galleryContext.useSelectedImageCallback(Object.values(T.files).filter(function(e){return e.dataPayload.isSelected})):(i=eviivo.media.restrictions.allRestrictions.galleries[i].checkOnAssignToGalleryRestrictions(Object.values(T.files).filter(function(e){return e.dataPayload.isSelected})),o.MediaIds=i,eviivo.media.dataTransfer.assignMediaToGalleriesWithMasterFlag(y.galleryContext.referenceId,o,function(){v(),null!=e&&"function"==typeof e&&e()},function(){v()}))},initDroppable:function(){var e;!1===b||!0===y.renderFlags.isFlyoutMode||!0===y.renderFlags.isInlineMode||T.isSortable||(e=C(h.listGalleryItem),C(e).droppable({tolerance:"pointer",drop:function(e,t){b=!0;var n=C(this),i=eviivo.media.restrictions.allRestrictions.galleries[n.attr("data-gallery-code")].checkOnAssignToGalleryRestrictions(Object.values(T.files).filter(function(e){return e.dataPayload.isSelected}));i&&i.length&&(i={MediaIds:i,GalleryLinks:[{Code:n.attr("data-gallery-code"),EntityReference:n.attr("data-entity-reference")}]},eviivo.media.dataTransfer.assignMediaToGalleriesWithMasterFlag(y.galleryContext.referenceId,i,function(){v(),null!=O&&"function"==typeof O.onGalleryAssign&&O.onGalleryAssign()},function(){v()}))}}))},handleSortable:t,sortableToggleHandler:function(e){return C(h.gridItem).length<1&&C(h.listItem).length<1?(te(eviivo.media.translations.Label_Warning_NothingToReorder),e.preventDefault(),!1):(t(e.target.checked),!0)},useSelectedImageAsPreview:function(t,e){var n=null;if(null!=T.originalSelectedItems)for(var n=[],i=0;i<T.originalSelectedItems.length;i++)T.selectedItems.indexOf(T.originalSelectedItems[i])<0&&n.push(T.originalSelectedItems[i]);e(n),eviivo.media.dataTransfer.retrieveImagePreview(T.selectedItems,y.galleryContext.referenceId,function(e){v(),null!=t&&"function"==typeof t&&t(e)},function(){v()})},refreshMediaWithJSXCallback:function(e,n){eviivo.media.dataTransfer.retrieveMedia(e.galleryContext.referenceId,e.galleryContext.selectedGalleryCode,null,e.galleryContext.selectedEntityReference,!1,function(e){var t;t=n,Y(e),t(T)})},updatePreviouslySelectedItems:function(e){N=e},setAllowImages:function(e){G=e},setAllowFiles:function(e){L=e}})},209:function(){window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.polyfill=(Object.entries||(Object.entries=function(e){for(var t=Object.keys(e),n=t.length,i=new Array(n);n--;)i[n]=[t[n],e[t[n]]];return i}),Object.find||Object.defineProperty(Array.prototype,"find",{value:function(e){var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;o<n;){var a=t[o];if(e.call(i,a,o,t))return a;o++}},configurable:!0,writable:!0}),Object.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){var n=Object(this),i=n.length>>>0;if(0!=i)for(var o,a,t=0|t,l=Math.max(0<=t?t:i-Math.abs(t),0);l<i;){if((o=n[l])===(a=e)||"number"==typeof o&&"number"==typeof a&&isNaN(o)&&isNaN(a))return!0;l++}return!1}}),Object.closest||(Element.prototype.closest=function(e){var t,n=(this.document||this.ownerDocument).querySelectorAll(e),i=this;do{for(t=n.length;0<=--t&&n.item(t)!==i;);}while(t<0&&(i=i.parentElement));return i}),Object.values||(Object.values=function(t){return Object.keys(t).map(function(e){return t[e]})}),void(Array.prototype.filter||(Array.prototype.filter=function(e,t){"use strict";if("Function"!=typeof e&&"function"!=typeof e||!this)throw new TypeError;var n=this.length>>>0,i=new Array(n),o=this,a=0,l=-1;if(void 0===t)for(;++l!=n;)l in this&&e(o[l],l,o)&&(i[a++]=o[l]);else for(;++l!=n;)l in this&&e.call(t,o[l],l,o)&&(i[a++]=o[l]);return i.length=a,i})))},793:function(){function n(e,t){o.extend({},t.internalOptions),s.onStateChangeHandler=e}function t(){null!=s&&("function"==typeof s.onStateChangeHandler&&s.onStateChangeHandler({updateSliderAction:"prev"}),"function"==typeof s.onButtonPrevClick)&&s.onButtonPrevClick()}function i(){null!=s&&("function"==typeof s.onStateChangeHandler&&s.onStateChangeHandler({updateSliderAction:"next"}),"function"==typeof s.onButtonNextClick)&&s.onButtonNextClick()}var o,a,l,r,s;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.slideControls=(l="eviivo.media.slideControls",r={},s={},{init:function(e){o=window.jQuery,null!=e&&o.extend({},e.callerOptions),s=null!=e?o.extend({},s,e.handlers):{},r.click="click."+l,a={prevButton:"#arrow-left",nextButton:"#arrow-right"},o(document).on(r.click,a.prevButton,t),o(document).on(r.click,a.nextButton,i)},refreshSlideControls:function(e,t){return null!=s&&"function"==typeof s.onStateChangeHandler&&s.onStateChangeHandler({updateSliderAction:e}),"function"==typeof s.onRefresh?s.onRefresh(e,t):null},loadAndRender:function(e){var t=(o=window.jQuery).extend({},e);eviivo.jsx.render.slideControls({actions:{slideControls:{onComponentDidMount:n}}},o(e.container)[0]),null!=s&&"function"==typeof s.onStateChangeHandler&&s.onStateChangeHandler(t)}})},986:function(){function e(){var e=$(this),t=$(this).attr("data-valueid");e.remove(),$("#".concat(t)).remove()}function t(e){e.preventDefault();var e=$(r.tagTextContainer),t=$(r.tagValueContainer),n=$(r.tags).find(":selected"),i=n.val(),n=n.text(),o=$("#defaultTagText"),a=$("#defaultTagValue"),l="tagText";""!==i&&0==e.find($("a[id^='"+l+"']:contains('"+n+"')")).length&&((a=a.clone(!0)).attr("id","tagValue"+i),t.append(a),a.val(i),(t=o.clone(!0)).attr("id",l+i),t.attr("data-valueId",a.attr("id")),e.append(t),t.text(n),t.append(o.children(0).clone()),t.removeClass("hide"))}var n,i,o,r;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.tags=(i="eviivo.media.tags",o={},r={dropdownActions:null,buttonAddTags:null,tags:null,tagTextContainer:null,tagValueContainer:null,selectedTagsValues:null,removeTag:null},{init:function(){n=window.jQuery,r.dropdownActions=".dropdown-actions",r.tags="#tags",r.buttonAddTags="#btnAddTags",r.tagTextContainer="#tagTextContainer",r.tagValueContainer="#tagValueContainer",r.selectedTagsValues="#selectedTagValues",r.removeTag=".removeTag",o.click="click."+i,o.change="change."+i,o.mousedown="mousedown."+i,n(document).off(o.click,r.buttonAddTags).on(o.click,r.buttonAddTags,t),n(document).off(o.click,r.removeTag).on(o.click,r.removeTag,e)},getAssignedTags:function(){var e=$(r.tagValueContainer),n=[];return e.find("input[id^='tagValue']").each(function(e,t){n.push($(this).val())}),n}})},542:function(){function e(e){e.stopPropagation()}function n(){null!=w&&"function"==typeof w.onCategorize&&w.onCategorize()}function i(){null!=w&&"function"==typeof w.onAssignGalleries&&w.onAssignGalleries(m,y)}function o(e){null!=w&&"function"==typeof w.onAssignMediaType&&w.onAssignMediaType(e)}function a(e,t){var n=[];null!=t?n.push(t):(r(e),v(g.selectedImages).each(function(e,t){n.push(v(t).attr("data-item-key"))})),eviivo.media.dataTransfer.tryDeleteMedia(m.galleryContext.referenceId,y.selectedGalleryCode,y.selectedEntityReference,n,function(){null!=w&&"function"==typeof w.onDelete&&w.onDelete(e)})}function l(e){("key"in(e=e||window.event)?"Escape"===e.key||"Esc"===e.key:27===e.keyCode)&&(y.showMenuList&&(y.showMenuList=!y.showMenuList),u(),w.onStateChangeHandler(y))}function r(e){e.stopPropagation(),e.preventDefault(),null!=w&&"function"==typeof w.onStateChangeHandler&&(y.showMenuList=!y.showMenuList,w.onStateChangeHandler(y))}function s(){null!=w&&"function"==typeof w.onStateChangeHandler&&(y.showMenuList=!1,w.onStateChangeHandler(y))}function c(e,t,n,i,o,a){y.allItems=null!=t?t:[],y.selectedMediaCount=null!=e?e:y.selectedMediaCount,y.selectedGalleryCode=null!=n?n:y.selectedGalleryCode,y.selectedEntityReference="room_types"===y.selectedGalleryCode?null!=i?i:y.selectedEntityReference:null,y.sortable=o,y.showMenuList=!1,y.resetSortable=a,null!=w&&"function"==typeof w.onStateChangeHandler&&w.onStateChangeHandler(y)}function d(e){null!=w&&"function"==typeof w.onSelectAll&&w.onSelectAll()}function u(e){null!=w&&"function"==typeof w.onClear&&w.onClear()}function p(e){var e=v(e.target),t=v("".concat(g.propertySwitch," option:selected")),e=e.val(),t=(t.text(),t.attr("data-id")),n=eviivo.media.main.getOptions();n.placeholders[0].galleryContext.refresh=!0,n.businessId=t,n.placeholders[0].galleryContext.referenceId=e,$("#pms-fly-out").remove(),eviivo.media.main.updateOptions(n),$(".s-select-image").click()}function f(e){var e=v(e.target),t=e.val(),e=e.find("option[value='"+t+"']").attr("data-entity-reference");null!=t&&""!==t&&(c(null,null,t,e,!1,!0),null!=w)&&"function"==typeof w.onGallerySelect&&w.onGallerySelect(t,e)}var v,m,y,g,h,b,w;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.toolbar=(h="eviivo.media.toolbar",b={},w={},{init:function(t){v=window.jQuery,m=v.extend({},t.callerOptions),w=v.extend({},w,t.handlers),y=v.extend({},t.dataObject);try{if(null==m.id)throw h+": unique id argument must be supplied"}catch(e){return console.error(e),void console.error(t)}b.click="click."+h,b.change="change."+h,b.keyup="keyup."+h,b.touchstart="touchstart."+h,t="#"+m.id,g={body:"body",mainContainer:t,bulkActions:{id:t+"-bulk-actions",categorize:t+"-categorize",addToGallery:t+"-add-to-gallery",setMediaType:t+"-set-media-type",delete:t+"-delete",menu:".cp-menu-list"},assignGalleryFlyOut:"#gallery-management-assign-gallery-fly-out",assignTypeFlyOut:"#gallery-management-assign-type-fly-out",selectedImages:".cp-media-item.cp-media-item_selected, .cp-flex-table_row:not(.cp-flex-table_header) .cp-custom-input input[type=checkbox]:checked",selectAll:".s-media-select-all:not(.disabled)",clearSelection:".s-media-clear-selection:not(.disabled)",gallerySwitch:".s-gallery-switch",propertySwitch:".s-property-switch",allMediaItems:".cp-media-item"},v(document).off(b.click+" "+b.touchstart,g.body,s).on(b.click+" "+b.touchstart,g.body,s),v(document).off(b.click+" "+b.touchstart,g.bulkActions.menu,e).on(b.click+" "+b.touchstart,g.bulkActions.menu,e),v(document).off(b.click,g.bulkActions.id,r).on(b.click,g.bulkActions.id,r),v(document).off(b.click,g.bulkActions.categorize,n).on(b.click,g.bulkActions.categorize,n),v(document).off(b.click,g.bulkActions.addToGallery,i).on(b.click,g.bulkActions.addToGallery,i),v(document).off(b.click,g.bulkActions.setMediaType,o).on(b.click,g.bulkActions.setMediaType,o),v(document).off(b.click,g.bulkActions.delete,a).on(b.click,g.bulkActions.delete,a),v(document).off(b.click,g.selectAll,d).on(b.click,g.selectAll,d),v(document).off(b.click,g.clearSelection,u).on(b.click,g.clearSelection,u),v(document).off(b.change,g.gallerySwitch,f).on(b.change,g.gallerySwitch,f),v(document).off(b.change,g.propertySwitch,p).on(b.change,g.propertySwitch,p),v(document).off(b.keyup,l).on(b.keyup,l),!0!==m.renderFlags.isInlineMode&&!0!==m.renderFlags.isFlyoutMode||eviivo.media.dataTransfer.retrieveGalleries(m.galleryContext.referenceId,function(e){null!=w&&"function"==typeof w.onStateChangeHandler&&w.onStateChangeHandler({galleries:e})})},refreshToolbarState:c,refreshToolbarTotalItems:function(e,t){y.selectedMediaCount=0,y.selectedGalleryCode=y.selectedGalleryCode,y.sortable=t,y.showMenuList=!1,null!=w&&"function"==typeof w.onStateChangeHandler&&w.onStateChangeHandler(y)},onDelete:a})},531:function(){function u(){b--}function i(){clearTimeout(r);var e,t=!1;for(e in a){var n=a[e];null!=n&&(!0!==n.isUploading&&!0!==n.isUploaded&&!0!==n.isError&&y<l&&(y++,("true"==eviivo.media.dataTransfer.shouldUploadWithMultiPart()?function(i){i.isUploading=!0,null!=i.actions&&"function"==typeof i.actions.onUploadStart&&i.actions.onUploadStart(i.dataItem);var e=i.dataItem,t=e.payload.indexOf("base64,"),n=e.payload;0<t&&(n=e.payload.substr(t+7));var o=new FormData,a=(o.append("name",e.name),o.append("type",e.type),o.append("owner",e.owner),o.append("ownerType",e.ownerType),eviivo.media.dataTransfer.getChunkSize()),l=n.length,r=0,s=0,t=l/a,e=(o.append("chunkTotal",t),Math.floor(1e9*Math.random()));o.append("fileSessionId",e);for(var c=0;c<l+a;c+=a){var d=n.slice(c,c+a);o.delete("payload"),o.append("payload",d),o.delete("chunkIndex"),o.append("chunkIndex",r),r++,eviivo.media.dataTransfer.uploadImage(o,function(e){++s==r&&(o.append("chunkMerge","true"),o.delete("chunkIndex"),o.delete("chunkTotal"),o.append("chunkTotal",r),o.delete("payload"),eviivo.media.dataTransfer.mergeImage(o,function(e){y--,i.isUploading=!1,i.isUploaded=!0,i.storageProviderResponse=e,u()}))},function(e,t,n){u(),p(i)},function(e){null!=i.actions&&"function"==typeof i.actions.onUploadProgress&&i.actions.onUploadProgress(i.dataItem,e)})}}:function(i){i.isUploading=!0,null!=i.actions&&"function"==typeof i.actions.onUploadStart&&i.actions.onUploadStart(i.dataItem);var e=i.dataItem,t=e.payload.indexOf("base64,"),n=e.payload;0<t&&(n=e.payload.substr(t+7));t=new FormData;t.append("payload",n),t.append("name",e.name),t.append("type",e.type),t.append("owner",e.owner),t.append("ownerType",e.ownerType),eviivo.media.dataTransfer.uploadImage(t,function(e){y--,i.isUploading=!1,i.isUploaded=!0,i.storageProviderResponse=e,u()},function(e,t,n){u(),p(i)},function(e){null!=i.actions&&"function"==typeof i.actions.onUploadProgress&&i.actions.onUploadProgress(i.dataItem,e)})})(n)),!0===n.isUploaded&&!0!==n.isLinking&&!0!==n.isLinked&&!0!==n.isError&&(g=null==g?[]:g).length<c&&g.push(n),!0!==n.isUploaded)&&!0!==n.isLinked&&!0!==n.isError&&0!==b&&(t=!0)}null!=g&&g.length===c&&!0!==h&&(h=!0,o()),!0===t?r=setTimeout(i,s):0<g.length&&!0!==h&&(h=!0,o())}function o(){if(null!=g&&0!==g.length){for(var e=[],t=0;t<g.length;t++){var n=g[t];if(null==n)console.warn(v+": queue item in mediaDetailsProcessingQueue is empty (null).");else if(n.isLinking=!0,null==n.storageProviderResponse)console.warn(v+": queue item in mediaDetailsProcessingQueue has no storageProviderResponse.");else{var i=n.dataItem;if(null==i||null==i.galleries||0===i.galleries.length)console.warn(v+": queue item in mediaDetailsProcessingQueue has no itemPayload or the itemPayload does not contain any galleries.");else{var n=null!=n.storageProviderResponse&&null!=n.storageProviderResponse.files&&0<n.storageProviderResponse.files.length&&null!=n.storageProviderResponse.files[0]&&null!=n.storageProviderResponse.files[0].File?n.storageProviderResponse.files[0].File:null,o=null!=n?n.Digest:null,a=null!=n?n.Extension:null,l=null!=n?n.Filename:null,r=null!=n?n.Width:null,n=null!=n?n.Height:null;if(null==o||null==a)console.warn(v+": queue item in mediaDetailsProcessingQueue has no digest id response or no extension in response.");else{for(var s={Id:null,FileId:o,FileType:a,Name:l,MediaTypeCode:null,Galleries:[],Width:r,Height:n},c=!0,d=0;d<i.galleries.length;d++){"all_media"===i.galleries[d].code&&(c=!1);var u=eviivo.media.restrictions.allRestrictions.galleries[i.galleries[d].code];s.Galleries.push({Code:i.galleries[d].code,EntityReference:m.renderFlags.isFlyoutMode?null:i.galleries[d].entity,ResolutionFlag:u.checkResolution(s.Width,s.Height,u.shortestSide),MediaTypeFlag:u.checkMediaTypeCodeRequired()})}!0===c&&s.Galleries.push({Code:"all_media"}),e.push(s)}}}}0===e.length?console.warn(v+": nothing to process for 'add media'. Data object is null or empty."):eviivo.media.dataTransfer.addMedia(m.galleryContext.referenceId,e,function(e){if(e.Length<=0)f();else{for(var t=0;t<g.length;t++){var n=g[t];n.isLinked=!0,n.isLinking=!1,null!=n.actions&&"function"==typeof n.actions.onDetailsUpdateSuccess&&n.actions.onDetailsUpdateSuccess(n.dataItem),g[t]=null}g=null,0===b&&(eviivo.media.mediaList.refreshMediaList(),m.renderFlags)&&m.renderFlags.refreshGalleries&&eviivo.media.galleryList.refreshGalleries()}h=!1},function(e,t,n){f()})}}function p(e){y--,u(),e.isError=!0,e.isUploading=!1,0===b&&(eviivo.media.mediaList.refreshMediaList(),m.renderFlags&&m.renderFlags.isFlyoutMode||eviivo.media.galleryList.refreshGalleries()),null!=e.actions&&"function"==typeof e.actions.onUploadFail&&e.actions.onUploadFail(e.dataItem)}function f(){for(var e=0;e<g.length;e++){var t=g[e];t.isError=!0,t.isLinked=!1,t.isLinking=!1,p(t)}g=null,h=!1}var t,v,m,a,l,y,r,s,g,c,h,b;window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.uploaderDataTransfer=(v="eviivo.media.uploaderDataTransfer",m={},a={},l=5,r=null,s=300,g=[],h=!(c=15),b=y=0,{init:function(e){t=window.jQuery,m=t.extend({},e)},process:function(e){(a=null==a?{}:a)[e.dataItem.key]={dataItem:e.dataItem,isUploading:!1,isUploaded:!1,isLinked:!1,isProcessing:!1,isError:!1,actions:e.actions},null!=e.actions&&"function"==typeof e.actions.onUploadQueued&&e.actions.onUploadQueued(e.dataItem),i()},incrementItems:function(){b++}})},385:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,c,i,d,u;e="mediaAssignGallery",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(c(u,e),t,n)},t=preact,c=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var e,n=this,i=n.state,o=i.dataObject,t=i.internalActions;null!=t&&null!=(t=t.mediaAssignGallery)&&"function"==typeof t.onComponentDidMount&&(e=window.jQuery.extend(!0,{},i),t.onComponentDidMount(function(e){if(null!=e.selectedGalleryCode&&(o.selectedGalleryCode=e.selectedGalleryCode),null!=e.selectedEntityReference&&(o.selectedEntityReference=e.selectedEntityReference),null==e.galleryCode)o.galleries=e.galleries;else for(var t=0;t<o.galleries.length;t++)if(o.galleries[t].Code===e.galleryCode){null!=e.hideParentGallery&&(o.galleries[t].hideParentGallery=e.hideParentGallery),o.galleries[t].Galleries=e.galleries;break}n.setState(i)},e))}},{key:"galleryItemNoSubGalleries",value:function(e){var t="gallery-item-"+e.Code+"-"+e.EntityReference,n=this.state.dataObject.selectedGalleryCode===e.Code&&this.state.dataObject.selectedEntityReference==e.EntityReference;return e.hideParentGallery?null:c("li",null,c("div",{className:"cp-custom-input"},c("input",{id:t,"data-gallery-code":e.Code,"data-entity-reference":e.EntityReference,type:"checkbox",disabled:n,checked:!1}),c("label",{htmlFor:t},c("span",{className:"checkbox-input"}),c("span",{className:"label"},e.Name))))}},{key:"galleryItemWithSubGalleries",value:function(e){return c("div",{className:"gallery-select-heading"},e.Name)}},{key:"renderGalleries",value:function(e,t){var n=null;if(null!=e)for(var n=[],i=0;i<e.length;i++){var o=e[i],a=void 0;if(o.Galleries&&0<o.Galleries.length)a=c("section",{className:"gallery-select-section depth-level-"+t},this.galleryItemWithSubGalleries(o),c("ul",null,this.renderGalleries(o.Galleries,t+1)));else{if("all_media"===o.Code)continue;a=this.galleryItemNoSubGalleries(o)}n.push(a)}return n}},{key:"render",value:function(){var e=this.state,t=e.dataObject;return c("div",{id:e.internalOptions.id},c("ul",null,this.renderGalleries(t.galleries,1)))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u},283:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,c,i,d,u;e="mediaAssignType",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(c(u,e),t,n)},t=preact,c=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var e,t=this,n=t.state,i=n.dataObject,o=n.internalActions;null!=o&&null!=(o=o.mediaAssignType)&&"function"==typeof o.onComponentDidMount&&(e=window.jQuery.extend(!0,{},n),o.onComponentDidMount(function(e){null!=e.typeCodes&&(i.typeCodes=e.typeCodes),t.setState(n)},e))}},{key:"renderMediaTypes",value:function(e){return null==e?null:e.map(function(e){return c("li",null,c("div",{className:"cp-custom-input"},c("input",{id:e.ItemKey,name:"type",type:"radio"}),c("label",{htmlFor:e.ItemKey},c("span",{className:"radio-input"}),c("span",{className:"label"},e.Content))))})}},{key:"render",value:function(){var e=this.state,t=e.dataObject,n=e.internalOptions.id+"-assign-type";return c("div",{id:e.internalOptions.id},c("section",{className:"gallery-select-section",id:n},c("ul",null,this.renderMediaTypes(t.typeCodes))))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u},890:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n),t=(e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,d,i,u,p;e="mediaCategorize",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(d(p,e),t,n)},t=preact,d=t.h,i=t.render,u=t.Component,p=function(){var e=o,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){var t;if(this instanceof o)return(t=s(e=i.call(this,e))).state={dataObject:t.props.dataObject||{},internalOptions:window.jQuery.extend({},t.props.callerOptions),internalActions:t.props.actions},t.state.dataObject.showTranslationsSection=null,t.state.dataObject.selectedMediaType=null,t.state.dataObject.selectedMediaTag=null,t.state.dataObject.imageCaption=null,t.state.dataObject.selectedGalleryCode=t.state.internalOptions.galleryContext.selectedGalleryCode,t.state.dataObject.selectedEntityReference=t.state.internalOptions.galleryContext.selectedEntityReference,t.handleCopyMediaUrl=t.handleCopyMediaUrl.bind(t),t.handleTranslationSlideChange=t.handleTranslationSlideChange.bind(t),t.handleCultureChange=t.handleCultureChange.bind(t),t.handleCultureCaptionChange=t.handleCultureCaptionChange.bind(t),t.handleMediaTypeChange=t.handleMediaTypeChange.bind(t),t.handleMediaTagChange=t.handleMediaTagChange.bind(t),t.handleImageCaptionChange=t.handleImageCaptionChange.bind(t),t.updateExistingMediaObject=t.updateExistingMediaObject,e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var n=this,e=n.state,i=e.dataObject,t=e.internalActions;null!=t&&null!=(t=t.mediaCategorize)&&"function"==typeof t.onComponentDidMount&&(e=window.jQuery.extend(!0,{},e),t.onComponentDidMount(function(e){if(i.selectedCultureCaption=null,i.selectedMediaType=null,i.selectedMediaTag=null,(i.imageCaption=null)!=e.currentMediaIndex&&(i.currentMediaIndex=e.currentMediaIndex),null!=e.galleryContext&&(i.selectedGalleryCode=e.galleryContext),null!=e.moveIndexAction){var t=i.currentMediaIndex||0;switch(e.moveIndexAction){case"delete":i.mediaList.splice(t,1),i.currentMediaIndex=t<=i.mediaList.length-1?t:t-1;break;case"save":n.updateExistingMediaObject(e.currentContextMediaDate),i.currentMediaIndex=t<i.mediaList.length-1?t+1:0;break;case"next":i.currentMediaIndex=t===i.mediaList.length-1?0:t+1;break;case"prev":i.currentMediaIndex=0===t?i.mediaList.length-1:t-1}}return e.typeCodes&&(i.typeCodes=e.typeCodes),e.tagCodes&&(i.tagCodes=e.tagCodes),e.cultures&&(i.cultures=e.cultures),e.mediaList&&(i.mediaList=e.mediaList),e.activeLocalisedRoomTypes&&(i.activeLocalisedRoomTypes=e.activeLocalisedRoomTypes),n.setState(e),null!=i&&null!=i.mediaList&&0===i.mediaList.length},e))}},{key:"updateExistingMediaObject",value:function(e){var t=this.state.dataObject.mediaList[this.state.dataObject.currentMediaIndex];t.Captions=e.MediaCaptions,t.MediaTypeCode=e.MediaTypeCode,t.ExcludeFromThirdParty=e.ExcludeFromThirdParty}},{key:"handleCopyMediaUrl",value:function(){this.urlInput.select(),"undefined"!=typeof document&&document.execCommand("copy")}},{key:"handleTranslationSlideChange",value:function(){this.state.dataObject.showTranslationsSection=!this.state.dataObject.showTranslationsSection,this.setState(this.state.dataObject.showTranslationsSection)}},{key:"handleCultureChange",value:function(e){e=e.target;this.state.dataObject.selectedCulture=e[e.selectedIndex].value,this.state.dataObject.selectedCultureCaption=e[e.selectedIndex].getAttribute("data-caption"),this.setState(this.state)}},{key:"handleCultureCaptionChange",value:function(e){var e=e.target,t=this.cultureSelect;t.options[t.selectedIndex].setAttribute("data-caption",e.value)}},{key:"handleMediaTypeChange",value:function(e){e=e.target;this.state.dataObject.selectedMediaType=e[e.selectedIndex].value,this.setState(this.state)}},{key:"handleMediaTagChange",value:function(e){e=e.target;this.state.dataObject.selectedMediaTag=e[e.selectedIndex].value,this.setState(this.state)}},{key:"handleImageCaptionChange",value:function(e){e=e.target;this.state.dataObject.imageCaption=e.value,this.setState(this.state)}},{key:"getCultureCaption",value:function(e,t){return null!=e&&null!=e.Captions?null==e.Captions.find(function(e){return e.CultureCode===t})?null!=e.Captions.find(function(e){return e.RootCultureCode===t})?e.Captions.find(function(e){return"root"===e.CultureCode}):null:e.Captions.find(function(e){return e.CultureCode===t}):null}},{key:"renderAssignedGalleriesSection",value:function(e,n){if(n.AssignedRoomTypesKeys&&0<n.AssignedRoomTypesKeys.length&&null!=e)for(var i=0;i<n.AssignedRoomTypesKeys.length;i++)(function(){var t=e.find(function(e){return e.Key===parseInt(n.AssignedRoomTypesKeys[i])});if(null!=t){if(n.GalleryNames&&n.GalleryNames.find(function(e){return e===t.TranslatedValue}))return;n.GalleryNames.push(t.TranslatedValue)}})();return n.GalleryNames&&0<n.GalleryNames.length?n.GalleryNames.map(function(e){return d("div",{className:"cp-pill"},e)}):d("div",{className:"cp-pill"},eviivo.media.translations.Gallery_ListNone)}},{key:"renderMediaSection",value:function(e,t,n){var i=n?d("embed",{src:t.DefaultUrl,type:"application/pdf"}):d("img",{src:t.DefaultUrl,"data-original-rotation":t.Rotation,"data-id":t.Id,"data-file-id":t.FileId}),n=n?null:d("div",{className:"cp-slide_toolbar"},d("button",{className:"s-rotate-left cp-slide_toolbar-btn","data-file-id":t.FileId,"data-key":t.Id},d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-rotate_left",icon:eviivo.media.icons.rotateLeft})),d("button",{className:"s-rotate-right cp-slide_toolbar-btn","data-file-id":t.FileId,"data-key":t.Id},d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-rotate_right",icon:eviivo.media.icons.rotateRight})));return d("div",{className:"cp-slide_main"},n,d("div",{className:"cp-slide_media","data-item-key":t.Id},i),d("div",{className:"user-select-none"},d("div",{className:"cp-slide_description"},eviivo.media.translations.Gallery_ListTitle),d("div",{className:"cp-pill_container"},this.renderAssignedGalleriesSection(e,t))))}},{key:"renderMediaTypesSection",value:function(e,t){var n;return null==e?null:(null===(n=this.state.dataObject).selectedMediaType&&(n.selectedMediaType=t&&0<t.length?t:e[0].Key),t=e.map(function(e){return d("option",{value:e.ItemKey},e.Content)}),d("section",{className:"stacked",id:"select-type-section"},d("label",null,eviivo.media.translations.Label_Type),d("select",{className:"cp-custom-select",value:n.selectedMediaType,onChange:this.handleMediaTypeChange},t)))}},{key:"renderMediaTagsSection",value:function(e,t){var n;return null==e||0==e.length?null:(e=e.map(function(e){return d("option",{value:e.ItemKey},e.Content)}),n=null==t?"":t.map(function(e){return d("a",{href:"javascript:;",id:"tagText"+e.ItemKey,"data-valueid":"tagValue"+e.ItemKey,className:"cp-closable-tag removeTag"},e.Content," ",d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-close",icon:eviivo.media.icons.close}))}),t=null==t?"":t.map(function(e){return d("input",{type:"hidden",id:"tagValue"+e.ItemKey,value:e.ItemKey})}),d("section",{className:"stacked",id:"select-tag-section"},d("label",{for:"tags"},eviivo.media.translations.Accessibility_Title),d("p",null,eviivo.media.translations.Label_Tag),d("div",{className:"dropdown-actions"},d("select",{className:"cp-custom-select s-tags-select",id:"tags",onChange:this.handleMediaTagChange},e),d("button",{id:"btnAddTags",className:"btn btn-primary"},eviivo.media.translations.Button_AddTag)),d("div",{className:"mod-flex-row mod-flex_nowrap mb24"},d("div",{id:"tagTextContainer"},d("a",{href:"javascript:;",id:"defaultTagText",className:"cp-closable-tag removeTag hide"}," ",d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-close",icon:eviivo.media.icons.close})),n),d("div",{id:"tagValueContainer"},d("input",{type:"hidden",id:"defaultTagValue"}),d("input",{type:"hidden",id:"selectedTagValues",name:"SelectedTagValues"}),t))))}},{key:"renderImageCaptionSection",value:function(e,t){var n=this.state.dataObject,e=this.getCultureCaption(e,t);return null===n.imageCaption&&(n.imageCaption=null!=e?e.Content:""),d("section",{className:"stacked",id:"culture-caption-section"},d("label",null,eviivo.media.translations.Label_Image_Caption),d("input",{type:"text",value:n.imageCaption,onChange:this.handleImageCaptionChange}))}},{key:"renderExcludeFlagSection",value:function(e){return d("section",{className:"stacked"},d("div",{className:"cp-custom-input"},d("input",{type:"checkbox",checked:e.ExcludeFromThirdParty,id:"image-exclude-flag"}),d("label",{for:"image-exclude-flag"},d("span",{className:"checkbox-input"}),d("span",{className:"label"},eviivo.media.translations.Label_Image_ExcludeFlag))))}},{key:"renderImageCaptionCultureSection",value:function(e,t,n){var i=this;if(null==e||!e.showTranslationsSection||null==e.cultures)return null;for(var o=e.cultures,a=[],l=0;l<o.length;l++){var r,s=o[l];s.Code!==n&&(r=null!=(r=i.getCultureCaption(t,s.Code))?r.Content:"",null!==e.selectedCultureCaption||e.selectedCulture!==s.Code&&null!=e.selectedCulture||(e.selectedCultureCaption=r),r=d("option",{value:s.Code,"data-caption":r},s.Name),a.push(r))}return 0===a.length?null:d("section",{className:"stacked",id:"select-culture-caption-section"},d("select",{className:"cp-custom-select",onChange:i.handleCultureChange,ref:function(e){return i.cultureSelect=e}},a),d("input",{type:"text",value:e.selectedCultureCaption,onChange:i.handleCultureCaptionChange}))}},{key:"renderMediaDataSection",value:function(e){var t=this,n=eviivo.media.icons,i=null!=e.Resolution&&null!=e.Resolution.Width&&e.Resolution.Height?d("li",null,d("strong",null,eviivo.media.translations.Label_Image_size," ")," ",e.Resolution.Width," x ",e.Resolution.Height):null,o=null!=e.UploadDate&&this.state.internalOptions.cultureCode?new Date(e.UploadDate).evDisplayMediumDateTime(this.state.internalOptions.cultureCode):null;return d("section",null,d("ul",null,d("li",null,d("strong",{className:"mr8"},eviivo.media.translations.Label_URL),d("div",{className:"cp-slide_data-input-url cp-icon-input cp-copy-text after"},d("input",{type:"text",value:e.Url,readonly:!0,ref:function(e){t.urlInput=e},onClick:this.handleCopyMediaUrl}),d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-content_copy",icon:n.copy,onClick:this.handleCopyMediaUrl}),d("div",{className:"cp-copy-text_tooltip"},eviivo.media.translations.Tooltip_LinkCopied))),d("li",null,d("strong",null,eviivo.media.translations.Label_Uploaded)," ",o),d("li",null,d("strong",null,eviivo.media.translations.Label_File_Name)," ",e.Name),d("li",null,d("strong",null,eviivo.media.translations.Label_File_Size)," ",e.Size," KB"),i))}},{key:"renderTranslationToggleSection",value:function(e){return this.state.dataObject.showTranslationsSection=null==this.state.dataObject.showTranslationsSection?e:this.state.dataObject.showTranslationsSection,d("div",{className:"cp-slide-toggle mb16"},d("input",{id:"showTranslatios",checked:this.state.dataObject.showTranslationsSection,type:"checkbox",onChange:this.handleTranslationSlideChange}),d("label",{htmlFor:"showTranslatios"},d("span",{className:"slide"},d("span",{className:"toggle"})),d("span",{className:"label"},eviivo.media.translations.Label_Show_Translation)))}},{key:"hasNotBusinessCultures",value:function(e,t,n){if(null!=e)for(var i=0;i<e.length;i++){var o=e[i];if(o.Code!==n){o=this.getCultureCaption(t,o.Code);if(null!=o&&null!=o.Content&&0<o.Content.length)return!0}}return!1}},{key:"renderErrorMessagesForImage",value:function(e){if(!e||e.length<1)return null;for(var t=[],n=0;n<e.length;n++)t.push(d("li",null,e[n]));return d("div",{class:"mod-notice mod-notice-small alert ml-auto mr-auto"},d("span",null,d("strong",null,eviivo.media.translations.Label_Warning_AttentionRequired)),d("br",null),d("ul",null,t))}},{key:"render",value:function(){var e=this.state,t=e.dataObject,n=e.internalOptions.id+"-categorize",i=t.currentMediaIndex||0;if(t.mediaList){var o,a,l,r,s,i=t.mediaList[i];if(null!=i)return o="pdf"===i.FileType,a=e.internalOptions.businessCultureCode,l=i.MediaTypeCode,r=i.Tags,s=this.hasNotBusinessCultures(t.cultures,i,a),d("div",{id:e.internalOptions.id},this.renderErrorMessagesForImage(i.MediaQualityCodes),d("section",{className:"cp-slide_container",id:n},d("div",{className:"cp-slide_slide"},this.renderMediaSection(t.activeLocalisedRoomTypes,i,o),d("div",{className:"cp-slide_data"},!o&&this.renderTranslationToggleSection(s),!o&&this.renderMediaTypesSection(t.typeCodes,l),!o&&this.renderImageCaptionSection(i,a),!o&&this.renderImageCaptionCultureSection(t,i,a),!o&&"property_photos"===t.selectedGalleryCode&&this.renderExcludeFlagSection(i),this.renderMediaDataSection(i),d("button",{id:"media-download",className:"btn btn-secondary"},eviivo.media.translations.Menu_Download),!o&&("property_photos"===t.selectedGalleryCode||"room_types"===t.selectedGalleryCode||"all_media"===t.selectedGalleryCode)&&this.renderMediaTagsSection(t.tagCodes,r)))))}return null}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=p},717:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n),t=(e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,d,i,u,p;e="svgRender",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(d(p,e),t,n)},t=preact,d=t.h,i=t.render,u=t.Component,p=function(){var e=o,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).renderInnerHtml=e.renderInnerHtml.bind(s(e)),e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"renderInnerHtml",value:function(e,t){return'<svg class="'.concat(e,'" pointer-events="none">').concat(t,"</svg>")}},{key:"render",value:function(e){return d("span",{style:"margin:0;",onClick:e.onClick?function(){return e.onClick()}:null,dangerouslySetInnerHTML:{__html:this.renderInnerHtml(e.cssClass,e.icon)},"data-item-id":e.dateItemId?e.dataItemId:null})}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=p},464:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n),t=(e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,d,i,u,p;e="checkBox",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(d(p,e),t,n)},t=preact,d=t.h,i=t.render,u=t.Component,p=function(){var e=o,t=u;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={isChecked:!1,internalActions:e.props.actions,callback:e.props.callback},e.handleSwitch=e.handleSwitch.bind(s(e)),e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"handleSwitch",value:function(e){var t,n=this.state.internalActions;null!=n&&(t=!0,t=null!=(n=n.checkboxSwitch)&&"function"==typeof n.onBeforeSwitch?n.onBeforeSwitch(e):t)&&(this.state.isChecked=!this.state.isChecked,null!=n)&&"function"==typeof n.onAfterSwitch&&n.onAfterSwitch(e),"function"==typeof this.state.callback&&this.state.callback(e)}},{key:"render",value:function(e){return e.display?(e.dataObject.resetSortable&&(this.state.isChecked=!1),d("div",{className:"cp-inner-toolbar_section mr16"},d("div",{className:"cp-slide-toggle"},d("input",{type:"checkbox",id:e.id+"-checkbox",checked:this.state.isChecked,onClick:this.handleSwitch}),d("label",{htmlFor:e.id+"-checkbox"},d("span",{className:"label"},e.label),d("span",{className:"slide"},d("span",{className:"toggle"})))))):null}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=p},838:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,d,i,c,u;window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render.flyOut=function(e,t,n){i(d(u,e),t,n)},e=preact,d=e.h,i=e.render,c=e.Component,u=function(){var e=o,t=c;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e.state.internalOptions.id+="-fly-out",e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var t=this,n=t.state,e=n.internalActions,i=(e=null==e?{flyOut:null}:e).flyOut;null!=i&&"function"==typeof i.onComponentDidMount&&(e=window.jQuery.extend(!0,{},n),i.onComponentDidMount(function(e){n.dataObject=e,i.renderBody=null!=e.handlers?e.handlers.onRenderBody:null,t.setState(n)},e))}},{key:"componentDidUpdate",value:function(){var e=this.state,t=e.internalActions;null!=t&&null!=(t=t.flyOut)&&"function"==typeof t.renderBody&&t.renderBody(e.internalOptions.id+"-body",e.internalOptions)}},{key:"render",value:function(){var e=eviivo.media.icons,t=this.state,n=t.dataObject,t=t.internalOptions.id,i=t+"-body",o=null!=n.bodyQuestion?d("p",null,n.bodyQuestion):null,a=null!=n.headerTitle?d("div",{className:"h3 user-select-none s-drag-false",draggable:"false"},n.headerTitle):null,l="cp-flyout_overlay",r=(n.active&&(l+=" active"),null!=n.settings?n.settings.disableSaveByDefault:null),s=null!=n.saveAndContinueButtonText&&null!=n.settings&&n.settings.showSaveAndContinueButton?d("button",{className:"s-save-and-continue btn btn-right mr8",disabled:r},n.saveAndContinueButtonText):null,c="categorize"!==n.flyoutContext||null==n.flyoutContext?d("button",{className:"s-cancel btn btn-secondary"},n.cancelButtonText):d("button",{className:"s-cancel btn btn-red"},n.cancelButtonText);return d("section",{className:l,id:t},d("div",{className:"cp-flyout_container"},d("div",{className:"cp-flyout_outer"},d("div",{className:"cp-flyout_header"},a,d("div",{className:"cp-flyout_slide-controls"}),d("div",{className:"s-close cp-flyout_close"},d(eviivo.jsx.component.svgRender,{cssClass:"icon-bg",icon:e.close}))),d("div",{className:"cp-flyout_body"},o,d("div",{id:i})),d("div",{className:"cp-flyout_footer"},c,d("button",{className:"s-save btn btn-right",disabled:r},n.saveButtonText),s))))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component.flyOut=u},375:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function t(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function a(i){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?t(Object(o),!0).forEach(function(e){var t,n;t=i,n=o[e=e],(e=r(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(e){Object.defineProperty(i,e,Object.getOwnPropertyDescriptor(o,e))})}return i}function l(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,r(i.key),i)}}function r(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}function s(e,t){return(s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function c(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=u(n),t=(e=i?(e=u(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return d(t)}}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,n,p,i,f,v;e="gallery",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(p(v,e),t,n)},n=preact,p=n.h,i=n.render,f=n.Component,v=function(){var e=o,t=f;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t);var n,i=c(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions,toolBarActions:e.props.toolbarInfo},e.state.dataObject.layout="grid",e.handleLayoutChange=e.handleLayoutChange.bind(d(e)),e.handleImageRefresh=e.handleImageRefresh.bind(d(e)),e.handleImageOrderingChange=e.handleImageOrderingChange.bind(d(e)),e.setState({parentActions:{imageRefresh:e.handleImageRefresh,toggleOrdering:e.handleImageOrderingChange}}),e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"handleImageRefresh",value:function(t){this.setState(function(e){return a(a({},e),{},{dataObject:a(a({},e.dataObject),{},{files:t.files})})}),eviivo.media.mediaList.init(window.mediaListInitialOptions),eviivo.media.toolbar.init(window.toolBarInitialOptions)}},{key:"handleImageOrderingChange",value:function(t){this.setState(function(e){return a(a({},e),{},{dataObject:a(a({},e.dataObject),{},{isSortable:t.target.checked})})})}},{key:"handleLayoutChange",value:function(e){this.state.dataObject.layout=e,this.setState(this.state)}},{key:"componentDidMount",value:function(){var t=this,n=t.state,e=n.internalActions;null!=e&&null!=(e=e.gallery)&&"function"==typeof e.onComponentDidMount&&e.onComponentDidMount(function(e){t.setState(n)},window.jQuery.extend({},n.internalOptions))}},{key:"render",value:function(){var e=this.state,t=e.dataObject,n=e.internalOptions,i=!0===n.renderFlags.isInlineMode||!0===n.renderFlags.isFlyoutMode?null:p(eviivo.jsx.component.galleryList,{dataObject:t,callerOptions:e.internalOptions,actions:e.internalActions}),o=!0!==e.internalOptions.renderFlags.isInlineMode?"media-page":"media-embed";return e.internalOptions.renderFlags.isFlyoutMode&&(o="media-embed"),p("div",{className:o,id:n.id},i,p("main",{className:"md-main"},p(eviivo.jsx.component.galleryToolbar,{dataObject:t,callerOptions:e.internalOptions,toolbarActions:e.toolBarActions,actions:e.internalActions,parentActions:e.parentActions,changeLayout:this.handleLayoutChange}),p(eviivo.jsx.component.mediaList,{dataObject:t,callerOptions:e.internalOptions,actions:e.internalActions}),p("div",{className:"md-main_overlay"})))}}])&&l(e.prototype,t),n&&l(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=v},287:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,c,i,d,u;e="galleryList",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(c(u,e),t,n)},t=preact,c=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e.state.internalOptions.id+="-gallery-sidebar",e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var e,l=this,r=l.state,s=r.dataObject,t=r.internalActions;null!=t&&null!=(t=t.galleryList)&&"function"==typeof t.onComponentDidMount&&(e=window.jQuery.extend(!0,{},r),t.onComponentDidMount(function(e){if(null==e.dragEnabled&&(s.selectedGallery=null!=e.selectedGallery?e.selectedGallery:null,s.collapseGallery=e.collapseGallery),s.dragEnabled=e.dragEnabled,null!=e.galleries)if(null==e.galleryCode)s.galleries=e.galleries;else for(var t=0;t<s.galleries.length;t++)if(s.galleries[t].Code===e.galleryCode){for(var n=s.galleries[t],i=(n.Galleries=e.galleries,n.Galleries),o=0;o<i.length;o++)for(var a=0;a<n.Counts.length;a++)i[o].EntityReference==n.Counts[a].ExtReference&&(i[o].ItemsCount=n.Counts[a].Count,i[o].AttentionFlag=n.Counts[a].AttentionFlag);break}if(null!=s.galleries)for(t=0;t<s.galleries.length;t++)if(s.galleries[t].Code===e.collapseGallery){null==s.galleries[t].isCollapsed?s.galleries[t].isCollapsed=!0:s.galleries[t].isCollapsed=!s.galleries[t].isCollapsed;break}if(null!=e.hideParentGallery&&null!=s.galleries&&null!=e.galleryCode)for(t=0;t<s.galleries.length;t++)if(s.galleries[t].Code===e.galleryCode){s.galleries[t].hideParentGallery=e.hideParentGallery;break}l.setState(r)},e))}},{key:"componentDidUpdate",value:function(){var e=this.state.internalActions;null!=e&&null!=(e=e.galleryList)&&"function"==typeof e.componentDidUpdate&&e.componentDidUpdate()}},{key:"galleryItemNoSubGalleries",value:function(e,t,n){var i="cp-paper cp-paper_p16 cp-media-card s-gallery-item user-select-none s-drag-false";return null!=t&&e.Code==t.code&&(null==t.entity||null!=t.entity&&e.EntityReference==t.entity)&&(i+=" cp-media-card_active"),!0===n&&i.indexOf("cp-media-card_active")<0&&(i+=" cp-media-card_dragged-active"),e.AttentionFlag&&(i+=" cp-media-card_attention"),c("a",{className:i,"data-gallery-code":e.Code,"data-entity-reference":e.EntityReference,"data-tooltip":"title","data-tooltip-pos":"top","data-tooltip-title":e.Description,"data-show-on":"desktop",href:"javascript:;",draggable:"false"},c("div",{className:"h5"},c("span",{className:"copy"},this.decodeHtmlString(e.Name)),c("span",{className:"cp-media-card_media-count"},1<=e.ItemsCount?e.ItemsCount:null)))}},{key:"galleryItemWithSubGalleries",value:function(e){var t=eviivo.media.icons;return c("div",{className:"cp-sidebar_section_title","data-gallery-code":e.Code,"data-tooltip":"title","data-tooltip-pos":"top","data-show-on":"desktop","data-tooltip-title":e.Description,draggable:"false"},c("span",null,this.decodeHtmlString(e.Name)),c(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-font-arrow_drop_up",icon:e.isCollapsed?t.arrows.down:t.arrows.up}))}},{key:"decodeHtmlString",value:function(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}},{key:"renderGalleries",value:function(e,t,n,i){var o=null;if(null!=e)for(var o=[],a=0;a<e.length;a++){var l=e[a];l=l.Galleries&&0<l.Galleries.length?c("section",{className:"cp-sidebar_section s-depth-level-"+t,"data-gallery-code":l.Code},this.galleryItemWithSubGalleries(l),l.isCollapsed?null:this.renderGalleries(l.Galleries,t+1,n,i)):l.hideParentGallery?null:this.galleryItemNoSubGalleries(l,n,i),o.push(l)}return o}},{key:"render",value:function(){var e=this.state,t=e.dataObject,e=e.internalOptions;return c("aside",{className:"cp-sidebar",id:e.id},c("div",{className:"cp-sidebar_inner"},this.renderGalleries(t.galleries,1,t.selectedGallery,t.dragEnabled)))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u},760:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function e(e,t,n){t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1})}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&n(e,t)}function n(e,t){return(n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var t,c,g,d,u,p,f;t="mediaList",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[t]=function(e,t,n){d(g(p,e),t,n)},c=preact,g=c.h,d=c.render,u=c.Component,p=function(){l(n,u);var t=r(n);function n(e){return i(this,n),(e=t.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e.state.internalOptions.id+="-media-container",e}return e(n,[{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){var e,t=this,n=t.state,i=n.internalActions;null!=i&&null!=(i=i.mediaList)&&"function"==typeof i.onComponentDidMount&&(e=window.jQuery.extend(!0,{},n),i.onComponentDidMount(function(e){n.dataObject.renderNewMediaList=!0,n.dataObject.isSortable=e.isSortable,t.setState(n)},e))}},{key:"render",value:function(){var e=this.state,t=e.dataObject,n=e.internalOptions;return g("section",{className:"md-uploader md-uploader_empty md-uploader_fill",id:n.id},g(f,{dataObject:t,callerOptions:n,actions:e.internalActions}))}}]),n}(),f=function(){l(n,u);var t=r(n);function n(e){return i(this,n),(e=t.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e.state.dataObject.files=null,e}return e(n,[{key:"componentDidMount",value:function(){var e,n=this,i=n.state,t=i.internalActions;null!=t&&null!=(t=t.imageList)&&"function"==typeof t.onComponentDidMount&&(e=window.jQuery.extend(!0,{},i),t.onComponentDidMount(function(e,t){i.dataObject.renderNewMediaList=!1,i.dataObject.selectedGalleryCode=t,i.dataObject.files=e,i.dataObject.hasFiles=null!=e&&0<e.length,n.setState(i)},e))}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"mediaPreviewErrorItem",value:function(e,t){var n=eviivo.media.icons,i=e.dataPayload,o=this.state.dataObject,a="",t=(!0===i.warnings.isFileTooLarge&&(a=eviivo.media.translations.Label_Error_FileTooLarge.replace("{0}",(t.galleries[o.selectedGalleryCode].maxSize/1024).toFixed(0))),!0===i.warnings.isTypeNotAllowed&&(a=eviivo.media.translations.Label_Error_FileTypeNotAllowed+t.galleries[o.selectedGalleryCode].allowedMediaTypes.join(", ")),!0===i.warnings.isUploadFailed&&(a+=eviivo.media.translations.Label_Error_FileUploadFailed),null!=i.itemPreviewContainerId?i.itemPreviewContainerId:i.containerId+"-image-item-preview-_"+e.key);return g("div",{className:"cp-media-item cp-media-item_error",id:t,"data-item-key":i.key},g("div",{className:"cp-media-item_error-icon"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-warning",icon:n.warning})),g("div",{className:"cp-media-item_info","data-tooltip":"title","data-tooltip-pos":"top","data-show-on":"desktop","data-tooltip-title":a},g("div",{className:"cp-media-item_label"},i.name)))}},{key:"renderImage",value:function(e){var t=eviivo.media.icons;return null!=e.src?this.state.dataObject.renderNewMediaList?g("span",{className:"cp-media-item_file"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-picture_as_pdf",icon:t.pdf})):g("img",{src:e.src,onError:function(e){e.target.onerror=null,e.target.src="data:image/svg+xml;base64,PCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjI0IiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiPgo8dGl0bGU+aW1hZ2Utb2ZmPC90aXRsZT4KPHBhdGggZD0iTTIuMjggM2wtMS4yOCAxLjI3IDIgMnYxMi43M2MwIDEuMTA1IDAuODk1IDIgMiAydjBoMTIuNzNsMiAyIDEuMjctMS4yOC0xOC43Mi0xOC43MnpNNC44MyAzbDE2LjE3IDE2LjE3di0xNC4xN2MwLTEuMTEtMC45LTItMi0yaC0xNC4xN3pNOC41IDEzLjVsMi41IDMgMS0xLjI1IDIuNzMgMi43NWgtOS43M2wzLjUtNC41eiI+PC9wYXRoPgo8L3N2Zz4K"}}):this.uploadingSpinner(e.tempSrc)}},{key:"imageErrorItem",value:function(){var e=eviivo.media.icons;return g("span",{className:"cp-media-item_error-icon"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-image-off",icon:e.imageError}))}},{key:"uploadingSpinner",value:function(e){return null!==e?g("div",{className:"cp-media-item_spinner-bg-image-container",style:"background-image: url("+e+");"},g("span",{className:"cp-media-item_spinner"},g("span",{className:"spin"}))):g("span",{className:"cp-media-item_spinner"},g("span",{className:"spin"}))}},{key:"mediaPreviewPdfItem",value:function(e){return null!=e&&null!=e.showPreload&&e.showPreload?this.uploadingSpinner():(e=eviivo.media.icons,g("span",{className:"cp-media-item_file"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-picture_as_pdf",icon:e.pdf})))}},{key:"getCaptionValue",value:function(t,e){return t&&e?e.find(function(e){return e.CultureCode===t})&&0<e.find(function(e){return e.CultureCode===t}).Content.length?e.find(function(e){return e.CultureCode===t}).Content:e.find(function(e){return e.CultureCode===e.RootCultureCode})?e.find(function(e){return e.CultureCode===e.RootCultureCode}).Content:e.find(function(e){return"root"===e.CultureCode})?e.find(function(e){return"root"===e.CultureCode}).Content:"":""}},{key:"mediaPreviewThumbnailItem",value:function(e,t,n){var i,o,a,l,r,s,c,d=e.dataPayload;if(null==d)return null;if(d.mediaQuality&&0<d.mediaQuality.length&&this.state.internalOptions.renderFlags.isFlyoutMode){var u=eviivo.media.restrictions.allRestrictions.galleries[this.state.internalOptions.galleryContext.selectedGalleryCode];if(u&&0!==u.shortestSide&&u.allowedMediaTypes)return null}return d.hasWarnings?this.mediaPreviewErrorItem(e,t):(u=this.state.internalOptions,t=this.state.dataObject,s=u.renderFlags.isFlyoutMode,c=u.renderFlags.isInlineMode,a=null!=t.selectedGalleryCode&&"all_media"===t.selectedGalleryCode,r=(null==t.selectedGalleryCode?u.galleryContext:t).selectedGalleryCode,a=!a&&("room_types"===r||"property_photos"===r||"my_web_home"===r),r=eviivo.media.icons,i="",o=d.captions,i=d.isImage?this.getCaptionValue(u.cultureCode,o):d.name,o=n+e.key,n=a?0===e.itemIndex?g("span",null,g("span",{className:"cp-media-item_tag-counter"},e.itemIndex+1),g("span",null,eviivo.media.translations.Label_Main_Image)):g("span",{className:"cp-media-item_tag-counter expandable"},e.itemIndex+1):null,a=a?g("div",{className:"cp-media-item_tag cp-media-item_tag-main"},n):null,n=d.mediaQuality&&d.mediaQuality.length&&!s?g("div",{class:"cp-media-item_tag cp-media-item_tag-error"},g("span",null,eviivo.media.translations.Label_Warning_AttentionRequired)):null,l=d.isImage?this.renderImage(d):null==d.isImage?null:this.mediaPreviewPdfItem(d),c=s||c?null:g("div",{className:"cp-media-item_drag-control"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-move",icon:eviivo.media.icons.move})),u=u.renderFlags.isUploadFlyoutMode&&!s?null:g("div",{className:"cp-media-item_select"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-check_circle",icon:r.checkmark}),g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-radio_button_unchecked",icon:r.unchecked})),u=!0!==t.sortable?g("div",{className:"cp-media-item_icon-container"},u,g("div",{className:"cp-media-item_primary-trigger"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-create",icon:r.edit})),c):null,null==d.src&&(u=null),r=!0!==t.isSortable||s?null:g("div",{className:"cp-media-item_drag"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-move",icon:eviivo.media.icons.move})),c="s-media-item cp-media-item",s=t.isSortable?c+" cp-media-item_order":c,s=d.isSelected?s+" cp-media-item_selected":s,s=d.isSelectable?s+" cp-media-item_selectable":s,c="cp-media-item_image",d=t.isSortable?c:c+" cp-media-item_loader",g("div",{className:s,id:o,"data-item-key":e.dataPayload.key},u,g("div",{className:d},l,g("div",{className:"cp-media-item_tag-container"},n,a)),g("div",{className:"cp-media-item_info"},g("div",{className:"cp-media-item_label","data-tooltip":"title","data-tooltip-pos":"top","data-tooltip-title":i}," ",i)),r))}},{key:"mediaDropZoneMask",value:function(e,t){var n;return!0!==t.hasFiles?(t=e.id+"-upload-files",e=[],n=eviivo.media.icons,e.push(g("input",{type:"file",id:t,style:"display: none;",multiple:!0})),e.push(g("div",{className:"md-upload-mask"},g("div",{className:"md-upload-mask_animation"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-file-image",icon:n.dropZone.file}),g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-file-pdf",icon:n.dropZone.pdf}),g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-cloud_upload",icon:n.dropZone.cloudUpload}),g("div",{className:"md-upload-mask_text"},eviivo.media.translations.Label_UploadMediaToGallery)))),e):null}},{key:"mediaDropZone",value:function(e,t){var n=eviivo.media.icons,i=null,o=null;return!0!==t.hasFiles&&(i=this.mediaDropZoneMask(e,t),t=eviivo.media.translations.Label_MaximumAllowedSize.replace("{0}",(e.restrictions.galleries[e.galleryContext.selectedGalleryCode].maxSize/1024).toFixed(0)),e=e.id+"-select-files",o=g("div",{className:" md-upload-placeholder_intro md-upload-placeholder_start"},g("div",{className:"md-upload-placeholder_cards"},g("div",{className:"md-upload-placeholder_card third"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-photo_camera",icon:n.dropZone.camera})),g("div",{className:"md-upload-placeholder_card second"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-photo_camera",icon:n.dropZone.camera})),g("div",{className:"md-upload-placeholder_card first"},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-photo_camera",icon:n.dropZone.camera}))),g("p",{className:"user-select-none s-drag-false",draggable:"false"},eviivo.media.translations.Label_DropFilesHereToUpload,g("br",null),eviivo.media.translations.Label_Or,g("br",null),g("a",{href:"#",id:e,className:"s-drag-false"},eviivo.media.translations.Label_SelectFiles)),g("small",{className:"user-select-none s-drag-false",draggable:"false"},t))),g("div",{className:"s-drop-zone-watermark md-upload-placeholder"},o,i)}},{key:"mediaPreviewListHeader",value:function(e){var t=this.state.dataObject,n=(null==t.selectedGalleryCode?internalOptions.galleryContext:t).selectedGalleryCode,t=null!=t.selectedGalleryCode&&"all_media"!==t.selectedGalleryCode&&("room_types"===n||"property_photos"===n||"my_web_home"===n)?g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center media-index-col"},g("span",null,eviivo.media.translations.List_OrderIndex)):null;return g("div",{className:"cp-flex-table_row cp-flex-table_header cp-flex-table_hide-on-small"},g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center cp-flex-table_cell-hor-align-center checkbox-col"},g("div",{className:"cp-custom-input cp-custom-input_align-center"},g("input",{type:"checkbox",id:"select-all",disabled:this.state.dataObject.isSortable,checked:e}),g("label",{htmlFor:"select-all"},g("span",{className:"checkbox-input"})))),t,g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center cp-flex-table_cell-condensed media-col"},g("span",null,eviivo.media.translations.List_Media)),g("div",{className:"cp-flex-table_stack-on-small"},g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center file-name-col"},g("span",null,eviivo.media.translations.List_Caption)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center galleries-col"},g("span",null,eviivo.media.translations.List_Galleries)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center type-col"},g("span",null,eviivo.media.translations.List_Type)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center date-col"},g("span",null,eviivo.media.translations.List_Date)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center button-col"})))}},{key:"mediaPreviewListItem",value:function(e,t,n){var i,o,a,l,r,s,c,d,u,p,f,v=this.state.internalOptions,m=e.dataPayload,y=this.state.dataObject;return null==m?null:(r=v.renderFlags.isFlyoutMode,d=v.renderFlags.isInlineMode,i=m.galleriesCount,o=m.mediaTypeDescription,a=m.date,l=m.isImage?this.renderImage(m):this.mediaPreviewPdfItem(),n=n+e.key,r=!y.isSortable||r&&d?g("label",{htmlFor:n+"-checkbox"},g("span",{className:"checkbox-input"})):g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-move",icon:eviivo.media.icons.move}),d=null!=y.selectedGalleryCode&&"all_media"===y.selectedGalleryCode,s=(null==y.selectedGalleryCode?v.galleryContext:y).selectedGalleryCode,d=!d&&("room_types"===s||"property_photos"===s||"my_web_home"===s),s=m.mediaQuality&&m.mediaQuality.length?g("div",{class:"cp-media-item_tag cp-media-item_tag-error"},g("span",null,eviivo.media.translations.Label_Warning_AttentionRequired)):null,c=d?g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center media-index-col"},g("span",{className:"cp-flex-table_show-on-small"},eviivo.media.translations.List_OrderIndex,": "),g("span",{className:"cp-media-table-order-index"},e.itemIndex+1)):null,e=0===e.itemIndex&&d?g("div",{class:"cp-media-item_tag cp-media-item_tag-main",style:"display:flex;"},eviivo.media.translations.Label_Main_Image):g("div",{class:"cp-media-item_tag cp-media-item_tag-main",style:"display:none;"}),d="cp-flex-table_row"+(m.isSelected?" cp-flex-table_row-selected":""),u=i&&0<parseInt(i)?"":eviivo.media.translations.Warning_12M_delete,f="",p=m.captions,f=m.isImage?this.getCaptionValue(v.cultureCode,p):m.name,g("div",{className:d,id:n,"data-item-key":m.key},g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center cp-flex-table_cell-hor-align-center checkbox-col"},g("div",{className:"cp-custom-input cp-custom-input_no-label"},g("input",{type:"checkbox",id:n+"-checkbox",checked:m.isSelected,"data-item-key":m.key}),r)),g("div",{className:"cp-flex-table_hide-on-small"},c),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center media-col"},g("div",{className:"cp-media-item_table-image cp-media-item_loader","data-tooltip":"title","data-tooltip-pos":"top","data-tooltip-title":u},l,g("div",{className:"cp-media-item_tag-container"},e,s))),g("div",{className:"cp-flex-table_stack-on-small"},g("div",{className:"cp-flex-table_show-on-small"},c),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center file-name-col"},g("span",{className:"cp-flex-table_show-on-small"},eviivo.media.translations.List_Caption,": "),g("span",{className:"filename",title:f},f)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center galleries-col"},g("span",{className:"cp-flex-table_show-on-small"},eviivo.media.translations.List_Galleries,": "),g("span",null,i)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center type-col"},g("span",{className:"cp-flex-table_show-on-small"},eviivo.media.translations.List_Type,": "),g("span",null,o)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center date-col"},g("span",{className:"cp-flex-table_show-on-small"},eviivo.media.translations.List_Date,": "),g("span",null,a)),g("div",{className:"cp-flex-table_cell cp-flex-table_cell-vert-align-center button-col"},g("button",{className:"btn-list",id:"edit-btn",disabled:y.isSortable},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-edit",icon:eviivo.media.icons.edit})),g("button",{className:"btn-list",id:"delete-btn",disabled:y.isSortable},g(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-delete",icon:eviivo.media.icons.delete}))))))}},{key:"mediaPreviewSuggestionMessage",value:function(e){if(null==e.selectedGallery)return null;var t="";switch(e.selectedGallery){case"all_media":1==e.options.renderFlags.isFlyoutMode?t=(1<e.options.numberOfSelectedItemsAllowed?eviivo.media.translations.Label_Warning_SelectionLimitPlural:eviivo.media.translations.Label_Warning_SelectionLimit).replace("{0}",e.options.numberOfSelectedItemsAllowed):e.isGridLayout&&(t=0<e.selectedGalleryMediaCount?eviivo.media.translations.Label_Warning_AllMedia_HasMediaUploaded:"");break;case"property_photos":t+=eviivo.media.translations.Label_Warning_PropertyImageQuality;break;case"room_types":null!=e.options.textResources&&(t=eviivo.media.translations.Label_Warning_SellingMore.replace("{singularAccommodationKeyword}",e.options.textResources.singularAccommodationKeyword).replace("{singularAccommodationKeyword}",e.options.textResources.singularAccommodationKeyword).replace("{0}",e.options.restrictions.imageCountWarnings.default.property).replace("{1}",e.options.restrictions.imageCountWarnings.default.bathroom));break;case"property_charges":case"property_headers":case"property_awards":case"my_web_custom_pages":1==e.options.renderFlags.isFlyoutMode&&(t=eviivo.media.translations.Label_Warning_SelectionLimit.replace("{0}",e.options.numberOfSelectedItemsAllowed))}return""===t?null:g("div",{className:"mod-notice mod-notice-small alert"},g("span",{dangerouslySetInnerHTML:{__html:t}}))}},{key:"mediaPreviewNoItemsNotice",value:function(e){e=e?eviivo.media.translations.Label_Warning_AllMedia_NoMediaUploaded:this.state.internalOptions.renderFlags.isInlineMode?eviivo.media.translations.Label_Info_NoImagesUploadInviteInline:eviivo.media.translations.Label_Info_NoImagesUploadInvite;return g("div",{className:"mod-notice mod-notice-small alert ml-auto mr-auto"},g("span",null,g("strong",null,eviivo.media.translations.Label_Info_NoImagesInGallery)," ",g("br",null),e))}},{key:"render",value:function(){var e=this.state,t=e.dataObject;if(t.renderNewMediaList)return null;var n,i,o=e.internalOptions,e=!1,a=[],l=(null==t.selectedGalleryCode?o.galleryContext:t).selectedGalleryCode,r="list"!==t.layout,s=o.id+"-image-item-preview-",l=this.mediaPreviewSuggestionMessage({selectedGallery:l,options:o,selectedGalleryMediaCount:t.files&&Object.keys(t.files).length,isGridLayout:r}),c=null!=t.selectedGalleryCode&&"all_media"===t.selectedGalleryCode,d=0;for(n in t.files){var u=t.files[n],p=(u.itemIndex=d,d++,r?this.mediaPreviewThumbnailItem(u,o.restrictions,s):this.mediaPreviewListItem(u,o.restrictions,s));c&&u.dataPayload&&u.dataPayload.showPreload?a.unshift(p):a.push(p)}return t.files&&(e=!Object.entries(t.files).some(function(e){return!1===e[1].dataPayload.isSelected})),0<a.length?(i=o.id+"-image-list-placeholder",e=r?a:g("div",{className:"cp-flex-table_wrapper"},this.mediaPreviewListHeader(e),g("div",{className:"cp-flex-table_scroll-wrapper"},a)),g("div",{id:i,className:"s-mod-drop-zone cp-library-container"},l,e,this.mediaDropZoneMask(o,t))):g("div",{className:"s-mod-drop-zone cp-library-container"},l,this.mediaPreviewNoItemsNotice(c),this.mediaDropZone(o,t))}}]),n}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[t]=p},114:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,c,i,d,u;e="slideControls",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(c(u,e),t,n)},t=preact,c=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:e.props.dataObject||{},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions},e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"componentDidMount",value:function(){var e,i=this,o=i.state,t=o.internalActions.slideControls;null!=t&&"function"==typeof t.onComponentDidMount&&(e=window.jQuery.extend(!0,{},o),t.onComponentDidMount(function(e){if(null!=e.container&&(o.dataObject.container=e.container),null!=e.settings&&(o.dataObject.settings=e.settings),null!=e.updateSliderAction){var t=o.dataObject.settings.currentItemNumber,n=o.dataObject.settings.maxItemNumber;switch(e.updateSliderAction){case"delete":1<n?(t=t<n?t:t-1,o.dataObject.settings.maxItemNumber=n-1):o.dataObject.settings.renderSlideControls=!1;break;case"save":t=t<n?t+1:1;break;case"next":t=t>=o.dataObject.settings.maxItemNumber?1:t+1;break;case"prev":t=t<=1?n:t-1}null!=o.dataObject&&null!=o.dataObject.settings&&(o.dataObject.settings.currentItemNumber=t)}i.setState(o)},e))}},{key:"render",value:function(){var e,t=this.state.dataObject;return null!=t&&null!=t.settings&&null!=t.settings.renderSlideControls&&t.settings.renderSlideControls?(e=eviivo.media.icons,c("div",{className:"cp-flyout_slide-controls"},c("div",{className:"cp-flyout_slide-arrow",id:"arrow-left"},c(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-chevron_left",icon:e.chevron.left})),c("div",{className:"cp-flyout_slide-count"},t.settings.currentItemNumber," of ",t.settings.maxItemNumber),c("div",{className:"cp-flyout_slide-arrow",id:"arrow-right"},c(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-chevron_right",icon:e.chevron.right})))):null}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u},657:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=s(n),t=(e=i?(e=s(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");if(void 0!==t)return t;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}}function s(e){return(s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,c,i,d,u;e="mediaSVG",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(c(u,e),t,n)},t=preact,c=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return i.call(this,e);throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"render",value:function(){return c("svg",{style:"display: none; position: absolute; width: 0; height: 0;",width:"0",height:"0",id:"mediaSVGs"},c("defs",null,c("symbol",{id:"icon-bg-arrow_drop_down",viewBox:"0 0 24 24"},c("path",{d:"M6.984 9.984h10.031l-5.016 5.016z"})),c("symbol",{id:"icon-bg-arrow_drop_up",viewBox:"0 0 24 24"},c("path",{d:"M6.984 14.016l5.016-5.016 5.016 5.016h-10.031z"})),c("symbol",{id:"icon-bg-check_circle",viewBox:"0 0 24 24"},c("path",{d:"M9.984 17.016l9-9-1.406-1.453-7.594 7.594-3.563-3.563-1.406 1.406zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z"})),c("symbol",{id:"icon-bg-chevron_left",viewBox:"0 0 24 24"},c("path",{d:"M15.422 7.406l-4.594 4.594 4.594 4.594-1.406 1.406-6-6 6-6z"})),c("symbol",{id:"icon-bg-chevron_right",viewBox:"0 0 24 24"},c("path",{d:"M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z"})),c("symbol",{id:"icon-bg-delete",viewBox:"0 0 24 24"},c("path",{d:"M18.984 3.984v2.016h-13.969v-2.016h3.469l1.031-0.984h4.969l1.031 0.984h3.469zM6 18.984v-12h12v12q0 0.797-0.609 1.406t-1.406 0.609h-7.969q-0.797 0-1.406-0.609t-0.609-1.406z"})),c("symbol",{id:"icon-bg-error",viewBox:"0 0 24 24"},c("path",{d:"M12.984 12.984v-6h-1.969v6h1.969zM12.984 17.016v-2.016h-1.969v2.016h1.969zM12 2.016q4.125 0 7.055 2.93t2.93 7.055-2.93 7.055-7.055 2.93-7.055-2.93-2.93-7.055 2.93-7.055 7.055-2.93z"})),c("symbol",{id:"icon-bg-grid_panoramic",viewBox:"0 0 24 24"},c("path",{d:"M4 4h4v4h-4v-4z"}),c("path",{d:"M16 4h4v4h-4v-4z"}),c("path",{d:"M10 4h4v4h-4v-4z"}),c("path",{d:"M4 10h4v4h-4v-4z"}),c("path",{d:"M16 10h4v4h-4v-4z"}),c("path",{d:"M10 10h4v4h-4v-4z"}),c("path",{d:"M4 16h4v4h-4v-4z"}),c("path",{d:"M16 16h4v4h-4v-4z"}),c("path",{d:"M10 16h4v4h-4v-4z"})),c("symbol",{id:"icon-bg-photo_camera",viewBox:"0 0 24 24"},c("path",{d:"M12 17.016c2.766 0 5.016-2.25 5.016-5.016s-2.25-5.016-5.016-5.016-5.016 2.25-5.016 5.016 2.25 5.016 5.016 5.016zM9 2.016h6l1.828 1.969h3.188c1.078 0 1.969 0.938 1.969 2.016v12c0 1.078-0.891 2.016-1.969 2.016h-16.031c-1.078 0-1.969-0.938-1.969-2.016v-12c0-1.078 0.891-2.016 1.969-2.016h3.188zM8.813 12c0-1.781 1.406-3.188 3.188-3.188s3.188 1.406 3.188 3.188-1.406 3.188-3.188 3.188-3.188-1.406-3.188-3.188z"})),c("symbol",{id:"icon-bg-file-image",viewBox:"0 0 24 24"},c("path",{d:"M13 9h5.5l-5.5-5.5v5.5zM6 2h8l6 6v12c0 1.105-0.895 2-2 2v0h-12c-1.11 0-2-0.9-2-2v-16c0-1.11 0.89-2 2-2zM6 20h12v-8l-4 4-2-2-6 6zM8 9c-1.105 0-2 0.895-2 2v0c0 1.105 0.895 2 2 2v0c1.105 0 2-0.895 2-2v0c0-1.105-0.895-2-2-2v0z"})),c("symbol",{id:"icon-bg-file-pdf",viewBox:"0 0 24 24"},c("path",{d:"M14 9h5.5l-5.5-5.5v5.5zM7 2h8l6 6v12c0 1.105-0.895 2-2 2v0h-12c-1.11 0-2-0.9-2-2v-16c0-1.105 0.895-2 2-2v0zM11.93 12.44c0.41 0.9 0.93 1.64 1.53 2.15l0.41 0.32c-0.87 0.16-2.070 0.44-3.34 0.93v0l-0.11 0.040 0.5-1.040c0.45-0.87 0.78-1.66 1.010-2.4zM18.41 16.25c0.18-0.18 0.27-0.41 0.28-0.66 0.030-0.2-0.020-0.39-0.12-0.55-0.29-0.47-1.040-0.69-2.28-0.69l-1.29 0.070-0.87-0.58c-0.63-0.52-1.2-1.43-1.6-2.56l0.040-0.14c0.33-1.33 0.64-2.94-0.020-3.6-0.16-0.16-0.38-0.24-0.61-0.24h-0.24c-0.37 0-0.7 0.39-0.79 0.77-0.37 1.33-0.15 2.060 0.22 3.27v0.010c-0.25 0.88-0.57 1.9-1.080 2.93l-0.96 1.8-0.89 0.49c-1.2 0.75-1.77 1.59-1.88 2.12-0.040 0.19-0.020 0.36 0.050 0.54l0.030 0.050 0.48 0.31 0.44 0.11c0.81 0 1.73-0.95 2.97-3.070l0.18-0.070c1.030-0.33 2.31-0.56 4.030-0.75 1.030 0.51 2.24 0.74 3 0.74 0.44 0 0.74-0.11 0.91-0.3zM18 15.54l0.090 0.11c-0.010 0.1-0.040 0.11-0.090 0.13h-0.040l-0.19 0.020c-0.46 0-1.17-0.19-1.9-0.51 0.090-0.1 0.13-0.1 0.23-0.1 1.4 0 1.8 0.25 1.9 0.35zM8.83 17c-0.65 1.19-1.24 1.85-1.69 2 0.050-0.38 0.5-1.040 1.21-1.69l0.48-0.31zM11.85 10.090c-0.23-0.9-0.24-1.63-0.070-2.050l0.070-0.12 0.15 0.050c0.17 0.24 0.19 0.56 0.090 1.1l-0.030 0.16-0.16 0.82-0.050 0.040z"})),c("symbol",{id:"icon-bg-cloud_upload",viewBox:"0 0 24 24"},c("path",{d:"M14.016 12.984h3l-5.016-4.969-5.016 4.969h3v4.031h4.031v-4.031zM19.359 10.031c2.578 0.188 4.641 2.344 4.641 4.969 0 2.766-2.25 5.016-5.016 5.016h-12.984c-3.328 0-6-2.672-6-6 0-3.094 2.344-5.625 5.344-5.953 1.266-2.391 3.75-4.078 6.656-4.078 3.656 0 6.656 2.578 7.359 6.047z"})),c("symbol",{id:"icon-bg-check-decagram",viewBox:"0 0 24 24"},c("path",{d:"M23 12l-2.44-2.78 0.34-3.68-3.61-0.82-1.89-3.18-3.4 1.46-3.4-1.46-1.89 3.18-3.61 0.81 0.34 3.68-2.44 2.79 2.44 2.78-0.34 3.69 3.61 0.82 1.89 3.18 3.4-1.47 3.4 1.46 1.89-3.18 3.61-0.82-0.34-3.68 2.44-2.78zM10 17l-4-4 1.41-1.41 2.59 2.58 6.59-6.59 1.41 1.42-8 8z"})),c("symbol",{id:"icon-bg-picture_as_pdf",viewBox:"0 0 24 24"},c("path",{d:"M14.016 11.484v-3h0.984v3h-0.984zM3.984 6v14.016h14.016v1.969h-14.016c-1.078 0-1.969-0.891-1.969-1.969v-14.016h1.969zM9 9.516v-1.031h0.984v1.031h-0.984zM20.484 8.484v-1.5h-3v6h1.5v-1.969h1.5v-1.5h-1.5v-1.031h1.5zM16.5 11.484v-3c0-0.844-0.656-1.5-1.5-1.5h-2.484v6h2.484c0.844 0 1.5-0.656 1.5-1.5zM11.484 9.516v-1.031c0-0.844-0.656-1.5-1.5-1.5h-2.484v6h1.5v-1.969h0.984c0.844 0 1.5-0.656 1.5-1.5zM20.016 2.016c1.078 0 1.969 0.891 1.969 1.969v12c0 1.078-0.891 2.016-1.969 2.016h-12c-1.078 0-2.016-0.938-2.016-2.016v-12c0-1.078 0.938-1.969 2.016-1.969h12z"})),c("symbol",{id:"icon-bg-list-view",viewBox:"0 0 24 24"},c("path",{d:"M4 4h4v4h-4v-4z"}),c("path",{d:"M10 4h10v4h-10v-4z"}),c("path",{d:"M4 10h4v4h-4v-4z"}),c("path",{d:"M10 10h10v4h-10v-4z"}),c("path",{d:"M4 16h4v4h-4v-4z"}),c("path",{d:"M10 16h10v4h-10v-4z"})),c("symbol",{id:"icon-bg-image-off",viewBox:"0 0 24 24"},c("path",{d:"M2.28 3l-1.28 1.27 2 2v12.73c0 1.105 0.895 2 2 2v0h12.73l2 2 1.27-1.28-18.72-18.72zM4.83 3l16.17 16.17v-14.17c0-1.11-0.9-2-2-2h-14.17zM8.5 13.5l2.5 3 1-1.25 2.73 2.75h-9.73l3.5-4.5z"})),c("symbol",{id:"icon-bg-close",viewBox:"0 0 24 24"},c("path",{d:"M18.984 6.422l-5.578 5.578 5.578 5.578-1.406 1.406-5.578-5.578-5.578 5.578-1.406-1.406 5.578-5.578-5.578-5.578 1.406-1.406 5.578 5.578 5.578-5.578z"})),c("symbol",{id:"icon-bg-move",viewBox:"0 0 24 24"},c("path",{d:"M15.4 18.6l-3.4 3.4-3.4-3.4h2.6l-0.050-3.25h1.65l-0.050 3.25h2.65zM5.4 15.4l-3.4-3.4 3.4-3.4v2.6l3.25-0.050v1.65l-3.25-0.050v2.65zM8.6 5.4l3.4-3.4 3.4 3.4h-2.6l0.050 3.25h-1.65l0.050-3.25h-2.65zM18.6 8.6l3.4 3.4-3.4 3.4v-2.6l-3.25 0.050v-1.65l3.25 0.050v-2.65z"})),c("symbol",{id:"icon-bg-content_copy",viewBox:"0 0 24 24"},c("path",{d:"M18.984 21v-14.016h-10.969v14.016h10.969zM18.984 5.016q0.797 0 1.406 0.586t0.609 1.383v14.016q0 0.797-0.609 1.406t-1.406 0.609h-10.969q-0.797 0-1.406-0.609t-0.609-1.406v-14.016q0-0.797 0.609-1.383t1.406-0.586h10.969zM15.984 0.984v2.016h-12v14.016h-1.969v-14.016q0-0.797 0.586-1.406t1.383-0.609h12z"})),c("symbol",{id:"icon-bg-chevron_left",viewBox:"0 0 24 24"},c("path",{d:"M15.422 7.406l-4.594 4.594 4.594 4.594-1.406 1.406-6-6 6-6z"})),c("symbol",{id:"icon-bg-chevron_right",viewBox:"0 0 24 24"},c("path",{d:"M9.984 6l6 6-6 6-1.406-1.406 4.594-4.594-4.594-4.594z"})),c("symbol",{id:"icon-bg-create",viewBox:"0 0 24 24"},c("path",{d:"M20.719 7.031l-1.828 1.828-3.75-3.75 1.828-1.828q0.281-0.281 0.703-0.281t0.703 0.281l2.344 2.344q0.281 0.281 0.281 0.703t-0.281 0.703zM3 17.25l11.063-11.063 3.75 3.75-11.063 11.063h-3.75v-3.75z"})),c("symbol",{id:"icon-bg-rotate_left",viewBox:"0 0 24 24"},c("path",{d:"M12.984 4.078c3.938 0.469 7.031 3.844 7.031 7.922s-3.094 7.453-7.031 7.922v-2.016c2.859-0.469 5.016-2.953 5.016-5.906s-2.156-5.438-5.016-5.906v3.891l-4.547-4.453 4.547-4.547v3.094zM7.078 18.328l1.453-1.453c0.75 0.563 1.594 0.891 2.484 1.031v2.016c-1.406-0.188-2.766-0.703-3.938-1.594zM6.094 12.984c0.141 0.891 0.469 1.734 0.984 2.484l-1.406 1.406c-0.891-1.172-1.406-2.484-1.594-3.891h2.016zM7.125 8.531c-0.516 0.75-0.891 1.594-1.031 2.484h-2.016c0.188-1.406 0.75-2.719 1.641-3.891z"})),c("symbol",{id:"icon-bg-rotate_right",viewBox:"0 0 24 24"},c("path",{d:"M16.875 15.469c0.563-0.75 0.891-1.594 1.031-2.484h2.016c-0.188 1.406-0.703 2.719-1.594 3.891zM12.984 17.906c0.891-0.141 1.734-0.469 2.484-1.031l1.453 1.453c-1.172 0.891-2.531 1.406-3.938 1.594v-2.016zM19.922 11.016h-2.016c-0.141-0.891-0.469-1.734-1.031-2.484l1.453-1.406c0.891 1.172 1.406 2.484 1.594 3.891zM15.563 5.531l-4.547 4.453v-3.891c-2.859 0.469-5.016 2.953-5.016 5.906s2.156 5.438 5.016 5.906v2.016c-3.938-0.469-7.031-3.844-7.031-7.922s3.094-7.453 7.031-7.922v-3.094z"}))))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u,window.eviivo=window.eviivo||{},window.eviivo.media=window.eviivo.media||{},window.eviivo.media.icons={checkmark:'<use xlink:href="#icon-bg-check_circle"></use>',unchecked:'<use xlink:href="#icon-bg-radio_button_unchecked"></use>',checkedDecagram:'<use xlink:href="#icon-bg-check-decagram"></use>',error:'<use xlink:href="#icon-bg-error"></use>',warning:'<use xlink:href="#icon-bg-warning"></use>',lowQuality:'<use xlink:href="#icon-bg-quality-low"></use>',pdf:'<use xlink:href="#icon-bg-picture_as_pdf"></use>',imageError:'<use xlink:href="#icon-bg-image-off"></use>',dropZone:{file:'<use xlink:href="#icon-bg-file-image"></use>',pdf:'<use xlink:href="#icon-bg-file-pdf"></use>',cloudUpload:'<use xlink:href="#icon-bg-cloud_upload"></use>',camera:'<use xlink:href="#icon-bg-photo_camera"></use>'},infoOutline:'<use xlink:href="#icon-bg-info_outline"></use>',arrows:{down:'<use xlink:href="#icon-bg-arrow_drop_down"></use>',up:'<use xlink:href="#icon-bg-arrow_drop_up"></use>'},displayModes:{thumbnail:'<use xlink:href="#icon-bg-grid_panoramic"></use>',list:'<use xlink:href="#icon-bg-list-view"></use>'},delete:'<use xlink:href="#icon-bg-delete"></use>',close:'<use xlink:href="#icon-bg-close"></use>',move:'<use xlink:href="#icon-bg-move"></use>',copy:'<use xlink:href="#icon-bg-content_copy"></use>',chevron:{left:'<use xlink:href="#icon-bg-chevron_left"></use>',right:'<use xlink:href="#icon-bg-chevron_right"></use>'},edit:'<use xlink:href="#icon-bg-create"></use>',rotateLeft:'<use xlink:href="#icon-bg-rotate_left"></use>',rotateRight:'<use xlink:href="#icon-bg-rotate_right"></use>'}},789:function(){function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,function(e){e=function(e,t){if("object"!==o(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}(e,"string");return"symbol"===o(e)?e:String(e)}(i.key),i)}}function l(e,t){return(l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function r(n){var i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var e,t=c(n),t=(e=i?(e=c(this).constructor,Reflect.construct(t,arguments,e)):t.apply(this,arguments),this);if(e&&("object"===o(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return s(t)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var e,t,h,i,d,u;e="galleryToolbar",window.eviivo=window.eviivo||{},window.eviivo.jsx=window.eviivo.jsx||{},window.eviivo.jsx.render=window.eviivo.jsx.render||{},window.eviivo.jsx.render[e]=function(e,t,n){i(h(u,e),t,n)},t=preact,h=t.h,i=t.render,d=t.Component,u=function(){var e=o,t=d;if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t);var n,i=r(o);function o(e){if(this instanceof o)return(e=i.call(this,e)).state={dataObject:{selectMediaCount:0,showMenuList:!1},internalOptions:window.jQuery.extend({},e.props.callerOptions),internalActions:e.props.actions,toolBarActions:e.props.toolbarActions,parentActions:e.props.parentActions},e.state.internalOptions.id+="-gallery-toolbar",e.state.dataObject.selectedGalleryCode=e.state.internalOptions.galleryContext.selectedGalleryCode,e.state.dataObject.selectedEntityReference=e.state.internalOptions.galleryContext.selectedEntityReference,e.handleLayoutSelect=e.handleLayoutSelect.bind(s(e)),e.AddMediaButtonClick=e.AddMediaButtonClick.bind(s(e)),e;throw new TypeError("Cannot call a class as a function")}return e=o,(t=[{key:"AddMediaButtonClick",value:function(e){e.preventDefault(),this.state.toolBarActions.onAddMedia(e,this.state.internalOptions,this.state.parentActions.imageRefresh)}},{key:"componentWillReceiveProps",value:function(e){this.setState(e)}},{key:"componentDidMount",value:function(){var e,t=this,n=t.state,i=n.internalActions;null!=i&&null!=(i=i.galleryToolbar)&&"function"==typeof i.onComponentDidMount&&(e=window.jQuery.extend(!0,{},n),i.onComponentDidMount(function(e){null!=e.galleries&&(n.galleries=e.galleries),n.dataObject=e,t.setState(n)},e))}},{key:"handleLayoutSelect",value:function(e){var e=e.currentTarget.value,e=(this.props.changeLayout(e),this.state.dataObject.resetSortable=!0,this.state.internalActions);null!=e&&null!=(e=e.galleryToolbar)&&"function"==typeof e.onResetSortable&&e.onResetSortable(this.state.dataObject.resetSortable)}},{key:"getGalleryName",value:function(e,t){var n;return null!=e?null==(n=e.find(function(e){return e.Code===t}))?(e=e.find(function(e){return null!=e.Galleries&&e.Galleries.find(function(e){return e.Code===t})}),this.getGalleryName(e.Galleries,t)):n.Name:t}},{key:"render",value:function(){var e,t,n=eviivo.media.icons,i=this.state,o=i.dataObject,a=i.internalOptions,l=null==o.selectedMediaCount?0:o.selectedMediaCount,r=a.id,s=r+"-thumbnail",c=r+"-list",d=r+"-bulk-actions",u=(null==o.selectedGalleryCode||null==o.selectedGalleryCode?a.galleryContext:o).selectedGalleryCode,p=!a.galleryContext.showAllGalleries&&("room_types"===u||"property_photos"===u||"my_web_home"===u||"property_checkin"===u&&!1===a.renderFlags.isFlyoutMode),f=null,v=(!0!==a.renderFlags.isFlyoutMode||a.renderFlags.isUploadFlyoutMode||(y=this.getGalleryName(i.galleries,a.galleryContext.selectedGalleryCode),v=null,a.galleryContext.showAllGalleries||(v=h("option",{value:"all_media","data-entity-reference":a.galleryContext.selectedEntityReference},eviivo.media.translations.GalleryList_AllMedia)),m=null,"all_media"!=a.galleryContext.selectedGalleryCode&&(m=h("option",{value:a.galleryContext.selectedGalleryCode,"data-entity-reference":a.galleryContext.selectedEntityReference},y)),y=null,a.galleryContext.showAllGalleries&&(y=null==i.galleries?"":i.galleries.map(function(e){return h("option",{value:e.Code,"data-entity-reference":a.galleryContext.selectedEntityReference},e.Name)})),f=h("div",{className:"cp-inner-toolbar_section mr16"},h("select",{className:"s-gallery-switch cp-custom-select mr16",value:u},v,m,y))),null),m=(!0!==a.renderFlags.isFlyoutMode||a.renderFlags.isUploadFlyoutMode||null==a.groupContext||(m=a.galleryContext.referenceId,y=a.groupContext.map(function(e){return h("option",{value:e.ReferenceId,"data-id":e.BusinessId},e.DisplayName)}),v=h("div",{className:"cp-inner-toolbar_section mr16"},h("select",{className:"s-property-switch cp-custom-select mr16",value:m},y))),i.dataObject.sortable||l<=0),y="cp-button-select",g=(o.showMenuList&&!m&&(y+=" cp-button-select_active"),null),y=(!0===a.renderFlags.isFlyoutMode||a.renderFlags.isUploadFlyoutMode||(e=h("li",{className:"cp-menu-list_item cp-menu-list_icon cp-menu-list_danger",id:r+"-delete"},h(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-delete",icon:n.delete}),eviivo.media.translations.Menu_Delete),t=h("li",{className:"cp-menu-list_item cp-menu-list_icon cp-menu-list_danger",id:r+"-delete"},eviivo.media.translations.Menu_Remove),g=h("div",{className:y},h("button",{id:d,className:"btn btn-icon btn-icon_after mr16",disabled:m},h("span",null,eviivo.media.translations.Button_BulkActions),h(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-arrow_drop_down",icon:n.arrows.down})),h("ul",{className:"cp-menu-list cp-menu-list_right-down"},h("li",{className:"cp-menu-list_item cp-menu-list_info"},eviivo.media.translations.Menu_SelectedCount.replace("{0}",l)),h("li",{className:"cp-menu-list_divider"}),h("li",{className:"cp-menu-list_item",id:r+"-categorize"},eviivo.media.translations.Menu_Categorize),h("li",{className:"cp-menu-list_item",id:r+"-add-to-gallery"},eviivo.media.translations.Menu_AddToGallery),h("li",{className:"cp-menu-list_item",id:r+"-set-media-type"},eviivo.media.translations.Menu_SetMediaType),h("li",{className:"cp-menu-list_divider"}),"all_media"===u?e:t))),null),d=(1==a.renderFlags.isFlyoutMode||a.renderFlags.isUploadFlyoutMode||(y=h("div",{className:"cp-inner-toolbar_section cp-radio-group radio-group-small mr16"},h("input",{type:"radio",name:r,id:s,value:"grid",onChange:this.handleLayoutSelect,defaultChecked:!0}),h("label",{htmlFor:s,className:"btn btn-grouped btn-invert btn-icon"},h(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-grid_panoramic",icon:n.displayModes.thumbnail})),h("input",{type:"radio",name:r,id:c,value:"list",onChange:this.handleLayoutSelect}),h("label",{htmlFor:c,className:"btn btn-grouped btn-invert btn-icon"},h(eviivo.jsx.component.svgRender,{cssClass:"icon-bg icon-bg-list-view",icon:n.displayModes.list})))),null);return(null==a.numberOfSelectedItemsAllowed||1<a.numberOfSelectedItemsAllowed)&&!a.renderFlags.isUploadFlyoutMode&&(m="s-media-select-all mr16 user-select-none s-drag-false"+(i.dataObject.sortable?" disabled":""),d=l<=0?h("a",{href:"#select-all",className:m,draggable:"false"},eviivo.media.translations.Button_SelectAll):h("a",{href:"#clear-selection",className:"s-media-clear-selection mr16 user-select-none s-drag-false",draggable:"false"},eviivo.media.translations.Button_ClearAll)),h("section",{className:"cp-inner-toolbar",id:r},y,h(eviivo.jsx.component.checkBox,{dataObject:o,label:eviivo.media.translations.Label_Reorder,id:r,display:p,resetSortable:i.dataObject.resetSortable,actions:i.internalActions,callback:this.state.parentActions.toggleOrdering}),v,f,h("div",{className:"cp-inner-toolbar_section cp-inner-toolbar_section-end"},d,g,h("button",{onclick:this.AddMediaButtonClick,className:"btn",id:r+"-add-media",disabled:i.dataObject.sortable},eviivo.media.translations.Button_AddMedia)))}}])&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),o}(),window.eviivo.jsx.component=window.eviivo.jsx.component||{},window.eviivo.jsx.component[e]=u}},i={};function o(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},n[e](t,t.exports,o)),t.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";o(838),o(501),o(464),o(717),o(446),o(114),o(793),o(657),o(347),o(531),o(287),o(826),o(760),o(356),o(789),o(542),o(375),o(547),o(385),o(89),o(283),o(490),o(890),o(242),o(986),o(209)}();
//# sourceMappingURL=main_loader.min.js.map