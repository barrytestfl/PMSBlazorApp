var t={6688:function(){window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.sideMenu=window.eviivo.pms.sideMenu||{},window.eviivo.pms.sideMenu.spinner=window.eviivo.pms.sideMenu.spinner||{},window.eviivo.pms.sideMenu.spinner=(jQuery,{init:function(){}})},8099:function(){function e(){var e=$("#room-type-bed-config-template").html().replace(new RegExp(/\{\{N}}/g),++options.bedConfigsCount);return $("#bed-configs").append(e),c(),d(),a(),!1}function o(e){var e=$(e.target).closest(".s-add-column").prev(".s-section").find(".bed-config-sections-container"),o=e.data("current-count"),t=e.data("index"),t=(e.data("current-count",o+1),$("#bed-config-template").html().replace(new RegExp(/\{\{N}}/g),t).replace(new RegExp(/\{\{M}}/g),o)),o=k.find(":selected").data("hide-self-catering-options");return null==o||JSON.parse(o.toLowerCase())||(t=t.replace("self-catering-options hidden","self-catering-options")),e.append(t),d(),a(),!1}function t(e){var e=$(e.target).closest(".bed-config-section"),o=e.closest(".room-type-bed-config-section");return 1===o.find(".bed-config-section").length?(o.remove(),c()):e.remove(),!1}function i(e){return $(e.target).closest(".room-type-bed-config-section").remove(),c(),!1}function a(){$("#btn-add-roomtype-bed-config,             .btn-add-bed-config,             .btn-remove-bed-config,             .btn-remove-room-type-bed-config,             #divUnitType input:radio,             #divPriceType input:radio").off(),b.off(),$("#divPriceType input:radio").on("click",p),$("#divUnitType input:radio").on("click",d),$("#btn-add-roomtype-bed-config").on("click",e),$(".btn-add-bed-config").on("click",o),$(".btn-remove-bed-config").on("click",t),$(".btn-remove-room-type-bed-config").on("click",i),$(".bed-config-sections-container").sortable({items:"> .bed-config-section",handle:".s-drag-handle",placeholder:"ui-state-highlight",opacity:.3}),$("#bed-configs").sortable({items:"> .room-type-bed-config-section",placeholder:"ui-state-highlight",opacity:.3,stop:c}),options.allowRoomTypeParametersToBeReordered&&$("#room-type-sections").sortable({items:"> .s-room-type-section",placeholder:"ui-state-highlight",opacity:.3,stop:n}),$(".s-room-type-section").find("input:text, select").filter(":visible").on("change",r),$("#txtLabel").on("input keyup paste",r),b.on("change",function(){var e=b.val();g.val(e)}),k.on("change",function(){R=$(".self-catering-options"),u()})}function n(){$("#room-type-sections").children(".s-room-type-section").each(function(t,e){var o=$(e).find(".s-display-name-part-order"),i=o.val();o.val(t),$(e).find("span.field-validation-error,span.field-validation-valid,[id*='_'],[name*='[']").each(function(e,o){l(o,"id",i,t),l(o,"name",i,t),l(o,"data-val-requiredif-dependentproperty",i,t),l(o,"data-valmsg-for",i,t)})}),r(),eviivo.eagle.settings.roomTypes.addRemoveValidation()}function r(){var e="",o=0;$(".s-room-type-section").find("input:text, select").filter(":visible").each(function(){""!=$(this).val()&&(0<o&&(e+="-"),$(this).is("select")?e+=$(this).find("option:selected").text().trim():e+=$(this).val().trim(),o++)}),$(".room-type-display-name-output").html(e)}function l(e,o,t,i){var a=$(e).attr(o);void 0!==a&&(a=(a=a.replace(new RegExp(s("["+t+"]"),"g"),"["+i+"]")).replace(new RegExp(s("_"+t+"_"),"g"),"_"+i+"_"),$(e).attr(o,a))}function s(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function c(){var e=$("#bed-configs"),o=k.find(":selected").data("hide-self-catering-options");e.find(".room-type-bed-config-section").each(function(e){$(this).find(".room-type-bed-config-label").text(options.bedConfigLabel.replace("{0}",++e)),null==o||JSON.parse(o.toLowerCase())||$(this).find(".self-catering-options").removeClass("hidden")})}function d(){"metersCentimeters"===$("#divUnitType input:radio:checked")[0].id?($(".units").html(options.squareMeter),$(".smaller-units").html(options.centimeters)):($(".units").html(options.squareFoot),$(".smaller-units").html(options.inches)),eviivo.webcore.decimals.restrictFieldsForNumbers($(".width-input"))}function p(){var e=$("#divPriceType input:radio:checked")[0],o="<span class='required'>*</span>";"roPerRoom"===e.id?(x.text(options.rackRate).append(o),C.addClass("hide"),m.addClass("hide"),v.removeClass("hide"),jQuery("#SelectedRoomType_UseOccupancyRates").val("false")):(x.text(options.roomRate).append(o),C.removeClass("hide"),v.addClass("hide"),m.removeClass("hide"),jQuery("#SelectedRoomType_UseOccupancyRates").val("true")),o=e.id,void 0!==T.val()&&"0"!==T.val()&&""!==T.val()&&(o!=w?f.removeClass("hide"):f.addClass("hide"))}function u(){"True"===k.find(":selected").data("hide-self-catering-options")?R.addClass("hidden"):R.removeClass("hidden")}var v,m,h,b,g,f,y,w,T,x,C,k,R;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.manageRoomTypeV2=window.eviivo.eagle.manageRoomTypeV2||{},window.eviivo.eagle.manageRoomTypeV2=(options={cultureCode:null},{init:function(e){options=$.extend(options,e),("false"===jQuery("#SelectedRoomType_UseOccupancyRates").val().toLowerCase()?$("#divPriceType input#roPerRoom"):$("#divPriceType input#roPerPerson")).prop("checked",!0),w=$("#divPriceType input:radio:checked")[0].id,v=$("#lblPerRoom"),m=$("#lblPerPerson"),b=$("#ddlMaxCapacity"),T=$("#Id"),g=$("#MaxCapacity"),f=$("#addRoomTypeMessageContainer"),h=$("#SelectedRoomType_RackRate"),$(".radio-group"),y=$("#txtRoomTypeSize"),x=$("#txtRackRate"),C=$(".extraRate"),k=$("#ddlRoomClass"),R=$(".self-catering-options"),a(),eviivo.webcore.decimals.restrictFieldsForDecimals(h),eviivo.webcore.decimals.restrictFieldsForNumbers(y),eviivo.webcore.decimals.restrictFieldsForNumbers($(".width-input")),w=$("#divPriceType input:radio:checked")[0].id,p(),d(),u(),r(),$("body").tip()}})},362:function(){function o(){$("form").resetValidation()}function t(){"roNumbered"===$("#divCreateType input:radio:checked")[0].id?(g.addClass("hide"),b.removeClass("hide")):(b.addClass("hide"),g.removeClass("hide"),i())}function i(){var t=x.val();C.find("input").prop("disabled",!0),C.addClass("hide").map(function(e,o){e<t&&($(o).removeClass("hide"),$(o).find("input").prop("disabled",!1))})}function a(){var e=options.roomTypeId;0!=e&&void 0!==e?te.val(e):$("#ddlRoomTypes option:eq(0)").prop("selected",!0),t(),eviivo.eagle.popup.show({popupBox:v,closeButton:v.find(".btn-secondary, .s-close"),onClose:o})}function n(){$("#loading-overlay").addClass("hide"),eviivo.eagle.popup.show({popupBox:m,closeButton:m.find("#btnCancel, .s-close"),onClose:o})}function r(){eviivo.webcore.decimals.restrictFieldsForNumbers(h)}function l(e){A=0,M=[],F=[],roomSaveStart(),void 0!==$(e.target).closest("tr").attr("data-room-id")?A=$(e.target).closest("tr").attr("data-room-id"):1<(e=$("input.check:checkbox:checked")).length?e.map(function(e,o){M.push($(o).attr("data-id"))}):A=$(e[0]).attr("data-id"),0!=A?s(A,0):$(M).each(function(e){s(M[e],M.length)}),P=0!=A?A:M}function s(o,t){eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.checkFutureRoomBookingsUrl,actionId:"checkRoomForFutureBookings-roomId="+o,data:{roomId:o},method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.TEXT,callback:function(e){L++,"False"===(D=e)&&0<t&&F.push($("tr[data-room-id='"+o+"'] td:nth-child(2)").html()),0!==t&&L!==t||(eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.manageRoomsPopupUrl,actionId:"manageRoomsPopup",data:{roomId:A,roomIds:M},traditional:!0,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){ae.html(e),c(),n()}}),L=0)}})}function c(){m=$("#popup-manage-rooms"),h=$("#txtDiaryOrder"),re=$("#roomId"),w=$("#btnDelete"),e=$("#btnSave"),txtRoomInstructionsRoot=$("#room-instructions-root-textbox"),txtRoomInstructions=$("#room-instructions-textbox"),roomStatusDropdown=$("#ddlRoomStatuses"),statusNotEditableClass=$(".statusNotEditable"),r(),w.on("click",d),e.on("click",p),m.find("form").removeData("validator"),m.find("form").removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse("#popup-manage-rooms form"),txtRoomInstructions.on("input",function(){txtRoomInstructionsRoot.val(this.value)}),"False"===D||0<F.length?(roomStatusDropdown.attr("disabled",!0),statusNotEditableClass.removeClass("hide"),$(".singleRoomMsg").removeClass("hide"),0<F.length&&(e.attr("disabled",!0),$(".singleRoomMsg").addClass("hide"),$(".multiRoomMsg").removeClass("hide"),$(".multiRoomListMsg").removeClass("hide"),$(".multiRoomListMsg").html("<br/>"+F.join("<br/>")))):(roomStatusDropdown.attr("disabled",!1),e.attr("disabled",!1),statusNotEditableClass.addClass("hide"),$(".statusMsg").addClass("hide"))}function d(e){var o=0,o=void 0!==$(e.target).closest("tr").attr("data-room-id")?$(e.target).closest("tr").attr("data-room-id"):re.val();P=0!=o?o:M,eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.deleteRoomPopupUrl,actionId:"getDeleteRoomPopup",data:{roomId:o},method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){ne.html(e),eviivo.eagle.popup.hide(),T=$("#popup-delete-room"),eviivo.eagle.popup.show({popupBox:T,closeButton:T.find("#btnCancelDelete, #btnOk, .s-close")})}})}function p(){m.find("form").submit()}function U(){eviivo.eagle.popup.show({popupBox:I,closeButton:I.find("#btnCancel, .s-close"),onClose:o})}function E(e){H.start(),e=$(e.target).closest("tr").attr("data-room-id"),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.manageIcalPopupUrl,actionId:"manageIcalPopupUrl",data:{roomId:e,roomIds:[],cultureCode:options.defaultCultureCode},method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){R.html(e),N(),H.stop(),U(),eviivo.util.addHotjarRecordingTags(["iCal"])}})}function N(){I=$("#popup-manage-ical"),e=$("#btnSave"),me=$("#iCalExportUrl"),he=$("#copyIcon"),fe=$("#btnAddiCalUrl"),$(".s-remove-row"),$(".s-select-distributor"),ye=$("#iCalBtnSave"),ge=$("#iCalYes"),j=$("#iCalCopyLink"),iCalIncludeGuestDataCheckbox=$("#iCalEnableGuestData"),iCalNoticeMessage=$(".iCalNotice"),me.on("click",z),he.on("click",z),fe.on("click",S),$("body").on("click",".s-remove-row",O),$("body").on("change",".s-select-distributor",G),ye.on("click",V),ge.on("change",function(){$(this).is(":checked")?(j.removeClass("hide"),iCalIncludeGuestDataCheckbox.removeClass("hide"),iCalNoticeMessage.removeClass("hide")):(j.addClass("hide"),iCalIncludeGuestDataCheckbox.addClass("hide"),iCalNoticeMessage.addClass("hide"))})}function z(e){var o;document.getElementById("iCalExportUrl").select(),document.execCommand("copy"),(o=jQuery("#copy-text")).addClass("cp-copy-text_copied"),setTimeout(function(){o.removeClass("cp-copy-text_copied")},1500)}function S(e){var o=Q(),t=Number(jQuery("#nbOfDistributors").val());eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.newIcalUrlRowActionUrl,actionId:"getImportIcalRowUrl",method:eviivo.webcore.ajaxHelper.methods.GET,traditional:!0,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{selectedDistributorsShortnames:o,cultureCode:options.defaultCultureCode,indexOfDistributor:jQuery(".s-ical-url-row").length},callback:function(e){jQuery("#labels-select-partner").removeClass("hide"),jQuery("#importIcalUrls").append(e);e=jQuery(".s-ical-url-row");t===e.length&&jQuery("#btnAddiCalUrl").prop("disabled",!0)}})}function O(){var e=jQuery("#labels-select-partner");jQuery(this).closest("div.s-ical-url-row").remove(),0===jQuery("div.s-ical-url-row").length&&e.addClass("hide"),jQuery("#btnAddiCalUrl").prop("disabled",!1),B()}function B(){var i=Q();jQuery(".s-select-distributor").each(function(e){var o=jQuery(this),t=o.find(":selected").val();eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.getAvailableDistributorsUrl,actionId:"getAvailableDistributorsUrl"+t,method:eviivo.webcore.ajaxHelper.methods.GET,traditional:!0,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{selectedDistributorsShortnames:i,cultureCode:options.defaultCultureCode,currentDistributorShortname:t,index:e},callback:function(e){o.closest(".s-distributor-dropdown").html(e)}})})}function Q(){var t=[];return jQuery(".s-select-distributor").each(function(e){var o=jQuery(this).find(":selected").val();t.push(o)}),t}function G(){B()}function V(e){e.preventDefault();var e=R.find("form"),e=eviivo.webcore.serializer.toJson("#"+e.attr("id")),o=$("#iCalYes").is(":checked"),t=$("#iCalIncludeGuestDataYes").is(":checked");e.IcalEnabled=o,e.IcalIncludeGuestData=t,eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:options.saveManageIcalUrl,actionId:"saveManageIcalUrl",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:q})}function q(e){e.redirectUrl&&(window.location.href=e.redirectUrl),!1===e.success&&(e.partialView&&(R.html(e.partialView),N(),U()),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:options.manageIcalUrlErrorMessage}))}function J(e){var o=$(_).find("#rooms-table tr[data-room-id='"+e+"']").html();$("#rooms-table tr[data-room-id='"+e+"']").html(o)}function X(e,o){var t=$("#rooms-table tr[data-room-id='"+e+"'] td:nth-child(2)").html();$("#rooms-table tr[data-room-id='"+e+"']").remove(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:o.replace("{singularAccommodationKeyword}",t)})}function Y(){var e=$(this).closest(".md-table_action-select");$(".md-table_action-select").not(e).removeClass("md-table_action-list-open"),e.toggleClass("md-table_action-list-open")}function K(e){var o=$(".md-table_action-select");o.is(e.target)||0!==o.has(e.target).length||o.removeClass("md-table_action-list-open")}function W(e){e.keyCode===$.ui.keyCode.ESCAPE&&$(".md-table_action-select").removeClass("md-table_action-list-open")}var u,v,m,Z,ee,oe,te,h,b,g,f,ie,y,ae,w,ne,T,re,e,le,se,ce,x,C,de,k,pe,ue,R,ve,I,me,he,be,ge,j,fe,ye,H,P,_,A,M,D,F,L;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.rooms=window.eviivo.eagle.rooms||{},window.eviivo.eagle.rooms=(M=[],D="True",F=[],example01="Eg. 01",example99="Eg. 99",options={cultureCode:null,roomTypeId:L=A=0,roomLimitExceedMessage:null},{init:function(e){options=$.extend(options,e),u=$("#add-rooms"),f=$("#manage-rooms"),pe=".s-manage-room",ue=".s-delete-room",ae=$("#divManageRooms"),ne=$("#divDeleteRoom"),te=$("#ddlRoomTypes"),v=$("#popup-add-rooms"),m=$("#popup-manage-rooms"),I=$("#popup-manage-ical"),le=$("#yesButton"),se=$("#noButton"),Z=$("#txtPrefix"),ee=$("#FromRange"),oe=$("#ToRange"),b=$("#divNumbered"),g=$("#divNamed"),$("#hdnFilteredId"),w=$("#btnDelete"),ie="#cbSelectAll",y=".check",h=$("#FromRange, #ToRange, #txtDiaryOrder"),$(".validation-summary-errors"),ce=$("select[name='rooms-table_length']"),$("th.id select"),x=$("#ddlNumRooms"),C=$(".new-room"),k=$("#rooms-table"),de=$("#rooms-table select option"),R=$("#divManageIcal"),ve=".s-manage-ical",be=".s-menu-toggle",u.on("click",a),f.on("click",l),k.on("click",pe,l),k.on("click",ue,d),le.on("click",p),se.on("click",eviivo.eagle.popup.hide),k.on("click",ve,E),k.on("click",be,Y),$(document).on("mouseup",K),$(document).on("keyup",W),$("#divCreateType input:radio").on("click",function(){t(),$(this).resetValidation()}),k.on("change",ie,function(){var e=$(this).is(":checked");console.log(e),e?($(y).prop("checked",!0),f.prop("disabled",!1)):($(y).prop("checked",!1),f.prop("disabled",!0))}),k.on("change",y,function(){0<$("input.check:checkbox:checked").length?f.prop("disabled",!1):f.prop("disabled",!0)}),x.on("change",i),r(),u.removeClass("hide"),Z.attr("placeholder",options.resources.Prefix),ee.attr("placeholder",example01),oe.attr("placeholder",example99),v.find("form").removeData("validator"),v.find("form").removeData("unobtrusiveValidation"),$.validator.unobtrusive.parse("#popup-add-rooms form"),"True"==options.triggerAddRooms?a():"True"==options.triggerModifyRooms&&(c(),n()),ce.val(options.defaultDisplayLength).trigger("change");var o=eviivo.webcore.queryStringHelper.getUrlParameter("name");k.dataTable().fnFilter(o,2),de.each(function(){$(this).val()==o&&$(this).attr("selected","selected")}),C.map(function(e,o){var t=options.resources.RoomPlaceholder+" ("+options.nextAvailableRoomNumber+")";$(o).find("input").attr("placeholder",t),options.nextAvailableRoomNumber++}),null!=options.roomLimitExceedMessage&&""!==options.roomLimitExceedMessage&&eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:options.roomLimitExceedMessage,autoHide:!1}),H=eviivo.webcore.loadingSpinner.create({container:".body-wrapper",theme:eviivo.webcore.loadingSpinner.themes.light}),$(".mod-toolbar_section").tip()},getUpdatedRoomData:function(e){_=e;var o,e=P;Array.isArray(e)?$.each(e,function(e,o){J(o)}):isNaN(e)?(o=$(_).find("#rooms-table").html(),$("#rooms-table").html(o)):J(e)},removeDeletedRoomDataFromDisplay:function(t){var e=P;Array.isArray(e)?$.each(e,function(e,o){X(o,t)}):X(e,t)},initManageRoomsPopup:c})},382:function(){function o(e){var o=parseInt($(this).attr("id"));null==o&&(o=parseInt($(this).parents(".s-icon-delete").attr("id"))),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:c.url,actionId:"roomTypesCheckDelete",data:{id:o},method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){r.html(e),l=$("#popup-delete-roomtype"),eviivo.eagle.popup.show({popupBox:l,closeButton:l.find("#btnCancelDelete, #btnOk, .s-close")})}})}function t(){var e=$(this).closest(".md-table_action-select");$(".md-table_action-select").not(e).removeClass("md-table_action-list-open"),e.toggleClass("md-table_action-list-open")}function i(e){var o=$(".md-table_action-select");o.is(e.target)||0!==o.has(e.target).length||o.removeClass("md-table_action-list-open")}function a(e){e.keyCode===$.ui.keyCode.ESCAPE&&$(".md-table_action-select").removeClass("md-table_action-list-open")}var n,r,l,s,c;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.roomtypes=window.eviivo.eagle.roomtypes||{},window.eviivo.eagle.roomtypes=(c={url:null},{init:function(e){c=$.extend(c,e),n=$("#lnkAddRoomType"),r=$("#DeletePopUpDiv"),s=".s-icon-delete",roomTypesTable=$("#room-types-table"),moreMenuToggle=$(".s-menu-toggle"),roomTypesTable.on("click",s,o),moreMenuToggle.on("click",t),$(document).on("mouseup",i),$(document).on("keyup",a),n.removeClass("hide"),$(".mod-toolbar_section").tip(),eviivo.pms.sideMenu.spinner.init()},isPromotionsAvailable:function(e){return e.some(function(e,o,t){return e.RatePlans.some(function(e,o,t){return!eviivo.eagle.promotion.selectList.isListEmpty(e.Promotions)})})},checkDelete:o})},4632:function(){var o;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.room=window.eviivo.pms.room||{},window.eviivo.pms.room.list=window.eviivo.pms.room.list||{},window.eviivo.pms.room.list=(o={url:null},{init:function(e){o=$.extend(o,e),$("#eviivo-list-room").on("click",".s-listing-table-edit",eviivo.pms.roomtypes.list.editRoom),$("#eviivo-list-room").on("click",".s-manage-ical",eviivo.pms.roomtypes.list.manageIcal),$("body").on("click","#add-rooms",eviivo.pms.roomtypes.list.constructCreateRoomsPopupFromInventoryFlyout),eviivo.component.listing.postInitRefreshDataTableSpecific("#eviivo-list-room")},customRenderRoomType:function(e,o,t){return null!=e?'<a href="/suite/settings/roomtypes/general/'.concat(t.RoomTypeId,'">').concat(e,"</a>"):e}})},5136:function(){function o(){var e=$(this);u=e.parents("tr").attr("data-id"),v=t(u),eviivo.component.flyout.showFlyout("#room-type-inventory")}function t(e){return eviivo.component.listing.getATablesRowDataViaTableId("#eviivo-list-room-types",e)[0]}function i(e){return(0<$("#eviivo-list-rooms").length?eviivo.component.listing.getATablesRowDataViaTableId("#eviivo-list-rooms",e):eviivo.component.listing.getATablesRowDataViaTableId("#eviivo-list-room",e))[0]}function a(e){e.preventDefault(),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:b.createRoomsPopupUrl,actionId:"createRoomsPopup",data:{RoomTypeId:u,BusinessId:v.BusinessId},traditional:!0,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){e=$(e);$("#manage").html(e.find("form").html()),eviivo.component.flyout.showFlyout("#manage-room-type-inventory"),eviivo.eagle.rooms.initManageRoomsPopup()}})}function n(e){e.preventDefault();e=$(this);u=e.parents("tr").attr("data-id"),v=t(u),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:b.createRoomsPopupUrl,actionId:"createRoomsPopup",data:{RoomTypeId:u,BusinessId:v.BusinessId},traditional:!0,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){e=$(e);$("#manage").html(e.find("form").html()),eviivo.component.flyout.showFlyout("#manage-room-type-inventory"),eviivo.eagle.rooms.initManageRoomsPopup()}})}function r(e){e.preventDefault();e=$(this);m=e.parents("tr").attr("data-id"),p=i(m),eviivo.component.flyout.showFlyout("#manage-ical")}function l(e){e.preventDefault();e=$(this);m=e.parents("tr").attr("data-id"),p=i(m),eviivo.component.flyout.showFlyout("#manage-room-type-inventory")}function s(e,o){return'<a href="javascript:;"\n                            class="md-table_action md-table_action-item md-table_action-interchange s-create-room"\n                            title="'.concat(b.resources.add,'"\n                            data-tooltip-title="').concat(b.resources.add,'"\n                            data-tooltip="title"\n                            data-tooltip-pos="top">\n                            ').concat(o?'<svg class="icon-bg icon-bg-add"><use xlink:href="#icon-bg-add"></use></svg>':b.resources.add,"                            \n                        </a>")}var c,d,p,u,v,m,h,b;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.roomtypes=window.eviivo.pms.roomtypes||{},window.eviivo.pms.roomtypes.list=window.eviivo.pms.roomtypes.list||{},window.eviivo.pms.roomtypes.list=(v=[],h=m=u=0,b={url:null},{init:function(e){b=$.extend(b,e),btnAddRoomType=$("#lnkAddRoomType"),deleteDiv=$("#DeletePopUpDiv"),c=".s-icon-delete",roomTypesTable=$("#room-types-table"),moreMenuToggle=$(".s-menu-toggle"),roomTypesTable.on("click",c,eviivo.eagle.roomtypes.checkDelete),$("body").on("click",".s-display-inventory",o),$("#room-type-inventory").on("click",".s-listing-table-edit",l),$("#room-type-inventory").on("click",".s-manage-ical",r),$("body").on("click","#add-rooms",a),$("body").on("click",".s-create-room",n),eviivo.component.listing.postInitRefreshDataTableSpecific("#eviivo-list-room-types")},customRenderInventory:function(e,o,t){return'<a href="javascript:;" class="s-display-inventory">'.concat(e,"</a>")},customRenderBedConfig:function(e,o,t){var i="";return $.each(t.RoomTypeBedConfigs,function(e,o){i="".concat(i).concat(""!=i?",":""," <span>&#8226; ").concat(t.RoomTypeBedConfigs[e].HumanReadableName,"</span>")}),'<a data-tooltip="title" data-tooltip-pos="top" data-tooltip-title="'.concat(i,'" title="').concat(i,'"\n                        href="/suite/settings/roomtypes/general/').concat(t.Id,'#bed-configs">').concat(e,"</a>")},rowCreatedCallback:function(e,o,t,i,a){var n=$(e),r=n[0].rowIndex,o=o.Id,l="/suite/settings/roomtypes/general/".concat(o);n.find(".s-listing-table-edit").attr("href",l),n.find(".s-complex-actions").append(s(0,!0)),eviivo.component.listing.rowActions.create("eviivo-list-room-types",e,0,"<li>".concat(s(0,!1),"</li>"),r)},deleteAjaxDataCallback:function(o){var e={Id:o.Id,BusinessId:o.BusinessId};return eviivo.webcore.ajaxHelper.executeAjax({actionId:"RuleDelete-".concat(o.Id),url:"/suite/api/rooms/room-typesdelete",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:e,callback:function(e){e?deleteRowsData("#eviivo-list-room-types",o.Id):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}}),!1},inventoryFlyoutOnShow:function(){eviivo.component.flyout.updateTitle("room-type-inventory",".s-heading-title","Inventory - ".concat(v.PropertyName," - ").concat(v.RoomTypeName)),eviivo.component.listing.postInitRefreshDataTableSpecific("#eviivo-list-rooms")},inventoryFlyoutOnClose:function(){u=0,v=[],eviivo.component.listing.clear("#eviivo-list-rooms"),$("#eviivo-list-rooms tbody").html("")},inventoryAjaxDataCallback:function(){return{RoomTypeId:u,BusinessId:v.BusinessId}},manageFlyoutOnShow:function(){var o,t;null!=p?(eviivo.component.flyout.updateTitle("manage-room-type-inventory",".s-heading-title","Manage - ".concat(p.RoomName)),o=m,t=0,eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:b.checkFutureRoomBookingsUrl,actionId:"checkRoomForFutureBookings-roomId="+o,data:{roomId:o},method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.TEXT,callback:function(e){h++,"False"===(canEditStatus=e)&&0<t&&cannotEditStausRoomName.push($("tr[data-room-id='"+o+"'] td:nth-child(2)").html()),0!==t&&h!==t||(eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:b.manageRoomsPopupUrl,actionId:"manageRoomsPopup",data:{roomId:m,roomIds:d},traditional:!0,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){e=$(e);$("#manage").html(e.find("form").html()),eviivo.eagle.rooms.initManageRoomsPopup()}}),h=0)}})):eviivo.component.flyout.updateTitle("manage-room-type-inventory",".s-heading-title","Create inventory for - ".concat(v.PropertyName," - ").concat(v.RoomTypeName))},manageFlyoutOnClose:function(){m=0,$("#manage").html("")},roowRowCreatedCallback:function(e,o,t,i,a){$(e).find(".md-table_text-right").append('<button class="md-table_action md-table_action-item md-table_action-interchange s-manage-ical" title="iCal" data-tooltip-title="iCal" data-tooltip="title" data-tooltip-pos="top">\n            <svg class= "icon-bg icon-bg-calendar_today"> <use xlink: href="#icon-bg-calendar_today"></use></svg>\n                                        </button>')},icalFlyoutOnShow:function(){eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:b.manageIcalPopupUrl,actionId:"manageIcalPopup",data:{roomId:m,cultureCode:b.defaultCultureCode},traditional:!0,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){e=$(e);$("#manage-ical-body").html(e.find("form").html()),$("#popup-manage-ical").removeAttr("class"),$(".mod-popup-header").remove()}})},icalFlyoutOnClose:function(){$("#manage-ical-body").html("")},editRoom:l,manageIcal:r,constructCreateRoomsPopupFromInventoryFlyout:a})}},i={};function a(e){var o=i[e];return void 0!==o||(o=i[e]={exports:{}},t[e](o,o.exports,a)),o.exports}a.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(o,{a:o}),o},a.d=function(e,o){for(var t in o)a.o(o,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},a.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},function(){"use strict";a(362),a(4632),a(382),a(5136),a(8099),a(6688)}();
//# sourceMappingURL=room.min.js.map