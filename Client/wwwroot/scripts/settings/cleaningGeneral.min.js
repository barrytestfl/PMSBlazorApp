var n={812:function(){function t(){m.elements.SendFullSummary.is(":checked")?m.elements.emailScheduleEmailList.prop("disabled",!1):m.elements.emailScheduleEmailList.prop("disabled",!0)}function a(e){var t=u(e.target).closest("table"),r=t.find(m.elements.duplicateRuleLabel);d=!1,r.hide(),t.find("tbody tr td select.error").each(function(e,t){u(t).removeClass("error")}),t.find("tbody tr:visible").each(function(a,e){var e=u(e),i=e.find("td:nth-child(2) select"),l=e.find("td:nth-child(3) select");t.find("tbody tr:visible").each(function(e,t){var t=u(t),n=t.find("td:nth-child(2) select"),t=t.find("td:nth-child(3) select");a!=e&&i.val()==n.val()&&l.val()==t.val()&&(i.addClass("error"),l.addClass("error"),n.addClass("error"),t.addClass("error"),d=!0,r.show())})})}function i(e){var e=u(e.target).closest("table"),t=e.find("tbody tr.s-empty-row"),e=e.find("thead tr"),n="<tr><th></th><th></th><th></th><th>".concat(m.resources.TableHeading,"</th><th></th></tr>");t.is(":visible")?e.replaceWith('<tr><th colspan="5">&nbsp;</th></tr>'):e.replaceWith(n)}function l(){f=!1;var t=m.elements.unitRules;return t.find(m.elements.unitRuleUnitSelect+".error:visible").each(function(e,t){u(t).removeClass("error")}),t.find(m.elements.unitRuleUnitSelect+":visible").each(function(n,e){var a=u(e);t.find(m.elements.unitRuleUnitSelect+":visible").each(function(e,t){t=u(t);n!=e&&a.val()==t.val()&&(a.addClass("error"),t.addClass("error"),f=!0)})}),f}function n(){m.elements.form.validate().resetForm(),m.elements.cleaningEmailRadio.is(":checked")?m.elements.cleaningEmailRadio.closest(".l-row").siblings().show():m.elements.cleaningEmailRadio.closest(".l-row").siblings().hide()}function r(){m.elements.form.validate().resetForm(),m.elements.buffersRadio.is(":checked")?m.elements.buffersRadio.closest(".l-row").siblings().show():m.elements.buffersRadio.closest(".l-row").siblings().hide()}function o(n){eviivo.webcore.ajaxHelper.executeAjax({actionId:e+".updateCleaningSettings",url:"".concat(eviivoSuiteApp,"/api/CleaningSettings/updateCleaningSettings"),method:eviivo.webcore.ajaxHelper.methods.POST,data:n,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){var t;m.originalBufferSettings=n.BufferSettings,t=m.resources.GenericSave,eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:t})},failCallback:function(e,t,n,a){var i;i=m.resources.GenericError,eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:i})}})}function s(e){var n=[];return e.find("tbody tr:visible").each(function(e,t){1!=t.cells.length&&(t=u(t),n.push({CleanWhen:t.find("td:nth-child(2) select").val(),CleanState:t.find("td:nth-child(3) select").val(),CleanType:t.find("td:nth-child(4) input").val()}))}),n}function c(){m.elements.calendarInputBufferLastDay.val(null)}var u,e,d,f,m;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.settings=window.eviivo.eagle.settings||{},window.eviivo.eagle.settings.cleaning=window.eviivo.eagle.settings.cleaning||{},window.eviivo.eagle.settings.cleaning.general=(u=jQuery,f=d=!(e="eviivo.pms.settings.cleaning"),m={elements:{saveBtn:u("#save"),form:u("#CleaningSettingsForm"),buffersRadio:u("#isCleaningEnabled"),enableWarning:u("#enableWarning"),disableWarning:u("#disableWarning"),hiddenBufferLastDay:u("#BookingBufferEndDay"),calendarInputBufferLastDay:u("#calendarInputBufferLastDay"),clearCalendarValueBtn:u("#clearCalendarValue"),radioGroup:u(".cp-radio-group")[0],cleaningEmailRadio:u("#CleaningSummaryEnabled"),emailScheduleEmailList:u("#emailList"),SendTime:u("#SendTime"),SendDay:u("#SendDay"),SendEmailOnSave:u("#yesSendEmailOnSave"),addRule:".sl-addRule",rulesTable:u("#propertyRules"),deleteRule:".sl-deleteRule",ruleSelector:".sl-ruleValidation",duplicateRuleLabel:".sl-duplicateRuleError",unitRuleSection:".sl-cleaningRuleSection",addRoomRules:u("#AddRoomScheduleRules"),unitRules:u("#unitRules"),notUnitRules:u("#NoUnitRules"),unitRuleUnitSelect:".sl-unitSelected",removeUnitSection:".remove-section",SendToCleaners:u("#SendEmailToCleaners"),SendFullSummary:u("#SendFullSummary")},roomScheduleWidget:null},{init:function(e){(m=eviivo.util.extend(m,e)).roomScheduleWidget=new u.multiSelectDragDrop(u("#"+m.multiSelectDragDrop.selectors.widgetId),{selectors:m.multiSelectDragDrop.selectors}),jQuery.validator.addMethod("MultipleEmails",function(e,t){if(this.optional(t))return!0;var n,a=e.split(",");for(n in valid=!0,a)e=a[n],valid=valid&&jQuery.validator.methods.email.call(this,u.trim(e),t);return valid},jQuery.validator.messages.email),m.elements.form.validate({ignore:[],rules:{emailList:{required:"#CleaningSummaryEnabled:checked",MultipleEmails:!0},BookingBufferLength:{required:"#isCleaningEnabled:checked"},bufferEndDate:{required:"#isCleaningEnabled:checked"}}}),r(),n(),e=(new Date).evStandardFirstDayCalendarOffset(eviivo.eagle.basePageModelState.userCultureCode),m.elements.calendarInputBufferLastDay.datepicker("hide"),m.elements.calendarInputBufferLastDay=eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar,{defaultCultureCode:eviivo.eagle.basePageModelState.userCultureCode,calendar:m.elements.calendarInputBufferLastDay,dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),showOtherMonths:!0,changeYear:!0,firstDay:e,changeMonth:!0,doNotSetInitialDate:!1,setDate:null!=m.originalBufferSettings.BookingBufferEndDate?new Date(m.originalBufferSettings.BookingBufferEndDate):new Date}),m.elements.saveBtn.off().on("click",function(e){var t,n,a;e.preventDefault(),!m.elements.form.valid()||f||d||(!function(e){return e.IsCleaningEnabled==m.originalBufferSettings.IsCleaningEnabled&&e.BookingBufferLength==m.originalBufferSettings.BookingBufferLength&&(""==e.BookingBufferEndDate||null==m.originalBufferSettings.BookingBufferEndDate||e.BookingBufferEndDate==m.originalBufferSettings.BookingBufferEndDate)}((e={SummarySettings:function(){var e;return m.elements.cleaningEmailRadio.is(":checked")?(e=m.roomScheduleWidget.isAllToggled()?[]:m.roomScheduleWidget.getSelected(),{IsSummaryEmailEnabled:!0,RecipientEmails:m.elements.emailScheduleEmailList.val().split(",").map(function(e){return e.trim()}),SummarySendTime:eviivo.webcore.timespan.parseHHMM(m.elements.SendTime.val()),SendDay:m.elements.SendDay.val(),RoomsToInclude:e.map(function(e){return{RoomId:e,IncludeInSummary:!0}}),SendEmailNow:m.elements.SendEmailOnSave.is(":checked"),SendToCleaners:m.elements.SendToCleaners.is(":checked"),SendFullSummary:m.elements.SendFullSummary.is(":checked")}):{IsSummaryEmailEnabled:!1}}(),BufferSettings:function(){if(m.elements.buffersRadio.is(":checked"))return{IsCleaningEnabled:!0,BookingBufferLength:u("input[name=BookingBufferLength]:checked").val(),BookingBufferEndDate:eviivo.webcore.datetime.evStandardIso8601DateExtended(u("#calendarInputBufferLastDay").datepicker("getDate"))};return{IsCleaningEnabled:!1,BookingBufferLength:0,BookingBufferEndDate:""}}(),PropertyCleaningSchedule:{AlwaysCleanBeforeCheckin:u("#alwaysCleanBeforeCheckin_propertySettings").is(":checked"),AlwaysCleanAfterCheckOut:u("#alwaysCleanAfterCheckout_propertySettings").is(":checked"),Rules:s(m.elements.rulesTable)},RoomTypeCleaningSchedules:{UnitCleaningSettings:function(){var a=[];return m.elements.unitRules.find(".sl-cleaningRuleSection:visible").each(function(e,t){var n=u(t).find(".sl-unitSelected");a.push({RoomTypeId:n.val(),RoomTypeName:n.children("option").filter(":selected").text(),AlwaysCleanBeforeCheckin:u(t).find("input[id*='alwaysCleanBeforeCheckin_UnitSetting_']").is(":checked"),AlwaysCleanAfterCheckOut:u(t).find("input[id*='alwaysCleanAfterCheckout_UnitSetting_']").is(":checked"),Rules:s(u(t).find("table"))})}),a}()}}).BufferSettings)?(n=m.elements.buffersRadio.is(":checked")?m.resources.BuffersEnabledWarningMessage:m.resources.BuffersDisabledWarningMessage,t=eviivo.webcore.notifier.types.warn,n=n,a=e,jQuery(".notifyjs-wrapper").is(":visible")&&u(".notifyjs-wrapper").remove(),eviivo.webcore.notifier.show({type:t,message:n,autoHide:!1,style:eviivo.webcore.notifier.styles.withTwoActions,buttonOne:m.resources.No,buttonTwo:m.resources.Yes}),u(".btn-one").addClass("btn").addClass("btn-secondary"),u(".btn-two").addClass("btn").addClass("btn-right"),u(".notifyjs-withTwoActions-base").on("click",".btn-two",function(){o(a)})):o(e))}),m.elements.clearCalendarValueBtn.off().on("click",c),m.elements.buffersRadio.off().on("change",r),m.elements.cleaningEmailRadio.off().on("change",n),m.elements.addRoomRules.off().on("click",function(e){e.preventDefault();var t=(e=m.elements.unitRules).find(m.elements.unitRuleSection+":last"),n=e.find(m.elements.unitRuleSection+":first"),n=(t.is(":visible")||m.elements.notUnitRules.hide(),e.append(n.clone()),(t=e.find(m.elements.unitRuleSection+":last")).show(),l(),t),e=m.ruleCount,t=n.find("input[id*='alwaysCleanBeforeCheckin_UnitSetting_']"),a=n.find("label[for*='alwaysCleanBeforeCheckin_UnitSetting_']"),i=t.prop("id"),t=(t.prop("id",i+e),a.prop("for",i+e),n.find("input[id*='alwaysCleanAfterCheckout_UnitSetting_']")),a=n.find("label[for*='alwaysCleanAfterCheckout_UnitSetting_']"),i=t.prop("id");t.prop("id",i+e),a.prop("for",i+e),m.ruleCount++}),u(document).on("click",m.elements.addRule,function(e){var t=u(e.target).closest("table"),n=t.find("tbody tr:last");n.is(":visible")||t.find("tbody tr").first().remove(),n.after(n.clone()),(n=t.find("tbody tr:last")).find("input").val(null),n.find("select").each(function(e,t){u(t).prop("selectedIndex",0)}),n.show(),i(e),a(e)}),u(document).on("click",m.elements.deleteRule,function(e){var t=u(e.target).closest("table"),n=u(e.target).closest("tr").parent();u(e.target).closest("tr").remove(),t.find("tbody tr:last:hidden").length&&t.find("tbody").prepend('<tr class="s-empty-row"><td colspan="5">'.concat(m.resources.NoRulesConfigured,"</td></tr>")),e.target=n,a(e),i(e)}),u(document).on("change",m.elements.ruleSelector,function(e){a(e)}),u(document).on("change",m.elements.unitRuleUnitSelect,l),u(document).on("click",m.elements.removeUnitSection,function(e){u(e.target).closest(m.elements.unitRuleSection).remove(),m.elements.unitRules.find(m.elements.unitRuleSection+":last").is(":visible")||m.elements.notUnitRules.show(),l()}),m.elements.SendFullSummary.on("change",t)}})},2728:function(){function n(e,o,s){e.each(function(){var r=d(this);r.off(".alphanum").on("keyup.alphanum change.alphanum paste.alphanum",function(e){var l="";e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.getData&&(l=e.originalEvent.clipboardData.getData("text/plain")),setTimeout(function(){var e=r,t=o,n=s,a=l,i=e.val();""==i&&0<a.length&&(i=a),a=t(i,n),i!=a&&(t=e.alphanum_caret(),e.val(a),i.length==a.length+1?e.alphanum_caret(t-1):e.alphanum_caret(t))},0)}).on("keypress.alphanum",function(e){var t,n,a,i=e.charCode||e.which;!(32<=(t=i))&&10!=t&&13!=t||e.ctrlKey||e.metaKey||(t=String.fromCharCode(i),a=(i=r.selection()).start,i=i.end,a=(n=r.val()).substring(0,a)+t+n.substring(i),o(a,s)!=a&&e.preventDefault())})})}function i(e){return!isNaN(e)}function a(e,t){var n={},e="string"==typeof e?g[e]:void 0===e?{}:e;return d.extend(n,t=void 0===t?f:t,e),void 0===n.blacklist&&(n.blacklistSet=function(e,t){t=new u(p+t),e=new u(e);return t.subtract(e)}(n.allow,n.disallow)),n}function l(e){var t={},e="string"==typeof e?h[e]:void 0===e?{}:e;return d.extend(t,m,e),t}function r(e,t,n){if(w[t])return!function(e,t){t=t.maxDigits;return""!==t&&!isNaN(t)&&(e=o(e),t<=e)}(e,n)&&!(function(e,t){t=t.maxPreDecimalPlaces;return!(""===t||isNaN(t)||0<=e.indexOf(S))&&(e=o(e),t<=e)}(e,n)||(i=e,""!==(l=(l=n).maxDecimalPlaces)&&!isNaN(l)&&-1!=(a=i.indexOf(S))&&(i=o(i.substring(a)),l<=i))||(a=e+t,(l=n).max&&!(l.max<0)&&parseFloat(a)>l.max)||(i=e+t,(l=n).min&&!(0<l.min)&&parseFloat(i)<l.min));var a,i,l,r;if(n.allowPlus&&"+"==t&&""==e)return 1;if(n.allowMinus&&"-"==t&&""==e)return 1;if(t==v&&n.allowThouSep&&0!=(i=e).length&&!(0<=i.indexOf(S)||!((l=i.indexOf(v))<0)&&(r=i.lastIndexOf(v),i.length-r-1<3||0<o(i.substring(l))%3)))return 1;if(t==S){if(0<=e.indexOf(S))return;if(n.allowDecSep&&0===n.maxDecimalPlaces)return;if(n.allowDecSep)return 1}}function o(e){return(e+="").replace(/[^0-9]/g,"").length}function s(e,t){if("string"!=typeof e)return e;for(var n,a,i,l,r=e.split(""),o=[],s=0,s=0;s<r.length;s++){var c=r[s],u=o.join("");u=u,n=c,l=i=void 0,(a=t).maxLength&&u.length>=a.maxLength||!(0<=a.allow.indexOf(n)||a.allowSpace&&" "==n)&&(!(a.allowNewline||"\n"!=n&&"\r"!=n)||a.blacklistSet.contains(n)||!a.allowNumeric&&w[n]||!a.allowUpper&&(i=(u=n).toUpperCase(),l=u.toLowerCase(),u==i)&&i!=l||!a.allowLower&&(i=(u=n).toUpperCase(),l=u.toLowerCase(),u==l)&&i!=l||!a.allowCaseless&&(u=n).toUpperCase()==u.toLowerCase()||!a.allowLatin&&b.contains(n)||!a.allowOtherCharSets&&!w[n]&&!b.contains(n))||o.push(c)}e=o.join("");return t.forceLower?e=e.toLowerCase():t.forceUpper&&(e=e.toUpperCase()),e}function c(e,t){if("string"!=typeof e)return e;for(var n=e.split(""),a=[],i=0,i=0;i<n.length;i++){var l=n[i];r(a.join(""),l,t)&&a.push(l)}return a.join("")}function u(e){this.map="string"==typeof e?function(e){var t,n={},a=e.split(""),i=0;for(i=0;i<a.length;i++)t=a[i],n[t]=!0;return n}(e):{}}var d,e,t,f,m,g,h,p,v,S,w,b,y,C,R;function E(e,t){var n;e.createTextRange?((n=e.createTextRange()).move("character",t),n.select()):null!=e.selectionStart&&(e.focus(),e.setSelectionRange(t,t))}function D(e){return e?e.ownerDocument.defaultView||e.ownerDocument.parentWindow:window}function T(e,t){var n=C.Range.current(e).clone(),e=C.Range(e).select(e);return n.overlaps(e)?(n.compare("START_TO_START",e)<1?(startPos=0,n.move("START_TO_START",e)):((fromElementToCurrent=e.clone()).move("END_TO_START",n),startPos=fromElementToCurrent.toString().length),endPos=0<=n.compare("END_TO_END",e)?e.toString().length:startPos+n.toString().length,{start:startPos,end:endPos}):null}function k(e,t,n){var a,i;n=n||0;for(var l=0;e[l];l++)3===(a=e[l]).nodeType||4===a.nodeType?(i=n,n+=a.nodeValue.length,R(i,n,t,a)):8!==a.nodeType&&(n=k(a.childNodes,t,n));return n}(d=jQuery).fn.alphanum=function(e){return n(this,s,a(e)),this},d.fn.alpha=function(e){var t=a("alpha");return n(this,s,a(e,t)),this},f={allow:"",disallow:"",allowSpace:!0,allowNewline:!0,allowNumeric:!0,allowUpper:!0,allowLower:!0,allowCaseless:!0,allowLatin:!0,allowOtherCharSets:!0,forceUpper:!(d.fn.numeric=function(e){var a=l(e);return n(this,c,a),this.blur(function(){var e,t,n;e=this,t=a,n=parseFloat(d(e).val()),e=d(e),(isNaN(n)||(i(t.min)&&n<t.min&&e.val(""),i(t.max)&&n>t.max))&&e.val("")}),this}),forceLower:!1,maxLength:NaN},h={integer:{allowPlus:!(g={alpha:{allowNumeric:!(m={allowPlus:!1,allowMinus:!0,allowThouSep:!0,allowDecSep:!0,allowLeadingSpaces:!1,maxDigits:NaN,maxDecimalPlaces:NaN,maxPreDecimalPlaces:NaN,max:NaN,min:NaN})},upper:{allowNumeric:!1,allowUpper:!0,allowLower:!1,allowCaseless:!0},lower:{allowNumeric:!1,allowUpper:!1,allowLower:!0,allowCaseless:!0}}),allowMinus:!0,allowThouSep:!1,allowDecSep:!1},positiveInteger:{allowPlus:!1,allowMinus:!1,allowThouSep:!1,allowDecSep:!1}},e="!@#$%^&*()+=[]\\';,/{}|\":<>?~`.-_",p=(e+=" ")+"¬€£¦",v=",",S=".",w=function(){var e,t="0123456789".split(""),n={},a=0;for(a=0;a<t.length;a++)e=t[a],n[e]=!0;return n}(),t=(e="abcdefghijklmnopqrstuvwxyz").toUpperCase(),b=new u(e+t),u.prototype.add=function(e){var t,n=this.clone();for(t in e.map)n.map[t]=!0;return n},u.prototype.subtract=function(e){var t,n=this.clone();for(t in e.map)delete n.map[t];return n},u.prototype.contains=function(e){return!!this.map[e]},u.prototype.clone=function(){var e,t=new u;for(e in this.map)t.map[e]=!0;return t},d.fn.alphanum.backdoorAlphaNum=function(e,t){return s(e,a(t))},d.fn.alphanum.backdoorNumeric=function(e,t){return c(e,l(t))},d.fn.alphanum.setNumericSeparators=function(e){1==e.thousandsSeparator.length&&1==e.decimalSeparator.length&&(v=e.thousandsSeparator,S=e.decimalSeparator)},(y=jQuery).fn.alphanum_caret=function(n,a){if(void 0!==n)return this.queue(function(e){var t;isNaN(n)?(t=y(this).val().indexOf(n),!0===a?t+=n.length:void 0!==a&&(t+=a),E(this,t)):E(this,n),e()});var e=this.get(0);if("selection"in document){var t=e.createTextRange();try{t.setEndPoint("EndToStart",document.selection.createRange())}catch(e){return 0}return t.text.length}return null!=e.selectionStart?e.selectionStart:void 0},C=jQuery,R=function(e,t,n,a){"number"==typeof n[0]&&n[0]<t&&(n[0]={el:a,count:n[0]-e}),"number"==typeof n[1]&&n[1]<=t&&(n[1]={el:a,count:n[1]-e})},jQuery.fn.selection=function(o,s){if(void 0!==o)return this.each(function(){var e,t,n,a,i,l,r;t=o,n=s,r=D(e=this),e.setSelectionRange?void 0===n?(e.focus(),e.setSelectionRange(t,t)):(e.select(),e.selectionStart=t,e.selectionEnd=n):e.createTextRange?((i=e.createTextRange()).moveStart("character",t),i.moveEnd("character",(n=n||t)-e.value.length),i.select()):r.getSelection?(i=r.document,a=r.getSelection(),l=i.createRange(),k([e],i=[t,void 0!==n?n:t]),l.setStart(i[0].el,i[0].count),l.setEnd(i[1].el,i[1].count),a.removeAllRanges(),a.addRange(l)):r.document.body.createTextRange&&((l=document.body.createTextRange()).moveToElementText(e),l.collapse(),l.moveStart("character",t),l.moveEnd("character",void 0!==n?n:t),l.select())});var e,t,n,a,i,l,r,c=this[0],u=D(c);if(void 0!==c.selectionStart)return document.activeElement&&document.activeElement!=c&&c.selectionStart==c.selectionEnd&&0==c.selectionStart?{start:c.value.length,end:c.value.length}:{start:c.selectionStart,end:c.selectionEnd};if(u.getSelection)return T(c);try{return"input"==c.nodeName.toLowerCase()?(e=D(c).document.selection.createRange(),(t=c.createTextRange()).setEndPoint("EndToStart",e),{start:n=t.text.length,end:n+e.text.length}):((a=T(c))&&(l=(i=C.Range.current().clone()).clone().collapse().range,r=i.clone().collapse(!1).range,l.moveStart("character",-1),r.moveStart("character",-1),0!=a.startPos&&""==l.text&&(a.startPos+=2),0!=a.endPos)&&""==r.text&&(a.endPos+=2),a)}catch(e){return{start:c.value.length,end:c.value.length}}},C.fn.selection.getCharElement=k}},a={};function i(e){var t=a[e];return void 0!==t||(t=a[e]={exports:{}},n[e](t,t.exports,i)),t.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";i(2728),i(812)}();
//# sourceMappingURL=cleaningGeneral.min.js.map