var n={514:function(){function n(e){F.canModifyCancellationPolicies="True"===s("#CanModifyCancellation").val(),e?(u=s("#divPolicies"),s("#divAddEditPolicies"),q=s("#universalPolicy"),d=s(".policyRadio"),x=s("#txtName"),K=s("#lnkAddPolicy"),re=s("#cancellationNavBar")):(ue=s("#hdnPolicyId"),f=s("[id^=txtPolicyChargeValues_]"),h=s("[id^=txtWindowValue_]"),v=s("[id^=ddlCancellationCharges_]"),p=s("[id^=ddlCancellationWindows_]"),Y=s("#rgCancellationPolicies"),Z=s("#rbTiered"),ee=s("#rbFullyRefundable"),ie=s("#rbNonRefundable"),ne=s("#rbSingleCharge"),y=s("#sectionBtnAddCancellationWindow"),ae=s("#sectionCancellationRule"),g=s("#btnAddCancellationWindow"),C=s(".removeTier"),b=s("#sectionTiers"),w=s("#saveCancPolicyForm"),P=s("#btnCancel"),de=s("#btnDelete"),le=s("input[type=radio][name='Policy.CancellationPolicyType']"),ce=s("#divPolicies .s-edit"),k=s("#cbUseBusinessPolicy"),H=s("#divPolicyDetails"),se=s("#cutoffTimeTypeList"),_={windowValue:s("#txtWindowValue_"+L),windowType:s("#ddlCancellationWindows_"+L),chargeValue:s("#txtPolicyChargeValues_"+L),chargeType:s("#ddlCancellationCharges_"+L)},j={windowValue:s("#txtWindowValue_"+N),windowType:s("#ddlCancellationWindows_"+N),chargeValue:s("#txtPolicyChargeValues_"+N),chargeType:s("#ddlCancellationCharges_"+N)},x=s("#txtName"),s("#btnSaveBusinessPolicy"))}function M(e){e?(d.on("click",function(){var e=s(this);if(1==F.thingsHaveChanged)return F.thingsHaveChanged=!1,jQuery(".notifyjs-wrapper").length<=0&&a(),!(A=!0);0==F.thingsHaveChanged&&1==A&&(A=!1,0<m)&&s("#PolicyLink_"+m).text(x.attr("value").val()),d.removeClass("active");var i=e;return m=0,T=i.attr("data-universal"),i.addClass("active"),m="False"===T?parseInt(i.attr("data-policy")):null,"True"===(T||0<m)&&s("#new-item").hasClass("newpolicy")&&(s("#new-item").hide(),s("#lnkAddPolicy").removeClass("hide")),u.addClass("hide"),r(),oe=e.attr("data-policy"),te=e.attr("data-universal"),!1}),K.on("click",function(){if(1==F.thingsHaveChanged)return F.thingsHaveChanged=!1,a(),!(A=!0)}),x.on("blur",c),s("#Policy_CancellationValues_CancellationChargeValue").on("blur",c),s("[id^=txtWindowValue_]").on("blur",c),s("[id^=ddlCancellationCharges_]").on("change",c)):(v.on("click",function(){t(s(this))}),p.on("change",S),h.on("keyup paste input",W),f.on("keyup paste input",O),!0===F.canModifyCancellationPolicies?(le.on("change",function(){Y.buttonset("refresh")}),ne.on("click",function(){i(D.FlatCharge)}),Z.on("click",function(){i(D.TieredCancellationPolicy),J()}),ee.on("click",function(){i(D.FullyRefundable)}),ie.on("click",function(){i(D.NonRefundable)})):s("#rgCancellationPolicies input").each(function(){s(this).prop("disabled",!0)}),g.on("click",U),C.on("click",G),R(),ce.on("click",function(e){e.preventDefault(),I=s(this).data("id"),s("html, body").animate({scrollTop:re.offset().top},1).addClass("reveal"),r(!0)}),P.on("click",function(){I=0,s("html, body").removeClass("reveal"),r()}),de.on("click",function(){s("#loading-overlay").show(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"DeleteCancellationPolicy",url:eviivoSuiteApp+"/settings/deleteCancellationPolicy",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:{policyId:ue.val()},callback:function(e){null!=e.Data&&e.Data.error&&("false"==(e=e.Data.error)?window.location.href=eviivoSuiteApp+"/settings/policies/cancellation":"RatePlansExist"==e?(s("#loading-overlay").hide(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:F.resources.ratePlansExistForCancellationPolicy,autoHide:!1})):"GeneralError"==e&&(s("#loading-overlay").hide(),s(".notifyjs-wrapper").remove(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})))},failCallback:function(e){console.log(e)}})}),k.on("change",function(){s(this).is(":checked")?(k.val("true"),H.addClass("hide")):(k.val("false"),H.removeClass("hide"))}),x.on("keyup",function(){l(s(this))}).on("blur",function(){l(s(this))}).on("focus",function(){l(s(this))}),s("#btnSaveBusinessPolicy").off().on("click",function(e){var i;e.preventDefault(),e=!0,x.is("input:text")&&(0<x.val().length?(e=!0,x.removeClass("input-validation-error")):(e=!1,x.addClass("input-validation-error"))),i=h.filter(":visible:enabled"),e=o(i,e),i=p.filter(":visible:enabled"),e=o(i,e),i=f.filter(":visible:enabled"),e=o(i,e),i=v.filter(":visible:enabled"),(e=o(i,e))&&w.submit()}))}function a(){s(".notifyjs-wrapper").remove(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:F.resources.unsavedChangesMessage})}function o(e,i){return e.each(function(){var e=s(this);i=""==e.val()?(e.addClass("input-validation-error"),i&&!1):(e.removeClass("input-validation-error"),i&&!0)}),i}function R(){v.each(function(){t(s(this))}),j.windowValue.on("keyup",E),j.windowType.on("change",E),se.on("change",J)}function E(){_.windowValue.val(j.windowValue.val()),_.windowType.val(j.windowType.val())}function S(){e(s(this))}function W(){e(s(this))}function O(){e(s(this))}function e(e){""!=e.val()&&e.removeClass("input-validation-error")}function t(e){var i=e.val(),e=(""!=i&&e.removeClass("input-validation-error"),e.parent().prev(".element-row").find("input[type='text']"));i==V.Amount||i==V.Percentage||i==V.Default?e.removeAttr("disabled"):(e.prop("disabled",!0),e.val(""))}function G(){s(this).parents(".s-section").remove(),a(),X()<F.maxNumberOfTiers&&y.removeClass("hide")}function i(e){eviivo.webcore.ajaxHelper.executeAjax({actionId:"GetCancellationPolicyDetails",url:eviivoSuiteApp+"/settings/getCancellationPolicyDetails",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{policyId:oe,channelId:I,cancellationType:e,isUniversal:te},callback:function(e){try{B(e,!0)}catch(e){console.log(e)}},failCallback:function(e){console.log(e)}})}function B(e,i){i?(ae.html(e),n(!1),g.on("click",U)):(b.html(e),n(!1),X()==F.maxNumberOfTiers&&y.addClass("hide")),R(),v.on("click",function(){t(s(this))}),$(),C.on("click",G),w.resetValidation()}function U(){var e=w.serialize();return eviivo.webcore.ajaxHelper.executeAjax({actionId:"GetCancellationTierDetail",url:eviivoSuiteApp+"/settings/getCancellationTierDetail",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:e,callback:function(e){try{B(e,!1)}catch(e){console.log(e)}},failCallback:function(e){console.log(e)}}),!1}function X(){return b.children(".s-section").length}function l(e){0<e.val().length?(s("#PolicyLink_"+m).text(e.val()),e.removeClass("input-validation-error")):(s("#PolicyLink_"+m).text(F.resources.WatermarkNewCancellationPolicy),e.addClass("input-validation-error"))}function c(e){var i;null!=e&&"text"==e.target.type&&(i=e.target.getAttribute("id"),e.target.attributes.value.value==s("#"+i).val())||(F.thingsHaveChanged=!0)}function r(i){eviivo.webcore.ajaxHelper.executeAjax({actionId:"CancellationPolicy",url:eviivoSuiteApp+"/settings/policies/cancellationPolicy",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{policyId:m,channelId:I,isUniversalPolicy:T},callback:function(e){s("table.channels").removeClass("hide"),u.removeClass("hide"),u.html(e),Q(),i&&z()},failCallback:function(e){console.log(e)}})}function Q(e,i){n(!1),M(!1),v.trigger("click"),!0===e&&(I=0),!0===i&&z(),$()}function z(){P.removeClass("hide"),s("#divChannelImage img, #divChannelImage span").remove();var e=s("tr[data-channel-id="+I+"] img").clone();0==e.length&&(e=s("tr[data-channel-id="+I+"] span:first").clone()),s("#divChannelImage").append(e)}function J(){"2"===s("#cutoffTimeTypeList").val()?s("#fixedTimeList").enable():s("#fixedTimeList").disable()}function $(){eviivo.webcore.decimals.restrictFieldsForDecimals(f),eviivo.webcore.decimals.restrictFieldsForNumbers(h)}var s,q,d,u,v,p,f,h,K,Y,Z,ee,ie,ne,y,g,ae,C,oe,te,b,w,le,m,T,x,ce,re,P,k,H,j,_,se,de,ue,A,I,V,D,F,L,N;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.cancellationPolicy=(s=jQuery,A=!1,F={url:null,thingsHaveChanged:!(D={Default:"-1",FlatCharge:"FlatCharge",TieredCancellationPolicy:"WindowedCharge",NonRefundable:"NonRefundable",FullyRefundable:"FullyRefundable"}),canModifyCancellationPolicies:!(V={Default:"0",Amount:"1",Percentage:"2",FirstNight:"3",FullyRefundable:"4",NonRefundable:"5"})},L=I=0,N=1,{init:function(e){F=s.extend(F,e),n(!0),M(!0),F.thingsHaveChanged=!1,F.policyId||("True"===F.isUniversalPolicy?q.trigger("click"):F.policyId=0),m=parseInt(F.policyId),s(0==m?"#PolicyLink_"+m:'a[href$="'+eviivoSuiteApp+"/cancellation?policyId="+m+'"]').trigger("click")},initPolicy:Q})}},a={};function o(e){var i=a[e];return void 0!==i||(i=a[e]={exports:{}},n[e](i,i.exports,o)),i.exports}o.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(i,{a:i}),i},o.d=function(e,i){for(var n in i)o.o(i,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:i[n]})},o.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},function(){"use strict";o(514)}();
//# sourceMappingURL=cancellationPolicy.min.js.map