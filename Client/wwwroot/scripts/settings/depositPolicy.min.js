var o={418:function(){function o(e,i){L(!1),N(!1),0==f&&a(),!0===i&&Q(),!0===e&&(k=0)}function L(e){e?(r("#universalPolicy"),h=r(".s-policy"),b=r("#divPolicies"),m=r("#txtName"),T=r("#lnkAddPolicy"),x=r("#new-item"),ne=r("#nav-main, #nav-sub"),r("#divChannelImage"),ae=r("#depositNavBar")):(r("#divPolicyTypes.radio-group"),q=r("#divPolicyTypes"),K=r("#hdnIsDepositsScreenLocked"),d=r("#hdnPolicyId"),g=r("#hdnPolicyName"),Y=r("#divPolicyRules"),r("#hdnTierDeleteIndex"),r("#unsavedWarning"),se=r("#btnDelete"),P=r("#btnCancel"),te=r("#divPolicies .s-edit"),C=r("#cbUseBusinessPolicy"),D=r("#divPolicyDetails"),r("#hdnHasRatePlans"),G())}function N(e){e?(h.on("click",function(){var e=r(this);if(1==E)return S=!0,l();0==E&&1==S&&(S=!1,s(g)),h.removeClass("active"),b.addClass("hide"),x.attr("id")!==e.parents("li").attr("id")&&(x.remove(),T.removeClass("hide"));return k=f=0,w=e.attr("data-universal"),e.addClass("active"),f="False"===w?parseInt(e.attr("data-policy")):null,"True"===(w||0<f)&&r("#new-item").hasClass("newpolicy")&&r("#new-item").hide(),i(),!1}),m.on("keyup",function(){a(),s(r(this))}).on("blur",function(){s(r(this))}).on("focus",function(){s(r(this))}),T.on("click",function(){return 1==E?l():(s(g),!0)}),ne.on("click",function(){return 1==E?l():(s(g),!0)})):(I=r("#Policy_BusinessId").val(),q.on("change",U),P.on("click",function(){k=0,r("html, body").removeClass("reveal"),i()}),se.on("click",function(){r("#loading-overlay").show(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"DeleteDepositPolicy",url:eviivoSuiteApp+"/settings/deleteDepositPolicy",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.JSON,data:{policyId:d.val()},callback:function(e){null!=e.Data&&e.Data.error&&("false"==(e=e.Data.error)?window.location.href=eviivoSuiteApp+"/settings/policies/deposit":"hasAssociatedRatePlans"==e?(r("#loading-overlay").hide(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:V.resources.ratePlansExistForDepositPolicy,autoHide:!1})):"GeneralError"==e&&(r("#loading-overlay").hide(),r(".notifyjs-wrapper").remove(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})))},failCallback:function(e){console.log(e)}})}),te.on("click",function(e){e.preventDefault(),k=r(this).data("id"),r("html, body").animate({scrollTop:ae.offset().top},1).addClass("reveal"),i(!0)}),C.on("change",function(){r(this).is(":checked")?(C.val("true"),D.addClass("hide")):(C.val("false"),D.removeClass("hide"))}),X())}function n(e,i){return e.each(function(){var e=r(this);i=""==e.val()?(e.addClass("input-validation-error"),i&&!1):(e.removeClass("input-validation-error"),i&&!0)}),i}function W(){e(r(this))}function _(){e(r(this))}function F(){e(r(this))}function B(){e(r(this))}function e(e){""!=e.val()&&e.removeClass("input-validation-error")}function G(){Z=r("#btnAddDepositWindow"),ee=r("#removeTier"),c=r("#divPolicyRules .s-decimal"),y=r("#divPolicyRules .s-number"),ie=r("#divPolicyRules .s-dropdowns"),le=r("#divPolicyRules .s-depositTypes"),u=r("#saveDepositPolicyForm"),oe=r("#btnSave"),j=r("[id^=txtWindowValue]"),H=r("[id^=ddlWindows]"),A=r("[id^=txtDepositValue]"),re=r("[id^=ddlPolicyTypes]"),document.getElementById("hdnTierDeleteIndex").value="",v={windowValue:r("#txtWindowValue"+M),windowType:r("#ddlWindows"+M),depositValue:r("#txtDepositValue"+M),depositType:r("#ddlPolicyTypes"+M)},p={windowValue:r("#txtWindowValue"+R),windowType:r("#ddlWindows"+R),depositValue:r("#txtDepositValue"+R),depositType:r("#ddlPolicyTypes"+R)}}function O(){r(".notifyjs-wrapper").remove(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:V.resources.unsavedChangesMessage})}function X(){Z.on("click",z),ee.on("click",function(e){e.preventDefault();e=parseInt(r(this).attr("data-index"),10);document.getElementById("hdnTierDeleteIndex").value=e,O(),z()}),p.windowValue.on("keyup",$),p.windowType.on("change",$),v.depositType.on("change",function(){t(r(this))}),p.depositType.on("change",function(){t(r(this))}),eviivo.webcore.decimals.restrictFieldsForDecimals(c),eviivo.webcore.decimals.restrictFieldsForNumbers(y),y.on("keyup",a),c.on("keyup",a),ie.on("change",a),le.each(function(e,i){t(r(i))}),oe.off().on("click",function(e){var i;e.preventDefault(),e=!(E=!1),0<m.length&&(0<m.val().length?(e=!0,m.removeClass("input-validation-error")):(e=!1,m.addClass("input-validation-error"))),e=n(j.filter(":visible:enabled"),e),e=n(H.filter(":visible:enabled"),e),i=A.filter(":visible:enabled"),e=n(i,e),i=re.filter(":visible:enabled"),(e=n(i,e))&&u.submit()}),H.on("change",W),re.on("change",F),j.on("keyup paste input",_),A.on("keyup paste input",B)}function i(i){eviivo.webcore.ajaxHelper.executeAjax({actionId:"DepositPolicy",url:eviivoSuiteApp+"/settings/depositPolicy",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{policyId:f,channelId:k,businessId:I},callback:function(e){b.removeClass("hide"),b.html(e),o(),i&&Q()}})}function U(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"GetDepositRules",url:eviivoSuiteApp+"/settings/getDepositRules",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{policyId:d.val(),policyType:function(){var e=r("#divPolicyTypes input:radio:checked");{if("roSingle"!==(0==e.length?0:e[0].id))return ce.Tiered;return ce.Single}}(),channelId:k,businessId:I},callback:function(e){J(e),u.resetValidation()},failCallback:function(e){console.log(e)}})}function z(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"ManageDepositRules",url:eviivoSuiteApp+"/settings/manageDepositRules",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.TEXT_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:u.serialize(),callback:function(e){J(e),O()},failCallback:function(e){console.log(e)}})}function J(e){Y.html(e),G(),X(),a()}function Q(){P.removeClass("hide"),r("#divChannelImage img, #divChannelImage span").remove();var e=r("tr[data-channel-id="+k+"] img:first").clone();0==e.length&&(e=r("tr[data-channel-id="+k+"] span:first").clone()),r("#divChannelImage").append(e)}function $(){v.windowValue.val(p.windowValue.val()),v.windowType.val(p.windowType.val())}function t(e){var i=e.val(),e=e.parent().siblings().find("[type='text']");K.val()?e.attr("disabled","disabled"):i==de.Nothing?(e.attr("disabled","disabled"),e.val("")):e.removeAttr("disabled")}function a(){E=!0}function l(){return E=!1,eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:V.resources.unsavedChangesMessage}),!1}function s(e){0<e.val().length?r("#PolicyLink_"+f).text(e.val()):(e="",0==f&&(e=V.resources.WatermarkNewDepositPolicy),r("#PolicyLink_"+f).text(e))}var r,c,q,K,d,Y,u,Z,ee,v,p,y,ie,f,h,w,b,m,g,T,x,oe,ne,te,P,k,ae,C,D,le,se,I,j,H,A,re,S,V,ce,de,E,M,R;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.deposit=(r=jQuery,S=!1,V={business:null,resources:null,currencySymbol:null,defaultCultureCode:null},ce={Unknown:0,Single:1,Tiered:2},E=!(de={Default:"0",Amount:"1",Nights:"2",Percentage:"3",Nothing:"4"}),M=0,R=1,{init:function(e){V=r.extend(V,e),L(!0),N(!0),o(),f=parseInt(V.policyId),r(0==f?"#PolicyLink_"+f:'a[href$="'+eviivoSuiteApp+"/deposit?policyId="+f+'"]').addClass("active")},initPolicy:o})}},n={};function t(e){var i=n[e];return void 0!==i||(i=n[e]={exports:{}},o[e](i,i.exports,t)),i.exports}t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,{a:i}),i},t.d=function(e,i){for(var o in i)t.o(i,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:i[o]})},t.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},function(){"use strict";t(418)}();
//# sourceMappingURL=depositPolicy.min.js.map