var o={79:function(){function l(e,t){var o,i,n;if(e==b.InProgress||e==f.InProgress)o='<svg class="icon-ic-refresh rotateClockwise"><use href="#icon-ic-refresh"></use></svg>',i=p.resources.cloneStatusResult.InProgress,n="cloning";else if(e==b.PartiallyCloned&&null==t)o='<svg class="icon-ic-warning orange"><use href="#icon-ic-warning"></use></svg>',i=p.resources.cloneStatusResult.PartiallyCloned,n="warning";else{if(e==b.PartiallyCloned&&null!=t)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(t=null!=t?"data-retry='"+JSON.stringify(t)+"'":t)+">"+p.resources.retryButton+"</button>";if(e!=b.Failed&&e!=f.Failure&&e!=f.DuplicateFailure||null!=t){if((e==b.Failed||e==f.Failure||e==f.DuplicateFailure)&&null!=t)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(t=null!=t?"data-retry='"+JSON.stringify(t)+"'":t)+">"+p.resources.retryButton+"</button>";if(e!=b.Cloned&&e!=f.Success)return"";o='<svg class="icon-ic-checkmark-small"><use href="#icon-ic-checkmark-small"></use></svg>',i=p.resources.cloneStatusResult.Cloned,n="success"}else o='<svg class="icon-ic-warning red"><use href="#icon-ic-warning"></use></svg>',i=p.resources.cloneStatusResult.Failed,n="error"}return'<div class="status '+n+' display-inline-flex align-items-center ml-auto">'+o+"<span>"+i+"</span></div>"}function n(){""!=v&&"number"==typeof v?eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshTargetLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshTargetLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&(t(e),eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshItemLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshItemLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&t(e)}}))}}):(console.error("please provide a valid request Id"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage}))}function t(e){for(var t,o=!1,i=0;i<e.length;i++)0==e[i].ItemId?(r(e[i].Result,e[i].TargetId),null!=e[i].Reason&&(t=$("div[data-id="+e[i].TargetId+"] .mod-collapsable_title").find("div.status"),eviivo.webcore.tooltip.add(t,e[i].Reason,"bottom")),e[i].Result==b.InProgress&&(o=!0)):(t={cloneRequestId:v,TargetId:e[i].TargetId,ItemId:e[i].ItemId,ItemType:e[i].ItemType},c(e[i].Result,e[i].TargetId,e[i].ItemId,e[i].Reason,t));a(),1==o&&setTimeout(n,1e3*g)}function a(){eviivo.component.handlers.assign(y.retryBtn,s,"click");for(var e,t,o,i=document.getElementsByTagName("table"),n=0;n<i.length;n++)1<i[n].querySelectorAll(".s-cloneRetry").length?(e=i[n].querySelector("th[data-key=Status]").cellIndex+1,e=i[n].querySelector("tr:first-child th:nth-child("+e+")"),0==i[n].querySelectorAll(".s-cloneRetryAll").length&&(t={cloneRequestId:v,TargetId:i[n].closest(".s-property-selection").dataset.id,ItemId:null,ItemType:null},(o=document.createElement("button")).setAttribute("type","button"),o.innerHTML=p.resources.retryAllButton,o.setAttribute("class","s-cloneRetryAll btn-table_primary btn-table_primary-large"),o.dataset.retry=JSON.stringify(t),e.appendChild(o),eviivo.component.handlers.assign(".s-cloneRetryAll",s,"click"))):0<i[n].querySelectorAll(".s-cloneRetryAll").length&&i[n].querySelectorAll(".s-cloneRetryAll")[0].remove()}function s(){var e=$(this).data("retry");eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRetryRequest",url:eviivoSuiteApp+"/api/clone/SubmitRetry",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}),r(b.InProgress,e.TargetId),c(b.InProgress,e.TargetId,e.ItemId,"",null),setTimeout(n,1e3*g)}function r(e,t){$("div[data-id="+t+"] .mod-collapsable_title").find("div.status").remove();t=$("div[data-id="+t+"]").find("span:first");$(l(e,null)).insertAfter(t)}function c(e,t,o,i,n){var a;null!=o?(u==m.CALENDAR&&(o=t),(a=$("div[data-id="+t+"]").find("table")).find("tr[data-id='"+o+"']>td.details").html($("<p/>").html(i).text()),a.find("tr[data-id='"+o+"']>td.status").html(l(e,n)),0==$("div[data-id="+t+"]").find(".s-cloneRetry").length&&$("div[data-id="+t+"]").find(".s-cloneRetryAll").remove()):((a=$("div[data-id="+t+"]").find("table")).find("tr>td.details").html(i),a.find("tr>td.status").html(l(e,n)),$("div[data-id="+t+"]").find(".s-cloneRetryAll").remove())}function o(){for(var e=document.getElementsByClassName("s-expand-btn"),t=e[0].innerHTML==p.resources.collapseAll?(e[0].innerHTML=p.resources.expandAll,!0):(e[0].innerHTML=p.resources.collapseAll,!1),o=document.querySelectorAll(".s-property-selection"),i=1;i<=o.length;i++)document.querySelector("#property_location_"+i).checked=t}function d(){var e;null!=i&&(e=$(".cp-custom-select")[0],$(e).val(i).trigger("click"),i=null)}var u,v,i,p,m,b,f,y,g;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.history=window.eviivo.pms.clone.history||{},window.eviivo.pms.clone.history=(p={},m={ROOM:1,CALENDAR:2,DEPOSITS:3,RATE:4},b={InProgress:1,PartiallyCloned:2,Failed:3,Cloned:4},f={Success:"SUC",Failure:"FAI",DuplicateFailure:"DUP",InProgress:"INP"},y={backBtn:"#btn-back",cancelBtn:"#btn-cancel",nextBtn:"#btn-next",doneBtn:"#btn-done",retryBtn:".s-cloneRetry"},g=30,{init:function(){i=$(this).closest("tr").find("td:first-child")[0].innerText,eviivo.component.flyout.showFlyout("displayHistoryContainer")},optionsSetup:function(e){p=eviivo.util.extend(p,e),u=p.typeId,v=p.cloneRequestId,g=p.refreshRate},onShow:function(){$.fn.dataTable.isDataTable("#eviivo-list-history")?$("#eviivo-list-history").DataTable().ajax.reload(d,!0):"function"==typeof postInitListingTable&&postInitListingTable()},customRenderAction:function(e,t,o){return'<a href="'+eviivoSuiteApp+"/Settings/Clone/Status/"+o.Id+'" target="_blank" class="md-table_action md-table_action-item"><svg class="icon-bg-eye-outline"> <use  href="#icon-bg-eye-outline"></use></svg></a>'},customRenderDateTime:function(e,t,o){return'<div class="history-date">'+(e=new Date(e)).evDisplayLongDate(eviivo.eagle.basePageModelState.userCultureCode)+',</div><div class="history-time">'+e.evDisplayLongTime(eviivo.eagle.basePageModelState.userCultureCode)+"</div>"},customRenderResult:function(e,t,o){return l(e,null)},reasonCustomRender:function(e,t,o){return null!=e?"<strong>"+e+"</strong>":""},statusCustomRender:function(e,t,o){return l(e,null)},refreshStatus:n,loadSuccess:a,filterSetup:function(){$(".cp-custom-select").find("option").remove(),$(".cp-custom-select").off("change");for(var e=$(".cp-custom-select")[0],o=$(".cp-custom-select")[1],t=($(e).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$(o).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$("#clone-table").find("tr>td:first-child")),i=0;i<t.length;i++)$(e).append("<option value='"+t[i].innerHTML+"'>"+t[i].innerHTML+"</option>");$.each(p.resources.cloneStatusResult,function(e,t){$(o).append("<option value='"+t+"'>"+t+"</option>")}),$(e).on("click",function(){var e=$(".cp-custom-select > option:selected")[0].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),$(o).on("click",function(){var e=$(".cp-custom-select > option:selected")[1].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),d()},actionCustomRender:function(e,t,o){return""},setupCollapseExpandBtn:function(){var e,t;1<p.noOfTargets&&(e=document.querySelector(".page-heading div.h2"),(t=document.createElement("button")).setAttribute("type","button"),t.setAttribute("name",p.resources.expandAll),t.setAttribute("value",p.resources.expandAll),t.innerHTML=p.resources.expandAll,t.setAttribute("class","s-expand-btn btn-table_primary btn-table_primary-large btn-target-collapse"),e.appendChild(t),eviivo.component.handlers.assign(".s-expand-btn",o,"click"))},setupRefreshInterval:function(){setTimeout(n,g)},getCloningStatusTypes:function(){return b}})},2679:function(){function o(){eviivo.component.flyout.hideFlyout(a.flyout.replace("#",""))}function i(e){e?$(a.flyout).find(a.flyoutSpinner).removeClass("hide"):$(a.flyout).find(a.flyoutSpinner).addClass("hide")}function n(e){$(a.flyout).find(a.bodyContainer).html(e),i(!1),""!=e&&(t("".concat($(a.cloneHiddenTitle).html())),postInitComplete())}function t(e){$(a.flyout).find(a.header).html(e)}var a,l,s;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.statusFlyout=(a={flyout:"#clone-status",header:".s-heading-title",flyoutSpinner:".s-flyout-spinner",cloneHiddenTitle:".s-flyout-title",bodyContainer:"#cloneStatusContainer"},l=0,s={},{init:function(e){s=eviivo.util.extend(s,e)},open:function(e,t){i(!0),eviivo.component.flyout.showFlyout(a.flyout),e=e,t=t,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-clone-status",url:"".concat(eviivoSuiteApp,"/clone/status/flyout/business/").concat(e,"/clone/").concat(t),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e.Errors?(o(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})):n(e.HtmlPayload)},failCallback:function(){o(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})},close:o,flyoutOnShow:function(){},flyoutOnClose:function(){null!=eviivo.pms.pricingRules&&eviivo.pms.pricingRules.createFlyout.close(),n(""),t("")},statusCustomRender:function(e,t,o){return""!=(e=eviivo.pms.clone.history.customRenderResult(e,t,o))?(null!=o.CloneErrorMsg&&eviivo.webcore.tooltip.add(e,o.CloneErrorMsg,"top"),$(e).addClass("cp-table_action cp-table_action-item").prop("outerHTML")):""},scheduleMainTableRefreshIfStatusInProgressExists:function(e,t){0<$("".concat(e," .status.cloning")).length&&(setTimeout(t,s.cloningRefreshRate*l),l+=1)},resetRefreshOccurrences:function(){l=0}})},7887:function(){function n(e,t){t=$("#".concat(e," th:eq(").concat(t,")")).attr("data-key");return $.each(a,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[t]}var a,l,s,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(a=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],l=[],s="ATL",r="ATH",{init:function(e){var t,o,i,n;i=e.table,$.each(a,function(){this.tableId.toLowerCase()==i.toLowerCase()&&(n=this.tableCode)}),t=n,o=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(t),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(t),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){l=l.concat(e),(e=t)==s&&(null==(e=null==(e=l)?void 0:e.filter(function(e){return e.Key==r}))||0==e.length?l.push({PreferenceGroupType:s,Key:r,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),o()},failCallback:function(){o()}})},get:function(e,t){var o=n(e,t),i=null;return $.each(l,function(){this.Key==o&&(i=this.Value)}),null==i?"":(i=i.replaceAll("&quot;",'"'),JSON.parse(i))},post:function(e,t){var e=e.parents("table").attr("id"),o=eviivo.component.listing.filter.getColumnSearchStrings(e,t),e=n(e,t);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(o)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var a,l;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(a=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],l={},{post:function(e,t){var o,i,n=eviivo.util.getJSId($(this)[0].container);null!=n&&null!=t&&isNaN(t)&&(t={ColumnCode:(o=n,$.each(a,function(){this.tableId.toLowerCase()==o.toLowerCase()&&(i=this.Order)}),i),Order:JSON.stringify(t)})!=l&&(l=t,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:t,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})},9949:function(){function t(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"bulk-status-update-promotion",url:"".concat(eviivoSuiteApp,"/api/promotion/bulk-status"),data:{SelectedRules:eviivo.eagle.promotion.listing.getSelected(),IsActive:$(i.activeRadio).is(":checked")},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?(o(),eviivo.eagle.promotion.listing.load(!0)):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})}function o(){eviivo.component.flyout.hideFlyout(i.flyout.replace("#",""))}var i,n;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.promotion=window.eviivo.pms.promotion||{},window.eviivo.pms.promotion.bulkStatusFlyout=(i={flyout:"#bulk-status-promotion",header:".s-heading-title",save:".s-save",listTable:"#eviivo-list-promotion",activeRadio:"#bulk-status-active"},n={},{init:function(e){n=eviivo.util.extend(n,e),$(i.flyout).on("click",i.save,t)},open:function(){var e;e="".concat(n.resources.bulkHeader.format(eviivo.eagle.promotion.listing.getSelected().length)),$(i.flyout).find(i.header).html(e),eviivo.component.flyout.showFlyout(i.flyout)},close:o,flyoutOnShow:function(){},flyoutOnClose:function(){}})},7771:function(){function t(){var e=$(this).parents("tr").attr("data-id"),e=eviivo.component.listing.getATablesRowDataViaTableId(u.listTable,e)[0];null!=e.CloneParentJobId&&eviivo.pms.clone.statusFlyout.open(e.BusinessId,e.CloneParentJobId)}function o(){$(this).hasClass("disabled")||0<c().length&&(e(),eviivo.pms.promotion.bulkStatusFlyout.open())}function e(){$(u.bulkContainer).find(".md-dd").removeClass("active")}function i(){0<c().length&&(e(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,style:eviivo.webcore.notifier.styles.withTwoActions,message:d.resources.confirmDeleteMsg,autoHide:!1,buttonTwo:d.resources.yes,buttonOne:d.resources.no}),$(u.deleteConfirmationYes).addClass("btn btn-right"),$(u.deleteConfirmationNo).addClass("btn btn-secondary"),$(".mod-close-notice").off(),$(".mod-close-notice").off("click",function(e){n()}).on("click",function(e){n()}),$(".notifyjs-withTwoActions-base").off("click",u.deleteConfirmationYes,function(e){a()}).on("click",u.deleteConfirmationYes,function(e){a()}),$(".notifyjs-withTwoActions-base").off("click",u.deleteConfirmationNo,function(e){n()}).on("click",u.deleteConfirmationNo,function(e){n()}),$(".notifyjs-hidable").removeClass("notifyjs-hidable"))}function n(){$(".notifyjs-wrapper").remove()}function a(){n(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"bulk-delete-promotions",url:"".concat(eviivoSuiteApp,"/api/promotion/bulk-delete"),data:{SelectedRules:c()},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?(close(),eviivo.eagle.promotion.listing.load(!0)):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})}function l(e){v=e,eviivo.pms.clone.statusFlyout.resetRefreshOccurrences(),eviivo.component.listing.postInitRefreshDataTableSpecific(u.listTable)}function s(){eviivo.component.listing.doesListTableHaveAnySelectedData(u.listTable)||(v=!0,eviivo.component.listing.postInitRefreshDataTableSpecific(u.listTable))}function r(){window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:d.resources.errorMessage})}function c(){var t=[],e=eviivo.component.listing.getATablesSelectedData(u.listTable);return null!=e&&e.forEach(function(e){t.push({RuleId:e.Id,PropertyId:e.BusinessId})}),t}var d,u,v;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.promotion=window.eviivo.eagle.promotion||{},window.eviivo.eagle.promotion.listing=window.eviivo.eagle.promotion?window.eviivo.eagle.promotion.listing:{},window.eviivo.eagle.promotion.listing=(v=!(u={listTable:"#eviivo-list-promotion",editLink:".s-listing-table-edit",deleteLink:".s-listing-table-delete",bulkDeleteBtn:"#bulkDelete",bulkContainer:".s-bulk-update",bulkStatusChangeBtn:"#bulkStatusChange",deleteConfirmationYes:".btn-two",deleteConfirmationNo:".btn-one"}),{init:function(e){d=e,eviivo.pms.listingTable.filterActions.init({table:"eviivo-list-promotion",callback:function(){l(),$(u.listTable).on("click",".update-status .status",t),$(u.bulkDeleteBtn).on("click",i),$(u.bulkStatusChangeBtn).on("click",o)}}),d.isMulti&&(eviivo.eagle.promotion.multiPropertyAdd.init(),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){l(!0)}}))},ajaxDataCallback:function(){return{propertyId:d.propertyId}},ajaxDataFailureCallback:function(){},dataLoadSuccess:function(){v&&eviivo.component.listing.filter.updateAllTableFilters(u.listTable),eviivo.pms.clone.statusFlyout.scheduleMainTableRefreshIfStatusInProgressExists(u.listTable,s)},onRowCreatedDataTable:function(e,t,o,i,n){var a=jQuery(e).find(u.editLink);0<a.length&&!t.HasModifyPromoClaim?(a.attr("disabled",!0),a.removeClass("s-listing-table-edit")):a.attr("href","/suite/property/".concat(t.BusinessId,"/promotions/edit/").concat(t.Id)),0<(a=$(e).find(u.deleteLink)).length&&!t.HasDeletePromoClaim&&(a.attr("disabled",!0),a.removeClass("s-listing-table-delete")),t.Active||$(e).addClass("inactive")},deletePromotion:function(t){var e={Id:t.Id,BusinessId:t.BusinessId};return eviivo.webcore.ajaxHelper.executeAjax({actionId:"delete-promotion-".concat(t.Id),url:"/suite/api/promotion/delete",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){eviivo.webcore.parsers.stringToBool(e)?(eviivo.component.listing.deleteRowsData(u.listTable,t.Id),eviivo.component.listing.filter.updateAllTableFilters(u.listTable)):r()},failCallback:r}),!1},htmlCustomRender:function(e,t,o){return null==e?"":eviivo.webcore.html.decode(e)},getSelected:c,rowSelectionCallback:function(){0==c().length?($(u.bulkDeleteBtn).addClass("disabled"),$(u.bulkStatusChangeBtn).addClass("disabled")):($(u.bulkDeleteBtn).removeClass("disabled"),$(u.bulkStatusChangeBtn).removeClass("disabled"))},load:l})},5389:function(){var o,i;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.promotion=window.eviivo.eagle.promotion||{},window.eviivo.eagle.promotion.multiPropertyAdd=window.eviivo.eagle.promotion?window.eviivo.eagle.promotion.multiPropertyAdd:{},window.eviivo.eagle.promotion.multiPropertyAdd=(o={input:"#eviivo-lookup-property-create-flow",next:"#add-next",cancel:"#add-cancel"},i=null,{init:function(){eviivo.component.lookup.init(),$(o.next).on("click",function(){null!=i?window.location.href="".concat(eviivoSuiteApp,"/property/").concat(i,"/promotions/add"):$(o.input).addClass("error")}),$(o.cancel).on("click",function(){var e=$(this),t=(i=null,$(o.input).val(""),e.parents(".active").find(".cp-lookup_results"));t.find("li").removeClass("over").removeClass("hide"),t.unhighlight(),e.parents(".active").removeClass("active")})},lookupRowSelection:function(e,t){e.removeClass("error");var o=$(t).html(),t=$(t).attr("id");i=t,e.val(o)},lookupCustomRender:function(e){return"<div id='".concat(e.BusinessId,"'>").concat(e.BusinessName,"</div>")}})}},i={};function n(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},o[e](t,t.exports,n)),t.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";n(7771),n(5389),n(9949),n(2679),n(79),n(7887),n(1452)}();
//# sourceMappingURL=promotionListing.min.js.map