var t={7891:function(){function t(){eviivo.component.flyout.hideFlyout(a.flyout.replace("#",""))}function i(){var e=$(a.saveToBtn);0<e.length&&(e.prop("disabled",!1),eviivo.webcore.tooltip.add(e,""))}function o(){var e=$(a.saveToBtn);0<e.length&&(e.prop("disabled",!0),eviivo.webcore.tooltip.add(e,r.resources.saveToDisabledTooltip))}function n(e){e?$(a.flyout).find(a.flyoutSpinner).removeClass("hide"):$(a.flyout).find(a.flyoutSpinner).addClass("hide")}function s(e){$(a.flyout).find(a.bodyContainer).html(e),n(!1),l("".concat(r.resources.editFlyoutHeader," - ").concat(eviivo.pms.businessCutoff.list.getEditedRuleData().PropertyName))}function l(e){$(a.flyout).find(a.header).html(e)}var a,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.businessCutoff=window.eviivo.pms.businessCutoff||{},window.eviivo.pms.businessCutoff.editFlyout=(a={flyout:"#view-business-cutoff",header:".s-heading-title",flyoutSpinner:".s-flyout-spinner",save:"#view-business-cutoff_flyoutSave",bodyContainer:"#editContainer",saveToBtn:"#save-to"},r={},{init:function(e){r=eviivo.util.extend(r,e),$(a.save).on("click",eviivo.pms.businessCutoff.form.save),$(a.bodyContainer).on("change","input,select:visible",o),$("body").tip()},open:function(e){n(!0),eviivo.component.flyout.showFlyout(a.flyout),e=e,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-business-cutoff-rule",url:"".concat(eviivoSuiteApp,"/businesscutoff/editBookingCutoff"),method:eviivo.webcore.ajaxHelper.methods.POST,data:{BusinessId:e},contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){var o;null!=e.Errors?(t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})):(s(e.HtmlPayload),eviivo.webcore.parsers.stringToBool(r.isMultiProperty)&&eviivo.webcore.parsers.stringToBool(r.canSaveTo)&&(e=$(a.saveToBtn),"0"==$("#Id").val()&&0<e.length?e.addClass("hide"):"0"!=$("#Id").val()&&0==e.length?(o=$("".concat(a.flyout)).find("".concat(a.save)),$('<button type="button" class="btn btn-right btn-primary s-saveTo mr8" id="'.concat(a.saveToBtn.replace("#",""),'">').concat(r.resources.saveToBtn,"</button>")).insertAfter(o),$(".s-saveTo").on("click",eviivo.pms.businessCutoff.saveTo.performSaveAndOpenSaveTo)):"0"!=$("#Id").val()&&0<e.length&&(e.removeClass("hide"),i())))},failCallback:function(){t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})},close:t,flyoutOnShow:function(){},flyoutOnClose:function(){s(""),l("")},enableSaveTo:i})},4489:function(){function o(){i.bookingCutoffTypeCode1.removeClass("error"),i.bookingCutoffTypeCode2.removeClass("error"),i.bookingCutoffTypeCode3.removeClass("error"),i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.attr("disabled","disabled"),i.closeoutRuleBookingCutoffTimeThreshold.attr("disabled","disabled"),i.closeoutRuleBookingCutoffTimeHoursInADay.attr("disabled","disabled"),i.bookingCutoffTypeCode1.is(":checked")&&(i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.removeAttr("disabled"),i.closeoutRuleBookingCutoffTimeThreshold.removeAttr("disabled")),i.bookingCutoffTypeCode3.is(":checked")&&i.closeoutRuleBookingCutoffTimeHoursInADay.removeAttr("disabled")}var t,i;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.businessCutoff=window.eviivo.pms.businessCutoff||{},window.eviivo.pms.businessCutoff.form=(t={bodyContainer:"#editContainer",bookingCutoffTypeCode1:"#bookingCutoffTypeCode-1",bookingCutoffTypeCode2:"#bookingCutoffTypeCode-2",bookingCutoffTypeCode3:"#bookingCutoffTypeCode-3",closeoutRuleBookingCutoffTimeMessage1:"#closeoutRule-bookingCutoffTime-message1",closeoutRuleBookingCutoffTimeThresholdTypeCodes:"#closeoutRule-bookingCutoffTime-thresholdTypeCodes",closeoutRuleBookingCutoffTimeThreshold:"#closeoutRule-bookingCutoffTime-threshold",closeoutRuleBookingCutoffTimeMessage2:"#closeoutRule-bookingCutoffTime-message2",closeoutRuleBookingCutoffTimeHoursInADay:"#closeoutRule-bookingCutoffTime-HoursInADay",closeoutRuleBookingCutoffTimeCancel:"#closeoutRule-bookingCutoffTime-cancel",editBookingCutoff:"#editBookingCutoff",cancelBookingCutoff:"#closeoutRule-bookingCutoffTime-cancel",saveBookingCutoff:"#closeoutRule-bookingCutoffTime-save",closeBookingCutoff:"#popup-closeoutRule-bookingCutoffTime .s-close",popupMask:".popup-dialog-mask",popupTable:".pop-up-table",popupContainer:"#popup-closeoutRule-bookingCutoffTime",popupCloseoutRuleBookingCutoffTimeContainer:"#popup-closeoutRule-bookingCutoffTime-container",bookingCutoffRuleDisplay:"#bookingCutoffRuleDisplay"},i={},{init:function(){var e;i.popupMask=$(t.popupMask),i.popupTable=$(t.popupTable),i.popupContainer=$(t.popupContainer),i.popupCloseoutRuleBookingCutoffTimeContainer=$(t.popupCloseoutRuleBookingCutoffTimeContainer),i.bookingCutoffRuleDisplay=$(t.bookingCutoffRuleDisplay),$(t.bodyContainer).on("click",t.bookingCutoffTypeCode1,o),$(t.bodyContainer).on("click",t.bookingCutoffTypeCode2,o),$(t.bodyContainer).on("click",t.bookingCutoffTypeCode3,o),i.bookingCutoffTypeCode1=$(t.bookingCutoffTypeCode1),i.bookingCutoffTypeCode2=$(t.bookingCutoffTypeCode2),i.bookingCutoffTypeCode3=$(t.bookingCutoffTypeCode3),i.closeoutRuleBookingCutoffTimeMessage1=$(t.closeoutRuleBookingCutoffTimeMessage1),i.closeoutRuleBookingCutoffTimeThresholdTypeCodes=$(t.closeoutRuleBookingCutoffTimeThresholdTypeCodes),i.closeoutRuleBookingCutoffTimeThreshold=$(t.closeoutRuleBookingCutoffTimeThreshold),i.closeoutRuleBookingCutoffTimeMessage2=$(t.closeoutRuleBookingCutoffTimeMessage2),i.closeoutRuleBookingCutoffTimeHoursInADay=$(t.closeoutRuleBookingCutoffTimeHoursInADay),e=(e=i.closeoutRuleBookingCutoffTimeMessage1.html()).format(i.closeoutRuleBookingCutoffTimeThreshold[0].outerHTML,i.closeoutRuleBookingCutoffTimeThresholdTypeCodes[0].outerHTML),i.closeoutRuleBookingCutoffTimeMessage1.html(e),e=(e=i.closeoutRuleBookingCutoffTimeMessage2.html()).format(i.closeoutRuleBookingCutoffTimeHoursInADay[0].outerHTML),i.closeoutRuleBookingCutoffTimeMessage2.html(e),i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.remove(),i.closeoutRuleBookingCutoffTimeThreshold.remove(),i.closeoutRuleBookingCutoffTimeHoursInADay.remove(),i.closeoutRuleBookingCutoffTimeThresholdTypeCodes=$(t.closeoutRuleBookingCutoffTimeThresholdTypeCodes),i.closeoutRuleBookingCutoffTimeThreshold=$(t.closeoutRuleBookingCutoffTimeThreshold),i.closeoutRuleBookingCutoffTimeHoursInADay=$(t.closeoutRuleBookingCutoffTimeHoursInADay),o(),eviivo.webcore.decimals.restrictFieldsForDecimals(i.closeoutRuleBookingCutoffTimeThreshold)},save:function(){var o,t,e;i.closeoutRuleBookingCutoffTimeThreshold.removeClass("error"),i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.removeClass("error"),i.closeoutRuleBookingCutoffTimeHoursInADay.removeClass("error"),e=!0,i.bookingCutoffTypeCode1.is(":checked")&&(""===i.closeoutRuleBookingCutoffTimeThreshold.val()&&(i.closeoutRuleBookingCutoffTimeThreshold.addClass("error"),e=!1),""===i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.val())&&(i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.addClass("error"),e=!1),i.bookingCutoffTypeCode3.is(":checked")&&""===i.closeoutRuleBookingCutoffTimeHoursInADay.val()&&(i.closeoutRuleBookingCutoffTimeHoursInADay.addClass("error"),e=!1),!e||i.bookingCutoffTypeCode1.is(":checked")||i.bookingCutoffTypeCode2.is(":checked")||i.bookingCutoffTypeCode3.is(":checked")||(i.bookingCutoffTypeCode1.addClass("error"),i.bookingCutoffTypeCode2.addClass("error"),i.bookingCutoffTypeCode3.addClass("error"),e=!1),e&&(o=$("#Id").val(),t=$("#BusinessId").val(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"save-business-cutoff-rule",url:"".concat(eviivoSuiteApp,"/api/businesscutoff/save"),method:eviivo.webcore.ajaxHelper.methods.POST,data:{Active:$("#Active").val(),BookingCutoffTypeCode:"on",BusinessId:t,Id:o,ThresholdHoursValue:i.bookingCutoffTypeCode1.is(":checked")?(e="D"===i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.val()?24:1,parseInt(i.closeoutRuleBookingCutoffTimeThreshold.val())*e):i.bookingCutoffTypeCode2.is(":checked")?0:i.bookingCutoffTypeCode3.is(":checked")?i.closeoutRuleBookingCutoffTimeHoursInADay.val():null,SelectedHourDay:i.closeoutRuleBookingCutoffTimeHoursInADay.val(),ThresholdTypeCode:i.closeoutRuleBookingCutoffTimeThresholdTypeCodes.val()},contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){eviivo.webcore.parsers.stringToBool(e)?("0"==o&&(eviivo.pms.businessCutoff.editFlyout.close(),setTimeout(eviivo.pms.businessCutoff.list.openRuleByTableId,600,"0-".concat(t))),eviivo.pms.businessCutoff.saveTo.performingSaveTo.get?eviivo.pms.businessCutoff.saveTo.open():(eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:eviivo.eagle.translations.resources.notify.saveSuccessText}),eviivo.pms.businessCutoff.list.load(),eviivo.pms.businessCutoff.editFlyout.enableSaveTo())):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.pms.businessCutoff.editFlyout.close(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}}))}})},2057:function(){function o(){var e=s($(this).parents("tr").attr("data-id"));null!=e.CloneParentJobId&&eviivo.pms.clone.statusFlyout.open(e.BusinessId,e.CloneParentJobId)}function t(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];(u=e)&&eviivo.pms.clone.statusFlyout.resetRefreshOccurrences(),eviivo.component.listing.postInitRefreshDataTableSpecific(l.listTable)}function i(e){e.preventDefault(),n($(this).parents("tr").attr("data-id"))}function n(e){e=s(e),e=(r=e).BusinessId;null!=e&&eviivo.pms.businessCutoff.editFlyout.open(e)}function s(e){return eviivo.component.listing.getATablesRowData(l.listTable,e)}var l,a,r,u,e;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.businessCutoff=window.eviivo.pms.businessCutoff||{},window.eviivo.pms.businessCutoff.list=(l={listTable:"#eviivo-list-cutoff",listTableEdit:".s-listing-table-edit"},r=null,e=!(u=!(a={})),{init:function(e){a=eviivo.util.extend(a,e),eviivo.pms.businessCutoff.editFlyout.init(a),eviivo.pms.listingTable.filterActions.init({table:"eviivo-list-cutoff",callback:function(){t(),$(l.listTable).on("click",l.listTableEdit,i),$(l.listTable).on("click",".update-status .status",o)}}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){t(!0)}})},load:t,getEditedRuleData:function(){return r},rowCreatedCallback:function(e,o,t,i,n){o.Active||$(e).addClass("inactive")},dataLoadSuccessCallback:function(){!u&&e||(eviivo.component.listing.filter.updateAllTableFilters(l.listTable),u=!1),e=e&&!1,eviivo.pms.clone.statusFlyout.scheduleMainTableRefreshIfStatusInProgressExists(l.listTable,t)},openRuleByTableId:n})},4660:function(){function o(){eviivo.component.listing.validateSingleSelectForList(n.propertyList)&&(!function(e,o,t){var i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;null==i&&(i=eviivo.webcore.notifier.positions.topLeft);eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.info,style:eviivo.webcore.notifier.styles.withTwoActions,message:o,autoHide:!1,buttonTwo:s.resources.proceed,buttonOne:s.resources.cancel,selector:e,position:i}),$(n.notifierBtnOne).addClass("btn btn-secondary"),$(n.notifierBtnTwo).addClass("btn btn-right ".concat(t))}($(this),s.resources.confirmText,"btn-confirm",eviivo.webcore.notifier.positions.topRight),$("body").on("click",n.confirmBtn,e))}function e(){var e=eviivo.pms.businessCutoff.list.getEditedRuleData();eviivo.webcore.ajaxHelper.executeAjax({actionId:"save-to",url:"".concat(eviivoSuiteApp,"/api/businesscutoff/save-to"),data:{SourcePropertyId:e.BusinessId,DestinationPropertyIds:eviivo.component.listing.getSelectedMultiSelectForList(n.propertyList),SourceRuleId:e.Id},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?(t(),eviivo.pms.businessCutoff.editFlyout.close(),eviivo.pms.businessCutoff.list.load(!0),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:eviivo.eagle.translations.resources.notify.copyStartedText})):eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})}function t(){eviivo.component.flyout.hideFlyout(n.flyout.replace("#",""))}function i(){eviivo.component.listing.postInitRefreshDataTableSpecific(n.propertyList),eviivo.component.flyout.showFlyout(n.flyout)}var n,s,l;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.businessCutoff=window.eviivo.pms.businessCutoff||{},window.eviivo.pms.businessCutoff.saveTo=(n={flyout:"#save-to-property-selection",save:".s-save",propertyList:"#eviivo-list-property_save_to",confirmBtn:".btn-confirm",notifierBtnOne:".btn-one",notifierBtnTwo:".btn-two"},{init:function(e){s=eviivo.util.extend(s,e),$(n.flyout).on("click",n.save,o)},open:i,close:t,flyoutOnShow:function(){},flyoutOnClose:function(){l.set=!1},ajaxDataCallback:function(){return{SourcePropertyId:eviivo.pms.businessCutoff.list.getEditedRuleData().BusinessId}},performingSaveTo:l={value:!(s={}),get get(){return this.value},set set(e){this.value=e}},performSaveAndOpenSaveTo:function(){l.set=!0,i()}})},79:function(){function l(e,o){var t,i,n;if(e==C.InProgress||e==m.InProgress)t='<svg class="icon-ic-refresh rotateClockwise"><use href="#icon-ic-refresh"></use></svg>',i=f.resources.cloneStatusResult.InProgress,n="cloning";else if(e==C.PartiallyCloned&&null==o)t='<svg class="icon-ic-warning orange"><use href="#icon-ic-warning"></use></svg>',i=f.resources.cloneStatusResult.PartiallyCloned,n="warning";else{if(e==C.PartiallyCloned&&null!=o)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(o=null!=o?"data-retry='"+JSON.stringify(o)+"'":o)+">"+f.resources.retryButton+"</button>";if(e!=C.Failed&&e!=m.Failure&&e!=m.DuplicateFailure||null!=o){if((e==C.Failed||e==m.Failure||e==m.DuplicateFailure)&&null!=o)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(o=null!=o?"data-retry='"+JSON.stringify(o)+"'":o)+">"+f.resources.retryButton+"</button>";if(e!=C.Cloned&&e!=m.Success)return"";t='<svg class="icon-ic-checkmark-small"><use href="#icon-ic-checkmark-small"></use></svg>',i=f.resources.cloneStatusResult.Cloned,n="success"}else t='<svg class="icon-ic-warning red"><use href="#icon-ic-warning"></use></svg>',i=f.resources.cloneStatusResult.Failed,n="error"}return'<div class="status '+n+' display-inline-flex align-items-center ml-auto">'+t+"<span>"+i+"</span></div>"}function n(){""!=v&&"number"==typeof v?eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshTargetLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshTargetLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(f.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&(o(e),eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshItemLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshItemLevelStatus?cloneRequestId=").concat(v,"&businessId=").concat(f.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&o(e)}}))}}):(console.error("please provide a valid request Id"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage}))}function o(e){for(var o,t=!1,i=0;i<e.length;i++)0==e[i].ItemId?(r(e[i].Result,e[i].TargetId),null!=e[i].Reason&&(o=$("div[data-id="+e[i].TargetId+"] .mod-collapsable_title").find("div.status"),eviivo.webcore.tooltip.add(o,e[i].Reason,"bottom")),e[i].Result==C.InProgress&&(t=!0)):(o={cloneRequestId:v,TargetId:e[i].TargetId,ItemId:e[i].ItemId,ItemType:e[i].ItemType},u(e[i].Result,e[i].TargetId,e[i].ItemId,e[i].Reason,o));s(),1==t&&setTimeout(n,1e3*T)}function s(){eviivo.component.handlers.assign(b.retryBtn,a,"click");for(var e,o,t,i=document.getElementsByTagName("table"),n=0;n<i.length;n++)1<i[n].querySelectorAll(".s-cloneRetry").length?(e=i[n].querySelector("th[data-key=Status]").cellIndex+1,e=i[n].querySelector("tr:first-child th:nth-child("+e+")"),0==i[n].querySelectorAll(".s-cloneRetryAll").length&&(o={cloneRequestId:v,TargetId:i[n].closest(".s-property-selection").dataset.id,ItemId:null,ItemType:null},(t=document.createElement("button")).setAttribute("type","button"),t.innerHTML=f.resources.retryAllButton,t.setAttribute("class","s-cloneRetryAll btn-table_primary btn-table_primary-large"),t.dataset.retry=JSON.stringify(o),e.appendChild(t),eviivo.component.handlers.assign(".s-cloneRetryAll",a,"click"))):0<i[n].querySelectorAll(".s-cloneRetryAll").length&&i[n].querySelectorAll(".s-cloneRetryAll")[0].remove()}function a(){var e=$(this).data("retry");eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRetryRequest",url:eviivoSuiteApp+"/api/clone/SubmitRetry",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}),r(C.InProgress,e.TargetId),u(C.InProgress,e.TargetId,e.ItemId,"",null),setTimeout(n,1e3*T)}function r(e,o){$("div[data-id="+o+"] .mod-collapsable_title").find("div.status").remove();o=$("div[data-id="+o+"]").find("span:first");$(l(e,null)).insertAfter(o)}function u(e,o,t,i,n){var s;null!=t?(d==p.CALENDAR&&(t=o),(s=$("div[data-id="+o+"]").find("table")).find("tr[data-id='"+t+"']>td.details").html($("<p/>").html(i).text()),s.find("tr[data-id='"+t+"']>td.status").html(l(e,n)),0==$("div[data-id="+o+"]").find(".s-cloneRetry").length&&$("div[data-id="+o+"]").find(".s-cloneRetryAll").remove()):((s=$("div[data-id="+o+"]").find("table")).find("tr>td.details").html(i),s.find("tr>td.status").html(l(e,n)),$("div[data-id="+o+"]").find(".s-cloneRetryAll").remove())}function t(){for(var e=document.getElementsByClassName("s-expand-btn"),o=e[0].innerHTML==f.resources.collapseAll?(e[0].innerHTML=f.resources.expandAll,!0):(e[0].innerHTML=f.resources.collapseAll,!1),t=document.querySelectorAll(".s-property-selection"),i=1;i<=t.length;i++)document.querySelector("#property_location_"+i).checked=o}function c(){var e;null!=i&&(e=$(".cp-custom-select")[0],$(e).val(i).trigger("click"),i=null)}var d,v,i,f,p,C,m,b,T;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.history=window.eviivo.pms.clone.history||{},window.eviivo.pms.clone.history=(f={},p={ROOM:1,CALENDAR:2,DEPOSITS:3,RATE:4},C={InProgress:1,PartiallyCloned:2,Failed:3,Cloned:4},m={Success:"SUC",Failure:"FAI",DuplicateFailure:"DUP",InProgress:"INP"},b={backBtn:"#btn-back",cancelBtn:"#btn-cancel",nextBtn:"#btn-next",doneBtn:"#btn-done",retryBtn:".s-cloneRetry"},T=30,{init:function(){i=$(this).closest("tr").find("td:first-child")[0].innerText,eviivo.component.flyout.showFlyout("displayHistoryContainer")},optionsSetup:function(e){f=eviivo.util.extend(f,e),d=f.typeId,v=f.cloneRequestId,T=f.refreshRate},onShow:function(){$.fn.dataTable.isDataTable("#eviivo-list-history")?$("#eviivo-list-history").DataTable().ajax.reload(c,!0):"function"==typeof postInitListingTable&&postInitListingTable()},customRenderAction:function(e,o,t){return'<a href="'+eviivoSuiteApp+"/Settings/Clone/Status/"+t.Id+'" target="_blank" class="md-table_action md-table_action-item"><svg class="icon-bg-eye-outline"> <use  href="#icon-bg-eye-outline"></use></svg></a>'},customRenderDateTime:function(e,o,t){return'<div class="history-date">'+(e=new Date(e)).evDisplayLongDate(eviivo.eagle.basePageModelState.userCultureCode)+',</div><div class="history-time">'+e.evDisplayLongTime(eviivo.eagle.basePageModelState.userCultureCode)+"</div>"},customRenderResult:function(e,o,t){return l(e,null)},reasonCustomRender:function(e,o,t){return null!=e?"<strong>"+e+"</strong>":""},statusCustomRender:function(e,o,t){return l(e,null)},refreshStatus:n,loadSuccess:s,filterSetup:function(){$(".cp-custom-select").find("option").remove(),$(".cp-custom-select").off("change");for(var e=$(".cp-custom-select")[0],t=$(".cp-custom-select")[1],o=($(e).append("<option value=''>"+f.resources.filterSelectAll+"</option>"),$(t).append("<option value=''>"+f.resources.filterSelectAll+"</option>"),$("#clone-table").find("tr>td:first-child")),i=0;i<o.length;i++)$(e).append("<option value='"+o[i].innerHTML+"'>"+o[i].innerHTML+"</option>");$.each(f.resources.cloneStatusResult,function(e,o){$(t).append("<option value='"+o+"'>"+o+"</option>")}),$(e).on("click",function(){var e=$(".cp-custom-select > option:selected")[0].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),$(t).on("click",function(){var e=$(".cp-custom-select > option:selected")[1].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),c()},actionCustomRender:function(e,o,t){return""},setupCollapseExpandBtn:function(){var e,o;1<f.noOfTargets&&(e=document.querySelector(".page-heading div.h2"),(o=document.createElement("button")).setAttribute("type","button"),o.setAttribute("name",f.resources.expandAll),o.setAttribute("value",f.resources.expandAll),o.innerHTML=f.resources.expandAll,o.setAttribute("class","s-expand-btn btn-table_primary btn-table_primary-large btn-target-collapse"),e.appendChild(o),eviivo.component.handlers.assign(".s-expand-btn",t,"click"))},setupRefreshInterval:function(){setTimeout(n,T)},getCloningStatusTypes:function(){return C}})},2679:function(){function t(){eviivo.component.flyout.hideFlyout(s.flyout.replace("#",""))}function i(e){e?$(s.flyout).find(s.flyoutSpinner).removeClass("hide"):$(s.flyout).find(s.flyoutSpinner).addClass("hide")}function n(e){$(s.flyout).find(s.bodyContainer).html(e),i(!1),""!=e&&(o("".concat($(s.cloneHiddenTitle).html())),postInitComplete())}function o(e){$(s.flyout).find(s.header).html(e)}var s,l,a;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.statusFlyout=(s={flyout:"#clone-status",header:".s-heading-title",flyoutSpinner:".s-flyout-spinner",cloneHiddenTitle:".s-flyout-title",bodyContainer:"#cloneStatusContainer"},l=0,a={},{init:function(e){a=eviivo.util.extend(a,e)},open:function(e,o){i(!0),eviivo.component.flyout.showFlyout(s.flyout),e=e,o=o,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-clone-status",url:"".concat(eviivoSuiteApp,"/clone/status/flyout/business/").concat(e,"/clone/").concat(o),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e.Errors?(t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})):n(e.HtmlPayload)},failCallback:function(){t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})},close:t,flyoutOnShow:function(){},flyoutOnClose:function(){null!=eviivo.pms.pricingRules&&eviivo.pms.pricingRules.createFlyout.close(),n(""),o("")},statusCustomRender:function(e,o,t){return""!=(e=eviivo.pms.clone.history.customRenderResult(e,o,t))?(null!=t.CloneErrorMsg&&eviivo.webcore.tooltip.add(e,t.CloneErrorMsg,"top"),$(e).addClass("cp-table_action cp-table_action-item").prop("outerHTML")):""},scheduleMainTableRefreshIfStatusInProgressExists:function(e,o){0<$("".concat(e," .status.cloning")).length&&(setTimeout(o,a.cloningRefreshRate*l),l+=1)},resetRefreshOccurrences:function(){l=0}})},7887:function(){function n(e,o){o=$("#".concat(e," th:eq(").concat(o,")")).attr("data-key");return $.each(s,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[o]}var s,l,a,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(s=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],l=[],a="ATL",r="ATH",{init:function(e){var o,t,i,n;i=e.table,$.each(s,function(){this.tableId.toLowerCase()==i.toLowerCase()&&(n=this.tableCode)}),o=n,t=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(o),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(o),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){l=l.concat(e),(e=o)==a&&(null==(e=null==(e=l)?void 0:e.filter(function(e){return e.Key==r}))||0==e.length?l.push({PreferenceGroupType:a,Key:r,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),t()},failCallback:function(){t()}})},get:function(e,o){var t=n(e,o),i=null;return $.each(l,function(){this.Key==t&&(i=this.Value)}),null==i?"":(i=i.replaceAll("&quot;",'"'),JSON.parse(i))},post:function(e,o){var e=e.parents("table").attr("id"),t=eviivo.component.listing.filter.getColumnSearchStrings(e,o),e=n(e,o);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(t)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var s,l;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(s=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],l={},{post:function(e,o){var t,i,n=eviivo.util.getJSId($(this)[0].container);null!=n&&null!=o&&isNaN(o)&&(o={ColumnCode:(t=n,$.each(s,function(){this.tableId.toLowerCase()==t.toLowerCase()&&(i=this.Order)}),i),Order:JSON.stringify(o)})!=l&&(l=o,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:o,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})}},i={};function n(e){var o=i[e];return void 0!==o||(o=i[e]={exports:{}},t[e](o,o.exports,n)),o.exports}n.n=function(e){var o=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(o,{a:o}),o},n.d=function(e,o){for(var t in o)n.o(o,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:o[t]})},n.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)},function(){"use strict";n(7891),n(2057),n(4489),n(4660),n(7887),n(1452),n(2679),n(79)}();
//# sourceMappingURL=businessCutoff.min.js.map