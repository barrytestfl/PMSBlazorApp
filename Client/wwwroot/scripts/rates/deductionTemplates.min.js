var t={8212:function(){function i(){eviivo.pms.charges.categoryManageFlyout.showAdd()}function t(){var e=$(this).parents("tr").attr("data-id"),e=eviivo.component.listing.getATablesRowData(s.listTable,e);null!=e&&eviivo.pms.charges.categoryManageFlyout.showEdit(e.Id,e.BusinessId,e.Category,e.Code)}function e(){eviivo.component.listing.postInitRefreshDataTableSpecific(s.listTable)}function o(){window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:r.resources.errorMessage})}var r,s,n,a;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charges=window.eviivo.pms.charges||{},window.eviivo.pms.charges.categoriesFlyout=window.eviivo.pms.charges.categoriesFlyout||{},window.eviivo.pms.charges.categoriesFlyout=(s={flyout:"#categories",listTable:"#eviivo-list-categories",listTableEdit:".s-listing-table-edit",listTableDelete:".s-listing-table-delete",isGuestCharge:"#hdnIsGuestCharge",addCategories:"#add-chargeCategories"},a=!(n=null),{init:function(e){r=eviivo.util.extend(r,e),null==n&&(n=eviivo.webcore.parsers.stringToBool($(s.isGuestCharge).val())),eviivo.pms.charges.categoryManageFlyout.init(r),$(s.addCategories).on("click",i),$(s.listTable).on("click",s.listTableEdit,t)},show:function(){a?(eviivo.pms.listingTable.filterActions.init({table:s.listTable.replace("#",""),callback:function(){e()}}),a=!1):e(),eviivo.component.flyout.showFlyout(s.flyout)},load:e,flyoutOnShow:function(){},flyoutOnClose:function(){},ajaxDataCallback:function(){return JSON.stringify({IsGuestCharge:n})},onRowCreatedDataTable:function(e,i,t,o,n){var a=$(e).find(s.listTableEdit);a.attr("href","javascript:;"),0<a.length&&(i.IsSystem&&!r.canEditSystemCategories||i.IsPartnerCharge&&!r.canEditPartnerCategories)&&a.attr("disabled",!0),0<(a=$(e).find(s.listTableDelete)).length&&(!i.CanBeDeleted||i.IsPartnerCharge&&!r.canDeletePartnerCategories)&&(a.attr("disabled",!0),a.removeClass("s-listing-table-delete"))},deleteCategory:function(i){var e={Id:i.Id,BusinessId:i.BusinessId};return eviivo.webcore.ajaxHelper.executeAjax({actionId:"delete-category-".concat(i.Id),url:"".concat(eviivoSuiteApp,"/api/charges/delete-category"),data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){eviivo.webcore.parsers.stringToBool(e)?(eviivo.component.listing.deleteRowsData(s.listTable,i.Id),eviivo.component.listing.filter.updateAllTableFilters(s.listTable)):o()},failCallback:o}),!1}})},3698:function(){function n(e){$(s.flyout).find(s.header).html(e)}function a(){eviivo.component.flyout.showFlyout(s.flyout)}function i(){var e=!0;l.name.removeClass("error"),l.code.removeClass("error"),""==l.name.val().trim()&&(l.name.addClass("error"),e=!1),r.isMultiProperty&&0==v&&""==l.propertyLookup.val().trim()&&(l.propertyLookup.addClass("error"),e=!1),e&&(e={Id:c,BusinessId:v,ChargeCategoryName:l.name.val().trim(),ChargeCategoryCode:l.code.val().trim(),ChargeCategoryIsGuest:o},eviivo.webcore.ajaxHelper.executeAjax({actionId:"save-category-".concat(e.Id),url:"".concat(eviivoSuiteApp,"/api/charges/save-category"),data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){eviivo.webcore.parsers.stringToBool(e)?(eviivo.pms.charges.categoriesFlyout.load(),eviivo.component.listing.filter.updateAllTableFilters(s.listTable),eviivo.component.flyout.hideFlyout(s.flyout.replace("#",""))):t()},failCallback:t}))}function t(){window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}var r,s,l,o,c,v;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charges=window.eviivo.pms.charges||{},window.eviivo.pms.charges.categoryManageFlyout=window.eviivo.pms.charges.categoryManageFlyout||{},window.eviivo.pms.charges.categoryManageFlyout=(s={listTable:"#eviivo-list-categories",flyout:"#categoryManage",header:".s-heading-title",name:"#chargeCategoryName",code:"#chargeCategoryCode",saveBtn:"#categoryManage_flyoutSave",isGuestCharge:"#hdnIsGuestCharge",multiPropertyLookupContainer:".s-catergory-multi-property-lookup",propertyLookup:"#eviivo-lookup-property-create-category"},o=!(l={}),v=c=0,{init:function(e){r=eviivo.util.extend(r,e),l.name=$(s.name),l.code=$(s.code),l.propertyLookup=$(s.propertyLookup),o=eviivo.webcore.parsers.stringToBool($(s.isGuestCharge).val()),$(s.saveBtn).on("click",i)},showAdd:function(){r.isMultiProperty&&$(s.multiPropertyLookupContainer).removeClass("hide"),n(r.resources.addHeader),a()},showEdit:function(e,i,t,o){$(s.multiPropertyLookupContainer).addClass("hide"),n(r.resources.editHeader),o=o,v=i,c=e,l.name.val(t),l.code.val(o),a()},flyoutOnShow:function(){},flyoutOnClose:function(){c=v=0,l.name.val(""),l.code.val(""),l.name.removeClass("error"),l.code.removeClass("error"),l.propertyLookup.val(""),l.propertyLookup.removeClass("error")},lookupRowSelection:function(e,i){e.removeClass("error");var t=$(i).html(),i=$(i).attr("id");v=i,e.val(t)}})},6064:function(){function i(){eviivo.component.listing.postInitRefreshDataTableSpecific(c.list),eviivo.pms.clone.statusFlyout.resetRefreshOccurrences()}function t(){eviivo.component.listing.doesListTableHaveAnySelectedData(c.list)||(e=!0,eviivo.component.listing.postInitRefreshDataTableSpecific(c.list))}var l,c,e;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.deductionTemplates=window.eviivo.eagle.deductionTemplates||{},window.eviivo.eagle.deductionTemplates.listing=window.eviivo.eagle.deductionTemplates?window.eviivo.eagle.deductionTemplates.listing:{},window.eviivo.eagle.deductionTemplates.listing=(l={},e=!(c={list:"#eviivo-list-deductions",editLink:".s-listing-table-edit",manageCategories:".s-manage-categories"}),{init:function(e){l=eviivo.util.extend(l,e),eviivo.pms.listingTable.filterActions.init({table:c.list.replace("#",""),callback:function(){i()}}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){t()}})},dataLoadSuccess:function(){e&&(eviivo.component.listing.filter.updateAllTableFilters(c.list),e=!1),eviivo.pms.clone.statusFlyout.scheduleMainTableRefreshIfStatusInProgressExists(c.list,t)},onRowCreatedDataTable:function(e,i,t,o,n){var a,r,s="";0<(e=jQuery(e).find(c.editLink)).length&&(a=e.attr("href"),r=l.isGuestCharge?"charges":"ownercharges",s=l.isMultiProperty?"/suite/".concat(r,"/property/").concat(i.PropertyId,"/"):"/suite/".concat(r,"/"),e.attr("href",a.replace("/suite/deductions/",s)))},load:i})},1831:function(){function i(){0<e().length&&($(r.bulkContainer).removeClass("active"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,style:eviivo.webcore.notifier.styles.withTwoActions,message:a.resources.confirmDeleteMsg,autoHide:!1,buttonTwo:a.resources.yes,buttonOne:a.resources.no}),$(r.deleteConfirmationYes).addClass("btn btn-right"),$(r.deleteConfirmationNo).addClass("btn btn-secondary"),$(".mod-close-notice").off(),$(".mod-close-notice").off("click",function(e){t()}).on("click",function(e){t()}),$(".notifyjs-withTwoActions-base").off("click",r.deleteConfirmationYes,function(e){o()}).on("click",r.deleteConfirmationYes,function(e){o()}),$(".notifyjs-withTwoActions-base").off("click",r.deleteConfirmationNo,function(e){t()}).on("click",r.deleteConfirmationNo,function(e){t()}),$(".notifyjs-hidable").removeClass("notifyjs-hidable"))}function t(){$(".notifyjs-wrapper").remove()}function o(){t(),eviivo.webcore.ajaxHelper.executeAjax({actionId:"bulk-delete",url:"".concat(eviivoSuiteApp,"/api/charges/bulk-delete"),data:{SelectedRules:e()},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){e?a.isCharge?eviivo.eagle.chargeTemplates.listing.refresh():eviivo.eagle.deductionTemplates.listing.load():n()},failCallback:n})}function e(){var i=[],e=eviivo.component.listing.getATablesSelectedData(a.isCharge?a.isGuestCharge?"eviivo-list-charge":"eviivo-list-ownercharge":"eviivo-list-deductions");return null!=e&&e.forEach(function(e){i.push({RuleId:e.Id,PropertyId:e.PropertyId})}),i}function n(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}var a,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charge=window.eviivo.pms.charge||{},window.eviivo.pms.charge.bulkDelete=window.eviivo.pms.charge.bulkDelete||{},window.eviivo.pms.charge.bulkDelete=(r={bulkDeleteBtn:"#bulkDelete",bulkContainer:".s-bulk-update",deleteConfirmationYes:".btn-two",deleteConfirmationNo:".btn-one"},{init:function(e){a=eviivo.util.extend(a,e),$(r.bulkDeleteBtn).on("click",i)},rowSelectionCallback:function(){0==e().length?$(r.bulkDeleteBtn).addClass("disabled"):$(r.bulkDeleteBtn).removeClass("disabled")}})},3856:function(){function t(){window.eviivo.webcore.notifier.show({type:window.eviivo.webcore.notifier.types.error,message:o.resources.errorMessage})}var o,n,a,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charge=window.eviivo.pms.charge||{},window.eviivo.pms.charge.delete=window.eviivo.pms.charge.delete||{},window.eviivo.pms.charge.delete=(o={},n="#eviivo-list-charge",a="#eviivo-list-ownercharge",r="#eviivo-list-deductions",{init:function(e){o=eviivo.util.extend(o,e)},deleteCharge:function(i){var e={Id:i.Id,BusinessId:i.PropertyId};return eviivo.webcore.ajaxHelper.executeAjax({actionId:"delete-charge-".concat(i.Id),url:eviivo.eagle.urls.charges.Delete,data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){eviivo.webcore.parsers.stringToBool(e)?o.isCharge?o.isGuestCharge?eviivo.component.listing.deleteRowsData(n,i.Id):eviivo.component.listing.deleteRowsData(a,i.Id):eviivo.component.listing.deleteRowsData(r,i.Id):t()},failCallback:t}),!1}})},6427:function(){function i(){(n.isGuestCharge?eviivo.pms.charges.chargelist:eviivo.pms.charges.ownerchargelist).load(!0)}function t(){eviivo.pms.charge.newCharge.flyout.init({isMultiProperty:n.isMultiProperty,businessId:n.businessId,isGuestCharge:n.isGuestCharge}),eviivo.pms.charge.newCharge.flyout.open()}function o(e){e.preventDefault(),eviivo.pms.charges.categoriesFlyout.show()}var n,a;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.chargeTemplates=window.eviivo.eagle.chargeTemplates||{},window.eviivo.eagle.chargeTemplates.listing=window.eviivo.eagle.chargeTemplates?window.eviivo.eagle.chargeTemplates.listing:{},window.eviivo.eagle.chargeTemplates.listing=(a={btnAddNew:"#btnAddNew",manageCategories:".s-manage-categories"},{init:function(e){n=eviivo.util.extend(n,e),$(a.btnAddNew).on("click",t),$(a.manageCategories).on("click",o),(n.isCharge?(eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:function(){i()}}),n.isGuestCharge?eviivo.pms.charges.chargelist:eviivo.pms.charges.ownerchargelist):eviivo.eagle.deductionTemplates.listing).init(n),$("body").tip()},ajaxDataCallback:function(){return JSON.stringify({IsGuestCharge:n.isGuestCharge})},ajaxDataFailureCallback:function(){},refresh:i})},3672:function(){function i(){var e;t.isGuestCharge?(e=$(a.selectedDistributorReference).val(),window.location.href="".concat(eviivoSuiteApp,"/charges/add?businessId=").concat(n,"&chargeReference=").concat(e)):window.location.href="".concat(eviivoSuiteApp,"/ownercharges/add?businessId=").concat(n)}function o(){var e,i=$(a.selectedDistributorReference).val();t.isMultiProperty?((e=""!=$(a.propertyLookupInput).val())&&void 0!==i||!t.isGuestCharge&&e)&&$(a.save).prop("disabled",!1):void 0!==i&&$(a.save).prop("disabled",!1)}var n,t,a;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charge=window.eviivo.pms.charge||{},window.eviivo.pms.charge.newCharge=window.eviivo.pms.charge.newCharge||{},window.eviivo.pms.charge.newCharge.flyout=window.eviivo.pms.charge.newCharge?window.eviivo.pms.charge.newCharge.flyout:{},window.eviivo.pms.charge.newCharge.flyout=(a={flyout:"#addNewChargeFlyout",isGuestCharge:"#hdnIsGuestCharge",propertiesLookup:"#create-flow-property-selector",propertyLookupInput:"#eviivo-lookup-property-create-rule-flow",selectedDistributorReference:"[name='DistributorReference']:checked",distributorReferenceRadioButtons:"input[type=radio][name=DistributorReference]",save:"#addNewChargeFlyout_flyoutSave"},{init:function(e){t=eviivo.util.extend(t,e),$(a.distributorReferenceRadioButtons).prop("checked",!1),t.isMultiProperty?($(a.propertiesLookup).removeClass("hide"),eviivo.component.lookup.clearInput(a.propertyLookupInput)):n=t.businessId,$(a.save).prop("disabled",!0),eviivo.component.lookup.init(),$(a.save).on("click",i),$(a.distributorReferenceRadioButtons).on("change",o),$(a.propertyLookupInput).on("change",o)},onShow:function(){},onClose:function(){$(a.propertyLookup).addClass("hide")},open:function(){eviivo.component.flyout.showFlyout(a.flyout)},lookupCustomRender:function(e){return"<div id='".concat(e.BusinessId,"'>").concat(e.BusinessName,"</div>")},lookupRowSelection:function(e,i){var t=$(i).html(),i=$(i).attr("id");n=i,e.val(t),o()},lookupInitComplete:function(e,i){}})},1998:function(){function i(){var e=$(this).parents("tr").attr("data-id"),e=eviivo.component.listing.getATablesRowDataViaTableId(n,e)[0];null!=e.CloneParentJobId&&eviivo.pms.clone.statusFlyout.open(e.PropertyId,e.CloneParentJobId)}var t,o,n;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charge=window.eviivo.pms.charge||{},window.eviivo.pms.charge.viewStatus=window.eviivo.pms.charge.viewStatus||{},window.eviivo.pms.charge.viewStatus=(t={},o={chargelist:"#eviivo-list-charge",ownerChargelist:"#eviivo-list-ownercharge",deductionsList:"#eviivo-list-deductions"},n="",{init:function(e){t=eviivo.util.extend(t,e),n=t.isCharge?t.isGuestCharge?o.chargelist:o.ownerChargelist:o.deductionsList,$(n).on("click",".update-status .status",i)}})},2582:function(){var i,t,o;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.charges=window.eviivo.pms.charges||{},window.eviivo.pms.charges.ownerChargeMultiCreate=window.eviivo.pms.charges.ownerChargeMultiCreate||{},window.eviivo.pms.charges.ownerChargeMultiCreate=(t={input:"#eviivo-lookup-property-create-rule-flow",next:"#owner-charge-multi-next",cancel:"#owner-charge-multi-create-cancel"},o=null,{init:function(e){i=eviivo.util.extend(i,e),eviivo.component.lookup.init(),$(t.next).on("click",function(){null!=o?i.isCharge&&!i.isGuestCharge?window.location.href="".concat(eviivoSuiteApp,"/ownercharges/add?businessId=").concat(o):i.isCharge||i.isGuestCharge?!i.isCharge&&i.isGuestCharge&&(window.location.href="".concat(eviivoSuiteApp,"/charges/adddeductiontemplate?businessId=").concat(o)):window.location.href="".concat(eviivoSuiteApp,"/ownercharges/adddeductiontemplate?businessId=").concat(o):$(t.input).addClass("error")}),$(t.cancel).on("click",function(){var e=$(this),i=(o=null,$(t.input).val(""),e.parents(".active").find(".cp-lookup_results"));i.find("li").removeClass("over").removeClass("hide"),i.unhighlight(),e.parents(".active").removeClass("active")})},lookupRowSelection:function(e,i){e.removeClass("error");var t=$(i).html(),i=$(i).attr("id");o=i,e.val(t)},ajaxDataCallback:function(){return{IsGuestCharge:i.isGuestCharge,IsCharge:i.isCharge}}})},79:function(){function r(e,i){var t,o,n;if(e==w.InProgress||e==m.InProgress)t='<svg class="icon-ic-refresh rotateClockwise"><use href="#icon-ic-refresh"></use></svg>',o=p.resources.cloneStatusResult.InProgress,n="cloning";else if(e==w.PartiallyCloned&&null==i)t='<svg class="icon-ic-warning orange"><use href="#icon-ic-warning"></use></svg>',o=p.resources.cloneStatusResult.PartiallyCloned,n="warning";else{if(e==w.PartiallyCloned&&null!=i)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(i=null!=i?"data-retry='"+JSON.stringify(i)+"'":i)+">"+p.resources.retryButton+"</button>";if(e!=w.Failed&&e!=m.Failure&&e!=m.DuplicateFailure||null!=i){if((e==w.Failed||e==m.Failure||e==m.DuplicateFailure)&&null!=i)return'<button class="btn-table_primary btn-table_primary-large s-cloneRetry" '+(i=null!=i?"data-retry='"+JSON.stringify(i)+"'":i)+">"+p.resources.retryButton+"</button>";if(e!=w.Cloned&&e!=m.Success)return"";t='<svg class="icon-ic-checkmark-small"><use href="#icon-ic-checkmark-small"></use></svg>',o=p.resources.cloneStatusResult.Cloned,n="success"}else t='<svg class="icon-ic-warning red"><use href="#icon-ic-warning"></use></svg>',o=p.resources.cloneStatusResult.Failed,n="error"}return'<div class="status '+n+' display-inline-flex align-items-center ml-auto">'+t+"<span>"+o+"</span></div>"}function n(){""!=u&&"number"==typeof u?eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshTargetLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshTargetLevelStatus?cloneRequestId=").concat(u,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&(i(e),eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRefreshItemLevelStatusStatus",url:"".concat(eviivoSuiteApp,"/api/clone/refreshItemLevelStatus?cloneRequestId=").concat(u,"&businessId=").concat(p.businessId),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e&&i(e)}}))}}):(console.error("please provide a valid request Id"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage}))}function i(e){for(var i,t=!1,o=0;o<e.length;o++)0==e[o].ItemId?(l(e[o].Result,e[o].TargetId),null!=e[o].Reason&&(i=$("div[data-id="+e[o].TargetId+"] .mod-collapsable_title").find("div.status"),eviivo.webcore.tooltip.add(i,e[o].Reason,"bottom")),e[o].Result==w.InProgress&&(t=!0)):(i={cloneRequestId:u,TargetId:e[o].TargetId,ItemId:e[o].ItemId,ItemType:e[o].ItemType},c(e[o].Result,e[o].TargetId,e[o].ItemId,e[o].Reason,i));a(),1==t&&setTimeout(n,1e3*h)}function a(){eviivo.component.handlers.assign(f.retryBtn,s,"click");for(var e,i,t,o=document.getElementsByTagName("table"),n=0;n<o.length;n++)1<o[n].querySelectorAll(".s-cloneRetry").length?(e=o[n].querySelector("th[data-key=Status]").cellIndex+1,e=o[n].querySelector("tr:first-child th:nth-child("+e+")"),0==o[n].querySelectorAll(".s-cloneRetryAll").length&&(i={cloneRequestId:u,TargetId:o[n].closest(".s-property-selection").dataset.id,ItemId:null,ItemType:null},(t=document.createElement("button")).setAttribute("type","button"),t.innerHTML=p.resources.retryAllButton,t.setAttribute("class","s-cloneRetryAll btn-table_primary btn-table_primary-large"),t.dataset.retry=JSON.stringify(i),e.appendChild(t),eviivo.component.handlers.assign(".s-cloneRetryAll",s,"click"))):0<o[n].querySelectorAll(".s-cloneRetryAll").length&&o[n].querySelectorAll(".s-cloneRetryAll")[0].remove()}function s(){var e=$(this).data("retry");eviivo.webcore.ajaxHelper.executeAjax({actionId:"CloneRetryRequest",url:eviivoSuiteApp+"/api/clone/SubmitRetry",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}),l(w.InProgress,e.TargetId),c(w.InProgress,e.TargetId,e.ItemId,"",null),setTimeout(n,1e3*h)}function l(e,i){$("div[data-id="+i+"] .mod-collapsable_title").find("div.status").remove();i=$("div[data-id="+i+"]").find("span:first");$(r(e,null)).insertAfter(i)}function c(e,i,t,o,n){var a;null!=t?(d==g.CALENDAR&&(t=i),(a=$("div[data-id="+i+"]").find("table")).find("tr[data-id='"+t+"']>td.details").html($("<p/>").html(o).text()),a.find("tr[data-id='"+t+"']>td.status").html(r(e,n)),0==$("div[data-id="+i+"]").find(".s-cloneRetry").length&&$("div[data-id="+i+"]").find(".s-cloneRetryAll").remove()):((a=$("div[data-id="+i+"]").find("table")).find("tr>td.details").html(o),a.find("tr>td.status").html(r(e,n)),$("div[data-id="+i+"]").find(".s-cloneRetryAll").remove())}function t(){for(var e=document.getElementsByClassName("s-expand-btn"),i=e[0].innerHTML==p.resources.collapseAll?(e[0].innerHTML=p.resources.expandAll,!0):(e[0].innerHTML=p.resources.collapseAll,!1),t=document.querySelectorAll(".s-property-selection"),o=1;o<=t.length;o++)document.querySelector("#property_location_"+o).checked=i}function v(){var e;null!=o&&(e=$(".cp-custom-select")[0],$(e).val(o).trigger("click"),o=null)}var d,u,o,p,g,w,m,f,h;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.history=window.eviivo.pms.clone.history||{},window.eviivo.pms.clone.history=(p={},g={ROOM:1,CALENDAR:2,DEPOSITS:3,RATE:4},w={InProgress:1,PartiallyCloned:2,Failed:3,Cloned:4},m={Success:"SUC",Failure:"FAI",DuplicateFailure:"DUP",InProgress:"INP"},f={backBtn:"#btn-back",cancelBtn:"#btn-cancel",nextBtn:"#btn-next",doneBtn:"#btn-done",retryBtn:".s-cloneRetry"},h=30,{init:function(){o=$(this).closest("tr").find("td:first-child")[0].innerText,eviivo.component.flyout.showFlyout("displayHistoryContainer")},optionsSetup:function(e){p=eviivo.util.extend(p,e),d=p.typeId,u=p.cloneRequestId,h=p.refreshRate},onShow:function(){$.fn.dataTable.isDataTable("#eviivo-list-history")?$("#eviivo-list-history").DataTable().ajax.reload(v,!0):"function"==typeof postInitListingTable&&postInitListingTable()},customRenderAction:function(e,i,t){return'<a href="'+eviivoSuiteApp+"/Settings/Clone/Status/"+t.Id+'" target="_blank" class="md-table_action md-table_action-item"><svg class="icon-bg-eye-outline"> <use  href="#icon-bg-eye-outline"></use></svg></a>'},customRenderDateTime:function(e,i,t){return'<div class="history-date">'+(e=new Date(e)).evDisplayLongDate(eviivo.eagle.basePageModelState.userCultureCode)+',</div><div class="history-time">'+e.evDisplayLongTime(eviivo.eagle.basePageModelState.userCultureCode)+"</div>"},customRenderResult:function(e,i,t){return r(e,null)},reasonCustomRender:function(e,i,t){return null!=e?"<strong>"+e+"</strong>":""},statusCustomRender:function(e,i,t){return r(e,null)},refreshStatus:n,loadSuccess:a,filterSetup:function(){$(".cp-custom-select").find("option").remove(),$(".cp-custom-select").off("change");for(var e=$(".cp-custom-select")[0],t=$(".cp-custom-select")[1],i=($(e).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$(t).append("<option value=''>"+p.resources.filterSelectAll+"</option>"),$("#clone-table").find("tr>td:first-child")),o=0;o<i.length;o++)$(e).append("<option value='"+i[o].innerHTML+"'>"+i[o].innerHTML+"</option>");$.each(p.resources.cloneStatusResult,function(e,i){$(t).append("<option value='"+i+"'>"+i+"</option>")}),$(e).on("click",function(){var e=$(".cp-custom-select > option:selected")[0].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),$(t).on("click",function(){var e=$(".cp-custom-select > option:selected")[1].value;$("#eviivo-list-history").DataTable().search(e,!0,!0).draw()}),v()},actionCustomRender:function(e,i,t){return""},setupCollapseExpandBtn:function(){var e,i;1<p.noOfTargets&&(e=document.querySelector(".page-heading div.h2"),(i=document.createElement("button")).setAttribute("type","button"),i.setAttribute("name",p.resources.expandAll),i.setAttribute("value",p.resources.expandAll),i.innerHTML=p.resources.expandAll,i.setAttribute("class","s-expand-btn btn-table_primary btn-table_primary-large btn-target-collapse"),e.appendChild(i),eviivo.component.handlers.assign(".s-expand-btn",t,"click"))},setupRefreshInterval:function(){setTimeout(n,h)},getCloningStatusTypes:function(){return w}})},2679:function(){function t(){eviivo.component.flyout.hideFlyout(a.flyout.replace("#",""))}function o(e){e?$(a.flyout).find(a.flyoutSpinner).removeClass("hide"):$(a.flyout).find(a.flyoutSpinner).addClass("hide")}function n(e){$(a.flyout).find(a.bodyContainer).html(e),o(!1),""!=e&&(i("".concat($(a.cloneHiddenTitle).html())),postInitComplete())}function i(e){$(a.flyout).find(a.header).html(e)}var a,r,s;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.clone=window.eviivo.pms.clone||{},window.eviivo.pms.clone.statusFlyout=(a={flyout:"#clone-status",header:".s-heading-title",flyoutSpinner:".s-flyout-spinner",cloneHiddenTitle:".s-flyout-title",bodyContainer:"#cloneStatusContainer"},r=0,s={},{init:function(e){s=eviivo.util.extend(s,e)},open:function(e,i){o(!0),eviivo.component.flyout.showFlyout(a.flyout),e=e,i=i,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-clone-status",url:"".concat(eviivoSuiteApp,"/clone/status/flyout/business/").concat(e,"/clone/").concat(i),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){null!=e.Errors?(t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})):n(e.HtmlPayload)},failCallback:function(){t(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.resources.notify.genericErrorMessage})}})},close:t,flyoutOnShow:function(){},flyoutOnClose:function(){null!=eviivo.pms.pricingRules&&eviivo.pms.pricingRules.createFlyout.close(),n(""),i("")},statusCustomRender:function(e,i,t){return""!=(e=eviivo.pms.clone.history.customRenderResult(e,i,t))?(null!=t.CloneErrorMsg&&eviivo.webcore.tooltip.add(e,t.CloneErrorMsg,"top"),$(e).addClass("cp-table_action cp-table_action-item").prop("outerHTML")):""},scheduleMainTableRefreshIfStatusInProgressExists:function(e,i){0<$("".concat(e," .status.cloning")).length&&(setTimeout(i,s.cloningRefreshRate*r),r+=1)},resetRefreshOccurrences:function(){r=0}})},7887:function(){function n(e,i){i=$("#".concat(e," th:eq(").concat(i,")")).attr("data-key");return $.each(a,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[i]}var a,r,s,l;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(a=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],r=[],s="ATL",l="ATH",{init:function(e){var i,t,o,n;o=e.table,$.each(a,function(){this.tableId.toLowerCase()==o.toLowerCase()&&(n=this.tableCode)}),i=n,t=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(i),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(i),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){r=r.concat(e),(e=i)==s&&(null==(e=null==(e=r)?void 0:e.filter(function(e){return e.Key==l}))||0==e.length?r.push({PreferenceGroupType:s,Key:l,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),t()},failCallback:function(){t()}})},get:function(e,i){var t=n(e,i),o=null;return $.each(r,function(){this.Key==t&&(o=this.Value)}),null==o?"":(o=o.replaceAll("&quot;",'"'),JSON.parse(o))},post:function(e,i){var e=e.parents("table").attr("id"),t=eviivo.component.listing.filter.getColumnSearchStrings(e,i),e=n(e,i);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(t)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var a,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(a=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],r={},{post:function(e,i){var t,o,n=eviivo.util.getJSId($(this)[0].container);null!=n&&null!=i&&isNaN(i)&&(i={ColumnCode:(t=n,$.each(a,function(){this.tableId.toLowerCase()==t.toLowerCase()&&(o=this.Order)}),o),Order:JSON.stringify(i)})!=r&&(r=i,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:i,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})}},o={};function n(e){var i=o[e];return void 0!==i||(i=o[e]={exports:{}},t[e](i,i.exports,n)),i.exports}n.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(i,{a:i}),i},n.d=function(e,i){for(var t in i)n.o(i,t)&&!n.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:i[t]})},n.o=function(e,i){return Object.prototype.hasOwnProperty.call(e,i)},function(){"use strict";n(6427),n(6064),n(1831),n(3856),n(1998),n(2582),n(3672),n(8212),n(3698),n(7887),n(1452),n(2679),n(79)}();
//# sourceMappingURL=deductionTemplates.min.js.map