var a={280:function(){function t(e){var t=$("#AutoOpenChannels");document.getElementById("chkOption").checked?t.val("True"):t.val("False"),r=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(l),n(),eviivo.eagle.popup.hide(),null!=c.onSaveEvent&&null!=c.onSaveEvent&&c.onSaveEvent(e),void 0!==c.showNotifyMessage&&null!==c.showNotifyMessage||(c.showNotifyMessage=!0),!0!==c.showNotifyMessage||$.notify.warnAlreadyExists()||eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:c.resources.UnsavedChanges})}function a(){eviivo.eagle.popup.show({popupBox:l,closeButton:l.find(".s-close"),onShow:e,onClose:o})}function o(){eviivo.component.twoColumnListAssignment.moveAllSortableFromRightToLeftNoCallBack(l),$.each(r,function(e,t){eviivo.component.twoColumnListAssignment.moveSortableItemToRightList(l,t)}),n();var e=$("#AutoOpenChannels").val(),t=$("#chkOption");"True"===e?0==t.checked&&t.trigger("click"):t.checked&&t.trigger("click")}function e(){var e=c.resources.ChannelPopupTitle.replace("{0}",s);$("#promoPopupTitle").html(e),r=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(l),eviivo.component.twoColumnListAssignment.addSortableItemClickEvents(l)}function i(){null!=c.resources.Save&&l.find("#btnChannelSave").html(c.resources.Save),null!=c.resources.ChannelOption&&l.find("#lblOption .label").html(c.resources.ChannelOption),eviivo.component.twoColumnListAssignment.init({container:l,callback:null,showCountOnZero:!1,resources:c.resources})}function n(){var e=$("#appliedCount");eviivo.component.twoColumnListAssignment.updateSortableWidgetCount(l,e,!0)}var s,l,r,c;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.assignChannelsToRateplan=window.eviivo.eagle.assignChannelsToRateplan||{},window.eviivo.eagle.assignChannelsToRateplan=(c={},{init:function(e){c=$.extend(c,e),l=$("#popup-sort-channels"),i(),$("#btnChannelPopup").on("click",a),$("#btnChannelCancel").on("click",function(){o(),eviivo.eagle.popup.hide()}),$("#btnChannelSave").on("click",t),n()},initSortableWidget:i,updateAppliedCount:n,showChannelPopup:a,hideChannelPopup:function(){eviivo.eagle.popup.hide()}})},9406:function(){function t(){if(null==s)s=new d,c();else{eviivo.component.twoColumnListAssignment.clearItemsFromTheWidget(l);for(var e=0;e<s.promos().length;e++){var t=s.promos()[e];eviivo.component.twoColumnListAssignment.addSortableItemToLeftList(l,t.id,t.name(),"")}}}function n(e){null!=e&&null!=e.target&&e.target.setAttribute("selected","selected"),eviivo.eagle.popup.show({popupBox:l,closeButton:l.find(".s-close"),onShow:v,onClose:function(){u(),null!=e&&null!=e.target&&e.target.removeAttribute("selected")}})}function a(){null!=r.resources.Save&&null!=r.resources.Save&&l.find("#btnPromoSave").html(r.resources.Save),eviivo.component.twoColumnListAssignment.init({container:l,callback:null,showCountOnZero:!1,resources:{ChannelLeftColumn:r.resources.PromoLeftColumn,ChannelRightColumn:r.resources.PromoRightColumn}}),e($(r.promoButtonSelector)),$("#btnPromoCancel").on("click",function(e){u(),eviivo.eagle.popup.hide()}),$("#btnPromoSave").on("click",function(e){i=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(l),m(),eviivo.eagle.popup.hide(),null!=r.onSaveEvent&&null!=r.onSaveEvent&&r.onSaveEvent(e)})}var s,o,i,l,r,c,d,p,u,v,e,m;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.assignPromosToRateplan=window.eviivo.eagle.assignPromosToRateplan||{},window.eviivo.eagle.assignPromosToRateplan=(r={},d=function(){var o=this;o.promos=ko.observableArray(),o.addPromo=function(e){e=new p(e);o.promos.push(e)},o.removePromo=function(a){$.each(this.promos(),function(e,t){return t.id!=a||(o.promos.splice(e,1),!1)})}},p=function(e){this.id=e.PromotionId,this.name=ko.observable(e.PromotionName)},u=function(e){eviivo.component.twoColumnListAssignment.moveAllSortableFromRightToLeftNoCallBack(l),$.each(i,function(e,t){eviivo.component.twoColumnListAssignment.moveSortableItemToRightList(l,t)}),m()},v=function(){var e=r.resources.PromoPopupTitle.replace("{0}",o);$("#promoPopupTitle").text(e),i=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(l),eviivo.component.twoColumnListAssignment.addSortableItemClickEvents(l)},m=function(){var e=$("#appliedPromoCount");eviivo.component.twoColumnListAssignment.updateSortableWidgetCount(l,e)},{init:function(e){r=$.extend(r,e),l=$("#popup-sort-promos"),t(),a(),m()},initSortableWidget:a,initPromoButtons:e=function(e){(e=null==e?$("#btnPromoPopup"):e).on("click",n)},updateTitle:function(e){o=e},getPromos:c=function(e,o,i){0!=s.promos().length&&!o||(null!==e&&null!=e||(e={businessId:eviivo.eagle.basePageModelState.businessId,ratePlanId:parseInt(jQuery("#Id").val()),occupancy:parseInt(jQuery("#ddlOccupancyVariance").val())}),eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+"/promotions/ListPromotionsForRatePlanMappings",data:e,actionId:"getPromotionsForBusiness",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){if(eviivo.component.twoColumnListAssignment.clearItemsFromTheWidget(l),e&&e.Data){s.promos.removeAll();for(var t=0;t<e.Data.length;t++){var a=new p(e.Data[t]);s.promos.push(a),eviivo.component.twoColumnListAssignment.addSortableItemToLeftList(l,a.id,a.name(),"")}r.onLoaded&&r.onLoaded(),o&&n(),"function"==typeof i&&i()}},failCallback:function(e){}}))},showPromoPopup:n,cleanup:function(){s=new d}})},9929:function(){function t(e){$(N.popupTitle).text(j.resources.PromoPopupTitle.replace("{0}",e))}function f(){return k.data(N.dataPromotionsId)}function p(e){for(var t=[],a=0;a<e.length;a++)t.push(e[a].PromotionId);return t}function H(e){if(e&&e.Data){for(var t=[],a=0;a<e.Data.length;a++)t.push({id:e.Data[a].PromotionId,name:e.Data[a].PromotionName});k.data(N.dataPromotionsId,t)}}function h(){x.empty(),O.empty()}function u(e){return new Array(e+1).join("0")}function r(e,t,a){return e.substr(0,t)+a+e.substr(t+a.length)}function v(e,t,a){for(var o=0;o<e.length;o++)e[o].PromotionId===t&&(e[o].Occupancies=r(e[o].Occupancies,S-1,a))}function _(){for(var e=function(){for(var e=f(),t=[],a=0;a<e.length;a++)t.push(e[a].id);return t}(),t=C(),a=p(t),o=u(A),i=0;i<e.length;i++)-1===$.inArray(e[i],a)&&t.push({PromotionId:e[i],Occupancies:o});for(var n=O.find("li"),s=[],i=0;i<n.length;i++)s.push(parseInt($(n[i]).attr("data-promo")));for(i=0;i<a.length;i++)-1===$.inArray(a[i],s)?v(t,a[i],"0"):v(t,a[i],"1");for(i=0;i<s.length;i++)v(t,s[i],"1");for(var l=t,r=u(A),c=[],d=0;d<l.length;d++)l[d].Occupancies!==r&&c.push(l[d]);return c}function a(){for(var e=[],t=$(N.legacyMappingHiddenInput),a=0;a<t.length;a++)e.push(parseInt($(t[a]).attr("value")));for(var o=new Array(A+1).join("1"),i=[],n=0;n<e.length;n++)i.push({PromotionId:e[n],Occupancies:o});return i}function d(e){L.find(".PromoMappings").remove();for(var t=0;t<e.length;t++)L.append(W.format(t,"{0},{1}".format(e[t].PromotionId,e[t].Occupancies)))}function m(e){for(var t=0,a=0;a<e.length;a++)"1"==e[a].Occupancies.charAt(S-1)&&t++;return t}function e(e){eviivo.eagle.popup.hide();var t,a=function(){for(var e=[],t=O.find("ul li"),a=0;a<t.length;a++){for(var o=$(t[a]),i=parseInt(o.attr("data-promo")),n=parseInt(o.parent().attr("data-occ")),s=!1,l=0;l<e.length;l++)e[l].PromotionId===i&&(e[l].Occupancies=r(e[l].Occupancies,n-1,"1"),s=!0);s||e.push({PromotionId:i,Occupancies:r(u(A),n-1,"1")})}return e}();d(a),$(N.totalAssociatedPromos).html("({0})".format((t=[],a.forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),t.length))),null!=j.onSaveEvent&&null!=j.onSaveEvent&&j.onSaveEvent(e)}function i(e){eviivo.eagle.popup.hide();var t=_();d(t);for(var a=p(t),o=[],i=[],n=$(N.legacyMappingHiddenInput),s=0;s<n.length;s++){var l=parseInt(n[s].value);(-1===$.inArray(l,a)?i:o).push(l)}for(s=0;s<a.length;s++)-1===$.inArray(a[s],o)&&o.push(a[s]);for($(N.legacyMappingHiddenInput).remove(),s=0;s<o.length;s++)$(N.ratesDiv).append(Q.format(s,o[s]));var r=R.find("#sortable2 li");for(R.find("#sortable1").prepend(r),s=0;s<o.length;s++){c=void 0;var c=o[s];c=R.find("#sortable1 li[item-id='{0}']".format(c));R.find("#sortable2").prepend(c)}$(N.legacyTotalAssociatedPromos).html("("+t.length+")"),$(N.totalAssociatedPromos).html("({0})".format(m(t))),null!=j.onSaveEvent&&null!=j.onSaveEvent&&j.onSaveEvent(e)}function o(){x.find("ul li.ui-state-selected").each(function(){var e=$(this).parent().attr("data-occ");O.find("ul[data-occ={0}]".format(e)).prepend($(this))})}function n(){x.find("li.ui-state-selected").each(function(){O.prepend($(this))})}function s(){x.find("ul li").each(function(){var e=$(this).parent().attr("data-occ");O.find("ul[data-occ={0}]".format(e)).prepend($(this))})}function l(){x.find("li").each(function(){O.prepend($(this))})}function c(){O.find("ul li.ui-state-selected").each(function(){var e=$(this).parent().attr("data-occ");x.find("ul[data-occ={0}]".format(e)).prepend($(this))})}function g(){O.find("li.ui-state-selected").each(function(){x.prepend($(this))})}function b(){O.find("ul li").each(function(){var e=$(this).parent().attr("data-occ");x.find("ul[data-occ={0}]".format(e)).prepend($(this))})}function w(){O.find("li").each(function(){x.prepend($(this))})}function D(){null!=j.occVarPromoButtonSelector&&null!=j.occVarPromoButtonSelector||$(N.popupBtnId).off("click",y).on("click",y),$(N.cancelBtnId).off("click").on("click",function(){eviivo.eagle.popup.hide()}),$(N.saveBtnId).off("click",e).on("click",e),k&&(k.find(".arrow-single-l").off("click",o).on("click",o),k.find(".arrow-double-l").off("click",s).on("click",s),k.find(".arrow-single-r").off("click",c).on("click",c),k.find(".arrow-double-r").off("click",b).on("click",b))}function E(e){e.ctrlKey?$(this).toggleClass("ui-state-selected"):(e=$(this).hasClass("ui-state-selected"),k.find(".popUpSortableContainer ul li").removeClass("ui-state-selected"),!1===e&&$(this).addClass("ui-state-selected"))}function F(e){e.ctrlKey?$(this).toggleClass("ui-state-selected"):(e=$(this).hasClass("ui-state-selected"),k.find(".popUpSortableContainer li").removeClass("ui-state-selected"),!1===e&&$(this).addClass("ui-state-selected"))}function V(){t(I),k.find(".popUpSortableContainer ul li").off("click").on("click",E)}function U(){var e=$("#saveRatePlanForm label[for='rateCapacity']").text();t("{0}, {1} {2}".format(I,e,S)),k.find(".popUpSortableContainer li").off("click").on("click",F)}function C(){for(var e=[],t=L.find(".PromoMappings"),a=0;a<t.length;a++){var o=t[a].value.trim().split(",");e.push({PromotionId:parseInt(o[0].trim()),Occupancies:o[1].trim()})}return e}function P(e,t){for(var a=0;a<t.length;a++)if(t[a].PromotionId===e)return t[a];return null}function y(e){null!=e&&null!=e.target&&e.target.setAttribute("selected","selected"),null!=j.onShow&&j.onShow(),h();for(var t=1;t<=A;t++){var a=J.format(t,j.resources.Occupancy);x.append(a),O.append(a)}for(var o=f(),i=0;i<o.length;i++)for(var n=B.format(o[i].id,o[i].name),s=1;s<=A;s++)x.find("ul[data-occ={0}]".format(s)).append(n);for(var l=1;l<=A;l++){var r="ul[data-occ={0}]".format(l);x.find(r).sortable({connectWith:N.rightColumnId+" "+r,placeholder:"ui-state-highlight"}),O.find(r).sortable({connectWith:N.leftColumnId+" "+r,placeholder:"ui-state-highlight"})}for(var c=C(),d=x.find("ul li"),p=0;p<d.length;p++){var u,v=$(d[p]),m=P(parseInt(v.attr("data-promo")),c);null!=m&&(u=parseInt(v.parent().attr("data-occ")),1===parseInt(m.Occupancies[u-1]))&&O.find("ul[data-occ={0}]".format(u)).append(v)}eviivo.eagle.popup.show({popupBox:k,closeButton:k.find(".s-close"),onShow:V,onClose:function(){null!=e&&null!=e.target&&e.target.removeAttribute("selected")}})}function G(e){null!=e&&null!=e.target&&e.target.setAttribute("selected","selected"),null!=j.onShow&&j.onShow(),h();var t=f();if(void 0!==t&&0<t.length)for(var a=0;a<t.length;a++)x.append(B.format(t[a].id,t[a].name));x.sortable({connectWith:N.rightColumnId,placeholder:"ui-state-highlight"}),O.sortable({connectWith:N.leftColumnId,placeholder:"ui-state-highlight"});for(var o=C(),i=x.find("li"),n=0;n<i.length;n++){var s=$(i[n]),l=P(parseInt(s.attr("data-promo")),o);null!=l&&1===parseInt(l.Occupancies[S-1])&&O.append(s)}eviivo.eagle.popup.show({popupBox:k,closeButton:k.find(".s-close"),onShow:U,onClose:function(){null!=e&&null!=e.target&&e.target.removeAttribute("selected")}})}function z(){var e=a(),e=(d(e),"({0})".format(e.length));$(N.totalAssociatedPromos).html(e),$(N.legacyTotalAssociatedPromos).html(e)}var T,I,S,A,k,R,x,O,L,N,M,B,J,W,Q,j;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.occVarPromoPopup=window.eviivo.eagle.occVarPromoPopup||{},window.eviivo.eagle.occVarPromoPopup=(N={ratesDiv:"#rates-headerDiv",popupId:"#occVarPromoPopup",popupTitle:"#occVarPromoPopupTitle",dataPromotionsId:"promotions",leftColumnId:"#occVarPromoPopupLeftCol",rightColumnId:"#occVarPromoPopupRightCol",popupBtnId:"#btnOccVarPromoPopup",totalAssociatedPromos:"#totalAssociatedPromos",cancelBtnId:"#btnCancelOccVarPromo",saveBtnId:"#btnSaveOccVarPromo",legacyPopupId:"#popup-sort-promos",legacySaveBtnId:"#btnPromoSave",legacyMappingHiddenInput:"input.SelectedAssociatedPromoIds",legacyTotalAssociatedPromos:"#counterId"},M="div.s-rate-promo-mapping[data-id='{0}']",B='<li class="ui-state-default ui-state-flex" title="{1}" data-promo="{0}"><span class="ui-state-title"><strong>{1}</strong></span></li>',J='<li data-occ="{0}"><span class="ui-state-title">{1} {0}</span><ul data-occ="{0}" class="ui-sortable"></ul></li>',W='<input class="PromoMappings" id="PromoMappings_{0}_" name="PromoMappings[{0}]" type="hidden" value="{1}">',Q='<input class="SelectedAssociatedPromoIds" id="SelectedAssociatedPromoIds_{0}_" name="SelectedAssociatedPromoIds[{0}]" type="hidden" value="{1}">',j={},{init:function(e){j=$.extend(j,e),k=$(N.popupId),R=$(N.legacyPopupId),e={businessId:eviivo.eagle.basePageModelState.businessId,ratePlanId:parseInt(jQuery("#Id").val()),occupancy:parseInt(jQuery("#ddlOccupancyVariance").val())},eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+"/promotions/ListPromotionsForRatePlanMappings",data:e,actionId:"getPromotionsForBusinessOccVar",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:H,failCallback:function(){console.error("Promotions cannot be loaded.")}}),null!=j.resources.Save&&null!=j.resources.Save&&k.find(N.saveBtnId).html(j.resources.Save),k.find("#occVarPromoPopupLeftColTitle").html(j.resources.PromoLeftColumn),k.find("#occVarPromoPopupRightColTitle").html(j.resources.PromoRightColumn),k.find("#occVarPromoPopupInclude").html(j.resources.Include),k.find("#occVarPromoPopupIncludeAll").html(j.resources.IncludeAll),k.find("#occVarPromoPopupExclude").html(j.resources.Exclude),k.find("#occVarPromoPopupExcludeAll").html(j.resources.ExcludeAll),j.occVarPromoButtonSelector&&null!=(e=$(j.occVarPromoButtonSelector))&&e.on("click",function(e){var t=$(this);T=parseInt(t.attr("data-id")),I=t.attr("data-name"),A=parseInt(t.parent().parent().find("td:nth-child(3)").text()),x=$(N.leftColumnId),O=$(N.rightColumnId),L=$(M.format(T)),D(),y(e)})},configurePopupForRatePlanAndOccupancy:function(e,t,a,o){T=e,I=$("#rateName").val(),A=o,S=a,x=$(N.leftColumnId),O=$(N.rightColumnId),L=$(M.format(T)),$(N.popupBtnId).off("click",G).on("click",G),$(N.cancelBtnId).off("click").on("click",function(){eviivo.eagle.popup.hide()}),$(N.saveBtnId).off("click",i).on("click",i),k&&(k.find(".arrow-single-l").off("click",n).on("click",n),k.find(".arrow-double-l").off("click",l).on("click",l),k.find(".arrow-single-r").off("click",g).on("click",g),k.find(".arrow-double-r").off("click",w).on("click",w)),$(N.legacySaveBtnId).off("click",z).on("click",z),$(N.totalAssociatedPromos).html("({0})".format(m(C())))},enableNewPromoModel:function(e,t){T=e,A=t,$(N.ratesDiv).append('<div data-id="{0}" class="s-rate-promo-mapping"></div>'.format(T)),L=$(M.format(T)),d(a())}})},7887:function(){function i(e,t){t=$("#".concat(e," th:eq(").concat(t,")")).attr("data-key");return $.each(n,function(){this.tableId.toLowerCase()==e.toLowerCase()&&(cachedTableColumnCodesMap=this.columnCodes)}),cachedTableColumnCodesMap[t]}var n,s,l,r;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.filterActions=window.eviivo.pms.listingTable.filterActions||{},window.eviivo.pms.listingTable.filterActions=(n=[{tableId:"eviivo-list-rule",tableCode:"PRL",columnCodes:{PropertyName:"PRO",TypeCodeDescription:"RTY",Name:"RNA",RoomTypeName:"APP",ChannelsFilter:"CHA",Status:"STA",UpdateStatus:"UST"}},{tableId:"eviivo-list-cutoff",tableCode:"BCO",columnCodes:{PropertyName:"BPR",Description:"BCD",Status:"BST"}},{tableId:"eviivo-list-cleaning",tableCode:"CLN",columnCodes:{Unit:"CRO",Movement:"CMO",Condition:"CCO",Schedule:"CSH",Assigned:"CAT",BedConfig:"CBE",Property:"CPR"}},{tableId:"eviivo-list-charge",tableCode:"GCH",columnCodes:{PropertyName:"GPR",Name:"GCN",CategoryName:"GCA",DisplayOnline:"GDO",CollectionMethodDisplay:"GCO"}},{tableId:"eviivo-list-ownercharge",tableCode:"OCH",columnCodes:{PropertyName:"OPR",Name:"OCN",CategoryName:"OCA"}},{tableId:"eviivo-list-deductions",tableCode:"DED",columnCodes:{BusinessName:"DEP",Name:"DEN",Category:"DEC",Apply:"DEA",Pricing:"DDP"}},{tableId:"eviivo-list-categories",tableCode:"CCA",columnCodes:{BusinessName:"CCP",Category:"CCC",Code:"CCO",AssociatedTemplates:"CCA"}},{tableId:"eviivo-list-promotion",tableCode:"PRO",columnCodes:{BusinessName:"PRP",Name:"PPR",Type:"PRT",DiscountRules:"PDI",BookingWindow:"PWI",Status:"PST"}},{tableId:"eviivo-list-ratemap",tableCode:"RML",columnCodes:{BusinessName:"RMP",RoomTypeName:"RMR",RatePlanName:"RRP",Status:"RMS",Guests:"RMC",MaxAdults:"RMA",MaxChildren:"RMK",BoardBasis:"RMB",Cancellation:"RMN",Deposit:"RMD",Channels:"RMH"}},{tableId:"eviivo-list-reports",tableCode:"DRT",columnCodes:{Name:"DRN"}},{tableId:"eviivo-list-rateplans",tableCode:"CRS",columnCodes:{Status:"CRS",Channels:"CRC",RoomType:"CRR",RatePlan:"CRP",Notes:"CRN"}},{tableId:"eviivo-list-emails",tableCode:"MTL",columnCodes:{PropertyName:"MTP",GuestCycle:"MTC",EmailType:"MTT",Description:"MTD",Schedule:"MTS",Status:"MTA"}},{tableId:"eviivo-list-headers",tableCode:"HML",columnCodes:{PropertyName:"HPC",Universal:"HUC",HomePage:"HHC",WebPage:"HWC",Emails:"HEC",Invoice:"HIC",GuestRegistration:"HGC"}},{tableId:"eviivo-list-bookings",tableCode:"ATL",columnCodes:{BusinessName:"ATP",GuestSurname:"ATG",RoomName:"ATR",NumberOfNights:"ATN",Source:"ATS",IsMarkedBool:"ATH"}},{tableId:"eviivo-list-agreementtemplate",tableCode:"ATT",columnCodes:{TemplateName:"ATN",AppliesTo:"ATA"}},{tableId:"eviivo-list-agreement",tableCode:"AGT",columnCodes:{PropertyName:"AGP",AgreementDisplayName:"AGN",SignatureFirstName:"AGF",SignatureSurname:"AGS",OrderReference:"AGO",OrderCheckInPropertyDate:"AGC",AgreementSentPropertyDateTime:"AGS",SignaturePropertyDateTime:"AGX",Status:"AGA"}}],s=[],l="ATL",r="ATH",{init:function(e){var t,a,o,i;o=e.table,$.each(n,function(){this.tableId.toLowerCase()==o.toLowerCase()&&(i=this.tableCode)}),t=i,a=e.callback,eviivo.webcore.ajaxHelper.executeAjax({actionId:"get-listingtable-filter-data-".concat(t),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/get?tableCode=").concat(t),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){s=s.concat(e),(e=t)==l&&(null==(e=null==(e=s)?void 0:e.filter(function(e){return e.Key==r}))||0==e.length?s.push({PreferenceGroupType:l,Key:r,Value:'["false"]'}):null!=e&&"[]"==e[0].Value&&(e[0].Value='["false"]')),a()},failCallback:function(){a()}})},get:function(e,t){var a=i(e,t),o=null;return $.each(s,function(){this.Key==a&&(o=this.Value)}),null==o?"":(o=o.replaceAll("&quot;",'"'),JSON.parse(o))},post:function(e,t){var e=e.parents("table").attr("id"),a=eviivo.component.listing.filter.getColumnSearchStrings(e,t),e=i(e,t);eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(e),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:e,ColumnFilter:JSON.stringify(a)},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}})}})},1452:function(){var n,s;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.listingTable=window.eviivo.pms.listingTable||{},window.eviivo.pms.listingTable.orderActions=window.eviivo.pms.listingTable.orderActions||{},window.eviivo.pms.listingTable.orderActions=(n=[{tableId:"eviivo-list-rule",Order:"SRT"},{tableId:"eviivo-list-cutoff",Order:"BOR"},{tableId:"eviivo-list-cleaning",Order:"COR"},{tableId:"eviivo-list-charge",Order:"GOR"},{tableId:"eviivo-list-ownercharge",Order:"OOR"},{tableId:"eviivo-list-deductions",Order:"DEO"},{tableId:"eviivo-list-categories",Order:"CCS"},{tableId:"eviivo-list-promotion",Order:"POR"},{tableId:"eviivo-list-ratemap",Order:"RMO"},{tableId:"eviivo-list-reports",Order:"DRO"},{tableId:"eviivo-list-rateplans",Order:"RSO"},{tableId:"eviivo-list-emails",Order:"MTO"},{tableId:"eviivo-list-headers",Order:"HLO"},{tableId:"eviivo-list-bookings",Order:"ATO"},{tableId:"eviivo-list-agreementtemplate",Order:"ATD"},{tableId:"eviivo-list-agreement",Order:"AGD"}],s={},{post:function(e,t){var a,o,i=eviivo.util.getJSId($(this)[0].container);null!=i&&null!=t&&isNaN(t)&&(t={ColumnCode:(a=i,$.each(n,function(){this.tableId.toLowerCase()==a.toLowerCase()&&(o=this.Order)}),o),Order:JSON.stringify(t)})!=s&&(s=t,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-order",url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/order-post"),data:t,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){}}))}})},1276:function(){window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.ratePlanValidation=window.eviivo.eagle.ratePlanValidation||{},window.eviivo.eagle.ratePlanValidation={maxNightLimit28:function(e){var t=e.val();return e.removeClass("error"),""!==t&&(isNaN(parseInt(t))||28<t||t<0)?(e.addClass("error"),1):0},displayErrorMsg:function(e,t,a){"string"==typeof a&&(a=$(a)),0<e?(null!=a&&a.attr("disabled","disabled"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:t,autoHideDelay:16e3})):null!=a&&a.removeAttr("disabled")},maxStay:function(e,t){var t=isNaN(t)?t.val():t,a=isNaN(e)?e.val():e;return 0!==parseInt(a)&&parseInt(a)<parseInt(t)?(e.val(t),e.prop("value",t).trigger("input"),e.trigger("keepress"),1):0},minStay:function(e,t){var a=isNaN(e)?e.val():e,t=isNaN(t)?t.val():t;return 0!==parseInt(t)&&parseInt(a)>parseInt(t)?(e.val(t),e.prop("value",t).trigger("input"),e.trigger("keepress"),1):0}}},655:function(){function _(e,t){var a,o,i,n,s="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(s)return o=!(a=!0),{s:function(){s=s.call(e)},n:function(){var e=s.next();return a=e.done,e},e:function(e){o=!0,i=e},f:function(){try{a||null==s.return||s.return()}finally{if(o)throw i}}};if(Array.isArray(e)||(s=function(e,t){var a;if(e)return"string"==typeof e?l(e,t):"Map"===(a="Object"===(a=Object.prototype.toString.call(e).slice(8,-1))&&e.constructor?e.constructor.name:a)||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(e,t):void 0}(e))||t&&e&&"number"==typeof e.length)return s&&(e=s),n=0,{s:t=function(){},n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,o=new Array(t);a<t;a++)o[a]=e[a];return o}function t(){$(".s-rate").hide(),$(".rates-group").addClass("cp-radio-group_single")}function a(){$(".s-minlos").hide()}function o(){$(".s-maxlos").hide()}function D(){e=ue+N.businessId;var e=JSON.parse(localStorage.getItem(e));if(Array.isArray(e)){var t,a=_(e);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o&&o.target&&"seasonsfiltercode"===o.target.toLowerCase())return 1}}catch(e){a.e(e)}finally{a.f()}}}function i(e){switch(d(),e){case 0:$(".s-rate").show(),$(".rates-group").removeClass("cp-radio-group_single"),a(),o();break;case 1:t(),$(".s-minlos").show(),o();break;case 2:t(),a(),$(".s-maxlos").show();break;default:console.log("Undefined synopsis view mode"),Modernizr.localstorage&&localStorage.removeItem("Synopsis_ViewMode"+N.businessId)}}function n(e){e.__RequestVerificationToken=$("[name='__RequestVerificationToken']").val()}function E(e,t,a,o){eviivo.webcore.ajaxHelper.executeAjax({url:"".concat(eviivoSuiteApp,"/rates/RatePlanSynopsis"),data:{businessId:e,roomTypeId:t,ratePlanId:a,seasonId:o.data("period")},actionId:"getOccupancyRateForRatePlan-ratePlanId-".concat(a,"-seasonId-").concat(o.data("period")),method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){r();var t=N.synopsisTable.row(o),t=(o.find(".s-occs").find("svg").removeClass("hide"),o.find(".s-occs").find(".s-spinner").remove(),t.child(e).show(),o.next().find("td:first").addClass("md-table_inserted-row"),"en-gb");"en-us"===(t=null!=eviivo.eagle.basePageModelState?eviivo.eagle.basePageModelState.userCultureCode:t).toLowerCase()&&jQuery.each($("tr.occupancy-row"),function(){$(this).children(".s-monday").before($(this).children(".s-sunday"))}),i(eviivo.eagle.synopsisToolbar.getSelectedView())},failCallback:function(e){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:"Error occured"})}})}function F(){var e=this;e.PeriodId=0,e.RatePlanId=0,e.RoomTypeId=0,e.Occupancy=0,e.DayOfWeek=0,e.Rate=0,e.MinLos=0,e.MaxLos=0}function s(){this.RatesToUpdate=[],n(this)}function u(e,t,a,o,i){return e+"_"+t+"_"+a+"_"+o+"_"+i}function r(){A.removeClass("active").addClass("hide")}function c(){A.removeClass("hide").addClass("active")}function V(){var e=$("input.s-rate"),t=$("input.s-minlos"),a=$("input.s-maxlos");eviivo.webcore.decimals.restrictFieldsForDecimals(e,{decimalPlaces:2}),eviivo.webcore.decimals.restrictFieldsForDecimals(t,{decimalPlaces:0}),eviivo.webcore.decimals.restrictFieldsForDecimals(a,{decimalPlaces:0}),$("input.s-maxlos").on("change",function(){var e=0;$("input.s-maxlos").each(function(){e+=eviivo.eagle.ratePlanValidation.maxNightLimit28($(this))}),eviivo.eagle.ratePlanValidation.displayErrorMsg(e,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxStayValidationMsg,f)}),$("input.s-rate").on("input",U)}function U(e){e=$(e.target);if(null==e.parent().data("rate"))return console.error("Add a data - rate attribute so that there is a default rate");e.removeClass("error");var t=eviivo.webcore.decimals.fixDecimalSymbolSave(e.val(),N.decimalSymbol),a=parseFloat(e.parent().data("rate"));return 0===parseFloat(t)?(e.addClass("error"),setTimeout(function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.validation.numbers.min,autoHideDelay:4e3})},$.notify.errorAlreadyExists()?4e3:0),e.val(a)):void 0}function d(){$(".edited").each(function(e,t){var a,o=$(t),i=t.parentElement;if(o.hasClass("s-rate"))a=i.attributes["data-rate"].value;else if(o.hasClass("s-minlos"))a=i.attributes["data-minlos"].value;else{if(!o.hasClass("s-maxlos"))return void console.log("Undefined element");a=i.attributes["data-maxlos"].value}t.value=a,$(t).removeClass("edited")}),$(".selected").each(function(e,t){$(t).removeClass("selected")}),$("input[name='select_rates']:checked").each(function(){$(this).prop("checked",!1).trigger("change")})}function e(){$("input.cp-input").removeClass("error")}function G(){h.removeAttr("disabled");var e,t=$(this);"TD"===t.parent().parent().prop("tagName")?(e=t.closest("tr"),!0===t.prop("checked")?(e.find(":text:visible").addClass("edited"),e.find("td").each(function(){0<$(this).find(":text:visible").length&&$(this).addClass("selected")})):(e.find(":text").removeClass("edited"),e.find("td").removeClass("selected"))):"cbselect_rates-all"===t.attr("id")?function(e){e.is(":checked")?($("#synopsis-table").find(":text:visible").addClass("edited").closest("td").addClass("selected"),$("input[name='select_rates']").not(this).each(function(){$(this).prop("checked",!0)})):($("#synopsis-table").find(":text:visible").removeClass("edited").closest("td").removeClass("selected"),$("input[name='select_rates']").not(this).each(function(){$(this).prop("checked",!1)}),p())}(t):(e=t.closest("th").index()+1,e=$("#synopsis-table tr td:nth-child("+e+")"),!0===t.prop("checked")?(e.find(":text:visible").addClass("edited"),e.each(function(){0<$(this).find(":text:visible").length&&$(this).addClass("selected")})):(e.find(":text").removeClass("edited"),e.removeClass("selected"))),eviivo.eagle.synopsisToolbar.selectedCount($("#synopsis-table .selected").length)}function z(){$("#btnPromoSave").text(N.resources.SaveButton),i(eviivo.eagle.synopsisToolbar.getSelectedView()),V(),0===x.RatesToUpdate.length&&(d(),e())}function p(){x=new s,O={},f.attr("disabled","disabled"),h.prop("disabled",!0),eviivo.eagle.synopsisToolbar.selectedCount(0),$.notify.hideAll(),e()}function J(){d(),p()}function W(){n(x);var e=$.extend({},x);0<$("#rate-plans-list:visible").length?e.reloadRateList=!0:e.reloadRateList=!1,c(),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:eviivoSuiteApp+"/rates/updateRates",actionId:"updateRates",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:e,callback:function(e){$("#amountUpdate").val(""),$(".genericContainer").html(e),postInitFunctionTwo(),$("#rate-plans-list > #datatable-filtering").remove(),r(),p(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:N.resources.SaveSuccess})}})}function Q(e){var t=$(this),a=t.val().replace(" ",""),a=window.Globalize.parseNumber(a);if(t.removeClass("error"),isNaN(a)||parseFloat(a)<0)t.addClass("error");else{a=a||0,t.addClass("edited");var t=e.target.parentElement,o=parseFloat(t.attributes["data-rate"].value.replace(",",".")),i=parseInt(t.attributes["data-minlos"].value),n=parseInt(t.attributes["data-maxlos"].value),e=t.parentElement,t=parseInt(e.attributes["data-dow"].value),e=e.parentElement,s=e.attributes["data-period"].value,l=e.attributes["data-rpid"].value,r=e.attributes["data-rtid"].value,e=e.attributes["data-occ"].value,c=O[u(s,l,r,e,t)],d=eviivo.eagle.synopsisToolbar.getSelectedView();if(null!=c)switch(d){case 0:x.RatesToUpdate[c].Rate=parseFloat(a);break;case 1:x.RatesToUpdate[c].MinLos=parseInt(a);break;case 2:x.RatesToUpdate[c].MaxLos=parseInt(a)}else{var p=new F;switch(p.PeriodId=s,p.RatePlanId=l,p.RoomTypeId=r,p.Occupancy=e,p.DayOfWeek=t,d){case 0:p.Rate=parseFloat(a),p.MinLos=i,p.MaxLos=n;break;case 1:p.Rate=o,p.MinLos=parseInt(a),p.MaxLos=n;break;case 2:p.Rate=o,p.MinLos=i,p.MaxLos=parseInt(a)}d=x.RatesToUpdate.push(p);O[u(s,l,r,e,t)]=d-1}s=N.resources.unsavedChangesMessage,l=eviivo.webcore.notifier.types.warn;f.removeAttr("disabled"),$.notify.errorAlreadyExists()||$.notify.warnAlreadyExists()||eviivo.webcore.notifier.show({type:l,message:s})}}function K(){var e,t=$(this),a=t.parent().parent(),o=a.data("rpid"),i=a.data("rtid"),n=a.data("period"),s=a.data("bid");t.hasClass("active")?(t.toggleClass("active"),a.removeClass("md-table_highlight"),e=n,(n=a).next('tr[data-variant="header"]').remove(),$("tr.s-variant-row").each(function(){$(this).data("variant")==e&&$(this).remove()}),N.synopsisTable.row(n).child.hide()):(t.find("svg").addClass("hide"),t.append('<span class="spinner small-spinner no-background light-spinner active s-spinner spinner_inline">\n                        <span class="spin"></span>\n                    </span>'),t.toggleClass("active"),E(s,i,o,a))}function q(){var e=$(this).closest("tr"),t=e.find("input").filter(":visible:first").val();e.find("input").filter(":visible").val(t).trigger("input").trigger("change")}function Z(a,o,i){null!=o?($("[data-rpid="+w+"][data-occ= "+y+"]").each(function(e,t){$(t).attr("data-assocpromo",a.toString()),0===a.length?$(this).find(".promo-badge").addClass("inactive"):$(this).find(".promo-badge").removeClass("inactive"),$(t).find("span[data-tooltip-title]").attr("data-tooltip-title",i)}),$("[data-rpid="+w+"]").each(function(e,t){$(t).attr("data-occupancies",o)})):$("[data-rpid="+w+"]").each(function(e,t){$(t).attr("data-assocpromo",a.toString()),$(t).attr("data-occupancies",o),$(t).find("span[data-tooltip-title]").attr("data-tooltip-title",i),0===a.length?$(this).find(".promo-badge").addClass("inactive"):$(this).find(".promo-badge").removeClass("inactive")})}function b(e,t,a){return t>e.length-1?e:e.substr(0,t)+a+e.substr(t+1)}function X(e){console.log(e.Data),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:N.resources.PromotionSavedSuccsessfully})}function Y(e){var t=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(),a=eviivo.component.twoColumnListAssignment.getSelectedSortableItems(null,null,null,"title");$(e).closest("tr");if(!0===S){var o=JSON.parse("["+C+"]"),i=t,e=a,n=$.grep(o,function(e){return-1===$.inArray(e,i)}),s=$.grep(i,function(e){return-1===$.inArray(e,o)}),l=[];if(""!==P)for(var r=P.split(","),c=0;c<r.length;c++)l.push({PromotionId:r[c].split(" ")[1],Occupancies:r[c].split(" ")[0]});for(var d=0;d<n.length;d++){var p=$.grep(l,function(e){return e.PromotionId==n[d].toString()}),u=b(p[0].Occupancies,y-1,"0"),v=$.grep(l,function(e){return e.PromotionId!==n[d].toString()}),l=[];(l=v).push({PromotionId:n[d],Occupancies:u})}for(d=0;d<s.length;d++){if(null===(p=$.grep(l,function(e){return e.PromotionId===s[d].toString()}))||0===p.length){u="";for(var m=0;m<parseInt(pe);m++)u+="0";u=b(u,y-1,"1")}else u=b(p[0].Occupancies,y-1,"1");var f=$.grep(l,function(e){return e.PromotionId!==s[d].toString()});l=[],(l=f).push({PromotionId:s[d],Occupancies:u})}var h={};h.BusinessId=I,h.RatePlanId=w,h.PromoMappings=l,eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:eviivoSuiteApp+"/rates/saveOccVarRatePlansPromos",actionId:"saveOccVarRatePlansPromos",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,data:h,callback:X}),P="";for(var g=0;g<l.length;g++)P=P+l[g].Occupancies+" "+l[g].PromotionId+",";Z(i,P.slice(0,-1),e)}else h=t,e=a,eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:eviivoSuiteApp+"/rates/attachPromosToRatePlan",actionId:"attachPromosToRatePlan",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,traditional:!0,data:{rateplanId:w,selectedPromos:h,roomTypeId:de},callback:X}),Z(h,"",e)}function ee(){eviivo.component.twoColumnListAssignment.moveAllSortableFromRightToLeftNoCallBack();var e=C.split(",");if(null!=e)for(var t=0;t<e.length;t++)eviivo.component.twoColumnListAssignment.moveSortableItemToRightList(null,e[t])}function te(e){w=$(e.target).closest("tr").attr("data-rpid"),de=$(e.target).closest("tr").attr("data-rtid"),I=$(e.target).closest("tr").attr("data-bid"),C=$(e.target).closest("tr").attr("data-assocPromo"),P=$(e.target).closest("tr").attr("data-occupancies"),y=$(e.target).closest("tr").attr("data-occ"),pe=$(e.target).closest("tr").attr("data-maxOcc"),T=$(e.target).closest("tr").attr("data-ratePlanName"),S=$(e.target).closest("tr").data("hasocc"),0===L&&(L=I),!0===S?eviivo.eagle.assignPromosToRateplan.updateTitle("{0}, {1} {2}".format(T,N.resources.Occupancy,y)):eviivo.eagle.assignPromosToRateplan.updateTitle(T),L!==parseInt(I)?(eviivo.eagle.assignPromosToRateplan.getPromos({businessId:I,ratePlanId:w,occupancy:y},!0,ee),L=parseInt(I)):(eviivo.eagle.assignPromosToRateplan.showPromoPopup(),ee())}function ae(e){var t,e=$(e).closest(".rate-plan-row");t=e.data("bid"),R=(k=(R=null)==k?eviivo.util.safeFunction("eviivo.pms.businessSettingsAndDefaultMessages.getValue"):k)(t),B.BusinessId=R.Id,B.CurrencyCode=R.WorkingCurrencyCode,B.BusinessLocationChar2IsoCode=R.LocationIsoChar2Code,B.BusinessContentId=R.ContentId,B.CopiedRatePlanId=e.data("rpid"),B.CopiedRatePlanSeasonId=e.data("period")}function oe(e){var t,a,o,e=e.target,i=$(e).closest(".rate-plan-row");i&&(t=i.data("displaynamemask"),a=i.data("rateplanname"),$("#popupRateDisplayName").attr("placeholder",t),$("#popupRateName").attr("placeholder",a),t=i.data("cancellationpolicy"),a=i.data("boardbasis"),i.data("popupratedepositpolicy"),$('#popupRateCancelPolicy option[value="'+t+'"]').prop("selected",!0),$('#popupRateBoardBasis option[value="'+a+'"]').prop("selected",!0)),o=e,j?ne(o):H||(c(),i=eviivo.util.safeFunction("eviivo.pms.businessSettingsAndDefaultMessages.lazyLoad"),H=!0,i(function(){H=!(j=!0),ne(o),r()},ie))}function ie(){H=!1,r()}function ne(e){ae(e),eviivo.eagle.popup.show({popupBox:$("#popup-save-as"),closeButton:$("#popup-save-as .s-close"),draggableAnchor:$("#popup-save-as .s-drag-handle")})}function se(){!function(){if(""!==$("#popupRateName").val())return $("#popupRateName").removeClass("error"),1;$("#popupRateName").addClass("error")}()||(c(),B.Name=$("#popupRateName").val(),B.DisplayName=$("#popupRateDisplayName").val(),B.SelectedCancellationPolicy=$("#popupRateCancelPolicy").val(),B.SelectedDepositPolicy=$("#popupRateDepositPolicy").val(),B.SelectedBoardBasis=$("#popupRateBoardBasis").val(),B.AdjustRateType=0<$("input[id=adjust-price-percent]:checked").length?M.AdjustByProcent:M.AdjustByAmount,B.AdjustRateValue=$("#AdjustPriceWith").val(),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:eviivoSuiteApp+"/rates/copyRatePlan",actionId:"copyRatePlan",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:B,callback:function(e){$(".genericContainer").html(e),eviivo.eagle.popup.hide(),r(),p(),$("#rate-plans-list > #datatable-filtering").remove(),postInitFunctionTwo(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:N.resources.SaveSuccess})},failCallback:function(){r(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:N.resources.RatePlanNotSaved})}}))}function v(){"0"==g.val()||eviivo.webcore.parsers.stringToBool(N.hasOnlyEvergreenPeriods)||$("td[data-period='0']").parent().hide()}function m(){$("td[data-period='0']").parent().show()}function le(e){e=$(e.target).closest(".md-table_action-select");$(".md-table_action-select").not(e).removeClass("md-table_action-list-open"),e.toggleClass("md-table_action-list-open")}function re(e){var t=$(".md-table_action-select");t.is(e.target)||0!==t.has(e.target).length||t.removeClass("md-table_action-list-open")}function ce(){var e,a,t=$(this),o=t.attr("data-link");e=N.resources.RatePlanDeleteMsg,a=o,eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.info,style:eviivo.webcore.notifier.styles.withTwoActions,message:e,autoHide:eviivo.webcore.notifier.delays.long,buttonTwo:N.resources.RatePlanDelete,buttonOne:N.resources.RatePlanDeleteCancel,selector:t,position:eviivo.webcore.notifier.positions.topRight}),$(".btn-one").addClass("btn btn-secondary"),$(".btn-two").addClass("btn btn-right s-delete-ratePlan"),$(".s-delete-ratePlan").on("click",function(){var e,t;e=a,(t=$('.s-delete[data-link="'.concat(e,'"]'))).find("svg").addClass("hide"),t.append('<span class="spinner small-spinner no-background light-spinner active s-spinner spinner_inline">\n                        <span class="spin"></span>\n                    </span>'),eviivo.webcore.ajaxHelper.executeAjax({url:e,actionId:"deleteRatePlan",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){$(".genericContainer").html(e),$("#rate-plans-list > #datatable-filtering").remove(),postInitFunctionTwo(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:N.resources.RatePlanDeleted})},failCallback:function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:N.resources.RatePlanNotDelete}),t.find("svg").removeClass("hide"),t.find(".s-spinner").remove()}})})}var f,h,g,w,de,C,P,y,pe,T,I,S,A,k,R,x,O,L,N,M,B,ue,j,H;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.ratePlansList=window.eviivo.eagle.ratePlansList||{},window.eviivo.eagle.ratePlansList=(O={},N={currencySymbol:x=null,defaultCultureCode:null,synopsisTable:null,decimalSymbol:null},M={setTo:L=0,AdjustByAmount:1,AdjustByProcent:2},B={Id:"",BusinessId:null,CurrencyCode:null,BusinessContentId:null,BusinessLocationChar2IsoCode:null,Name:"",DisplayName:"",CancellationPolicy:"",DepositPolicy:"",BoardBasis:"",AdjustRateType:"",AdjustRateValue:0},H=j=!(ue="Synopsis_Filters"),{init:function(e){var t,a;N=$.extend(N,e),L=eviivo.eagle.basePageModelState.businessId,x=new s,setTimeout(function(){null!=Globalize&&null!=Globalize.cldr&&(N.decimalSymbol=Globalize._numberSymbol("decimal",Globalize.cldr))},750),$("div.genericContainer").tip(),A=$("#loading-overlay"),(e=$("#synopsis-table")).on("input","input.cp-input",Q),e.on("click",".copy-week-per-room",q),e.on("click",".s-occs",K),e.on("change","input[name='select_rates']",G),e.on("draw.dt",z),e.on("click",".add-promo-button",te),e.on("click",".s-content-copy",oe),e.on("click",".s-toggle-row-menu",le),V(),eviivo.pms.switchBusiness.init(),i(eviivo.eagle.synopsisToolbar.getSelectedView()),(f=$("#btn-save")).on("click",W),(h=$("#btn-cancel")).on("click",J),$("#btnPromoSave").text(N.resources.SaveButton),eviivo.eagle.assignPromosToRateplan.init({resources:N.resources,onSaveEvent:Y}),eviivo.webcore.decimals.restrictFieldsForDecimals($("#AdjustPriceWith"),{decimalPlaces:2,acceptMinus:!0}),$("#btnConfirmSaveAs").on("click",se),(g=$("#SeasonsFilterCode")).on("change",function(){("0"===$(this).val()?m:v)()}),$("#RoomTypeFilterCode").on("change",v),$("#RatePlanFilterCode").on("change",v),!D()&&eviivo.webcore.parsers.stringToBool(N.noActivePeriodsForCurrentDateShowEvergreen)?(m(),g.val(0).change()):v(),$(document).on("click","a.paginate_button",function(){v()}),$(document).on("click","button.cp-tag_action",function(){v()}),t=$("input.s-minlos"),$(t).on("change",function(){var e=0;$(t).each(function(){e+=eviivo.eagle.ratePlanValidation.minStay($(this),$(this).parent().find("input.s-maxlos"))}),eviivo.eagle.ratePlanValidation.displayErrorMsg(e,eviivo.eagle.translations.resources.newRatePlan.validationMsg.minMaxValidationMsg,null)}),a=$("input.s-maxlos"),$(a).on("change",function(){var e=0;$(a).each(function(){e+=eviivo.eagle.ratePlanValidation.maxStay($(this),$(this).parent().find("input.s-minlos"))}),eviivo.eagle.ratePlanValidation.displayErrorMsg(e,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxMinValidationMsg,null)}),$(document).on("keyup",function(e){e.keyCode===$.ui.keyCode.ESCAPE&&$(".md-table_action-select").removeClass("md-table_actions-list-open")}),$(document).on("mouseup",re),$(document).on("click",".s-delete",ce)},updateViewMode:i,adjustInputs:function(a,o,i){var n;isNaN(window.Globalize.parseNumber(o))||(n="en-gb",null!=eviivo.eagle.basePageModelState&&(n=eviivo.eagle.basePageModelState.userCultureCode),o=window.Globalize.parseNumber(o),$("#synopsis-table").find("td.selected input.edited:text:visible").each(function(){var e,t=window.Globalize.parseNumber($(this).val());switch(a){case M.setTo:o<0&&(o=0),$(this).val(o.toLocaleString(n));break;case M.AdjustByAmount:(e="+"===i?t+o:"-"===i?t-o:0)<0?$(this).val(0):$(this).val(e.toLocaleString(n));break;case M.AdjustByProcent:(e="+"===i?t+t*o/100:"-"===i?t-t*o/100:0)<0&&(e=0),$(this).val(e.toLocaleString(n))}$(this).trigger("input").trigger("change")}))},initHideEvergreen:v,initShowEvergreen:m,toggleRowMenu:le})},6887:function(){function o(){var e=$("#roomTypesDropDown").val();window.location.href=C.createNewRatePlanURL.replace("idPlaceHolder",e)}function i(){var e=$(this);"table"===e.val()&&x.removeClass("hide"),"wizard"===e.val()&&x.addClass("hide")}function n(){var e=c(),t=g(),a=t===j.Policies?"policies":"rates";e!==a&&(h(),("policies"===e?u:v)()),"rates"==a?eviivo.eagle.ratePlansList.updateViewMode(t):$("#datatable-filtering").remove(),f(t),l(a,t)}function s(){var e;$(this).prop("disabled",!0),$("#loading-overlay").removeClass("hide"),e=jQuery("#useRatePlanTable").is(":checked")?eviivoSuiteApp+"/rates/createIndependentRatePlan?roomTypeId="+R.val():eviivoSuiteApp+"/ratePlan",window.location.href=e}function l(e,t){"rates"===e?($(".rates-group").removeClass("hide"),$(".policies-group").addClass("hide"),t!==j.Rates?($(".rates-group .rates-buttons-group").addClass("hide"),$(".rates-group .min-max-stay").removeClass("hide"),$("#radio_Set").attr("checked",!0)):($(".rates-group .rates-buttons-group").removeClass("hide"),$(".rates-group .min-max-stay").addClass("hide"))):($(".rates-group").addClass("hide"),$(".policies-group").removeClass("hide")),$(P).val(null)}function r(){if($(P).removeClass("error"),"2"===localStorage.getItem("Synopsis_ViewMode"+C.businessId)){var e=eviivo.eagle.ratePlanValidation.maxNightLimit28($(P));if(eviivo.eagle.ratePlanValidation.displayErrorMsg(e,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxStayValidationMsg,null),0<e)return}var t;0===$("#synopsis-table").find("td.selected input.edited:text:visible").length?eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:C.selectRowValidation}):(e=parseInt($("#adjustSelect option:selected").val()),e=3===(t=parseInt($("#i-want-to-option option:selected").val()))?0:2===e?1:2,t=1===t?"+":2===t?"-":"","0"===localStorage.getItem("Synopsis_ViewMode"+C.businessId)?eviivo.eagle.ratePlansList.adjustInputs(e,$(P).val(),t):"1"!==localStorage.getItem("Synopsis_ViewMode"+C.businessId)&&"2"!==localStorage.getItem("Synopsis_ViewMode"+C.businessId)||eviivo.eagle.ratePlansList.adjustInputs(0,$(P).val(),t))}function c(){return m()!==j.Policies||null==m()?"rates":"policies"}function d(){var e=$("#createNewRatePlanModal");e.hasClass("md-modal_overlay-show")?e.removeClass("md-modal_overlay-show"):e.addClass("md-modal_overlay-show")}function p(e){return eviivo.webcore.queryStringHelper.getAllKeys(window.location.href)[e]}function u(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"getRatePlansList",url:C.ratesPlansListURL,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){t(),$(".genericContainer").html(e),postInitFunctionTwo()}})}function v(){eviivo.webcore.ajaxHelper.executeAjax({actionId:"getRateMapList",url:C.rateMapListURL,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){t(),$(".genericContainer").html(e),postInitFunctionTwo()}})}function m(){var e;return Modernizr.localstorage?(null==(e=localStorage.getItem("Synopsis_ViewMode"+C.businessId))&&(e=0),parseInt(e)):0}function f(e){Modernizr.localstorage&&localStorage.setItem("Synopsis_ViewMode"+C.businessId,e),2===e?($(P).prop("type","number"),$(P).attr("max","28"),$(P).attr("min","1")):($(P).prop("type","text"),$(P).removeClass("error"),$(P).removeAttr("max"),$(P).removeAttr("min"))}function t(){S.removeClass("active").addClass("hide")}function h(){S.removeClass("hide").addClass("active")}function g(){switch($("#display-select option:selected").attr("id")){case"r_Rates":return j.Rates;case"r_MLOS":return j.MinStay;case"r_maxStay":return j.MaxStay;case"r_policies":return j.Policies;default:return j.Rates}}var b,w,C,P,y,T,I,S,A,k,R,x,O,L,N,M,B,j,H;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.synopsisToolbar=window.eviivo.eagle.synopsisToolbar||{},window.eviivo.eagle.synopsisToolbar=(j={Rates:0,MinStay:1,MaxStay:2,Policies:3},H=!0,{init:function(e){C=$.extend(C,e),b=$(".rates-buttons input[type='radio']"),S=$("#loading-overlay"),w="#applyAmountButton",I=$("#createRatePlanButton"),P="#amountUpdate",$("input[name='radio-toggle-update']"),T=$(".s-close-modal"),y=$("#addRatePlan"),A=$("input[name='rate-plan-method']"),k=jQuery("#next-step-btn"),R=jQuery("#srt"),x=jQuery("#createNewRatePlanModal .mod-form"),L="#savedRatePlanPopup",N="#confirm-btn",M="#btn-save",B="#display-select",updatePanel=$("#updatePanel"),b.on("click",n),$(updatePanel).on("click",w,r),I.on("click",o),T.on("click",d),y.on("click",d),A.on("change",i),k.on("click",s);var t=p("filterdrateplanname")&&p("filterdrateplanname").replace("_"," "),a=p("filteredroomtypeid"),e=t&&0<t.length?j.Rates:m();h(),(e===j.Policies?v:u)(),f(e),$(document).ajaxSuccess(function(){t&&$("#RatePlanFilterCode").find("option:contains("+t+")").attr("selected","selected"),a&&$("#RoomTypeFilterCode").find("option[value="+a+"]").attr("selected","selected"),$("#filterrow .s-select-filter > select").trigger("change")}),l(c(),g()),$(".s-draggable").draggable({handle:".s-drag-handle",height:"auto",cancel:".s-cancel"}),$(L).addClass("hide"),eviivo.eagle.dailyRatesToolbar.initSynopsis(C),$(B).on("change",function(){var e=$("#display-select option:selected").attr("id");H||void 0!==$(M).attr("disabled")||"r_policies"==$.data(this,"current")?($.data(this,"current",$(this).val()),H=!1,eviivo.eagle.dailyRatesToolbar.setAdjustmentDisplaySelection(e),eviivo.eagle.dailyRatesToolbar.changeBulkUpdateOptions(),n(),$(M).attr("disabled",!0)):($(".savedRatePlanPopup-p").html(C.changeViewUnsavedChangesMsg),$("#savedRatePlanPopup").find(".h2").html(""),$(N).attr("href","javascript:void(0)"),$(L).addClass("md-modal_overlay-show").removeClass("hide"),O=e,$(this).val($.data(this,"current")))}),$(L).on("click","#cancel-btn",function(e){$(L).removeClass("md-modal_overlay-show").addClass("hide")}),$(L).on("click",N,function(){$(L).removeClass("md-modal_overlay-show").addClass("hide"),$(M).attr("disabled",!0),$(B).val(O).trigger("change")})},getSelectedView:g,enableAdjustmentButtons:function(e){e?($("#updatePanel :input").removeAttr("disabled"),$("#updatePanel :button").removeAttr("disabled")):($("#updatePanel :input").attr("disabled","disabled"),$("#updatePanel :button").attr("disabled","disabled"))},selectedCount:function(e){$("#selectedCount").text(e)},enableBulkEditButton:function(e){e?$(".policies-group").removeAttr("disabled"):$(".policies-group").attr("disabled","disabled")}})},6598:function(){function i(){var e=this;e.Id=0,e.BusinessId=0,e.IsActive=!1,e.IsLocked=!1,e.BoardBasisName="",e.CancellationClassName="",e.IsVariant=!1,e.DepositClassName=""}function t(){this.RatePlansToUpdate=[]}function n(){return 0<$("input[name=eviivo-list-ratemap]:checked").length}function s(e){h(e).find("option").each(function(e,t){t=h(t);0===t.val().indexOf("A")&&t.attr("disabled","disabled").prop("disabled",!0)})}function a(){var e=h(C.firstSwitchActive),t=h(C.switch),a=t.siblings(".checkbox-on"),o=t.siblings(".checkbox-off");t.is(":checked")?(o.removeClass("checked"),a.addClass("checked"),0<b&&e.removeClass("hide")):(o.addClass("checked"),a.removeClass("checked"),e.addClass("hide"))}function o(e){console.log("onRatePlanSelect");var t,a,o=n();eviivo.eagle.synopsisToolbar.enableBulkEditButton(o),console.log(w.RatePlansToUpdate),1==o&&(t=(o=$(this)).closest("tr"),h(e.target).is(":checked")?(g+=1,!1===o.closest("tr").data("islocked")&&(b+=1),(e=new i).Id=t.data("rpid"),e.BusinessId=t.attr("data-bid"),e.IsActive=t.data("isactive"),e.IsLocked=t.data("islocked"),e.IsVariant=t.data("isvariant"),e.BoardBasisName=t.data("bb"),e.CancellationClassName=t.data("ccc"),e.DepositClassName=t.data("dcc"),w.RatePlansToUpdate.push(e)):(--g,!1===o.closest("tr").data("islocked")&&--b,a=t.data("rpid"),w.RatePlansToUpdate=w.RatePlansToUpdate.filter(function(e){return e.Id!==a})))}function l(){h(C.spinnerOverlay).removeClass("active").addClass("hide")}function r(){var a,o,e=h(".s-warning-message"),t="";0===b?(t=eviivo.eagle.translations.resources.rateMapList.warnAllAreLockedPolicies,h("#show-bulk-edit-popup select").attr("disabled","disabled")):(h("#show-bulk-edit-popup select").removeAttr("disabled"),c()&&(t=eviivo.eagle.translations.resources.rateMapList.warnAlertFirstSwitchToActiveStatus),b!=g&&(t=eviivo.eagle.translations.resources.rateMapList.warnSomeAreLockedPolicies)),a=null,o=!1,h(C.btnBulkEditRateplans).each(function(e,t){t=h(t).attr("data-bid");null!=a&&a!=t?(s(C.rateCancellationClasses),s(C.rateDepositClasses),o=!0):a=t}),""!==(t=o?eviivo.eagle.translations.resources.rateMapList.warnBulkEditRateplansForDifferentBusiness+(""!==t?"<br/><br/>"+t:""):t)?(e.removeClass("hide"),e.find("i").after(t)):e.addClass("hide")}function c(){return!!h(".rate-plan-status .checkbox-on").hasClass("checked")}function d(){if(!P){P=!0;for(var e=0;e<w.RatePlansToUpdate.length;e++)0==w.RatePlansToUpdate[e].IsLocked&&(h('select[name="BoardBasisClass"]').val()&&(w.RatePlansToUpdate[e].BoardBasisName=h('select[name="BoardBasisClass"]').val()),h('select[name="CancellationClass"]').val()&&(w.RatePlansToUpdate[e].CancellationClassName=h('select[name="CancellationClass"]').val()),h('select[name="DepositClass"]').val())&&(w.RatePlansToUpdate[e].DepositClassName=h('select[name="DepositClass"]').val()),w.RatePlansToUpdate[e].IsActive=c();h(C.spinnerOverlay).removeClass("hide").addClass("active"),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:eviivoSuiteApp+"/api/rates/UpdatePolicies",actionId:"updatePolicies",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:w.RatePlansToUpdate,callback:function(e){e&&(v(),eviivo.eagle.synopsisToolbar.enableBulkEditButton(!1),eviivo.pms.rateMapList.refresh(),eviivo.webcore.notifier.show({message:f.resources.SaveSuccess,type:eviivo.webcore.notifier.types.success})),P=!1,eviivo.eagle.popup.hide(),l()},failCallback:function(){eviivo.eagle.popup.hide(),l(),P=!1}})}}function p(){1==n()&&null!=w.RatePlansToUpdate&&0!==w.RatePlansToUpdate.length&&eviivo.webcore.ajaxHelper.executeAjax({actionId:"eviivo.eagle.rateMapList.getBulkEditRateplan",url:eviivoSuiteApp+"/rates/GetBulkEditRateplan",data:{cultureCode:eviivo.eagle.basePageModelState.userCultureCode,businessId:w.RatePlansToUpdate[0].BusinessId},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){h(e).appendTo(h("body")),m(h(C.rateBoardBasis)),m(h(C.rateCancellationClasses)),m(h(C.rateDepositClasses)),r(),eviivo.eagle.popup.show({popupBox:h("#show-bulk-edit-popup"),closeButton:h("#show-bulk-edit-popup").find("#cancel, .s-close"),onClose:function(){h("#show-bulk-edit-popup").parents(".pop-up-table").remove()}})}})}function u(e){v(),$(this).is(":checked")?h(C.selectRateplansCheckbox).each(function(){var e=$(this);e.prop("checked",!0).trigger("change"),e.parents("tr").addClass("selected")}):h(C.selectRateplansCheckbox).each(function(){var e=$(this);e.prop("checked",!1).trigger("change"),e.parents("tr").removeClass("selected")})}function v(){w.RatePlansToUpdate=[],b=g=0}function m(e){e.prepend(h("<option>",{value:"",text:"",selected:!0}))}var f,h,g,b,w,C,P,y,T,I;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.rateMapList=window.eviivo.eagle.rateMapList||{},window.eviivo.eagle.rateMapList=(P=!(C={btnBulkEditPolicies:"#save-bulk-edit-policies",btnSelectAllPolicies:"#ratemap-target-select-all",btnShowBulkEditPoliciesPopup:"#bulk-edit-policies",btnBulkEditRateplans:"input[name='bulk-edit-rate-plan']:checked",selectRateplansCheckbox:".s-select-row",ratePlansTable:"#eviivo-list-ratemap",switch:".switch",firstSwitchActive:".first-switch-active",rateBoardBasis:"#rateBoardBasis",rateCancellationClasses:"#rateCancellationClasses",rateDepositClasses:"#rateDepositClasses",spinnerOverlay:"#bulk-edit-spinner-overlay",moreMenuToggle:".s-toggle-row-menu"}),y={btnShowBulkEditPoliciesPopup:null,btnBulkEditRateplans:null,ratePlansTable:null},T=null,I="eviivo.eagle.rateMapList",{init:function(e){h=$,f=h.extend(f,e),w=new t,v(),T={click:eviivo.util.namespacedEvent("click",I),change:eviivo.util.namespacedEvent("change",I)},y.btnShowBulkEditPoliciesPopup=h(C.btnShowBulkEditPoliciesPopup),y.ratePlansTable=h(C.ratePlansTable),y.ratePlansTable.on(T.change,C.selectRateplansCheckbox,o),y.ratePlansTable.off(T.click,C.btnSelectAllPolicies),y.ratePlansTable.on(T.click,C.btnSelectAllPolicies,u),y.btnShowBulkEditPoliciesPopup.on(T.click,p),h(document).on(T.click,C.btnBulkEditPolicies,d),h(document).on(T.click,C.switch,a),y.ratePlansTable.on(T.click,C.moreMenuToggle,eviivo.eagle.ratePlansList.toggleRowMenu),eviivo.pms.switchBusiness.init()},onRatePlanSelect:o})},4174:function(){function t(){var e=$(this);i=e.attr("data-id"),n=e.attr("data-rtid"),s=e.attr("data-name"),l=e.attr("data-bid"),r=e.attr("data-autoOpen"),eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:"GetChannelsForRatePlan",actionId:"getChannelsForRatePlan",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{businessId:l,ratePlanId:i,roomTypeId:n,ratePlanName:s,autoOpenChannels:r},callback:function(e){$("#divAssignChannels").html(e),eviivo.eagle.assignChannelsToRateplan.init({hasChannelsClaim:o.hasChannelsClaim,showNotifyMessage:!1,resources:{ChannelLeftColumn:o.resources.ChannelLeftColumn,ChannelRightColumn:o.resources.ChannelRightColumn,ChannelPopupTitle:o.resources.ChannelPopupTitle,OpenAll:o.resources.OpenAll,CloseAll:o.resources.CloseAll,Open:o.resources.Open,Close:o.resources.Close,Save:o.resources.Save,ChannelOption:o.resources.ChannelOption}}),eviivo.eagle.assignChannelsToRateplan.showChannelPopup()}})}function a(){var e=eviivo.component.twoColumnListAssignment.getSelectedSortableItems($("#popup-sort-channels"),null,!0),t=$("#chkOption").is(":checked");eviivo.webcore.ajaxHelper.executeAjax({unauthorizedCallback:eviivo.eagle.authorization.unauthorizedHandler,url:"OpenChannelsForRatePlan",actionId:"openChannelsForRatePlan",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,data:{businessId:l,ratePlanId:i,openChannels:e,autoOpenChannels:t},callback:function(){eviivo.eagle.assignChannelsToRateplan.hideChannelPopup(),eviivo.pms.rateMapList.refresh()}})}var o,i,n,s,l,r,c;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.rateMapList=window.eviivo.pms.rateMapList||{},window.eviivo.pms.rateMapList.Channels=window.eviivo.pms.rateMapList.Channels||{},window.eviivo.pms.rateMapList.Channels=(c={ratePlansTable:"#eviivo-list-ratemap"},{init:function(e){o=jQ.extend(o,e),$(c.ratePlansTable).on("click",".s-channels-link",t),$(document).on("click","#btnChannelSave",a)}})},5469:function(){var n,t,e;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.rateMapList=window.eviivo.pms.rateMapList||{},window.eviivo.pms.rateMapList=(e=!(t={listTable:"#eviivo-list-ratemap",listTableEdit:".s-listing-table-edit",bulkOptions:"#bulk-edit-policies"}),{init:function(e){n=e,eviivo.pms.listingTable.filterActions.init({table:"eviivo-list-ratemap",callback:function(){eviivo.component.listing.postInitRefreshDataTableSpecific(t.listTable)}})},dataLoadSuccess:function(){e?eviivo.component.listing.filter.updateAllTableFilters(t.listTable):(eviivo.eagle.rateMapList.init(n),eviivo.pms.rateMapList.Channels.init(n))},onRowCreatedDataTable:function(e,t,a,o,i){(e=$(e)).attr("data-bid",t.BusinessId),e.attr("data-isactive",t.IsActive),e.attr("data-islocked",t.IsLocked),e.attr("data-isvariant",t.IsVariantRatePlan),e.attr("data-rpid",t.Id),e.attr("data-bb",t.BoardBasisCode),e.attr("data-ccc",t.CancellationCode),e.attr("data-dcc",t.DepositCode)},rowSelectionCallback:function(e){},ratePlanNameCustomRender:function(e,t,a){return'<a href="/suite/rateplan/edit?ratePlanId='.concat(a.Id,"&businessId=").concat(a.BusinessId,'" class="cell-value s-manage"\n                   data-tooltip-pos="top" title="').concat(e,'" data-tooltip-title="').concat(e,'" data-tooltip="title" >\n                    ').concat(e,"\n                </a>")},channelsCustomRender:function(e,t,a){return"<span id='channelRatePlan_".concat(a.Id,'\' class="md-table_text-center">\n                    <a data-bid="').concat(a.BusinessId,"\" data-id='").concat(a.Id,"' data-rtid='").concat(a.RoomTypeId,"' data-name='").concat(a.RoomTypeName,"-").concat(a.RatePlanName,"' data-autoOpen=\"").concat(a.AutoOpenChannels,'" class="s-channels-link btn-table btn-table_primary">').concat(e,"</a>\n                </span>")},editCustomRender:function(e,t,a){var o="",i=(n.newScreensAccess&&!a.IsVariantRatePlan&&(o='<a href="/suite/rateplan/edit?ratePlanId='.concat(a.Id,"&businessId=").concat(a.BusinessId,'" class="md-table_action md-table_action-item md-table_action-interchange">\n                        <svg class="icon-bg icon-bg-wand"><use xlink: href="#icon-bg-wand"></use></svg>\n                    </a>')),"");return n.channelManagerAccess||(i='<a href="/suite/rates/managerateplans?ratePlanId='.concat(a.Id,"&roomTypeId=").concat(a.RoomTypeId,'" target="rateplan" class="md-table_action md-table_action-item md-table_action-interchange s-manage">\n                        <svg class="icon-bg icon-bg-table btn-icon"><use xlink: href="#icon-bg-table"></use></svg>\n                    </a>')),"".concat(o).concat(i)},refresh:function(){e=!0,eviivo.component.listing.postInitRefreshDataTableSpecific(t.listTable)}})}},o={};function i(e){var t=o[e];return void 0!==t||(t=o[e]={exports:{}},a[e](t,t.exports,i)),t.exports}i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,{a:t}),t},i.d=function(e,t){for(var a in t)i.o(t,a)&&!i.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";i(6887),i(655),i(6598),i(5469),i(4174),i(9406),i(280),i(1276),i(9929),i(7887),i(1452)}();
//# sourceMappingURL=rateSynopsis.min.js.map