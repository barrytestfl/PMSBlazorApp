var a={5785:function(){function o(){if(null!=l&&null!=s&&null!=r){var e=l.offset().left,t=l.offset().top;switch(r.options.position){case c.bottomLeft:t=t+l.outerHeight()+s.topOffset;break;case c.topRight:e=e+l.outerWidth()+s.leftOffset,r.options.toLeft&&(e-=r.outerWidth(!0));break;case c.bottomRight:t=t+l.outerHeight()+s.topOffset,e=e+l.outerWidth()+s.leftOffset,r.options.toLeft&&(e-=r.outerWidth(!0));break;case c.middleRight:t=t-r.outerHeight()/2+s.topOffset,e=e+l.outerWidth()+s.leftOffset,r.options.toLeft&&(e-=r.outerWidth(!0))}r.css({top:t,left:e}),r.show();var a=$(".body-wrapper"),i=(a=null==a?$(".mod-diary-outer"):a).outerHeight(!0),a=a.outerWidth(!0),o=(null==i&&(i=window.innerHeight),null==a&&(a=window.innerWidth),r.find(".popup-outer-element")),n=(o=null!=o&&0!==o.length?o:r).outerHeight(!0);i<t+n&&0<i&&(t=t-n-l.outerHeight(!0));i=(i=o.outerWidth(!0))||r.outerWidth();r.css({top:t=t<0?0:t,left:e=(e=a<e+i&&0<a?a-i:e)<0?0:e})}}function t(e){s=l=r=n=null;for(var t=0;t<a.length;t++)a[t].hideMenu();"function"==typeof e&&e()}var a,n,l,r,s,d,c;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.contextMenu=window.eviivo.eagle.contextMenu||{},window.eviivo.eagle.contextMenu=(types={NotesContextMenu:1},d={position:s=r=l=n=null,toLeft:null,onshow:null,onhide:null,toggleCallback:null,type:null,outsideClose:!(a=[])},c={topLeft:1,topRight:2,bottomLeft:3,bottomRight:4,middleRight:5},$.fn.contextMenu=function(e){this.options=$.extend({},d,e);var i=this;return $(document).on("keyup",function(e){27==e.keyCode&&t()}),i.showMenu=function(e){var t=$.extend({target:null,event:null,callback:null,topOffset:0,leftOffset:0,outsideClose:!1},e),a=!1;n===t.target[0]&&("function"==typeof i.options.toggleCallback&&i.options.toggleCallback(t.event),a=!0),null!=e.position&&(i.options.position=e.position),r&&r.hideMenu(null,null,!1),r=i,!0===a?r=n=null:(n=t.target[0],l=(s=t).target,o(),!0===t.outsideClose&&$(document).on("click.eviivo_eagle_contextMenu",function(e){var t=i;$(e.target).closest(t.options.popup).length||!1===t.isNewPopup&&t.hideMenu(),t.isNewPopup=!1}),"function"==typeof t.callback&&t.callback(t.event),"function"==typeof i.options.onshow&&i.options.onshow(t.event),n=t.target[0])},i.hideMenu=function(e,t,a){i.hide(),s=l=n=null,"function"==typeof t&&t(e),"function"==typeof i.options.onhide&&!1!==a&&i.options.onhide(e),$(document).off("click.eviivo_eagle_contextMenu")},i.setIsNewPopup=function(e){i.isNewPopup=e},a.push(i),i},{closeAll:t,outsideClick:function(e){var t,a;return e.pageX<$("#rooms-left-container").outerWidth(!0)||(a=t=0,a=null!=$("#body-content-roomview").offset()?(t=$("#body-content-roomview").offset().top,$(".body-content-roomview-wrap").outerHeight(!0)+t):(t=$(".mod-diary-outer").offset().top,$(".mod-diary-outer").outerHeight(!0)+t),e.pageY<t)||e.pageY>a},insideClick:function(e){var t,a;return!!r&&(a=t=!1,e.pageX>=r.offset().left&&e.pageX<=r.offset().left+r.outerWidth(!0)&&(t=!0),e.pageY>=r.offset().top&&e.pageY<=r.offset().top+r.outerHeight(!0)&&(a=!0),t)&&a},getActiveMenuType:function(){return null==r?null:r.options.type},positions:c,types:types,resetPositionOfContext:o})},1759:function(){function H(){var e=$(window).height(),t=parseInt($("#DailyRatesDetail").css("padding-top")),a=$(".mod-sticky-footer").height(),i=$("#Rates-table").height(),e=e-t-a;e<i?$(".table-scroll-left, .table-scroll-right").css({top:e/2}):$(".table-scroll-left, .table-scroll-right").css({top:i/2})}function V(e){var t;void 0!==history.pushState&&(t={},t=eviivo.webcore.queryStringHelper.getAllKeys(window.location.href,t),e=eviivo.webcore.datetime.evStandardIso8601DateExtended(e),eviivo.webcore.queryStringHelper.updateKey(t,"startdate",e),eviivo.webcore.queryStringHelper.updateHistory(t))}function F(e){e=eviivo.webcore.datetime.evStandardIso8601DateExtended(e);eviivo.webcore.queryStringHelper.persistNavigationSegment(e,"startdate","s-referrer-calendar-persistent")}function i(e){e=d(e);eviivo.pms.diary.calendarNavigator.setDate(e),V(e),F(e),s(d(),c()),x.toolBar.changeBulkDateRangeValues(d(),c()),L=[]}function d(e){return null!=e?new Date($("#diary-datepicker").datepicker("getDate").addDays(e)):$("#diary-datepicker").datepicker("getDate")}function c(){return new Date($("#diary-datepicker").datepicker("getDate")).addDays(30)}function U(e){0===e.button&&(e.preventDefault(),e.stopPropagation(),Ee=!0,xe=e.pageX,Ie=$(".table-fixed").scrollLeft(),$(".daily-rates-table thead").scrollLeft())}function Y(e){Ee&&(e.preventDefault(),e.stopPropagation(),e=e.pageX,$(".table-fixed").scrollLeft(Ie-e+xe),$(".daily-rates-table thead").scrollLeft(Ie-e+xe))}function W(){Ee=!1}function X(){var i=$("#allButton"),o=eviivo.webcore.loadingSpinner.create({container:i,theme:eviivo.webcore.loadingSpinner.themes.none,size:eviivo.webcore.loadingSpinner.sizes.small,colour:eviivo.webcore.loadingSpinner.colours.light});i.find(".spinner").css("position","absolute"),null!=o&&o.start(),i.attr("disabled","disabled"),setTimeout(function(){var e=C,t=(e.length===e.filter(".selected").length&&(e=y),(e=$("#DisplaySelection").val().toLowerCase()!==k.Type.RATES?e.filter(".slct"):e).length),a=e.filter(".selected").length;n(e,!(a===t)),$("tr.c-r:not(.s-per-person-row, [data-rpcode=VAR]), tr.c-c-r:not(.s-per-person-row)").each(function(){var e=$(this).data("rtid"),t=$(this).find(".slct").length,t=t===$(this).find("td.selected").length&&0<t;$(this).find("input[type='checkbox']:not(.cl-arr-dep-chb)").prop("checked",t),K(e)}),null!=o&&o.stop(),i.removeAttr("disabled")},1)}function z(){C.length==C.filter(".selected").length?y.filter(".slct").length==y.filter(".selected").length?$("#allButton").text(x.res.unselectAll):$("#allButton").text(x.res.selectAll):$("#allButton").text(x.res.selectAllBase)}function G(e){var t,e=e.target,a=!!e.checked,e=$(e).data("ref"),i=$("tr[data-rtid='"+e+"']:not(.s-per-person-row, [data-rpcode=VAR])"),o=(i=a?i:$("tr[data-rtid='"+e+"']")).children().filter(".slct");(g=x.toolBar.getDisplaySelection())!==k.TypeClass.CLOSED&&g!==k.Type.CLOSED||(o=$("tr[data-rtid='"+e+"']:not(.s-per-person-row,tr.rateRow, [data-rpcode=VAR])").children().filter(".slct")),t=a,i.each(function(){$(this).find("input[type=checkbox]:not(.cl-arr-dep-chb)").prop("checked",t)}),x.toolBar.enableDisableDateSelectionBulkUpdateSelect($("#Rates-table").find("input[type='checkbox']:not(.cl-arr-dep-chb):checked").length),n(o,a)}function q(e){var e=e.target,t=!!e.checked,a=$(e).parents("tr").data("rpid"),i=$(e).parents("tr").data("rtid"),o=$(e).parents("tr").children().filter(".slct");((g=x.toolBar.getDisplaySelection())===k.TypeClass.CLOSED||g===k.Type.CLOSED)&&e.id.indexOf("noCheck")<0&&(i=$("tr.noCheckOutRow[data-rpid='"+a+"'], tr.noCheckInRow[data-rpid='"+a+"']"),o=$("tr.noCheckOutRow[data-rpid='"+a+"'], tr.noCheckInRow[data-rpid='"+a+"']").children().filter(".slct"),$("#"+e.id+"noCheckIn").prop("checked",t),$("#"+e.id+"noCheckOut").prop("checked",t)),n(o,t),K(i)}function J(e){var t,a,e=$(e.target).closest("th");null!=e.data("date")&&(e=e.data("date"),M.push(e),e=(t=(t=C.filter("[data-date='"+e+"']")).length===t.filter(".selected").length&&(t=y.filter("[data-date='"+e+"']"),$("#DisplaySelection").val().toLowerCase()!==k.Type.RATES)?t.filter(".slct"):t).length,a=t.filter(".selected").length,n(t,!(a===e)))}function K(e){var t=$("tr[data-rtid='"+e+"']:visible"),a=$(t).length,i=null,t=($(t).each(function(){$(this).find("input[type='checkbox']").is(":checked")&&i++}),a===i);$("td[data-rtid='"+e+"'] input[type='checkbox']").prop("checked",t),x.toolBar.enableDisableDateSelectionBulkUpdateSelect($("#Rates-table").find("input[type='checkbox']:not(.cl-arr-dep-chb):checked").length)}function Q(){$(Be).each(function(e,t){te($(t))})}function n(e,a){e.each(function(e,t){t=$(t);(a?ee:te)(t)})}function e(){$("#Rates-table > tbody input[type='checkbox']:not(.cl-arr-dep-chb)").prop("checked",!1),P=[],M=[]}function Z(e){e=$(e.target);if(e.select(),x.toolBar.getDisplaySelection()!==k.Type.ALL){if(e.closest("span").hasClass(k.TypeClass.RATES.substring(1)))g=k.TypeClass.RATES.substring(1);else if(e.closest("span").hasClass(k.TypeClass.MIN_STAY.substring(1)))g=k.TypeClass.MIN_STAY.substring(1);else if(e.closest("span").hasClass(k.TypeClass.MAX_STAY.substring(1)))g=k.TypeClass.MAX_STAY.substring(1);else{if(e.closest("span").hasClass("cl-arr"))return g="cl-arr",void t(e.parent());if(e.closest("span").hasClass("cl-dep"))return g="cl-dep",void t(e.parent())}t(e.parent().parent())}}function t(e){-1===$.inArray(e.parent().data("rpid"),M)&&M.push(e.parent().data("rpid")),(e.hasClass("selected")?te:ee)(e)}function ee(e){var t,a;e.hasClass("selected")||(e.addClass("selected"),1<++D&&x.toolBar.showBulkUpdatePanel(),e.children().children().hasClass("ov")&&(R++,x.toolBar.toggleRevert(!1),(e=u(e=e,!0,null)).isOverride=!0,e.override=!0,g===k.TypeClass.RATES.substring(1)||g===k.Type.RATES?e.rate=null:g===k.TypeClass.MIN_STAY.substring(1)||g===k.Type.MIN_STAY?e.minStay=null:g===k.TypeClass.MAX_STAY.substring(1)||g===k.Type.MAX_STAY?e.maxStay=null:g!==k.TypeClass.CLOSED&&g!==k.Type.CLOSED||(e.closedToDeparture=!1),t=b(e),null==l[t]?(a=E.RatesToSave.push(e),l[t]=a-1):E.RatesToSave[l[t]]=e),z())}function te(e){e.hasClass("selected")&&0<D&&(D--,e.removeClass("selected"),e.children().children().hasClass("ov")&&(0===--R&&x.toolBar.toggleRevert(!0),e=u(e=e,!0,null),E.RatesToSave[l[b(e)]]=null),z())}function u(e,t,a){var i=$(e).closest("tr"),o=i.data("adult-child"),n=!1,l=!1,o=(null!=o&&("adult"===o?n=!0:"child"===o&&(l=!0)),{date:$(e).closest("td").data("date"),ratePlanId:i.data("rpid"),roomTypeId:i.data("rtid"),businessId:i.data("bid"),occupancy:$(e).closest("td").data("occ"),code:i.data("rpcode"),child:l,adult:n});return a?o:t?(i={isOverride:!0,override:!0,minStay:$(e).closest("td").find("span.mlos input").hasClass("ov")?$(e).closest("td").data("mlos"):null,rate:$(e).closest("td").find("span.prices input").hasClass("ov")?eviivo.webcore.decimals.fixDecimalSymbolSave($(e).closest("td").data("rate"),x.decimalSymbol):null,maxStay:$(e).closest("td").find("span.maxStay input").hasClass("ov")?$(e).closest("td").data("maxStay"):null,closedToDeparture:$(e).closest("td").data("departure"),closedToArrival:$(e).closest("td").data("arrival")},$.extend(o,i)):void 0}function ae(){eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+"/api/dailyrate/bulk-update-get-active-system-wide",actionId:"getActiveBulkUpdatesSystemWide",method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){0<e&&e>=x.systemBulkUpdateLimit&&(_=!0,x.toolBar.setBulkLimitHit(_),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.systemLimitHitMsg,autoHide:!1}))},failCallback:function(e){}})}function ie(){var l=[],r=[],e={ratePlanIds:(P=[],$(".row-selector:not(.hide)").each(function(e){var t=$(this).closest("tr").data("rpid");-1===$.inArray(t,P)&&P.push(parseInt(t))}),P)};eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+"/api/dailyrate/bulk-update-get-active",actionId:"getActiveBulkUpdates",data:e,method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){if(null!==e){for(var t=0;t<e.length;t++){var a=e[t],i=a.StartDate.replace("/Date(","").replace(")/",""),i=new Date(i),o=a.EndDate.replace("/Date(","").replace(")/",""),o=new Date(o),n=a.UpdateDatetime.replace("/Date(","").replace(")/",""),n=new Date(n);l.push({ratePlanID:a.RatePlanIDs[0].RatePlanID,occupancy:a.RatePlanIDs[0].Occupancy,adult:a.RatePlanIDs[0].Adult,child:a.RatePlanIDs[0].Child,startDate:i,endDate:o,adjustmentType:a.AdjustmentType,daysOfWeek:a.DaysOfWeek,startUpdateTime:n}),r.push(n)}0<l.length?($.each(l,function(e,t){var o,n,l,a=t.startDate,i=t.endDate;eviivo.webcore.datetime.utils.doDateRangesOverlap(a.evStandardIso8601DateExtended(),i.evStandardIso8601DateExtended(),d().evStandardIso8601DateExtended(),c().evStandardIso8601DateExtended())&&(a=eviivo.webcore.datetime.utils.getDates(d(),c()),o=t.ratePlanID,t.adjustmentType,n=t.startUpdateTime,l=t.daysOfWeek,$.each(a,function(e,t){var a,i;0<=$.inArray(t.day,l)&&(i=(a=$('tr[data-rpid="'+o+'"]').find("td[data-date='"+t.date+"']")).data("ov"),new Date(i).evDisplayExtraLongDateTime("en-GB")>new Date(n).evDisplayExtraLongDateTime("en-GB")||0===a.find(".toggle").length&&(a.children().hide(),a.children().remove(),a.append('<span class="toggle"></span>'),Se(a,o+t.date.replace(/-/g,"")),j=!0,eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.bulkUpdateHappening,autoHide:!1})))}))}),!0===j&&setTimeout(function(){ie()},x.autoRefreshActiveUpdatesProgress),r.length>=x.businessBulkUpdateLimit&&(_=!0,x.toolBar.setBulkLimitHit(_),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.businessLimitHitMsg,autoHide:!1}))):oe()}else oe()},failCallback:function(e){}})}function oe(){!0===j&&(eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,style:eviivo.webcore.notifier.styles.withTwoActions,message:x.res.bulkUpdateFinished,autoHide:!1,buttonTwo:x.res.bulkUpdateFinishedRefresh,buttonOne:x.res.bulkUpdateFinishedDismiss}),$(".btn-one").addClass("btn"),$(".btn-two").addClass("btn").addClass("btn-right"),$(".notifyjs-withTwoActions-base").on("click",".btn-one",function(){$(this).trigger("notify-hide")}),$(".notifyjs-withTwoActions-base").on("click",".btn-two",function(){s(),$(this).trigger("notify-hide")}),j=!1)}function ne(){0<N.length||0<Le?setTimeout(ne,1500):(h.trigger("click"),h.trigger("mouseleave"))}function le(e){var t=$(e.target).closest("td"),a=$(e.target).closest("tr"),i=$(e.target).parent().attr("class"),o=a.data("adult-child"),n=a.data("occ"),t=t.data("date")+a.data("rpid")+o+n+i.replace("editNumVal","");N=eviivo.util.debounce({func:re,params:e,unique:t,wait:500})}function re(e){var t=$(e.target).closest("td"),a=($(e.target).closest("tr"),$(e.target)),i=!1,o="",n=(eviivo.webcore.decimals.fixDecimalSymbolDisplay(e.target,x.decimalSymbol),a.val());if(a.closest("span").hasClass(k.TypeClass.RATES.substring(1))){var o=k.Type.RATES,l=parseFloat(t.data("rate"));if(""==n)return;if(0===parseFloat(eviivo.webcore.decimals.fixDecimalSymbolSave(n,x.decimalSymbol)))return $(a).addClass("error"),setTimeout(function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:eviivo.eagle.translations.validation.numbers.min,autoHideDelay:4e3})},$.notify.errorAlreadyExists()?4e3:0),void a.val(l);i=ce(n,l.toFixed(2),a),a.val(a.val().replace(/^0+/,""))}else a.closest("span").hasClass(k.TypeClass.MIN_STAY.substring(1))?(o=k.Type.MIN_STAY,(i=ce(n,parseInt(t.data(k.TypeClass.MIN_STAY.substring(1))),a))&&0===parseInt(n)?t.find(".cl-arr-chb").attr("checked","checked"):t.find(".cl-arr-chb").removeAttr("checked").prop("checked",!1)):a.closest("span").hasClass(k.TypeClass.MAX_STAY.substring(1))&&(o=k.Type.MAX_STAY,i=ce(n,parseInt(t.data("max-stay")),a));i?(Q(),pe(),ue(a,!0,u(t,null,!0),o)):e.preventDefault()}function se(){var e=$(this).parent().parent(),t=$(this).parent().parent().data("date"),a=$(this).parent().parent().parent().data("rpid"),i=w(!0,a,t),a=w(!1,a,t);($(this).prop("checked")?(i.val(0).trigger("input").trigger("change"),a.val(0)):(t=parseInt(e.data("mlos")),i.val(e=0<t?t:1).trigger("input").trigger("change"),a.val(e))).trigger("input").trigger("change"),$(this).closest("input").addClass("ov-e")}function de(){var e=$(this).parent().parent(),t=k.Type.CLOSED,e=(pe(),u(e,null,!0));ue($(this),!0,e,t),m()}function ce(e,t,a){return e=eviivo.webcore.decimals.fixDecimalSymbolSave(e,x.decimalSymbol),isNaN(e)?(a.val(t),!1):(e||a.val(0),(e=parseInt(e))===t?!!a.hasClass("ov-e"):!(e<0))}function ue(e,t,a,i){e=$(e);var o,n=$(e.closest("td")),l=$(e.closest("tr")),r=(l.hasClass("c-c-r")?n:$("tr.c-r.rateRow[data-rpid='"+a.ratePlanId+"'] td[data-date='"+a.date+"']")).find("span.prices input[type='text']"),s=$("tr.c-r.noCheckOutRow[data-rpid='"+a.ratePlanId+"'] td[data-date='"+a.date+"']").find(".cl-dep-chb"),d=w(!1,a.ratePlanId,a.date),c=S(!1,a.ratePlanId,a.date),u=w(!0,a.ratePlanId,a.date),p=S(!0,a.ratePlanId,a.date),v=x.toolBar.getDisplaySelection()===k.Type.ALL?(o=d,c):(o=u,p),f=parseFloat(eviivo.webcore.decimals.fixDecimalSymbolSave(r.val(),x.decimalSymbol)),h=parseInt(o.val()),g=""!==v.val()?parseInt(v.val()):"",y=s.prop("checked"),d=(i===k.Type.MIN_STAY?(d.val(h),u.val(h)):i===k.Type.MAX_STAY&&(c.val(g),p.val(g)),$("tr.c-r[data-rpid='"+a.ratePlanId+"'] td[data-date='"+a.date+"']")),u=((x.toolBar.getDisplaySelection()===k.Type.ALL?d.find("input:not(.cl-arr-dep-chb)").not(":visible"):d.find("input:not(.cl-arr-dep-chb)")).addClass("ov-e"),e.addClass("ov-e"),x.res.rate+": "+x.res.currency+f+"<br/>"),c=0===h||null===h||""===h?"":x.res.mlos+": "+h+"<br/>",p=0===g||null===g||""===g?"":x.res.maxStay+": "+g,p=(d.attr("data-tooltip-title",u+c+p),d.attr("data-tooltip-rate",c+p),d.attr("data-tooltip-min",u+p),d.attr("data-tooltip-max",u+c),x.toolBar.toggleCancelBtn(!1),T[b(a)]),d=e.parent().attr("class"),u=l.data("adult-child"),c=l.data("occ"),e=n.data("date")+l.data("rpid")+u+c+d.replace("editNumVal","");null!=p?(I.RatesToSave[p].isOverride=t,I.RatesToSave[p].rate=r.hasClass("ov")||r.hasClass("ov-e")?f:null,I.RatesToSave[p].minStay=o.hasClass("ov")||o.hasClass("ov-e")?h:null,I.RatesToSave[p].maxStay=v.hasClass("ov")||v.hasClass("ov-e")?g:null,I.RatesToSave[p].closedToDeparture=s.hasClass("ov")||s.hasClass("ov-e")?y:null,delete N[e],m(i)):t&&(c=n=!1,null!=(u=l.data("adult-child"))&&("adult"===u?n=!0:"child"===u&&(c=!0)),d=r.hasClass("ov"),p=o.hasClass("ov"),l=v.hasClass("ov"),u=s.hasClass("ov"),!1===function(e,t,a,i,o,n,l,r){l.adult=o,l.child=n,l.isOverride=e,l.override=!0,l.rate=t,l.minStay=a,l.maxStay=i,l.closedToDeparture=r,o=I.RatesToSave.push(l);return T[b(l)]=o-1,!0}(t,f=d||i===k.Type.RATES?f:null,h=p||i===k.Type.MIN_STAY?h:null,g=l||i===k.Type.MAX_STAY?g:null,n,c,a,y=u||i===k.Type.CLOSED?y:null)?(r.removeClass("ov-e"),o.removeClass("ov-e")):(delete N[e],m(i)))}function b(e){return e.date+"_"+e.ratePlanId+"_"+e.roomTypeId+"_"+e.occupancy+"_"+e.adult+e.child}function pe(){var e=!0;$.notify.popupStyleAlreadyExists&&(e=!1),$.notify.warnAlreadyExists()||eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.unsavedWarning,hidePreviousNotifiers:e})}function p(){$.notify.hideAll(),eviivo.eagle.contextMenu.closeAll(),$("#loading-overlay").toggleClass("hide active")}function s(e,t){$.notify.hideAll();var a=d(),i=c();null!=e&&"date"==typeof e||(e=a.evStandardIso8601DateExtended(),t=i.evStandardIso8601DateExtended()),p(),ve(e,t,!0)}function ve(e,t,a){e="string"!=typeof e?e.evStandardIso8601DateExtended():e,t=t?"string"!=typeof t?t.evStandardIso8601DateExtended():t:null;eviivo.webcore.ajaxHelper.executeAjax({actionId:"getRates",url:x.urls.get,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,data:{startDate:e,endDate:t,displaySelection:x.toolBar.getDisplaySelection(),updateType:f},callback:function(e){p(),Te.html(e),a||eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:x.res.SaveSuccessful}),R=D=0,x.toolBar.hideToolBar(),L=[],setTimeout(function(){$e(),postInitFunction()},500),ie()},failCallback:function(){p()}})}function a(e,t){p(),I.__RequestVerificationToken=$("[name='__RequestVerificationToken']").val(),I.displaySelection=x.toolBar.getDisplaySelection(),I.RateUpdateType=f,I.UpdateKey=""+(new Date).getTime(),function e(t,a,i,o){{var n;if(t+A<i.RatesToSave.length)return a.RatesToSave=i.RatesToSave.slice(t,t+A),a.IsPostComplete=!1,t+=A,void fe(n=$.extend({},a),function(){e(t,n,i,o)},o)}a.IsPostComplete=!0;a.RatesToSave=i.RatesToSave.slice(t);null!=a.RatesToSave&&0<a.RatesToSave.length?fe(a,function(){v()},o):v()}(0,$.extend({},e),e,t)}function v(){ve(d(),c())}function fe(e,t,a){a=a?x.urls.save:x.urls.revert;eviivo.webcore.ajaxHelper.executeAjax({actionId:"postDailyRates",url:a,method:eviivo.webcore.ajaxHelper.methods.POST,timeout:6e4,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,data:e,callback:function(e){(null==e||e?t:(eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.errorNotification}),p))()},failCallback:function(){s(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,message:x.res.errorNotification})}})}function he(){var e,t,a,i;0<$("#Rates-table th:first-child").length&&0<o.length&&(e=o.outerWidth(),t=$(window).width(),a=$("#Rates-table th:first-child").outerWidth(),i=$(".table-scroll"),t<e+a-2?i.removeClass("hide"):i.addClass("hide"))}function ge(){var e=$(".table-fixed"),t=e.scrollLeft();e.animate({scrollLeft:t-195},300),$(".daily-rates-table thead").animate({scrollLeft:t-195},300),eviivo.eagle.contextMenu.resetPositionOfContext()}function ye(){var e=$(".table-fixed"),t=e.scrollLeft();e.animate({scrollLeft:t+195},300),$(".daily-rates-table thead").animate({scrollLeft:t+195},300),eviivo.eagle.contextMenu.resetPositionOfContext()}function be(){var e=$(".table-fixed"),t=$(".table-scroll-inner .s-btn-left"),a=$(".table-scroll-inner .s-btn-right");e.scroll(function(){0===$(this).scrollLeft()?t.hide():t.show(),e.scrollLeft()>=o.width()-e.width()?a.hide():a.show(),eviivo.eagle.contextMenu.resetPositionOfContext()})}function me(){$(".s-date-scroll").scrollLeft($(this).scrollLeft())}function we(){var e,t,i,o=$(this).closest(".c-r"),n=o.data("rpid"),a=o.data("rtid"),l=$(".c-c-r[data-rpid='"+n+"'][data-rtid='"+a+"']"),r=null,s=x.toolBar.getDisplaySelection();k.ShowAdultChildOccupancyRowExpands.includes(s)||(0===l.length&&$.inArray(n,L)<0&&(e={roomTypeId:a,ratePlanId:n,startDate:d().evStandardIso8601DateExtended(),endDate:c().evStandardIso8601DateExtended(),displaySelection:s},t="True"===$(this).data("adult-child")?"/rates/adult-child-rates":"True"===$(this).data("occupancy")?"/rates/occupancy-rates":null,"True"!==$(this).data("adult-child")&&"True"!==$(this).data("occupancy")||(r=Se(o,n),i="DialyRateExpandRT"+a+"RP"+n+"DisplaySelection"+s,eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+t,data:e,actionId:i,method:eviivo.webcore.ajaxHelper.methods.GET,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_HTML,dataType:eviivo.webcore.ajaxHelper.dataTypes.HTML,callback:function(e){L.push(n);var t=o,a=r;null!=a&&a.stop(),a=null,t.find(".ajax-loading").hide().remove(),t.find(".toggle .icon-font").show(),t.find(".toggle .icon-font").removeClass("icon-font-expand_more").addClass("icon-font-expand_less"),0===l.length&&o.after(e),O.splice($.inArray(i,O),1),0===O.length&&x.toolBar.determineTooltipSetup()},failCallback:function(e){}}),O.push(i))),l.is(":visible")?(l.hide(),o.addClass("mod-collapsed"),Modernizr.localstorage&&localStorage.setItem("visible-item-"+n,"false"),0<=$.inArray(n,B)&&B.splice($.inArray(n,B),1),o.find(".toggle .icon-font").removeClass("icon-font-expand_less").addClass("icon-font-expand_more")):(l.show(),o.removeClass("mod-collapsed"),Modernizr.localstorage&&localStorage.setItem("visible-item-"+n,"true"),$.inArray(n,B)<0&&B.push(n),null==r&&o.find(".toggle .icon-font").removeClass("icon-font-expand_more").addClass("icon-font-expand_less")))}function $e(){$.each(B,function(e,t){$('.c-r[data-rpid="'+t+'"]').find(".toggle").trigger("click")})}function Se(e,t){var a=null;return e.find(".toggle .icon-font").hide(),e.find(".toggle").prepend("<span class='ajax-loading loading"+t+"'></span>"),null!=(a=eviivo.webcore.loadingSpinner.create({container:".loading"+t,theme:eviivo.webcore.loadingSpinner.themes.none,size:eviivo.webcore.loadingSpinner.sizes.small,colour:eviivo.webcore.loadingSpinner.colours.light}))&&a.start(),a}function m(e){var n=0,l=[],r=0,s=0,i=0;x.toolBar.getDisplaySelection();(e=null==e?"ALL":e)!==k.Type.MIN_STAY&&"ALL"!==e||($(".mlos .ov-e:input[type='text']").each(function(){$(this).removeClass("error");var e=$(this).val(),t=$(this).parent().parent().find("span.prices > input").val(),a=$(this).parent().parent().data("date"),i=$(this).parent().parent().parent().data("rpid"),o=""!==$(this).val()?$(this):0,i=S(!1,i,a);0!==parseInt(e)&&"0"===t&&($(this).addClass("error"),n++),r+=eviivo.eagle.ratePlanValidation.minStay(o,i),s<r&&(l.push(eviivo.webcore.datetime.parse.parseDateShort(a).evDisplayMediumDate(x.defaultCultureCode)+"<br/>"),s=r)}),eviivo.eagle.ratePlanValidation.displayErrorMsg(r,eviivo.eagle.translations.resources.newRatePlan.validationMsg.minMaxValidationMsgDate+"<br/>"+eviivo.util.unique(l).join(""),null)),e!==k.Type.RATES&&"ALL"!==e||$(".prices .ov-e:input[type='text']").each(function(){$(this).removeClass("error");var e=$(this).parent().parent().parent().data("rpid"),t=$(this).parent().parent().data("date"),a=$(this).val(),e=w(!1,e,t).val();""===a&&$(this).val(0),0!==parseInt(e)&&"0"===a&&($(this).addClass("error"),n++)}),e!==k.Type.MAX_STAY&&"ALL"!==e||(l=[],r=0,$(".maxStay .ov-e:input[type='text']").each(function(){var e=$(this).parent().parent().data("date"),t=w(!1,$(this).parent().parent().parent().data("rpid"),e),a=""!==$(this).val()?$(this):0;r+=eviivo.eagle.ratePlanValidation.maxStay(a,t),s<r&&(l.push(eviivo.webcore.datetime.parse.parseDateShort(e).evDisplayMediumDate(x.defaultCultureCode)+"<br/>"),s=r),i+=eviivo.eagle.ratePlanValidation.maxNightLimit28($(this)),0===parseInt($(this).val())&&$(this).val("")}),eviivo.eagle.ratePlanValidation.displayErrorMsg(r,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxMinValidationMsg+"<br/>"+eviivo.util.unique(l).join(""),null),eviivo.eagle.ratePlanValidation.displayErrorMsg(i,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxStayValidationMsg,h)),0<n&&setTimeout(function(){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:x.res.noFreeNights,autoHideDelay:4e3})},$.notify.errorAlreadyExists()?4e3:0),0<(e=i+n)?h.attr("disabled","disabled"):0===e&&0<I.RatesToSave.length&&h.removeAttr("disabled"),Le=n+r+i}function w(e,t,a){return(e?$("tr.c-r.rateRow[data-rpid='"+t+"'] td[data-date='"+a+"']"):$("tr.c-r.minStayRow[data-rpid='"+t+"'] td[data-date='"+a+"']")).find("span.mlos > input[type='text']")}function S(e,t,a){return(e?$("tr.c-r.rateRow[data-rpid='"+t+"'] td[data-date='"+a+"']"):$("tr.c-r.maxStayRow[data-rpid='"+t+"'] td[data-date='"+a+"']")).find("span.maxStay > input[type='text']")}var Te,o,ke,f,l,T,r,Ce,De,h,k,g,Re,Ae,xe,Ie,Ee,y,Be,C,D,R,A,x,I,E,B,Pe,P,M,L,j,O,_,Me,N,Le;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.dailyRates=window.eviivo.eagle.dailyRates||{},window.eviivo.eagle.dailyRates=(A=100,E={RatesToSave:[],IsPostComplete:!(I={RatesToSave:[],IsPostComplete:!(x={resources:C=Be=y=null,currencySymbol:null,defaultCultureCode:null,canEditRates:null,businessBulkUpdateLimit:5,systemBulkUpdateLimit:15}),UpdateKey:null}),UpdateKey:null},B=[],Pe=!(R=D=0),P=[],M=[],j=!(L=[]),_=!(O=[]),N=[],$(window).resize(function(){clearTimeout(Me),Me=setTimeout(he,500),eviivo.eagle.contextMenu.resetPositionOfContext(),H()}),Le=0,{init:function(e){k=e.adjustment,x=$.extend(x,e),setTimeout(function(){null!=Globalize&&null!=Globalize.cldr&&(x.decimalSymbol=Globalize._numberSymbol("decimal",Globalize.cldr))},750),Te=$("#DailyRatesDetail"),C=$("[data-rpcode=BAS]:not(.c-c-r)").children().filter(".slct"),y=$("tr:not(.c-c-r, [data-rpcode=VAR])").children().filter(".slct"),Be=".slct",Ce=$(".prices input[type='text']"),r=".editNumVal input[type='text']",Re=".cl-arr-chb",Ae=".cl-dep-chb",De=".row-selector",ke=$(".s-rt input[type='checkbox']:not(.cl-arr-dep-chb)"),o=$("#Rates-table"),h=$("#btn-save"),tableScrollSize=$(".s-table-scroll-size"),$(o).off("input",r).on("input",r,le),$(o).off("click",r).on("click",r,Z),$(o).off("change",r).on("change",r,m),$(o).off("change",De).on("change",De,q),$(o).off("click",Re).on("click",Re,se),$(o).off("click",Ae).on("click",Ae,de),eviivo.webcore.decimals.restrictFieldsForDecimals(Ce,{decimalPlaces:2}),$(".c-r a.toggle").on("click",we),ke.on("change",G),o.find("th").on("click",J),$("#allButton").on("click",X),$(".table-scroll-inner .s-btn-right").on("click",ye).on("click",be),$(".table-scroll-inner .s-btn-left").on("click",ge).on("click",be),$(".s-table-scroll").on("scroll",me),$(".prt-r").on("mousedown",U),$("#Rates-table").on("mousemove",Y),$(".table-fixed").on("mouseup",W),eviivo.pms.diary.calendarNavigator.init({hideDatepickerAfterDateUpdated:!0,actions:{backBack:function(){i(-30)},back:function(){i(-7)},goToday:function(){eviivo.pms.diary.calendarNavigator.setDate(new Date),s(),x.toolBar.changeBulkDateRangeValues(d(),c()),L=[]},forward:function(){i(7)},forwardForward:function(){i(30)},dateSelection:function(){s(),x.toolBar.changeBulkDateRangeValues(d(),c()),L=[]}}}),eviivo.pms.diary.calendarNavigator.setDate(x.datePick.from),V(x.datePick.from),F(x.datePick.from),!0===Pe&&Modernizr.localstorage&&($(".c-r").each(function(){var e=$(this).data("rpid");"true"===localStorage.getItem("visible-item-"+e)&&$.inArray(e,B)<0&&B.push(e)}),Pe=!1,$e()),be(),e=$(".table-scroll-inner .s-btn-left"),0==$(".table-fixed").scrollLeft()?e.hide():e.show(),I.RatesToSave=[],T={},E.RatesToSave=[],l={},m(),ie(),ae();var t,e=setInterval(function(){ae()},x.autoRefreshActiveUpdatesSystem);function a(){t.hasClass("md-modal_overlay-show")?t.removeClass("md-modal_overlay-show"):t.addClass("md-modal_overlay-show")}0===x.autoRefreshActiveUpdatesSystem&&clearInterval(e),eviivo.eagle.dailyRatesBulkUpdate.shouldShowBulkUpdateValidationErrors(!0),$("body").tip(),H(),eviivo.pms.pricingRules.dailyRates.init(),0<(t=$("#dailyRatesEmptyNoActiveRatesModal")).length&&(a(),$(".s-close-modal").on("click",a),$("#go-to-rates-btn").on("click",function(){var e=$(this);e.prop("disabled",!0),e.find(".s-spinner").removeClass("hide"),window.location.href="".concat(eviivoSuiteApp,"/rates/synopsis")}))},updateSelectedPrices:function(l,r,s,d){var e,t,a;NaN.toString()!==d.toString()&&(a=null,e=$("#applyAmountButton").html(),null!=(a=eviivo.webcore.loadingSpinner.create({container:"#applyAmountButton",theme:eviivo.webcore.loadingSpinner.themes.none,size:eviivo.webcore.loadingSpinner.sizes.small,colour:eviivo.webcore.loadingSpinner.colours.light}))&&a.start(),p(),$("#applyAmountButton").find(".spinner").css("position","absolute"),$("#applyAmountButton").attr("disabled","disabled"),l===k.Type.RATES?(t=$(".selected").find(".prices > input"),f=r===k.How.REPLACE?1:f=s):l===k.Type.MIN_STAY?(f=1,t=$(".selected").find(".mlos > input")):l===k.Type.MAX_STAY&&(f=1,t=$(".selected").find(".maxStay > input")),setTimeout(function(){t.each(function(e,t){var a,i=t.value,o=$(t).closest("td"),n=$(t).closest("tr"),i=(r===k.How.REPLACE?i=d:r!==k.How.INCREASE&&r!==k.How.DECREASE||(a=parseFloat(eviivo.webcore.decimals.fixDecimalSymbolSave(o.data("rate"),x.decimalSymbol)),r===k.How.INCREASE&&(i=2===s?a+d:a+a*(d/100)),(i=r===k.How.DECREASE?2===s?a-d:a-a*(d/100):i).toFixed(2)),t.value=i<=0?0:i,l!==k.Type.MIN_STAY&&l!==k.Type.MAX_STAY||(a=null,i=n.data("rpid"),n=n.data("date"),l===k.Type.MIN_STAY&&(a=w(!1,i,n)),0<(a=l===k.Type.MAX_STAY?S(!1,i,n):a).length&&rowElement.val(t.value)),eviivo.webcore.decimals.fixDecimalSymbolDisplay(t,x.decimalSymbol),u(o,null,!0));ue(t,!0,i,l),$(this).trigger("input").trigger("keepress")}),null!=a&&a.stop(),p(),$("#applyAmountButton").html(e),$("#applyAmountButton").removeAttr("disabled"),h.prop("disabled")||ne()},1))},updateDateRangePrices:function(e,t,a,i,o,n,l,r){"string"!=typeof l&&(l=l.evStandardIso8601DateExtended()),"string"!=typeof r&&(r=r.evStandardIso8601DateExtended()),o={ratePlanIDs:o,startDate:l,endDate:r,adjustmentType:e,adjustmentHow:t,adjustmentBy:a,amount:i,daysOfWeek:n,updateKey:""+(new Date).getTime()},p(),eviivo.webcore.ajaxHelper.executeAjax({url:eviivoSuiteApp+"/api/dailyrate/bulk-update-date-range",data:o,actionId:"postBulkUpdateDataRange",method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){!0===e.Success?(eviivo.webcore.datetime.utils.doDateRangesOverlap(l,r,d().evStandardIso8601DateExtended(),c().evStandardIso8601DateExtended())?v():(p(),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.success,message:x.res.SaveSuccessful,style:eviivo.webcore.notifier.styles.withTwoActions,buttonOne:x.res.bulkUpdateSuccessBtn.replace("{0}",new Date(l).evDisplayMediumDate(x.defaultCultureCode)),autoHideDelay:16e3}),$(".btn-one").addClass("btn btn-right"),$(".notifyjs-withTwoActions-base").on("click",".btn-one",function(){var e;e=l,eviivo.pms.diary.calendarNavigator.setDate(e),s(d(),c()),x.toolBar.changeBulkDateRangeValues(d(),c()),L=[]})),$.notify.popupStyleAlreadyExists&&null!==i&&($(".notifyjs-popupStyle-base > .mod-close-notice").trigger("click"),eviivo.eagle.dailyRatesBulkUpdate.deleteBulkUpdateValidationErrors())):(p(),0===e.ValidationFailures.length?eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:x.res.errorNotification}):eviivo.eagle.dailyRatesBulkUpdate.constructBulkUpdateValidationError(e))},failcallback:function(e){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:x.res.errorNotification})}})},saveDetails:function e(t){0<N.length||0<Le?setTimeout(e,1500,t):"disabled"!==$(t.target).closest("a").attr("disabled")&&a(I,!0)},resetAllValues:function(){var e=$(".ov-e");e.each(function(e,t){var a,i;$(t).closest("span").hasClass(k.TypeClass.RATES.substring(1))?(a=$(t).parent().parent().data("rate"),t.value=parseInt(a).toFixed(2)):$(t).closest("span").hasClass(k.TypeClass.MIN_STAY.substring(1))?(void 0===(i=$(t).parent().parent().data("mlos"))&&(i=$("tr.c-r[data-rpid='"+$(t).parent().parent().parent().data("rpid")+"'] td[data-date='"+$(t).parent().parent().data("date")+"']").find("span.mlos").parent().data("mlos")),i=parseInt(i),t.value=i):$(t).closest("span").hasClass(k.TypeClass.MAX_STAY.substring(1))?(void 0===(a=parseInt($(t).parent().parent().data("max-stay")))&&(a=$("tr.c-r[data-rpid='"+$(t).parent().parent().parent().data("rpid")+"'] td[data-date='"+$(t).parent().parent().data("date")+"']").find("span.maxStay").parent().data("max-stay")),t.value=a):$(t).closest("span").hasClass(k.TypeClass.CLOSED.substring(1))&&(a=$(t).parent().parent().data("departure"),eviivo.webcore.parsers.stringToBool(a)?$(t).parent().parent().find(".cl-dep-chb").attr("checked","checked"):$(t).parent().parent().find(".cl-dep-chb").removeAttr("checked").prop("checked",!1),0===(i=parseInt($("tr.c-r[data-rpid='"+$(t).parent().parent().parent().data("rpid")+"'] td[data-date='"+$(t).parent().parent().data("date")+"']").find("span.mlos").parent().data("mlos")))&&$(t).parent().parent().find(".cl-arr-chb").attr("checked","checked"),0!==i)&&$(t).parent().parent().find(".cl-arr-chb").removeAttr("checked")}),e.removeClass("ov-e"),Q(),$.notify.hideAll(),I.RatesToSave=[],T={},P=[],M=[],x.toolBar.toggleCancelBtn(!0),$("tr.c-c-r").each(function(){$(this).find("td").removeClass("ov-e")}),$("tr").each(function(){$(this).find("td:first input[type='checkbox']").prop("checked",!1)}),x.toolBar.hideToolBar()},onClickRevert:function(e){"disabled"!==$(e.target).closest("a").attr("disabled")&&a(E,!0)},getSelectedRoomTypeRates:s,uncheckAllCheckboxes:e,getSelectedIndividualRatePlanIDs:function(){return M},getSelectedRowRatePlanIDs:function(){return P=[],$("#Rates-table tr:visible").find(".row-selector").each(function(e){var t,a,i,o,n;$(this).prop("checked")&&(t=$(this).closest("tr").data("rpid"),a=$(this).closest("tr").data("occ"),i="adult"===(o=$(this).closest("tr").data("adult-child")),o="child"===o,n="VAR"===$(this).closest("tr").data("rpcode"),-1===$.inArray(t,P))&&P.push({RatePlanID:parseInt(t),Occupancy:a,Adult:i,Child:o,Variant:n})}),P},getCalendarStartDate:d,getCalendarEndDate:c,changeView:function(){Q(),e()},reExpendOtherRates:$e,cancelExpandAjaxCalls:function(){O=$.grep(O,function(e,t){return eviivo.webcore.ajaxHelper.abortAjax(e),!1})},goToErrorDate:function(e){e=$(e.target),eviivo.pms.diary.calendarNavigator.setDate(new Date(e.data("start-date"))),s(),x.toolBar.changeBulkDateRangeValues(d(),c()),L=[],highlightBulkUpdateValidationErrors()},finalSuccessHandler:v,toggleOverlay:p})},2358:function(){function p(e,t){Modernizr.localstorage&&(localStorage.setItem("bulk-update-error-heading"+eviivo.eagle.basePageModelState.businessId,e),localStorage.setItem("bulk-update-error-content"+eviivo.eagle.basePageModelState.businessId,t),localStorage.setItem("bulk-update-error-date"+eviivo.eagle.basePageModelState.businessId,Date()))}function e(){p("","")}function t(e){return null!==localStorage.getItem(e)&&""!==localStorage.getItem(e)?localStorage.getItem(e):null}function a(e){Modernizr.localstorage&&null!==t("bulk-update-error-heading"+eviivo.eagle.basePageModelState.businessId)&&null!==t("bulk-update-error-content"+eviivo.eagle.basePageModelState.businessId)&&null!==t("bulk-update-error-date"+eviivo.eagle.basePageModelState.businessId)&&(s=e,Modernizr.localstorage&&(r.heading=localStorage.getItem("bulk-update-error-heading"+eviivo.eagle.basePageModelState.businessId),r.content=localStorage.getItem("bulk-update-error-content"+eviivo.eagle.basePageModelState.businessId)),v(r.heading,r.content))}function v(e,t){eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.popup,style:eviivo.webcore.notifier.types.popup,message:t,autoHide:!1}),$(".notifyjs-popupStyle-base").find(".s-toggle-notice > span").html(e),$(".mod-close-notice").off(),$(".notifyjs-popupStyle-base").on("click",".mod-close-notice",o),$(".notifyjs-popupStyle-base").on("click",".s-toggle-notice",i),$(".notifyjs-popupStyle-base").on("click",".btn-one",function(){return eviivo.eagle.dailyRates.updateDateRangePrices($(".btn-one").data("adjustmenttype"),$(".btn-one").data("adjustmenthow"),$(".btn-one").data("adjustmentby"),$(".btn-one").data("amount"),$(".btn-one").data("rateplanids"),$(".btn-one").data("daysofweek"),$(".btn-one").data("startdate"),$(".btn-one").data("enddate")),!1}),$(".notifyjs-popupStyle-base").on("click",".error-date-selection",function(e){return eviivo.eagle.dailyRates.goToErrorDate(e),!1}),$(".notifyjs-popupStyle-base").parent().parent().removeClass("notifyjs-hidable"),s&&l()}function i(){return $(".notifyjs-popupStyle-base").toggleClass("mod-notify-content-close"),!1}function o(){return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.warn,style:eviivo.webcore.notifier.styles.withTwoActions,message:f.resources.confirmationMsg,autoHide:!1,buttonTwo:f.resources.confirmationOkBtn,buttonOne:f.resources.confirmationCancelBtn}),$(".btn-one").addClass("btn btn-secondary"),$(".btn-two").addClass("btn btn-right"),$(".notifyjs-withTwoActions-base").on("click",".btn-one",function(){n(a,s)}),$(".notifyjs-withTwoActions-base").on("click",".btn-two",function(){n(e,null)}),$(".mod-close-notice").off(),$(".notifyjs-withTwoActions-base").on("click",".mod-close-notice",function(){n(a,s)}),!1}function n(e,t){$(".notifyjs-wrapper").remove(),null!=e&&"function"==typeof e&&(null===t?e():e(t))}function l(){$(".error-date-selection").each(function(e){var t=$(this).data("start-date"),a=$(this).data("end-date"),i=$(this).data("rpid"),t=eviivo.webcore.datetime.utils.getDates(new Date(t),new Date(a));$.each(t,function(e,t){if(t.date>eviivo.eagle.dailyRates.getCalendarEndDate())return!1;$('tr[data-rpid="'+i+'"]').find("td[data-date='"+t.date+"']").find("input").addClass("error")})})}var r,s,f;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.dailyRatesBulkUpdate=window.eviivo.eagle.dailyRatesBulkUpdate||{},window.eviivo.eagle.dailyRatesBulkUpdate=(r={heading:"",content:""},s=!0,f={resources:null},{init:function(e){f=$.extend(f,e)},constructBulkUpdateValidationError:function(e){for(var t=e.ValidationFailures[0].Error,a=f.resources.bulkUpdateValidationFailureHeader,i="<p>"+f.resources.bulkUpdateValidationFailureMsg1+"</p><p>"+t+"</p><p>"+f.resources.bulkUpdateValidationFailureMsg2+"</p>",o=0,n=[],t=e.RatePlanIDs,l=0;l<e.ValidationFailures.length;l++){var r=e.ValidationFailures[l],s=r.RatePlanIDs.RatePlanID,d=r.RatePlanIDs.Occupancy,c=r.RatePlanIDs.Adult,u=r.RatePlanIDs.Child,c=(n.push(r.RatePlanIDs),o!=s+d+c+u&&(o=s+d+c+u,d=$("tr[data-rpid="+s+"] > td:first").text(),1<=l&&(i+="</ul>"),i+="<h4>"+$("tr[data-rpid="+s+"]").prev(".prt-r").find("td:first").text().trim()+" - "+d.trim()+"</h4><ul>"),r.StartDate.replace("/Date(","").replace(")/","")),c=new Date(c),u=r.EndDate.replace("/Date(","").replace(")/","");i+='<li class="error-date-selection" data-rpid="'+s+'" data-start-date="'+c+'" data-end-date="'+(u=new Date(u))+'">'+c.evDisplayMediumDate(eviivo.eagle.basePageModelState.userCultureCode)+" - "+u.evDisplayMediumDate(eviivo.eagle.basePageModelState.userCultureCode)+"</li>"}n=function(e,t){var a,i=[],o={};for(a in e)o[e[a][t]]=e[a];for(a in o)i.push(o[a]);return i}(n,"RatePlanID"),p(a,i=(i+="</ul><p>"+f.resources.bulkUpdateValidationFailureMsg3+"</p>")+("<div class='mod-notify-actions clearfix'><button class='btn-one btn btn-right' data-notify-html='buttonOne' data-adjustmentType='"+e.AdjustmentType+"' data-adjustmentHow='"+e.AdjustmentHow+"' data-adjustmentBy='"+e.AdjustmentBy+"'data-amount='"+e.Amount+"' data-ratePlanIDs='"+JSON.stringify(n)+"' data-daysOfWeek='"+JSON.stringify(e.DaysOfWeek)+"' data-startDate='"+new Date(e.StartDate).evStandardIso8601DateExtended()+"' data-endDate='"+new Date(e.EndDate).evStandardIso8601DateExtended()+"'>"+f.resources.bulkUpdateValidationFailureReplayBtn+"</button></div>")),v(a,i),t.length!==n.length&&eviivo.webcore.datetime.utils.doDateRangesOverlap(new Date(e.StartDate).evStandardIso8601DateExtended(),new Date(e.EndDate).evStandardIso8601DateExtended(),eviivo.eagle.dailyRates.getCalendarStartDate().evStandardIso8601DateExtended(),eviivo.eagle.dailyRates.getCalendarEndDate().evStandardIso8601DateExtended())&&(eviivo.eagle.dailyRates.toggleOverlay(),eviivo.eagle.dailyRates.finalSuccessHandler())},deleteBulkUpdateValidationErrors:e,shouldShowBulkUpdateValidationErrors:a,highlightBulkUpdateValidationErrors:l})},4392:function(){function t(){var e;0==$("#selectPropertiesContainer").length&&0<i?(i--,setTimeout(t,200)):($("#selectPropertiesContainer").find(":checkbox").attr("checked",!1),0<$(".pr-r").length?$(".pr-r").each(function(){$("#custom-checkbox-"+$(this).data("bid")).attr("checked",!0)}):0<$("#SelectedBusinessIDs").length&&(e=$("#SelectedBusinessIDs").val().split(","),$.each(e,function(e,t){$("#custom-checkbox-"+t).attr("checked",!0)})),!0===l.UseRateplanLimitWarning&&$("#selectPropertiesContainer").on("change",".room-property-filter li input",a))}function a(e){var i=0;$("#selectPropertiesContainer").find(":checkbox:checked").each(function(e){var t=parseInt($(this)[0].id.replace("custom-checkbox-","")),a=l.businessRatePlansMap.filter(function(e){return e.BusinessID==t});null!=a&&0<a.length&&null!=a[0]&&(i+=a[0].Count)}),$("#multi-property-warning").remove(),i>=l.RateplanLimitValue&&$("#selectPropertiesContainer > div").prepend(n),setTimeout(o,500)}function o(){$(".save-multiProperty").prop("disabled",!1)}var i,n,l;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.dailyRatesMultiProp=window.eviivo.eagle.dailyRatesMultiProp||{},window.eviivo.eagle.dailyRatesMultiProp=(l={},{init:function(e){l=eviivo.util.extend(l,e),i=10,!0===l.UseRateplanLimitWarning&&null!=l.resources.propertyPopupWarning&&""!=l.resources.propertyPopupWarning&&null!=l.RateplanLimitValue&&(n='<div id="multi-property-warning" class="mod-notice mod-notice-small alert"><div>'+l.resources.propertyPopupWarning.replace("{limit}",l.RateplanLimitValue)+"</div></div>"),t()}})},2901:function(){function O(){B===(P=null===P?B:P)&&$(".s-bulk-bar").toggleClass("bulk-bar_active"),P=B,$(".s-bulk-bar").hasClass("bulk-bar_active")||(P=null,u.removeClass("active-toggle"),x.removeClass("active-toggle")),i()}function _(){u.hasClass("btn-disabled")||(u.addClass("active-toggle"),x.removeClass("active-toggle"),B=M.updateBulkVisible,O(),hideShowBulkOptionBasedOnSelection&&(p.addClass("hide"),d.removeClass("hide")),null==g.defaultCultureCode)||"de-de"!==g.defaultCultureCode.toLowerCase()||R!==A.Type.RATES||$("#revert-adjustment").is(":visible")||($(".update-german-hide").hide(),$(".update-german-show").show())}function N(){x.hasClass("btn-disabled")||(x.addClass("active-toggle"),u.removeClass("active-toggle"),B=M.revertBulkVisible,O(),E=!0,$(v).prop("selectedIndex",1),$(".s-adjustment-sentence").hide(),$("#revert-adjustment").show(),$(".revertHide").hide(),$(".s-date-range-options").removeClass("hide"),!1===I&&W(),null!=g.defaultCultureCode&&"de-de"===g.defaultCultureCode.toLowerCase()&&R===A.Type.RATES&&$("#revert-adjustment").is(":visible")&&($("#revert-german-show").show(),$(".revert-german-hide").hide()))}function H(){var e=parseInt($(m).val());$(".display-selection-to-update-by").hide(),$("#adjustRadioSet").show(),1===e||2===e?$(".display-selection-to-update-by#by").show():3===e&&($(".display-selection-to-update-by#with").show(),$("#adjustRadioSet").hide())}function V(){1===parseInt($(v).val())?($(b).addClass("hide"),bulkDateRangeSelected=!1):($(b).removeClass("hide"),!(bulkDateRangeSelected=!0)===I&&W())}function F(e){e.target===this&&$(S).is(":visible")&&h()}function U(){$(w).removeClass("active")}function Y(){var e=de,t="",a=0;$(".day-input[type=checkbox]:checked").each(function(e){0<a&&(t+=", "),t+=$(this).data("day-short"),a++}),e=7!==a?t:de,$(se).html(e),h()}function f(){var t=[];return $(".day-input[type=checkbox]:checked").each(function(e){t.push($(this).val())}),t}function h(){$(w).removeClass("error"),$(T).removeAttr("disabled"),$(n).removeAttr("disabled");var t=0;$(".day-input[type=checkbox]:checked").each(function(e){t++}),0===t&&($(w).addClass("error"),$(T).prop("disabled",!0),$(n).prop("disabled",!0),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.dayWeekValidation}))}function W(){var e=new Date,e=new Date(e.getFullYear(),e.getMonth()+eviivo.eagle.basePageModelState.ForwardBookingWindowMonths,e.getDate()),t=new Date(eviivo.eagle.dailyRates.getCalendarStartDate().getFullYear(),eviivo.eagle.dailyRates.getCalendarStartDate().getMonth(),eviivo.eagle.dailyRates.getCalendarStartDate().getDate()+j);eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initFromToDateSelector,{daySpan:fe,maxSelectionDays:j,maxForwardBooking:e,defaultCultureCode:g.defaultCultureCode,fromCalendarId:$(k),toCalendarId:$(C),toCalendarMaskId:"#to-bulk-update-mask",startDateFromInit:eviivo.eagle.dailyRates.getCalendarStartDate(),endDateFromInit:eviivo.eagle.dailyRates.getCalendarEndDate(),dateFormat:eviivo.eagle.dateFormat.getDateFormat("MEDIUM_DATE_FORMAT"),yearRange:"0:+1",changeMonth:!0,changeYear:!0,showButtonPanel:!0,updtStDtQueryOnChange:!0,updtStDtPersistentElementsOnChange:!0});$(k).datepicker("setDate",eviivo.eagle.dailyRates.getCalendarStartDate()),$(k).datepicker("option","minDate",0),$(k).datepicker("option","maxDate",e),$(C).datepicker("setDate",eviivo.eagle.dailyRates.getCalendarEndDate()),$(C).datepicker("option","maxDate",t),I=!0,"en-us"===g.defaultCultureCode.toLowerCase()&&$(S).children("li:first").before($(S).children("li:last"))}function X(){$(".max-date-range-message").length<=0&&$(".ui-datepicker-buttonpane").append('<div class="max-date-range-message mod-notice mod-notice-small info mb0 ml-auto">'+g.res.maxRangeMsg+"</div>"),$(document).off("click",".ui-datepicker-buttonpane button")}function z(e){var t=!0,a=$(e.target),i=a.val();if(a.removeClass("error"),i=i.replace(g.decimalSymbol,"."),isNaN(i))eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.numberEnteredValidation}),t=!1;else{if(D===A.Type.RATES)0===i&&(eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.zeroValidation}),a.addClass("error"),t=!1);else if((D===A.Type.MIN_STAY||D===A.Type.MAX_STAY)&&0<i.indexOf(g.decimalSymbol))return a.addClass("error"),a.val(a.val().replace(g.decimalSymbol,"")),e.preventDefault(),!1;if(D===A.Type.MAX_STAY){i=eviivo.eagle.ratePlanValidation.maxNightLimit28(a);if(eviivo.eagle.ratePlanValidation.displayErrorMsg(i,eviivo.eagle.translations.resources.newRatePlan.validationMsg.maxStayValidationMsg,$(n)),0<i)return!1}}if(!1===t)return a.val(""),e.preventDefault(),!1}function G(){$(y).removeClass("error");var e=parseInt($("#adjustSelect option:selected").val()),t=parseInt($("#i-want-to-option option:selected").val()),a=parseInt($("#bulk-adjust-type option:selected").val());if(a===A.What.SELECTED_CELLS){if(0===eviivo.eagle.dailyRates.getSelectedRowRatePlanIDs().length&&0===eviivo.eagle.dailyRates.getSelectedIndividualRatePlanIDs().length)return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.selectCellRowValidation}),!1}else if((a===A.What.DATE_RANGE||E)&&0===eviivo.eagle.dailyRates.getSelectedRowRatePlanIDs().length)return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.selectRowValidation}),!1;if(!1===E){if(""===$(y).val())return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.numberEnteredValidation}),$(y).addClass("error"),!1;if(D===A.Type.RATES){if(0===parseInt($(y).val()))return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.zeroValidation}),$(y).addClass("error"),!1;if(99<parseInt($(y).val())&&3===e&&t===A.How.DECREASE)return eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.maxDecreaseMsg}),$(y).addClass("error"),!1}}h();i=eviivo.eagle.dailyRates.getSelectedIndividualRatePlanIDs(),o=eviivo.eagle.dailyRates.getSelectedRowRatePlanIDs();var i=0===i.length&&0<o.length||(0===i.length&&0===o.length||0<i.length&&o.length,!1),o=parseFloat($(y).val().replace(g.decimalSymbol,"."));if(a!==A.What.SELECTED_CELLS||i)if(a===A.What.SELECTED_CELLS&&i||a===A.What.DATE_RANGE&&!i||a===A.What.DATE_RANGE&&i){for(var n=eviivo.eagle.dailyRates.getSelectedRowRatePlanIDs(),l=$(k).datepicker("getDate"),r=$(C).datepicker("getDate"),s=(a===A.What.SELECTED_CELLS&&(l=eviivo.eagle.dailyRates.getCalendarStartDate(),r=eviivo.eagle.dailyRates.getCalendarEndDate()),E&&(t=A.How.REPLACE,o=e=null),0),d=0,c=0,u=0,p=0,v=n.length;p<v;p++)!0!==n[p].Adult&&!0!==n[p].Child||d++,!1===n[p].Adult&&!1===n[p].Child&&s++,!0===n[p].Variant&&c++,!1===n[p].Variant&&u++;if(0<s&&0<d||0<c&&0<u)return void eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.mixedRatePlanSelection});R===A.Type.RATES?eviivo.eagle.dailyRates.updateDateRangePrices(A.Type.RATES,t,e,o,n,f(),l,r):R===A.Type.MIN_STAY?eviivo.eagle.dailyRates.updateDateRangePrices(A.Type.MIN_STAY,A.How.REPLACE,null,o,n,f(),l,r):R===A.Type.MAX_STAY&&eviivo.eagle.dailyRates.updateDateRangePrices(A.Type.MAX_STAY,A.How.REPLACE,null,o,n,f(),l,r)}else a!==A.What.DATE_RANGE||i||eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:g.res.bulkDateRangeHasIndividualCellsSelected});else R===A.Type.RATES?eviivo.eagle.dailyRates.updateSelectedPrices(A.Type.RATES,t,e,o):R===A.Type.MIN_STAY?eviivo.eagle.dailyRates.updateSelectedPrices(A.Type.MIN_STAY,A.How.REPLACE,null,o):R===A.Type.MAX_STAY?eviivo.eagle.dailyRates.updateSelectedPrices(A.Type.MAX_STAY,A.How.REPLACE,null,o):A.Type.CLOSED;eviivo.eagle.dailyRates.changeView()}function q(){$("#showMlosRadioSet").append('<button id="view-selection-spinner" class="btn btn-small btn-disabled" type="button" style="overflow:hidden;">'+g.res.spinnerPleaseWait+"</button>");var e=$("#view-selection-spinner"),t=eviivo.webcore.loadingSpinner.create({container:e,theme:eviivo.webcore.loadingSpinner.themes.none,size:eviivo.webcore.loadingSpinner.sizes.small,colour:eviivo.webcore.loadingSpinner.colours.light});e.find(".spinner").css("margin-top","5px"),null!=t&&t.start(),s.hide(),setTimeout(function(){!1===ve&&eviivo.eagle.dailyRates.cancelExpandAjaxCalls(),ve=!1,D=$("#display-select option:selected").attr("id"),$(".display-selection-to-update").html($("#display-select option:selected").data("sentence-wording")),$(".slct > span:not(.toggle)").hide(),$("#Rates-table .checkbox-input").show(),$(".c-r").hide(),o("#allButton",!1),$(".daily-rates-table").removeClass("no-check-in-out"),eviivo.eagle.dailyRates.changeView(),D===A.Type.ALL?($(".slct > span:not(.cl-arr-dep)").show(),$("."+A.RowClass.RATES).show(),$("."+A.RowClass.RATES).find(A.TypeClass.MIN_STAY).hide(),$("."+A.RowClass.RATES).find(A.TypeClass.MAX_STAY).hide(),$("."+A.RowClass.MIN_STAY).show(),$("."+A.RowClass.MAX_STAY).show(),oe(A.Type.ALL)):D===A.Type.RATES?($(A.TypeClass.RATES).show(),$("."+A.RowClass.RATES).show()):D===A.Type.MIN_STAY?($(A.TypeClass.MIN_STAY).show(),$("."+A.RowClass.RATES).show()):D===A.Type.MAX_STAY?($(A.TypeClass.MAX_STAY).show(),$("."+A.RowClass.RATES).show()):D===A.Type.CLOSED&&($(A.TypeClass.CLOSED).show(),$("."+A.RowClass.RATES).show(),$("."+A.RowClass.NO_CHECK_IN).show(),$("."+A.RowClass.NO_CHECK_OUT).show(),$(".daily-rates-table").addClass("no-check-in-out"),oe(A.TypeClass.CLOSED)),A.DisableBulkUpdateOptions.includes(D)?($(".bulk-option-container").addClass("hide"),$(".s-bulk-bar").hasClass("bulk-bar_active")&&$(".s-bulk-bar").toggleClass("bulk-bar_active"),u.addClass("btn-disabled").removeClass("active-toggle"),x.addClass("btn-disabled").removeClass("active-toggle"),a(u,g.res.bulkOptionsDisabledButtonTooltip),a(x,g.res.bulkOptionsDisabledButtonTooltip)):($(".bulk-option-container").removeClass("hide"),u.removeClass("btn-disabled"),x.removeClass("btn-disabled"),a(u,""),a(x,"")),A.HideBulkUpdateOptions.includes(D)?$(".bulk-option-container").addClass("hide"):$(".bulk-option-container").removeClass("hide"),J(),A.DisableMassSelection.includes(D)&&($("#Rates-table .checkbox-input").hide(),o("#allButton",!0)),A.ShowAdultChildOccupancyRowExpands.includes(D)?($(".c-c-r").hide(),$(".c-r").find(".toggle").children().hide(),$(".base-occupancy-title").hide()):(eviivo.eagle.dailyRates.reExpendOtherRates(),$(".c-r").find(".toggle").children().not(".ajax-loading").show(),$(".base-occupancy-title").show()),Modernizr.localstorage&&(Q()?localStorage.setItem("rates-synopsis-display-show",D):localStorage.setItem("daily-rates-display-show",D)),i(),null!=t&&t.stop(),e.remove(),s.show()},1)}function a(e,t){0!==e.length&&(""===t?(e.removeAttr("data-tooltip-pos"),e.removeAttr("data-tooltip-title"),e.removeAttr("data-tooltip"),e.removeAttr("title")):(e.attr("data-tooltip-pos","top"),e.attr("data-tooltip-title",t),e.attr("data-tooltip","title"),e.prop("title",t)))}function J(){A.DisableTooltip.includes(D)?void 0===$(".slct").data("tooltip-rate")?$(".slct").removeAttr("title"):$(".slct").removeAttr("data-tooltip"):void 0===$(".slct").data("tooltip-rate")?e("title","data-disabled-title"):($(".slct").attr("data-tooltip","title"),D===A.Type.RATES?e("data-tooltip-title","tooltip-rate"):D===A.Type.MIN_STAY?e("data-tooltip-title","tooltip-min"):D===A.Type.MAX_STAY&&e("data-tooltip-title","tooltip-max"))}function e(e,t){$(".slct").each(function(){$(this).attr(e,$(this).data(t))})}function i(e){$(".s-adjustment-sentence").hide(),$(".revertHide").show(),E=!1,$(v).prop("selectedIndex",0),$(m).prop("selectedIndex",0),$(".s-date-range-options").addClass("hide"),R=D,null!=e&&R===A.Type.ALL&&(R=$("#update-display-selection option:selected").attr("id"),$(".display-selection-to-update").html($("#update-display-selection option:selected").data("sentence-wording"))),null==e&&R===A.Type.ALL?($(".display-selection-to-update").hide(),$(".display-selection-to-update-selection").show(),$(".update-display-selection").length<=0&&($(".display-selection-to-update-selection").html($("#display-select").clone().prop("id","update-display-selection").addClass("update-display-selection cp-custom-select cp-custom-select_minimal")),$(".update-display-selection option:last").remove(),$(".update-display-selection option:last").remove())):($(".display-selection-to-update").show(),$(".display-selection-to-update-selection").hide()),R!==A.Type.RATES&&$(b).is(":visible")&&$(b).addClass("hide"),R===A.Type.RATES?($("#rate-adjustment").show(),$("#adjustRadioSet").show()):R!==A.Type.MIN_STAY&&R!==A.Type.MAX_STAY||($("#mlos-adjustment").show(),$("#adjustRadioSet").hide()),B==M.revertBulkVisible&&($(v).prop("selectedIndex",1),E=!0,$(".s-adjustment-sentence").hide(),$("#revert-adjustment").show(),$(".revertHide").hide(),$(".s-date-range-options").removeClass("hide")),bulkDateRangeSelected&&$(v).prop("selectedIndex",1).trigger("change")}function K(){if(Modernizr.localstorage)return Q()?localStorage.getItem("rates-synopsis-display-show"):localStorage.getItem("daily-rates-display-show")}function Q(){return 0<$(".synopsis-header").length}function Z(e){o(c,e)}function ee(e){o(r,e)}function o(e,t){$(e).prop("disabled",t),t?$(e).attr("disabled","disabled"):$(e).removeAttr("disabled")}function te(e){disabledBasedOnSelection&&(A.DisableBulkUpdateOptions.includes(D)||L?(x.attr("disabled","disabled"),u.attr("disabled","disabled")):(p.find(":button").each(function(){o($(this),e)}),d.find(":input:not(#bulk-adjust-type)").each(function(){o($(this),e)}),d.find(":button").each(function(){o($(this),e)})))}function ae(){$(".s-bulk-bar").hasClass("bulk-bar_active")||_()}function t(){Z(!0),ee(!0),$(y).val(""),le.text(0)}function ie(){t(),te(!0)}function oe(e){e===A.Type.ALL?ne("minStayRow","maxStayRow"):e===A.TypeClass.CLOSED&&ne("noCheckInRow","noCheckOutRow")}function ne(n,l){var r=["rate","mlos","max-stay","arrival","departure","updated","data-tooltip-title","data-tooltip-rate","data-tooltip-min","data-tooltip-max","data-tooltip","data-tooltip-pos","title"];$(".rateRow td").each(function(){var a=$(this),e=a.data("date"),t=a.parent().data("rpid"),i=$("tr."+n+"[data-rpid='"+t+"'] td[data-date='"+e+"']"),o=$("tr."+l+"[data-rpid='"+t+"'] td[data-date='"+e+"']");0<i.length&&$.each(r,function(e,t){i.data(t,a.data(t)),i.attr(t,a.data(t)),o.data(t,a.data(t)),o.attr(t,a.data(t))})})}var g,n,l,y,r,s,d,le,c,u,p,v,b,m,re,w,S,se,de,T,k,C,D,R,A,ce,x,ue,I,pe,E,B,P,M,ve,L,fe,j;window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.dailyRatesToolbar=window.eviivo.eagle.dailyRatesToolbar||{},window.eviivo.eagle.dailyRatesToolbar=(disabledBasedOnSelection=L=!(ve=!(P=B=null)),hideShowBulkOptionBasedOnSelection=!(M={revertBulkVisible:"revert",updateBulkVisible:"update"}),bulkDateRangeSelected=E=pe=I=!1,fe=30,j=90,{init:function(e){A=e.adjustment,g=$.extend(g,e),setTimeout(function(){null!=Globalize&&null!=Globalize.cldr&&(g.decimalSymbol=Globalize._numberSymbol("decimal",Globalize.cldr))},750),s=$("#display-select"),u=$("#viewBulkActions"),x=$("#viewBulkRevertActions"),p=$("#viewBulkActionsContainer"),d=$("#updatePanel"),l=$("#btn-cancel"),r=$("#btn-save"),c=$("#btn-revert"),le=$(".info-value"),v="#bulk-adjust-type",b=".s-date-range-options",m="#i-want-to-option",y="#amountUpdate",re=".day-input",w="#day-of-week-output",S=".week-day-list",se=".s-md-dd-selected-value",de=$("#hiddenEveryDayText").val(),T="#ok-week-selection",k="#from-bulk-update",C="#to-bulk-update",ce=".update-display-selection",ue=".bulk-date-picker",!(n="#applyAmountButton")===pe&&(s.on("change",q),u.on("click",_),x.on("click",N),l.on("click",eviivo.eagle.dailyRates.resetAllValues),r.on("click",eviivo.eagle.dailyRates.saveDetails),c.on("click",eviivo.eagle.dailyRates.onClickRevert),$(d).on("change",v,V),$(d).on("change",m,H),$(d).on("change",re,Y),$(d).on("click",w,F),$(d).on("click",T,U),$(d).on("input",y,z),$(d).on("change",ce,i),$(d).on("click",ue,X),$(d).on("click",n,G),eviivo.webcore.decimals.restrictFieldsForDecimals($(y),{decimalPlaces:2}),pe=!0),t(),Modernizr.localstorage&&((e=K())!==A.Type.RATES?($("#display-select option[id='"+e+"']").attr("selected","selected"),s.trigger("change")):(D=A.Type.RATES,R=A.Type.RATES)),null!=g.defaultCultureCode&&(e=null,"de-de"===g.defaultCultureCode.toLowerCase())&&R===A.Type.RATES&&(e="de",e=eviivo.util.getSortedElementsByAttribute(".md-sentence-form .bulkUpdateElement","data-"+e+"-order"),$(".md-sentence-form").html(e)),eviivo.eagle.multiProperty.applyButtonCallBackFunction({callBackFunction:eviivo.eagle.dailyRates.getSelectedRoomTypeRates}),eviivo.pms.accessGroup.headerSearch.extendOptions({callBackFunction:eviivo.eagle.dailyRates.getSelectedRoomTypeRates})},toggleRevertBtn:Z,toggleSaveBtn:ee,toggleCancelBtn:function(e){o(l,e)},resetButtons:t,hideToolBar:ie,toggleUpdatePanel:te,enableDisableDateSelectionBulkUpdateSelect:function(e){disabledBasedOnSelection?0<e&&D!==A.Type.CLOSED&&D!==A.Type.ALL||L?($(v).removeAttr("disabled"),x.removeAttr("disabled")):($(v).attr("disabled","disabled"),$(v).prop("selectedIndex",0),$(b).addClass("hide"),hideShowBulkOptionBasedOnSelection&&ie(),$(".s-bulk-bar").hasClass("bulk-bar_active")&&$(".s-bulk-bar").removeClass("bulk-bar_active"),x.attr("disabled","disabled")):1<e&&ae()},getDisplaySelection:function(){var e=D;return e=null==D?K():e},changeBulkDateRangeValues:function(e,t){var a;I&&(a=new Date(e.getFullYear(),e.getMonth(),e.getDate()+j),$(k).datepicker("setDate",e),$(C).datepicker("setDate",t),$(C).datepicker("option","maxDate",a))},determineTooltipSetup:J,initSynopsis:function(e){$("#bulk-adjust-type").remove(),$(".s-hide-synopsis").remove(),$(".rate-plans-page").show(),$("#applyAmountButton").html(e.updateButtonTxt)},changeBulkUpdateOptions:i,setAdjustmentDisplaySelection:function(e){D=e},setBulkLimitHit:function(e){L=e},showBulkUpdatePanel:ae})},8211:function(){window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},eviivo.pms.diary=eviivo.pms.diary||{},eviivo.pms.diary.calendarNavigator=eviivo.pms.diary.calendarNavigator||{},window.eviivo.pms.diary.calendarNavigator=function(){var a,t,i,o=this,n={},l={backButton:"#diary-back-button",backBackButton:"#diary-back-back-button",calendarButton:"#diary-datepicker",goTodayButton:"#diary-go-today-button",forwardButton:"#diary-forward-button",forwardForwardButton:"#diary-forward-forward-button",todayButton:"#ui-datepicker-div .ui-datepicker-current",revertToTodayButton:"#diary-go-today-button",datePickerMask:"#diary-datepicker-mask"},r={body:null,backButton:null,backBackButton:null,calendarButton:null,goTodayButton:null,forwardButton:null,forwardForwardButton:null,todayButton:null,revertToTodayButton:null,datePickerMask:null},s=null,d="eviivo.pms.diary.calendarNavigator";function c(){return function(e){i.call(o,e),o._selectDate(e)}}return{init:function(e){if("function"!=typeof jQuery)throw d+": module depends on jQuery";a=(t=jQuery).extend(n,e),s={click:eviivo.util.namespacedEvent("click",d),focus:eviivo.util.namespacedEvent("focus",d)},r.backBackButton=t(l.backBackButton),r.backButton=t(l.backButton),r.calendarButton=t(l.calendarButton),r.goTodayButton=t(l.goTodayButton),r.forwardButton=t(l.forwardButton),r.forwardForwardButton=t(l.forwardForwardButton),r.todayButton=t(l.todayButton),r.datePickerMask=t(l.datePickerMask),r.revertToTodayButton=t(l.revertToTodayButton),null!=a.actions&&(r.backBackButton.on(s.click,a.actions.backBack),r.backButton.on(s.click,a.actions.back),$(document).off("click",".ui-datepicker-buttonpane button[data-handler='today']").on("click",".ui-datepicker-buttonpane button[data-handler='today']",a.actions.goToday),r.revertToTodayButton.on(s.click,a.actions.goToday),r.forwardButton.on(s.click,a.actions.forward),r.forwardForwardButton.on(s.click,a.actions.forwardForward),r.datePickerMask.on(s.click,function(){r.calendarButton.datepicker("show")})),e=(new Date).evStandardFirstDayCalendarOffset(eviivo.eagle.basePageModelState.userCultureCode),r.calendarButton=eviivo.webcore.calendar.init(eviivo.webcore.calendar.CALENDAR_TYPE.initCalendar,{defaultCultureCode:eviivo.eagle.basePageModelState.userCultureCode,calendar:r.calendarButton,yearRange:"-4:+5",dateFormat:eviivo.eagle.dateFormat.getDateFormat("SHORT_YEAR"),changeMonth:!0,changeYear:!0,showButtonPanel:!0,altFormat:eviivo.eagle.dateFormat.getDateFormat("NO_YEAR"),altField:l.datePickerMask,firstDay:e,updtStDtQueryOnChange:!0,updtStDtPersistentElementsOnChange:!0,onSelect:function(e,t){var t=new Date(t.selectedYear,t.selectedMonth,parseInt(t.selectedDay),0,0,0);t=t,"function"==typeof a.actions.dateSelection&&a.actions.dateSelection(t)}}),i=t.datepicker._gotoToday,eviivo.webcore.functions.compare(c,i)&&(t.datepicker._gotoToday=c)},setDate:function(e){null!=r.calendarButton&&r.calendarButton.datepicker("setDate",e)}}}()},9621:function(){function t(e){e.preventDefault();var t,e=$(this),a=e.attr("href"),e=e.parent().attr("data-tooltip-title"),e="[".concat(e.split(",").map(function(e){return'"'.concat(e.trim(),'"')}).join(","),"]");e=e,t=a,eviivo.webcore.ajaxHelper.executeAjax({actionId:"post-listingtable-filter-".concat(i),url:"".concat(eviivoSuiteApp,"/api/UserPreferenceListingTableFilterActions/post"),data:{ColumnCode:i,ColumnFilter:e},method:eviivo.webcore.ajaxHelper.methods.POST,contentType:eviivo.webcore.ajaxHelper.contentTypes.APPLICATION_JSON_UTF8,dataType:eviivo.webcore.ajaxHelper.dataTypes.JSON,callback:function(e){window.open(t)},failCallback:function(e){window.open(t)}})}var a,i;window.eviivo=window.eviivo||{},window.eviivo.pms=window.eviivo.pms||{},window.eviivo.pms.pricingRules=window.eviivo.pms.pricingRules||{},window.eviivo.pms.pricingRules.dailyRates=(a={open:".s-open-rule"},i="RNA",options={},{init:function(e){options=eviivo.util.extend(options,e),$(a.open).on("click",t)}})},1276:function(){window.eviivo=window.eviivo||{},window.eviivo.eagle=window.eviivo.eagle||{},window.eviivo.eagle.ratePlanValidation=window.eviivo.eagle.ratePlanValidation||{},window.eviivo.eagle.ratePlanValidation={maxNightLimit28:function(e){var t=e.val();return e.removeClass("error"),""!==t&&(isNaN(parseInt(t))||28<t||t<0)?(e.addClass("error"),1):0},displayErrorMsg:function(e,t,a){"string"==typeof a&&(a=$(a)),0<e?(null!=a&&a.attr("disabled","disabled"),eviivo.webcore.notifier.show({type:eviivo.webcore.notifier.types.error,message:t,autoHideDelay:16e3})):null!=a&&a.removeAttr("disabled")},maxStay:function(e,t){var t=isNaN(t)?t.val():t,a=isNaN(e)?e.val():e;return 0!==parseInt(a)&&parseInt(a)<parseInt(t)?(e.val(t),e.prop("value",t).trigger("input"),e.trigger("keepress"),1):0},minStay:function(e,t){var a=isNaN(e)?e.val():e,t=isNaN(t)?t.val():t;return 0!==parseInt(t)&&parseInt(a)>parseInt(t)?(e.val(t),e.prop("value",t).trigger("input"),e.trigger("keepress"),1):0}}},1156:function(){function s(e,t){for(var a=window,i=(e||"").split(".");a&&i.length;)a=a[i.shift()];return"function"==typeof a?a:(t.push(e),Function.constructor.apply(null,t))}function d(e){return"GET"===e||"POST"===e}function i(l,e){var i,o,n,r,t;(t=l.getAttribute("data-ajax-confirm"))&&!window.confirm(t)||(i=c(l.getAttribute("data-ajax-loading")),n=parseInt(l.getAttribute("data-ajax-loading-duration"),10)||0,c.extend(e,{type:l.getAttribute("data-ajax-method")||void 0,url:l.getAttribute("data-ajax-url")||void 0,cache:"true"===(l.getAttribute("data-ajax-cache")||"").toLowerCase(),beforeSend:function(e){var t,a;return t=e,d(a=o)||t.setRequestHeader("X-HTTP-Method-Override",a),!1!==(t=s(l.getAttribute("data-ajax-begin"),["xhr"]).apply(l,arguments))&&i.show(n),t},complete:function(){i.hide(n),s(l.getAttribute("data-ajax-complete"),["xhr","status"]).apply(l,arguments)},success:function(e,t,a){var i,o,n;i=l,o=e,-1===(a.getResponseHeader("Content-Type")||"text/html").indexOf("application/x-javascript")&&(n=(i.getAttribute("data-ajax-mode")||"").toUpperCase(),c(i.getAttribute("data-ajax-update")).each(function(e,t){switch(n){case"BEFORE":c(t).prepend(o);break;case"AFTER":c(t).append(o);break;case"REPLACE-WITH":c(t).replaceWith(o);break;default:c(t).html(o)}})),s(l.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(l,arguments)},error:function(){s(l.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(l,arguments)}}),e.data.push({name:"X-Requested-With",value:"XMLHttpRequest"}),d(o=e.type.toUpperCase())||(e.type="POST",e.data.push({name:"X-HTTP-Method-Override",value:o})),(t=c(l)).is("form")&&"multipart/form-data"==t.attr("enctype")&&(r=new FormData,c.each(e.data,function(e,t){r.append(t.name,t.value)}),c("input[type=file]",t).each(function(){var a=this;c.each(a.files,function(e,t){r.append(a.name,t)})}),c.extend(e,{processData:!1,contentType:!1,data:r})),c.ajax(e))}var c,o,n;c=jQuery,o="unobtrusiveAjaxClick",n="unobtrusiveAjaxClickTarget",c(document).on("click","a[data-ajax=true]",function(e){e.preventDefault(),i(this,{url:this.href,type:"GET",data:[]})}),c(document).on("click","form[data-ajax=true] input[type=image]",function(e){var t=e.target.name,a=c(e.target),i=c(a.parents("form")[0]),a=a.offset();i.data(o,[{name:t+".x",value:Math.round(e.pageX-a.left)},{name:t+".y",value:Math.round(e.pageY-a.top)}]),setTimeout(function(){i.removeData(o)},0)}),c(document).on("click","form[data-ajax=true] :submit",function(e){var t=e.currentTarget.name,a=c(e.target),i=c(a.parents("form")[0]);i.data(o,t?[{name:t,value:e.currentTarget.value}]:[]),i.data(n,a),setTimeout(function(){i.removeData(o),i.removeData(n)},0)}),c(document).on("submit","form[data-ajax=true]",function(e){var t=c(this).data(o)||[],a=c(this).data(n),a=a&&(a.hasClass("cancel")||void 0!==a.attr("formnovalidate"));e.preventDefault(),!a&&(e=c(e=this).data("unobtrusiveValidation"))&&e.validate&&!e.validate()||i(this,{url:this.action,type:this.method||"GET",data:t.concat(c(this).serializeArray())})})}},i={};function o(e){var t=i[e];return void 0!==t||(t=i[e]={exports:{}},a[e](t,t.exports,o)),t.exports}o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,{a:t}),t},o.d=function(e,t){for(var a in t)o.o(t,a)&&!o.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){"use strict";o(1156),o(2901),o(2358),o(1759),o(4392),o(1276),o(8211),o(5785),o(9621)}();
//# sourceMappingURL=dailyRates.min.js.map